/*
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright 2011, Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},i=0,c=0,l=[];function g(g,d,h,e){var c={data:e||(e===0||e===false)?e:d?d.data:{},_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};g&&a.extend(c,g,{nodes:[],parent:d});if(h){c.tmpl=h;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++i;(l.length?f:b)[i]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a(i[h])[d](k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,m,k){if(d[0]&&a.isArray(d[0])){var g=a.makeArray(arguments),h=d[0],j=h.length,i=0,f;while(i<j&&!(f=a.data(h[i++],"tmplItem")));if(f&&c)g[2]=function(b){a.tmpl.afterManip(this,b,k)};r.apply(this,g)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var i,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(j(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);i=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(j(c,null,i)):i},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function j(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:j(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=k(c).concat(b);if(d)b=b.concat(k(d))});return b?b:k(c)}function k(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace( /\n/g, "\\n").replace( /\r/g, "\\r").replace( /\t/g, "\\t").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,k,g,b,c,d){var j=a.tmpl.tag[k],i,e,f;if(!j)throw"Unknown template tag: "+k;i=j._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=h(b);d=d?","+h(d)+")":c?")":"";e=c?b.indexOf(".")>-1?b+h(c):"("+b+").call($item"+d:b;f=c?e:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else f=e=i.$1||"null";g=h(g);return"');"+j[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(f).split("$1").join(e).split("$2").join(g||i.$2||"")+"__.push('"})+"');}return __;")}function n(c,b){c._wrap=j(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function h(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,h;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(h=j.length-1;h>=0;h--)m(j[h]);m(k)}function m(j){var p,h=j,k,e,m;if(m=j.getAttribute(d)){while(h.parentNode&&(h=h.parentNode).nodeType===1&&!(p=h.getAttribute(d)));if(p!==m){h=h.parentNode?h.nodeType===11?0:h.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[h]||f[h]);e.key=++i;b[i]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;h=a.data(j.parentNode,"tmplItem");h=h?h.key:0}if(e){k=e;while(k&&k.key!=h){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);
/*
 * jQuery Validation Plugin v1.13.1
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 JÃ¶rn Zaefferer
 * Released under the MIT license
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s,r;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),r=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),void 0!==r?r:!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s,r,n,a,o,u,l=this[0];if(e)switch(s=t.data(l.form,"validator").settings,r=s.rules,n=t.validator.staticRules(l),e){case"add":t.extend(n,t.validator.normalizeRule(i)),delete n.messages,r[l.name]=n,i.messages&&(s.messages[l.name]=t.extend(s.messages[l.name],i.messages));break;case"remove":return i?(u={},t.each(i.split(/\s/),function(e,i){u[i]=n[i],delete n[i],"required"===i&&t(l).removeAttr("aria-required")}),u):(delete r[l.name],n)}return a=t.validator.normalizeRules(t.extend({},t.validator.classRules(l),t.validator.attributeRules(l),t.validator.dataRules(l),t.validator.staticRules(l)),l),a.required&&(o=a.required,delete a.required,a=t.extend({required:o},a),t(l).attr("aria-required","true")),a.remote&&(o=a.remote,delete a.remote,a=t.extend(a,{remote:o})),a}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,""),r=i.settings;r[s]&&!this.is(r.ignore)&&r[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){s[i]=e})}),i=this.settings.rules,t.each(i,function(e,s){i[e]=t.validator.normalizeRule(s)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),s=this.validationTargetFor(i),r=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=t(s),r=this.check(s)!==!1,r?delete this.invalid[s.name]:this.invalid[s.name]=!0),t(e).attr("aria-invalid",!r),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),r},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,s=t(e),r=e.type;return"radio"===r||"checkbox"===r?t("input[name='"+e.name+"']:checked").val():"number"===r&&"undefined"!=typeof e.validity?e.validity.badInput?!1:s.val():(i=s.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s,r,n=t(e).rules(),a=t.map(n,function(t,e){return e}).length,o=!1,u=this.elementValue(e);for(s in n){r={method:s,parameters:n[s]};try{if(i=t.validator.methods[s].call(this,u,e,r.parameters),"dependency-mismatch"===i&&1===a){o=!0;continue}if(o=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,r),!1}catch(l){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+r.method+"' method.",l),l}}if(!o)return this.objectLength(n)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),r=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):r.test(s)&&(s=t.validator.format(s.replace(r,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e,method:i.method}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s,r,n,a=this.errorsFor(e),o=this.idOrName(e),u=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(a=t("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(i||""),s=a,this.settings.wrapper&&(s=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e),a.is("label")?a.attr("for",o):0===a.parents("label[for='"+o+"']").length&&(n=a.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),u?u.match(new RegExp("\\b"+n+"\\b"))||(u+=" "+n):u=n,t(e).attr("aria-describedby",u),r=this.groups[e.name],r&&t.each(this.groups,function(e,i){i===r&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var i=this.idOrName(e),s=t(e).attr("aria-describedby"),r="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(r=r+", #"+s.replace(/\s+/g,", #")),this.errors().filter(r)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i,s,r={},n=t(e),a=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(s=e.getAttribute(i),""===s&&(s=!0),s=!!s):s=n.attr(i),/min|max/.test(i)&&(null===a||/number|range|text/.test(a))&&(s=Number(s)),s||0===s?r[i]=s:a===i&&"range"!==a&&(r[i]=!0);return r.maxlength&&/-1|2147483647|524288/.test(r.maxlength)&&delete r.maxlength,r},dataRules:function(e){var i,s,r={},n=t(e);for(i in t.validator.methods)s=n.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==s&&(r[i]=s);return r},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,r){if(r===!1)return void delete e[s];if(r.param||r.depends){var n=!0;switch(typeof r.depends){case"string":n=!!t(r.depends,i.form).length;break;case"function":n=r.depends.call(i,i)}n?e[s]=void 0!==r.param?r.param:!0:delete e[s]}}),t.each(e,function(s,r){e[s]=t.isFunction(r)?r(i):r}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var r=t(i).val();return r&&r.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,s,r=0,n=0,a=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)s=t.charAt(i),n=parseInt(s,10),a&&(n*=2)>9&&(n-=9),r+=n,a=!a;return r%10===0},minlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=s},maxlength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||s>=r},rangelength:function(e,i,s){var r=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||r>=s[0]&&r<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,s){var r=t(s);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===r.val()},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var r,n,a=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,s="string"==typeof s&&{url:s}||s,a.old===e?a.valid:(a.old=e,r=this,this.startRequest(i),n={},n[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:n,context:r.currentForm,success:function(s){var n,o,u,l=s===!0||"true"===s;r.settings.messages[i.name].remote=a.originalMessage,l?(u=r.formSubmitted,r.prepareElement(i),r.formSubmitted=u,r.successList.push(i),delete r.invalid[i.name],r.showErrors()):(n={},o=s||r.defaultMessage(i,"remote"),n[i.name]=a.message=t.isFunction(o)?o(e):o,r.invalid[i.name]=!0,r.showErrors(n)),a.valid=l,r.stopRequest(i,l)}},s)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,s){var r=t.port;"abort"===t.mode&&(i[r]&&i[r].abort(),i[r]=s)}):(e=t.ajax,t.ajax=function(s){var r=("mode"in s?s:t.ajaxSettings).mode,n=("port"in s?s:t.ajaxSettings).port;return"abort"===r?(i[n]&&i[n].abort(),i[n]=e.apply(this,arguments),i[n]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var r=t(i.target);return r.is(e)?s.apply(r,arguments):void 0})}})});
/*
 * jQuery UI Widget 1.10.4+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(o){}s(e)},t.widget=function(e,i,n){var s,o,a,r,u={},d=e.split(".")[0];e=e.split(".")[1],s=d+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[d]=t[d]||{},o=t[d][e],a=t[d][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(n,function(e,n){return t.isFunction(n)?void(u[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(u[e]=n)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix||e:e},u,{constructor:a,namespace:d,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a)},t.widget.extend=function(i){for(var s,o,a=n.call(arguments,1),r=0,u=a.length;u>r;r++)for(s in a[r])o=a[r][s],a[r].hasOwnProperty(s)&&o!==e&&(i[s]=t.isPlainObject(o)?t.isPlainObject(i[s])?t.widget.extend({},i[s],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,u=n.call(arguments,1),d=this;return a=!r&&u.length?t.widget.extend.apply(null,[a].concat(u)):a,this.each(r?function(){var n,s=t.data(this,o);return s?t.isFunction(s[a])&&"_"!==a.charAt(0)?(n=s[a].apply(s,u),n!==s&&n!==e?(d=n&&n.jquery?d.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}:function(){var e=t.data(this,o);e?e.option(a||{})._init():t.data(this,o,new s(a,this))}),d}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,o,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},s=i.split("."),i=s.shift(),s.length){for(o=r[i]=t.widget.extend({},this.options[i]),a=0;a<s.length-1;a++)o[s[a]]=o[s[a]]||{},o=o[s[a]];if(i=s.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=n}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,a){function r(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var u=n.match(/^(\w+)\s*(.*)$/),d=u[1]+o.eventNamespace,h=u[2];h?s.delegate(h,d,r):i.bind(d,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,a=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),a=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&t.effects&&t.effects.effect[r]?n[e](s):r!==e&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})});
/*
 * jQuery Iframe Transport Plugin 1.8.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(r){if(r.async){var n,a,o,i=r.initialIframeSrc||"javascript:false;";return{send:function(p,m){n=e('<form style="display:none;"></form>'),n.attr("accept-charset",r.formAcceptCharset),o=/\?/.test(r.url)?"&":"?","DELETE"===r.type?(r.url=r.url+o+"_method=DELETE",r.type="POST"):"PUT"===r.type?(r.url=r.url+o+"_method=PUT",r.type="POST"):"PATCH"===r.type&&(r.url=r.url+o+"_method=PATCH",r.type="POST"),t+=1,a=e('<iframe src="'+i+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(r.paramName)?r.paramName:[r.paramName];a.unbind("load").bind("load",function(){var t;try{if(t=a.contents(),!t.length||!t[0].firstChild)throw new Error}catch(r){t=void 0}m(200,"success",{iframe:t}),e('<iframe src="'+i+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",a.prop("name")).prop("action",r.url).prop("method",r.type),r.formData&&e.each(r.formData,function(t,r){e('<input type="hidden"/>').prop("name",r.name).val(r.value).appendTo(n)}),r.fileInput&&r.fileInput.length&&"POST"===r.type&&(t=r.fileInput.clone(),r.fileInput.after(function(e){return t[e]}),r.paramName&&r.fileInput.each(function(t){e(this).prop("name",o[t]||r.paramName)}),n.append(r.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),r.fileInput.removeAttr("form")),n.submit(),t&&t.length&&r.fileInput.each(function(r,n){var a=e(t[r]);e(n).prop("name",a.prop("name")).attr("form",a.attr("form")),a.replaceWith(n)})}),n.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src",i),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var r=t&&t[0];return r&&e.isXMLDoc(r)?r:e.parseXML(r.XMLDocument&&r.XMLDocument.xml||e(r.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})});
/*
 * jQuery File Upload Plugin 5.40.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){return t.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var r=e-this.timestamp;return(!this.bitrate||!i||r>i)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var r,n=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&n-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=n,r=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=r-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=r,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(n,r,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,i._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,r=this,n=t.files[0],o=t.multipart||!e.support.xhrFileUpload,s="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",n)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:s,value:t.blob}):e.each(t.files,function(r,n){i.push({name:"array"===e.type(t.paramName)&&t.paramName[r]||s,value:n})})):(r._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(s,t.blob,n.name):e.each(t.files,function(n,o){(r._isInstanceOf("File",o)||r._isInstanceOf("Blob",o))&&i.append("array"===e.type(t.paramName)&&t.paramName[n]||s,o,o.uploadName||o.name)})),t.data=i):(t.contentType=n.type||"application/octet-stream",t.data=t.blob||n),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",n=(t.prop("files")||[1]).length;n;)r.push(i),n-=1}),r.length||(r=[i.prop("name")||"files[]"])),r},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,r){var n=e.Deferred(),o=n.promise();return i=i||this.options.context||o,t===!0?n.resolveWith(i,r):t===!1&&n.rejectWith(i,r),o.abort=n.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,i){var r=this,n=function(t){return e.Deferred().resolveWith(r,t).promise()};i.process=function(t,o){return(t||o)&&(i._processQueue=this._processQueue=(this._processQueue||n([this])).pipe(function(){return i.errorThrown?e.Deferred().rejectWith(r,[i]).promise():n(arguments)}).pipe(t,o)),this._processQueue||n([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=r._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))},i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===r._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),r=i&&i.length>1&&parseInt(i[1],10);return r&&r+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var r,n,o=this,s=t.files[0],a=s.size,l=t.uploadedBytes,p=t.maxChunkSize||a,u=this._blobSlice,d=e.Deferred(),h=d.promise();return this._isXHRUpload(t)&&u&&(l||a>p)&&!t.data?i?!0:l>=a?(s.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",s.error])):(n=function(){var i=e.extend({},t),h=i._progress.loaded;i.blob=u.call(s,l,l+p,s.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,o._initXHRData(i),o._initProgressListener(i),r=(o._trigger("chunksend",null,i)!==!1&&e.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(r,s,p){l=o._getUploadedBytes(p)||l+i.chunkSize,h+i.chunkSize-i._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=r,i.textStatus=s,i.jqXHR=p,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),a>l?n():d.resolveWith(i.context,[r,s,p])}).fail(function(e,t,r){i.jqXHR=e,i.textStatus=t,i.errorThrown=r,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),d.rejectWith(i.context,[e,t,r])})},this._enhancePromise(h),h.abort=function(){return r.abort()},n(),h):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,r,n){var o=n._progress.total,s=n._response;n._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),n),s.result=n.result=t,s.textStatus=n.textStatus=i,s.jqXHR=n.jqXHR=r,this._trigger("done",null,n)},_onFail:function(e,t,i,r){var n=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),n.jqXHR=r.jqXHR=e,n.textStatus=r.textStatus=t,n.errorThrown=r.errorThrown=i,this._trigger("fail",null,r)},_onAlways:function(e,t,i,r){this._trigger("always",null,r)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var r,n,o,s,a=this,l=a._getAJAXSettings(i),p=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,r=r||((n||a._trigger("send",e.Event("send",{delegatedEvent:t}),l)===!1)&&a._getXHRPromise(!1,l.context,n)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var r=a._slots.shift();r;){if("pending"===a._getDeferredState(r)){r.resolve();break}r=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),s=o.pipe(p)):(this._sequence=this._sequence.pipe(p,p),s=this._sequence),s.abort=function(){return n=[void 0,"abort","abort"],r?r.abort():(o&&o.rejectWith(l.context,n),p())},this._enhancePromise(s)):p()},_onAdd:function(t,i){var r,n,o,s,a=this,l=!0,p=e.extend({},this.options,i),u=i.files,d=u.length,h=p.limitMultiFileUploads,c=p.limitMultiFileUploadSize,f=p.limitMultiFileUploadSizeOverhead,g=0,_=this._getParamName(p),m=0;if(!c||d&&void 0!==u[0].size||(c=void 0),(p.singleFileUploads||h||c)&&this._isXHRUpload(p))if(p.singleFileUploads||c||!h)if(!p.singleFileUploads&&c)for(o=[],r=[],s=0;d>s;s+=1)g+=u[s].size+f,(s+1===d||g+u[s+1].size+f>c||h&&s+1-m>=h)&&(o.push(u.slice(m,s+1)),n=_.slice(m,s+1),n.length||(n=_),r.push(n),m=s+1,g=0);else r=_;else for(o=[],r=[],s=0;d>s;s+=h)o.push(u.slice(s,s+h)),n=_.slice(s,s+h),n.length||(n=_),r.push(n);else o=[u],r=[_];return i.originalFiles=u,e.each(o||u,function(n,s){var p=e.extend({},i);return p.files=o?s:[s],p.paramName=r[n],a._initResponseObject(p),a._initProgressObject(p),a._addConvenienceMethods(t,p),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),p)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?i[0]:r}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var r,n=this,o=e.Deferred(),s=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])},a=function(e){n._handleFileTreeEntries(e,i+t.name+"/").done(function(e){o.resolve(e)}).fail(s)},l=function(){r.readEntries(function(e){e.length?(p=p.concat(e),l()):a(p)},s)},p=[];return i=i||"",t.isFile?t._file?(t._file.relativePath=i,o.resolve(t._file)):t.file(function(e){e.relativePath=i,o.resolve(e)},s):t.isDirectory?(r=t.createReader(),l()):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,i){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,r,n=t.prop("webkitEntries")||t.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(r=t.prop("value"),!r)return e.Deferred().resolve([]).promise();i=[{name:r.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(n){r.files=n,i.options.replaceFileInput&&i._replaceFileInput(r.fileInput),i._trigger("change",e.Event("change",{delegatedEvent:t}),r)!==!1&&i._onAdd(t,r)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&r.files.push(i)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),r)!==!1&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,r=t.dataTransfer,n={};r&&r.files&&r.files.length&&(t.preventDefault(),this._getDroppedFiles(r).always(function(r){n.files=r,i._trigger("drop",e.Event("drop",{delegatedEvent:t}),n)!==!1&&i._onAdd(t,n)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;i&&-1!==e.inArray("Files",i.types)&&this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))!==!1&&(t.preventDefault(),i.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var r=-1!==e.inArray(t,this._specialOptions);r&&this._destroyEventHandlers(),this._super(t,i),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,r=e(this.element[0].cloneNode(!1));e.each(r.data(),function(e,n){var o="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();r.attr(o)&&(t._isRegExpOption(e,n)&&(n=t._getRegExp(n)),i[e]=n)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,r,n=this,o=e.Deferred(),s=o.promise();return s.abort=function(){return r=!0,i?i.abort():(o.reject(null,"abort","abort"),s)},this._getFileInputFiles(t.fileInput).always(function(e){if(!r){if(!e.length)return void o.reject();t.files=e,i=n._onSend(null,t),i.then(function(e,t,i){o.resolve(e,t,i)},function(e,t,i){o.reject(e,t,i)})}}),this._enhancePromise(s)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})});
/*
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){"use strict";var s=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(r,i){var o=e(this);i.process(function(){return o.fileupload("process",i)}),s.call(this,r,i)}},processActions:{},_processFile:function(s,r){var i=this,o=e.Deferred().resolveWith(i,[s]),t=o.promise();return this._trigger("process",null,s),e.each(s.processQueue,function(s,o){var n=function(s){return r.errorThrown?e.Deferred().rejectWith(i,[r]).promise():i.processActions[o.action].call(i,s,o)};t=t.pipe(n,o.always&&n)}),t.done(function(){i._trigger("processdone",null,s),i._trigger("processalways",null,s)}).fail(function(){i._trigger("processfail",null,s),i._trigger("processalways",null,s)}),t},_transformProcessQueue:function(s){var r=[];e.each(s.processQueue,function(){var i={},o=this.action,t=this.prefix===!0?o:this.prefix;e.each(this,function(r,o){i[r]="string"===e.type(o)&&"@"===o.charAt(0)?s[o.slice(1)||(t?t+r.charAt(0).toUpperCase()+r.slice(1):r)]:o}),r.push(i)}),s.processQueue=r},processing:function(){return this._processing},process:function(s){var r=this,i=e.extend({},this.options,s);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),e.each(s.files,function(o){var t=o?e.extend({},i):i,n=function(){return s.errorThrown?e.Deferred().rejectWith(r,[s]).promise():r._processFile(t,s)};t.index=o,r._processing+=1,r._processingQueue=r._processingQueue.pipe(n,n).always(function(){r._processing-=1,0===r._processing&&r._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})});
/*
 * jQuery File Upload Validation Plugin 1.1.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(i,l){if(l.disabled)return i;var r,s=e.Deferred(),t=this.options,o=i.files[i.index];return(l.minFileSize||l.maxFileSize)&&(r=o.size),"number"===e.type(l.maxNumberOfFiles)&&(t.getNumberOfFiles()||0)+i.files.length>l.maxNumberOfFiles?o.error=t.i18n("maxNumberOfFiles"):!l.acceptFileTypes||l.acceptFileTypes.test(o.type)||l.acceptFileTypes.test(o.name)?r>l.maxFileSize?o.error=t.i18n("maxFileSize"):"number"===e.type(r)&&r<l.minFileSize?o.error=t.i18n("minFileSize"):delete o.error:o.error=t.i18n("acceptFileTypes"),o.error||i.files.error?(i.files.error=!0,s.rejectWith(this,[i])):s.resolveWith(this,[i]),s.promise()}}})});
/*
* ZeroClipboard
* The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
* Copyright (c) 2009-2014 Jon Rohan, James M. Greene
* Licensed MIT
* http://zeroclipboard.org/
* v2.2.0
*/
!function(a,b){"use strict";var c,d,e,f=a,g=f.document,h=f.navigator,i=f.setTimeout,j=f.clearTimeout,k=f.setInterval,l=f.clearInterval,m=f.getComputedStyle,n=f.encodeURIComponent,o=f.ActiveXObject,p=f.Error,q=f.Number.parseInt||f.parseInt,r=f.Number.parseFloat||f.parseFloat,s=f.Number.isNaN||f.isNaN,t=f.Date.now,u=f.Object.keys,v=f.Object.defineProperty,w=f.Object.prototype.hasOwnProperty,x=f.Array.prototype.slice,y=function(){var a=function(a){return a};if("function"==typeof f.wrap&&"function"==typeof f.unwrap)try{var b=g.createElement("div"),c=f.unwrap(b);1===b.nodeType&&c&&1===c.nodeType&&(a=f.unwrap)}catch(d){}return a}(),z=function(a){return x.call(a,0)},A=function(){var a,c,d,e,f,g,h=z(arguments),i=h[0]||{};for(a=1,c=h.length;c>a;a++)if(null!=(d=h[a]))for(e in d)w.call(d,e)&&(f=i[e],g=d[e],i!==g&&g!==b&&(i[e]=g));return i},B=function(a){var b,c,d,e;if("object"!=typeof a||null==a||"number"==typeof a.nodeType)b=a;else if("number"==typeof a.length)for(b=[],c=0,d=a.length;d>c;c++)w.call(a,c)&&(b[c]=B(a[c]));else{b={};for(e in a)w.call(a,e)&&(b[e]=B(a[e]))}return b},C=function(a,b){for(var c={},d=0,e=b.length;e>d;d++)b[d]in a&&(c[b[d]]=a[b[d]]);return c},D=function(a,b){var c={};for(var d in a)-1===b.indexOf(d)&&(c[d]=a[d]);return c},E=function(a){if(a)for(var b in a)w.call(a,b)&&delete a[b];return a},F=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument))do{if(a===b)return!0;a=a.parentNode}while(a);return!1},G=function(a){var b;return"string"==typeof a&&a&&(b=a.split("#")[0].split("?")[0],b=a.slice(0,a.lastIndexOf("/")+1)),b},H=function(a){var b,c;return"string"==typeof a&&a&&(c=a.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]?b=c[1]:(c=a.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]&&(b=c[1]))),b},I=function(){var a,b;try{throw new p}catch(c){b=c}return b&&(a=b.sourceURL||b.fileName||H(b.stack)),a},J=function(){var a,c,d;if(g.currentScript&&(a=g.currentScript.src))return a;if(c=g.getElementsByTagName("script"),1===c.length)return c[0].src||b;if("readyState"in c[0])for(d=c.length;d--;)if("interactive"===c[d].readyState&&(a=c[d].src))return a;return"loading"===g.readyState&&(a=c[c.length-1].src)?a:(a=I())?a:b},K=function(){var a,c,d,e=g.getElementsByTagName("script");for(a=e.length;a--;){if(!(d=e[a].src)){c=null;break}if(d=G(d),null==c)c=d;else if(c!==d){c=null;break}}return c||b},L=function(){var a=G(J())||K()||"";return a+"ZeroClipboard.swf"},M=function(){return null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent)}(),N={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},O="11.0.0",P={},Q={},R=null,S=0,T=0,U={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},V=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],W=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],X=new RegExp("^flash-("+W.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Y=new RegExp("^flash-("+W.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Z={swfPath:L(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},$=function(a){if("object"==typeof a&&null!==a)for(var b in a)if(w.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))Z[b]=a[b];else if(null==N.bridge)if("containerId"===b||"swfObjectId"===b){if(!nb(a[b]))throw new Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");Z[b]=a[b]}else Z[b]=a[b];{if("string"!=typeof a||!a)return B(Z);if(w.call(Z,a))return Z[a]}},_=function(){return Tb(),{browser:C(h,["userAgent","platform","appName"]),flash:D(N,["bridge"]),zeroclipboard:{version:Vb.version,config:Vb.config()}}},ab=function(){return!!(N.disabled||N.outdated||N.sandboxed||N.unavailable||N.degraded||N.deactivated)},bb=function(a,d){var e,f,g,h={};if("string"==typeof a&&a)g=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof d)for(e in a)w.call(a,e)&&"string"==typeof e&&e&&"function"==typeof a[e]&&Vb.on(e,a[e]);if(g&&g.length){for(e=0,f=g.length;f>e;e++)a=g[e].replace(/^on/,""),h[a]=!0,P[a]||(P[a]=[]),P[a].push(d);if(h.ready&&N.ready&&Vb.emit({type:"ready"}),h.error){for(e=0,f=W.length;f>e;e++)if(N[W[e].replace(/^flash-/,"")]===!0){Vb.emit({type:"error",name:W[e]});break}c!==b&&Vb.version!==c&&Vb.emit({type:"error",name:"version-mismatch",jsVersion:Vb.version,swfVersion:c})}}return Vb},cb=function(a,b){var c,d,e,f,g;if(0===arguments.length)f=u(P);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)w.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&Vb.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=P[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return Vb},db=function(a){var b;return b="string"==typeof a&&a?B(P[a])||null:B(P)},eb=function(a){var b,c,d;return a=ob(a),a&&!vb(a)?"ready"===a.type&&N.overdue===!0?Vb.emit({type:"error",name:"flash-overdue"}):(b=A({},a),tb.call(this,b),"copy"===a.type&&(d=Db(Q),c=d.data,R=d.formatMap),c):void 0},fb=function(){var a=N.sandboxed;if(Tb(),"boolean"!=typeof N.ready&&(N.ready=!1),N.sandboxed!==a&&N.sandboxed===!0)N.ready=!1,Vb.emit({type:"error",name:"flash-sandboxed"});else if(!Vb.isFlashUnusable()&&null===N.bridge){var b=Z.flashLoadTimeout;"number"==typeof b&&b>=0&&(S=i(function(){"boolean"!=typeof N.deactivated&&(N.deactivated=!0),N.deactivated===!0&&Vb.emit({type:"error",name:"flash-deactivated"})},b)),N.overdue=!1,Bb()}},gb=function(){Vb.clearData(),Vb.blur(),Vb.emit("destroy"),Cb(),Vb.off()},hb=function(a,b){var c;if("object"==typeof a&&a&&"undefined"==typeof b)c=a,Vb.clearData();else{if("string"!=typeof a||!a)return;c={},c[a]=b}for(var d in c)"string"==typeof d&&d&&w.call(c,d)&&"string"==typeof c[d]&&c[d]&&(Q[d]=c[d])},ib=function(a){"undefined"==typeof a?(E(Q),R=null):"string"==typeof a&&w.call(Q,a)&&delete Q[a]},jb=function(a){return"undefined"==typeof a?B(Q):"string"==typeof a&&w.call(Q,a)?Q[a]:void 0},kb=function(a){if(a&&1===a.nodeType){d&&(Lb(d,Z.activeClass),d!==a&&Lb(d,Z.hoverClass)),d=a,Kb(a,Z.hoverClass);var b=a.getAttribute("title")||Z.title;if("string"==typeof b&&b){var c=Ab(N.bridge);c&&c.setAttribute("title",b)}var e=Z.forceHandCursor===!0||"pointer"===Mb(a,"cursor");Rb(e),Qb()}},lb=function(){var a=Ab(N.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px"),d&&(Lb(d,Z.hoverClass),Lb(d,Z.activeClass),d=null)},mb=function(){return d||null},nb=function(a){return"string"==typeof a&&a&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(a)},ob=function(a){var b;if("string"==typeof a&&a?(b=a,a={}):"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(b=a.type),b){b=b.toLowerCase(),!a.target&&(/^(copy|aftercopy|_click)$/.test(b)||"error"===b&&"clipboard-error"===a.name)&&(a.target=e),A(a,{type:b,target:a.target||d||null,relatedTarget:a.relatedTarget||null,currentTarget:N&&N.bridge||null,timeStamp:a.timeStamp||t()||null});var c=U[a.type];return"error"===a.type&&a.name&&c&&(c=c[a.name]),c&&(a.message=c),"ready"===a.type&&A(a,{target:null,version:N.version}),"error"===a.type&&(X.test(a.name)&&A(a,{target:null,minimumVersion:O}),Y.test(a.name)&&A(a,{version:N.version})),"copy"===a.type&&(a.clipboardData={setData:Vb.setData,clearData:Vb.clearData}),"aftercopy"===a.type&&(a=Eb(a,R)),a.target&&!a.relatedTarget&&(a.relatedTarget=pb(a.target)),qb(a)}},pb=function(a){var b=a&&a.getAttribute&&a.getAttribute("data-clipboard-target");return b?g.getElementById(b):null},qb=function(a){if(a&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)){var c=a.target,d="_mouseover"===a.type&&a.relatedTarget?a.relatedTarget:b,e="_mouseout"===a.type&&a.relatedTarget?a.relatedTarget:b,h=Nb(c),i=f.screenLeft||f.screenX||0,j=f.screenTop||f.screenY||0,k=g.body.scrollLeft+g.documentElement.scrollLeft,l=g.body.scrollTop+g.documentElement.scrollTop,m=h.left+("number"==typeof a._stageX?a._stageX:0),n=h.top+("number"==typeof a._stageY?a._stageY:0),o=m-k,p=n-l,q=i+o,r=j+p,s="number"==typeof a.movementX?a.movementX:0,t="number"==typeof a.movementY?a.movementY:0;delete a._stageX,delete a._stageY,A(a,{srcElement:c,fromElement:d,toElement:e,screenX:q,screenY:r,pageX:m,pageY:n,clientX:o,clientY:p,x:o,y:p,movementX:s,movementY:t,offsetX:0,offsetY:0,layerX:0,layerY:0})}return a},rb=function(a){var b=a&&"string"==typeof a.type&&a.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(b)},sb=function(a,b,c,d){d?i(function(){a.apply(b,c)},0):a.apply(b,c)},tb=function(a){if("object"==typeof a&&a&&a.type){var b=rb(a),c=P["*"]||[],d=P[a.type]||[],e=c.concat(d);if(e&&e.length){var g,h,i,j,k,l=this;for(g=0,h=e.length;h>g;g++)i=e[g],j=l,"string"==typeof i&&"function"==typeof f[i]&&(i=f[i]),"object"==typeof i&&i&&"function"==typeof i.handleEvent&&(j=i,i=i.handleEvent),"function"==typeof i&&(k=A({},a),sb(i,j,[k],b))}return this}},ub=function(a){var b=null;return(M===!1||a&&"error"===a.type&&a.name&&-1!==V.indexOf(a.name))&&(b=!1),b},vb=function(a){var b=a.target||d||null,f="swf"===a._source;switch(delete a._source,a.type){case"error":var g="flash-sandboxed"===a.name||ub(a);"boolean"==typeof g&&(N.sandboxed=g),-1!==W.indexOf(a.name)?A(N,{disabled:"flash-disabled"===a.name,outdated:"flash-outdated"===a.name,unavailable:"flash-unavailable"===a.name,degraded:"flash-degraded"===a.name,deactivated:"flash-deactivated"===a.name,overdue:"flash-overdue"===a.name,ready:!1}):"version-mismatch"===a.name&&(c=a.swfVersion,A(N,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Pb();break;case"ready":c=a.swfVersion;var h=N.deactivated===!0;A(N,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:h,ready:!h}),Pb();break;case"beforecopy":e=b;break;case"copy":var i,j,k=a.relatedTarget;!Q["text/html"]&&!Q["text/plain"]&&k&&(j=k.value||k.outerHTML||k.innerHTML)&&(i=k.value||k.textContent||k.innerText)?(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",i),j!==i&&a.clipboardData.setData("text/html",j)):!Q["text/plain"]&&a.target&&(i=a.target.getAttribute("data-clipboard-text"))&&(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",i));break;case"aftercopy":wb(a),Vb.clearData(),b&&b!==Jb()&&b.focus&&b.focus();break;case"_mouseover":Vb.focus(b),Z.bubbleEvents===!0&&f&&(b&&b!==a.relatedTarget&&!F(a.relatedTarget,b)&&xb(A({},a,{type:"mouseenter",bubbles:!1,cancelable:!1})),xb(A({},a,{type:"mouseover"})));break;case"_mouseout":Vb.blur(),Z.bubbleEvents===!0&&f&&(b&&b!==a.relatedTarget&&!F(a.relatedTarget,b)&&xb(A({},a,{type:"mouseleave",bubbles:!1,cancelable:!1})),xb(A({},a,{type:"mouseout"})));break;case"_mousedown":Kb(b,Z.activeClass),Z.bubbleEvents===!0&&f&&xb(A({},a,{type:a.type.slice(1)}));break;case"_mouseup":Lb(b,Z.activeClass),Z.bubbleEvents===!0&&f&&xb(A({},a,{type:a.type.slice(1)}));break;case"_click":e=null,Z.bubbleEvents===!0&&f&&xb(A({},a,{type:a.type.slice(1)}));break;case"_mousemove":Z.bubbleEvents===!0&&f&&xb(A({},a,{type:a.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)?!0:void 0},wb=function(a){if(a.errors&&a.errors.length>0){var b=B(a);A(b,{type:"error",name:"clipboard-error"}),delete b.success,i(function(){Vb.emit(b)},0)}},xb=function(a){if(a&&"string"==typeof a.type&&a){var b,c=a.target||null,d=c&&c.ownerDocument||g,e={view:d.defaultView||f,canBubble:!0,cancelable:!0,detail:"click"===a.type?1:0,button:"number"==typeof a.which?a.which-1:"number"==typeof a.button?a.button:d.createEvent?0:1},h=A(e,a);c&&d.createEvent&&c.dispatchEvent&&(h=[h.type,h.canBubble,h.cancelable,h.view,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget],b=d.createEvent("MouseEvents"),b.initMouseEvent&&(b.initMouseEvent.apply(b,h),b._source="js",c.dispatchEvent(b)))}},yb=function(){var a=Z.flashLoadTimeout;if("number"==typeof a&&a>=0){var b=Math.min(1e3,a/10),c=Z.swfObjectId+"_fallbackContent";T=k(function(){var a=g.getElementById(c);Ob(a)&&(Pb(),N.deactivated=null,Vb.emit({type:"error",name:"swf-not-found"}))},b)}},zb=function(){var a=g.createElement("div");return a.id=Z.containerId,a.className=Z.containerClass,a.style.position="absolute",a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px",a.style.zIndex=""+Sb(Z.zIndex),a},Ab=function(a){for(var b=a&&a.parentNode;b&&"OBJECT"===b.nodeName&&b.parentNode;)b=b.parentNode;return b||null},Bb=function(){var a,b=N.bridge,c=Ab(b);if(!b){var d=Ib(f.location.host,Z),e="never"===d?"none":"all",h=Gb(A({jsVersion:Vb.version},Z)),i=Z.swfPath+Fb(Z.swfPath,Z);c=zb();var j=g.createElement("div");c.appendChild(j),g.body.appendChild(c);var k=g.createElement("div"),l="activex"===N.pluginType;k.innerHTML='<object id="'+Z.swfObjectId+'" name="'+Z.swfObjectId+'" width="100%" height="100%" '+(l?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+i+'"')+">"+(l?'<param name="movie" value="'+i+'"/>':"")+'<param name="allowScriptAccess" value="'+d+'"/><param name="allowNetworking" value="'+e+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+h+'"/><div id="'+Z.swfObjectId+'_fallbackContent">&nbsp;</div></object>',b=k.firstChild,k=null,y(b).ZeroClipboard=Vb,c.replaceChild(b,j),yb()}return b||(b=g[Z.swfObjectId],b&&(a=b.length)&&(b=b[a-1]),!b&&c&&(b=c.firstChild)),N.bridge=b||null,b},Cb=function(){var a=N.bridge;if(a){var d=Ab(a);d&&("activex"===N.pluginType&&"readyState"in a?(a.style.display="none",function e(){if(4===a.readyState){for(var b in a)"function"==typeof a[b]&&(a[b]=null);a.parentNode&&a.parentNode.removeChild(a),d.parentNode&&d.parentNode.removeChild(d)}else i(e,10)}()):(a.parentNode&&a.parentNode.removeChild(a),d.parentNode&&d.parentNode.removeChild(d))),Pb(),N.ready=null,N.bridge=null,N.deactivated=null,c=b}},Db=function(a){var b={},c={};if("object"==typeof a&&a){for(var d in a)if(d&&w.call(a,d)&&"string"==typeof a[d]&&a[d])switch(d.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":b.text=a[d],c.text=d;break;case"text/html":case"html":case"air:html":case"flash:html":b.html=a[d],c.html=d;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":b.rtf=a[d],c.rtf=d}return{data:b,formatMap:c}}},Eb=function(a,b){if("object"!=typeof a||!a||"object"!=typeof b||!b)return a;var c={};for(var d in a)if(w.call(a,d))if("errors"===d){c[d]=a[d]?a[d].slice():[];for(var e=0,f=c[d].length;f>e;e++)c[d][e].format=b[c[d][e].format]}else if("success"!==d&&"data"!==d)c[d]=a[d];else{c[d]={};var g=a[d];for(var h in g)h&&w.call(g,h)&&w.call(b,h)&&(c[d][b[h]]=g[h])}return c},Fb=function(a,b){var c=null==b||b&&b.cacheBust===!0;return c?(-1===a.indexOf("?")?"?":"&")+"noCache="+t():""},Gb=function(a){var b,c,d,e,g="",h=[];if(a.trustedDomains&&("string"==typeof a.trustedDomains?e=[a.trustedDomains]:"object"==typeof a.trustedDomains&&"length"in a.trustedDomains&&(e=a.trustedDomains)),e&&e.length)for(b=0,c=e.length;c>b;b++)if(w.call(e,b)&&e[b]&&"string"==typeof e[b]){if(d=Hb(e[b]),!d)continue;if("*"===d){h.length=0,h.push(d);break}h.push.apply(h,[d,"//"+d,f.location.protocol+"//"+d])}return h.length&&(g+="trustedOrigins="+n(h.join(","))),a.forceEnhancedClipboard===!0&&(g+=(g?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof a.swfObjectId&&a.swfObjectId&&(g+=(g?"&":"")+"swfObjectId="+n(a.swfObjectId)),"string"==typeof a.jsVersion&&a.jsVersion&&(g+=(g?"&":"")+"jsVersion="+n(a.jsVersion)),g},Hb=function(a){if(null==a||""===a)return null;if(a=a.replace(/^\s+|\s+$/g,""),""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},Ib=function(){var a=function(a){var b,c,d,e=[];if("string"==typeof a&&(a=[a]),"object"!=typeof a||!a||"number"!=typeof a.length)return e;for(b=0,c=a.length;c>b;b++)if(w.call(a,b)&&(d=Hb(a[b]))){if("*"===d){e.length=0,e.push("*");break}-1===e.indexOf(d)&&e.push(d)}return e};return function(b,c){var d=Hb(c.swfPath);null===d&&(d=b);var e=a(c.trustedDomains),f=e.length;if(f>0){if(1===f&&"*"===e[0])return"always";if(-1!==e.indexOf(b))return 1===f&&b===d?"sameDomain":"always"}return"never"}}(),Jb=function(){try{return g.activeElement}catch(a){return null}},Kb=function(a,b){var c,d,e,f=[];if("string"==typeof b&&b&&(f=b.split(/\s+/)),a&&1===a.nodeType&&f.length>0)if(a.classList)for(c=0,d=f.length;d>c;c++)a.classList.add(f[c]);else if(a.hasOwnProperty("className")){for(e=" "+a.className+" ",c=0,d=f.length;d>c;c++)-1===e.indexOf(" "+f[c]+" ")&&(e+=f[c]+" ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},Lb=function(a,b){var c,d,e,f=[];if("string"==typeof b&&b&&(f=b.split(/\s+/)),a&&1===a.nodeType&&f.length>0)if(a.classList&&a.classList.length>0)for(c=0,d=f.length;d>c;c++)a.classList.remove(f[c]);else if(a.className){for(e=(" "+a.className+" ").replace(/[\r\n\t]/g," "),c=0,d=f.length;d>c;c++)e=e.replace(" "+f[c]+" "," ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},Mb=function(a,b){var c=m(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},Nb=function(a){var b={left:0,top:0,width:0,height:0};if(a.getBoundingClientRect){var c=a.getBoundingClientRect(),d=f.pageXOffset,e=f.pageYOffset,h=g.documentElement.clientLeft||0,i=g.documentElement.clientTop||0,j=0,k=0;if("relative"===Mb(g.body,"position")){var l=g.body.getBoundingClientRect(),m=g.documentElement.getBoundingClientRect();j=l.left-m.left||0,k=l.top-m.top||0}b.left=c.left+d-h-j,b.top=c.top+e-i-k,b.width="width"in c?c.width:c.right-c.left,b.height="height"in c?c.height:c.bottom-c.top}return b},Ob=function(a){if(!a)return!1;var b=m(a,null),c=r(b.height)>0,d=r(b.width)>0,e=r(b.top)>=0,f=r(b.left)>=0,g=c&&d&&e&&f,h=g?null:Nb(a),i="none"!==b.display&&"collapse"!==b.visibility&&(g||!!h&&(c||h.height>0)&&(d||h.width>0)&&(e||h.top>=0)&&(f||h.left>=0));return i},Pb=function(){j(S),S=0,l(T),T=0},Qb=function(){var a;if(d&&(a=Ab(N.bridge))){var b=Nb(d);A(a.style,{width:b.width+"px",height:b.height+"px",top:b.top+"px",left:b.left+"px",zIndex:""+Sb(Z.zIndex)})}},Rb=function(a){N.ready===!0&&(N.bridge&&"function"==typeof N.bridge.setHandCursor?N.bridge.setHandCursor(a):N.ready=!1)},Sb=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;return"number"!=typeof a||s(a)?"string"==typeof a&&(b=Sb(q(a,10))):b=a,"number"==typeof b?b:"auto"},Tb=function(b){var c,d,e,f=N.sandboxed,g=null;if(b=b===!0,M===!1)g=!1;else{try{d=a.frameElement||null}catch(h){e={name:h.name,message:h.message}}if(d&&1===d.nodeType&&"IFRAME"===d.nodeName)try{g=d.hasAttribute("sandbox")}catch(h){g=null}else{try{c=document.domain||null}catch(h){c=null}(null===c||e&&"SecurityError"===e.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase()))&&(g=!0)}}return N.sandboxed=g,f===g||b||Ub(o),g},Ub=function(a){function b(a){var b=a.match(/[\d]+/g);return b.length=3,b.join(".")}function c(a){return!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))}function d(a){a&&(i=!0,a.version&&(l=b(a.version)),!l&&a.description&&(l=b(a.description)),a.filename&&(k=c(a.filename)))}var e,f,g,i=!1,j=!1,k=!1,l="";if(h.plugins&&h.plugins.length)e=h.plugins["Shockwave Flash"],d(e),h.plugins["Shockwave Flash 2.0"]&&(i=!0,l="2.0.0.11");else if(h.mimeTypes&&h.mimeTypes.length)g=h.mimeTypes["application/x-shockwave-flash"],e=g&&g.enabledPlugin,d(e);else if("undefined"!=typeof a){j=!0;try{f=new a("ShockwaveFlash.ShockwaveFlash.7"),i=!0,l=b(f.GetVariable("$version"))}catch(m){try{f=new a("ShockwaveFlash.ShockwaveFlash.6"),i=!0,l="6.0.21"}catch(n){try{f=new a("ShockwaveFlash.ShockwaveFlash"),i=!0,l=b(f.GetVariable("$version"))}catch(o){j=!1}}}}N.disabled=i!==!0,N.outdated=l&&r(l)<r(O),N.version=l||"0.0.0",N.pluginType=k?"pepper":j?"activex":i?"netscape":"unknown"};Ub(o),Tb(!0);var Vb=function(){return this instanceof Vb?void("function"==typeof Vb._createClient&&Vb._createClient.apply(this,z(arguments))):new Vb};v(Vb,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Vb.config=function(){return $.apply(this,z(arguments))},Vb.state=function(){return _.apply(this,z(arguments))},Vb.isFlashUnusable=function(){return ab.apply(this,z(arguments))},Vb.on=function(){return bb.apply(this,z(arguments))},Vb.off=function(){return cb.apply(this,z(arguments))},Vb.handlers=function(){return db.apply(this,z(arguments))},Vb.emit=function(){return eb.apply(this,z(arguments))},Vb.create=function(){return fb.apply(this,z(arguments))},Vb.destroy=function(){return gb.apply(this,z(arguments))},Vb.setData=function(){return hb.apply(this,z(arguments))},Vb.clearData=function(){return ib.apply(this,z(arguments))},Vb.getData=function(){return jb.apply(this,z(arguments))},Vb.focus=Vb.activate=function(){return kb.apply(this,z(arguments))},Vb.blur=Vb.deactivate=function(){return lb.apply(this,z(arguments))},Vb.activeElement=function(){return mb.apply(this,z(arguments))};var Wb=0,Xb={},Yb=0,Zb={},$b={};A(Z,{autoActivate:!0});var _b=function(a){var b=this;b.id=""+Wb++,Xb[b.id]={instance:b,elements:[],handlers:{}},a&&b.clip(a),Vb.on("*",function(a){return b.emit(a)}),Vb.on("destroy",function(){b.destroy()}),Vb.create()},ac=function(a,d){var e,f,g,h={},i=Xb[this.id],j=i&&i.handlers;if(!i)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof a&&a)g=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof d)for(e in a)w.call(a,e)&&"string"==typeof e&&e&&"function"==typeof a[e]&&this.on(e,a[e]);if(g&&g.length){for(e=0,f=g.length;f>e;e++)a=g[e].replace(/^on/,""),h[a]=!0,j[a]||(j[a]=[]),j[a].push(d);if(h.ready&&N.ready&&this.emit({type:"ready",client:this}),h.error){for(e=0,f=W.length;f>e;e++)if(N[W[e].replace(/^flash-/,"")]){this.emit({type:"error",name:W[e],client:this});break}c!==b&&Vb.version!==c&&this.emit({type:"error",name:"version-mismatch",jsVersion:Vb.version,swfVersion:c})}}return this},bc=function(a,b){var c,d,e,f,g,h=Xb[this.id],i=h&&h.handlers;if(!i)return this;if(0===arguments.length)f=u(i);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)w.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=i[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return this},cc=function(a){var b=null,c=Xb[this.id]&&Xb[this.id].handlers;return c&&(b="string"==typeof a&&a?c[a]?c[a].slice(0):[]:B(c)),b},dc=function(a){if(ic.call(this,a)){"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(a=A({},a));var b=A({},ob(a),{client:this});jc.call(this,b)}return this},ec=function(a){if(!Xb[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=kc(a);for(var b=0;b<a.length;b++)if(w.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===Zb[a[b].zcClippingId].indexOf(this.id)&&Zb[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+Yb++,Zb[a[b].zcClippingId]=[this.id],Z.autoActivate===!0&&lc(a[b]));var c=Xb[this.id]&&Xb[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},fc=function(a){var b=Xb[this.id];if(!b)return this;var c,d=b.elements;a="undefined"==typeof a?d.slice(0):kc(a);for(var e=a.length;e--;)if(w.call(a,e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=d.indexOf(a[e],c));)d.splice(c,1);var f=Zb[a[e].zcClippingId];if(f){for(c=0;-1!==(c=f.indexOf(this.id,c));)f.splice(c,1);0===f.length&&(Z.autoActivate===!0&&mc(a[e]),delete a[e].zcClippingId)}}return this},gc=function(){var a=Xb[this.id];return a&&a.elements?a.elements.slice(0):[]},hc=function(){Xb[this.id]&&(this.unclip(),this.off(),delete Xb[this.id])},ic=function(a){if(!a||!a.type)return!1;if(a.client&&a.client!==this)return!1;var b=Xb[this.id],c=b&&b.elements,d=!!c&&c.length>0,e=!a.target||d&&-1!==c.indexOf(a.target),f=a.relatedTarget&&d&&-1!==c.indexOf(a.relatedTarget),g=a.client&&a.client===this;return b&&(e||f||g)?!0:!1},jc=function(a){var b=Xb[this.id];if("object"==typeof a&&a&&a.type&&b){var c=rb(a),d=b&&b.handlers["*"]||[],e=b&&b.handlers[a.type]||[],g=d.concat(e);if(g&&g.length){var h,i,j,k,l,m=this;for(h=0,i=g.length;i>h;h++)j=g[h],k=m,"string"==typeof j&&"function"==typeof f[j]&&(j=f[j]),"object"==typeof j&&j&&"function"==typeof j.handleEvent&&(k=j,j=j.handleEvent),"function"==typeof j&&(l=A({},a),sb(j,k,[l],c))}}},kc=function(a){return"string"==typeof a&&(a=[]),"number"!=typeof a.length?[a]:a},lc=function(a){if(a&&1===a.nodeType){var b=function(a){(a||(a=f.event))&&("js"!==a._source&&(a.stopImmediatePropagation(),a.preventDefault()),delete a._source)},c=function(c){(c||(c=f.event))&&(b(c),Vb.focus(a))};a.addEventListener("mouseover",c,!1),a.addEventListener("mouseout",b,!1),a.addEventListener("mouseenter",b,!1),a.addEventListener("mouseleave",b,!1),a.addEventListener("mousemove",b,!1),$b[a.zcClippingId]={mouseover:c,mouseout:b,mouseenter:b,mouseleave:b,mousemove:b}}},mc=function(a){if(a&&1===a.nodeType){var b=$b[a.zcClippingId];if("object"==typeof b&&b){for(var c,d,e=["move","leave","enter","out","over"],f=0,g=e.length;g>f;f++)c="mouse"+e[f],d=b[c],"function"==typeof d&&a.removeEventListener(c,d,!1);delete $b[a.zcClippingId]}}};Vb._createClient=function(){_b.apply(this,z(arguments))},Vb.prototype.on=function(){return ac.apply(this,z(arguments))},Vb.prototype.off=function(){return bc.apply(this,z(arguments))},Vb.prototype.handlers=function(){return cc.apply(this,z(arguments))},Vb.prototype.emit=function(){return dc.apply(this,z(arguments))},Vb.prototype.clip=function(){return ec.apply(this,z(arguments))},Vb.prototype.unclip=function(){return fc.apply(this,z(arguments))},Vb.prototype.elements=function(){return gc.apply(this,z(arguments))},Vb.prototype.destroy=function(){return hc.apply(this,z(arguments))},Vb.prototype.setText=function(a){if(!Xb[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vb.setData("text/plain",a),this},Vb.prototype.setHtml=function(a){if(!Xb[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vb.setData("text/html",a),this},Vb.prototype.setRichText=function(a){if(!Xb[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vb.setData("application/rtf",a),this},Vb.prototype.setData=function(){if(!Xb[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Vb.setData.apply(this,z(arguments)),this},Vb.prototype.clearData=function(){if(!Xb[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Vb.clearData.apply(this,z(arguments)),this},Vb.prototype.getData=function(){if(!Xb[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Vb.getData.apply(this,z(arguments))},"function"==typeof define&&define.amd?define(function(){return Vb}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Vb:a.ZeroClipboard=Vb}(function(){return this||window}());
//# sourceMappingURL=ZeroClipboard.min.map
/*
 * This file is part of Cytoscape.js 2.3.7.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * Cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
var cytoscape;!function(e){"use strict";var t=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};t.version="2.3.7",t.init=function(e){return void 0===e&&(e={}),t.is.plainObject(e)?new t.Core(e):t.is.string(e)?t.extension.apply(t.extension,arguments):void 0},t.fn={},"undefined"!=typeof module&&module.exports&&(module.exports=cytoscape),"undefined"!=typeof define&&define.amd&&define("cytoscape",function(){return cytoscape}),e&&(e.cytoscape=cytoscape)}("undefined"==typeof window?null:window),function(e,t){"use strict";e.is={defined:function(e){return null!=e},string:function(e){return null!=e&&"string"==typeof e},fn:function(e){return null!=e&&"function"==typeof e},array:function(e){return Array.isArray?Array.isArray(e):null!=e&&e instanceof Array},plainObject:function(t){return null!=t&&typeof t==typeof{}&&!e.is.array(t)&&t.constructor===Object},number:function(e){return null!=e&&"number"==typeof e&&!isNaN(e)},integer:function(t){return e.is.number(t)&&Math.floor(t)===t},color:function(e){return null!=e&&"string"==typeof e&&""!==$.Color(e).toString()},bool:function(e){return null!=e&&typeof e==typeof!0},elementOrCollection:function(t){return e.is.element(t)||e.is.collection(t)},element:function(t){return t instanceof e.Element&&t._private.single},collection:function(t){return t instanceof e.Collection&&!t._private.single},core:function(t){return t instanceof e.Core},style:function(t){return t instanceof e.Style},stylesheet:function(t){return t instanceof e.Stylesheet},event:function(t){return t instanceof e.Event},emptyString:function(t){return t?e.is.string(t)&&(""===t||t.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(t){return t&&e.is.string(t)&&""!==t&&!t.match(/^\s+$/)?!0:!1},domElement:function(e){return"undefined"==typeof HTMLElement?!1:e instanceof HTMLElement},boundingBox:function(t){return e.is.plainObject(t)&&e.is.number(t.x1)&&e.is.number(t.x2)&&e.is.number(t.y1)&&e.is.number(t.y2)},touch:function(){return t&&("ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch)},gecko:function(){return"undefined"!=typeof InstallTrigger||"MozAppearance"in document.documentElement.style},webkit:function(){return"undefined"!=typeof webkitURL||"WebkitAppearance"in document.documentElement.style},chromium:function(){return"undefined"!=typeof chrome},khtml:function(){return navigator.vendor.match(/kde/i)},khtmlEtc:function(){return e.is.khtml()||e.is.webkit()||e.is.blink()},trident:function(){return"undefined"!=typeof ActiveXObject||!1},windows:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Win/i)},mac:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Mac/i)},linux:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/Linux/i)},unix:function(){return"undefined"!=typeof navigator&&navigator.appVersion.match(/X11/i)}}}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";e.util={extend:function(){var t,i,r,n,a,o,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||e.is.fn(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(t=arguments[l]))for(i in t)r=s[i],n=t[i],s!==n&&(c&&n&&(e.is.plainObject(n)||(a=e.is.array(n)))?(a?(a=!1,o=r&&e.is.array(r)?r:[]):o=r&&e.is.plainObject(r)?r:{},s[i]=e.util.extend(c,o,n)):void 0!==n&&(s[i]=n));return s},require:function(i,r,n){var a;n=e.util.extend({msgIfNotFound:!0},n);var o=!1,s=function(e){o=!0,r(e)},l=function(e){t&&(a=t[i]),void 0!==a&&s(a),e&&e()},u=function(){o||c(d)},c=function(e){"undefined"!=typeof module&&module.exports&&require&&(a=require(i)),void 0!==a&&s(a),e&&e()},d=function(){o||h(p)},h=function(e){"undefined"!=typeof define&&define.amd&&require&&require([i],function(t){a=t,void 0!==a&&s(a),e&&e()})},p=function(){!o&&n.msgIfNotFound&&e.util.error("Cytoscape.js tried to pull in dependency `"+i+"` but no module (i.e. CommonJS, AMD, or window) was found")};l(u)},requires:function(t,i){for(var r=[],n=[],a=function(){for(var e=0;e<t.length;e++)if(!n[e])return;i.apply(i,r)},o=0;o<t.length;o++)!function(){var i=t[o],s=o;e.util.require(i,function(e){r[s]=e,n[s]=!0,a()})}()},throttle:function(t,i,r){var n=!0,a=!0;return r===!1?n=!1:e.is.plainObject(r)&&(n="leading"in r?r.leading:n,a="trailing"in r?r.trailing:a),r=r||{},r.leading=n,r.maxWait=i,r.trailing=a,e.util.debounce(t,i,r)},now:function(){return+new Date},debounce:function(t,i,r){var n,a,o,s,l,u,c,d=0,h=!1,p=!0;if(e.is.fn(t)){if(i=Math.max(0,i)||0,r===!0){var v=!0;p=!1}else e.is.plainObject(r)&&(v=r.leading,h="maxWait"in r&&(Math.max(i,r.maxWait)||0),p="trailing"in r?r.trailing:p);var f=function(){var r=i-(e.util.now()-s);if(0>=r){a&&clearTimeout(a);var h=c;a=u=c=void 0,h&&(d=e.util.now(),o=t.apply(l,n),u||a||(n=l=null))}else u=setTimeout(f,r)},g=function(){u&&clearTimeout(u),a=u=c=void 0,(p||h!==i)&&(d=e.util.now(),o=t.apply(l,n),u||a||(n=l=null))};return function(){if(n=arguments,s=e.util.now(),l=this,c=p&&(u||!v),h===!1)var r=v&&!u;else{a||v||(d=s);var y=h-(s-d),m=0>=y;m?(a&&(a=clearTimeout(a)),d=s,o=t.apply(l,n)):a||(a=setTimeout(g,y))}return m&&u?u=clearTimeout(u):u||i===h||(u=setTimeout(f,i)),r&&(m=!0,o=t.apply(l,n)),!m||u||a||(n=l=null),o}}},error:function(e){if(!console)throw e;if(console.error)console.error.apply(console,arguments);else{if(!console.log)throw e;console.log.apply(console,arguments)}},clone:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},copy:function(t){return null==t?t:e.is.array(t)?t.slice():e.is.plainObject(t)?e.util.clone(t):t},makeBoundingBox:function(e){if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},mapEmpty:function(e){var t=!0;if(null!=e)for(var i in e){t=!1;break}return t},pushMap:function(t){var i=e.util.getMap(t);null==i?e.util.setMap($.extend({},t,{value:[t.value]})):i.push(t.value)},setMap:function(t){for(var i,r=t.map,n=t.keys,a=n.length,o=0;a>o;o++){var i=n[o];e.is.plainObject(i)&&e.util.error("Tried to set map with object key"),o<n.length-1?(null==r[i]&&(r[i]={}),r=r[i]):r[i]=t.value}},getMap:function(t){for(var i=t.map,r=t.keys,n=r.length,a=0;n>a;a++){var o=r[a];if(e.is.plainObject(o)&&e.util.error("Tried to get map with object key"),i=i[o],null==i)return i}return i},deleteMap:function(t){for(var i=t.map,r=t.keys,n=r.length,a=t.keepChildren,o=0;n>o;o++){var s=r[o];e.is.plainObject(s)&&e.util.error("Tried to delete map with object key");var l=o===t.keys.length-1;if(l)if(a)for(var u in i)a[u]||(i[u]=void 0);else i[s]=void 0;else i=i[s]}},capitalize:function(t){return e.is.emptyString(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},camel2dash:function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i],n=r.toLowerCase(),a=r!==n;a?(t.push("-"),t.push(n)):t.push(r)}var o=t.length===e.length;return o?e:t.join("")},dash2camel:function(e){for(var t=[],i=!1,r=0;r<e.length;r++){var n=e[r],a="-"===n;a?i=!0:(t.push(i?n.toUpperCase():n),i=!1)}return t.join("")},trim:function(e){var t,i;for(t=0;t<e.length&&" "===e[t];t++);for(i=e.length-1;i>t&&" "===e[i];i--);return e.substring(t,i+1)},hex2tuple:function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,i,r,n=4===e.length,a=16;return n?(t=parseInt(e[1]+e[1],a),i=parseInt(e[2]+e[2],a),r=parseInt(e[3]+e[3],a)):(t=parseInt(e[1]+e[2],a),i=parseInt(e[3]+e[4],a),r=parseInt(e[5]+e[6],a)),[t,i,r]}},hsl2tuple:function(t){function i(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+(t-e)*(2/3-i)*6:e}var r,n,a,o,s,l,u,c,d=new RegExp("^"+e.util.regex.hsla+"$").exec(t);if(d){if(n=parseInt(d[1]),0>n?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,a=parseFloat(d[2]),0>a||a>100)return;if(a/=100,o=parseFloat(d[3]),0>o||o>100)return;if(o/=100,s=d[4],void 0!==s&&(s=parseFloat(s),0>s||s>1))return;if(0===a)l=u=c=Math.round(255*o);else{var h=.5>o?o*(1+a):o+a-o*a,p=2*o-h;l=Math.round(255*i(p,h,n+1/3)),u=Math.round(255*i(p,h,n)),c=Math.round(255*i(p,h,n-1/3))}r=[l,u,c,s]}return r},rgb2tuple:function(t){var i,r=new RegExp("^"+e.util.regex.rgba+"$").exec(t);if(r){i=[];for(var n=[],a=1;3>=a;a++){var o=r[a];if("%"===o[o.length-1]&&(n[a]=!0),o=parseFloat(o),n[a]&&(o=o/100*255),0>o||o>255)return;i.push(Math.floor(o))}var s=n[1]||n[2]||n[3],l=n[1]&&n[2]&&n[3];if(s&&!l)return;var u=r[4];if(void 0!==u){if(u=parseFloat(u),0>u||u>1)return;i.push(u)}}return i},colorname2tuple:function(t){return e.util.colors[t.toLowerCase()]},color2tuple:function(t){return(e.is.array(t)?t:null)||e.util.colorname2tuple(t)||e.util.hex2tuple(t)||e.util.rgb2tuple(t)||e.util.hsl2tuple(t)},tuple2hex:function(e){function t(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}var i=e[0],r=e[1],n=e[2];return"#"+t(i)+t(r)+t(n)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},e.util.regex={},e.util.regex.number="(?:[-]?\\d*\\.\\d+|[-]?\\d+|[-]?\\d*\\.\\d+[eE]\\d+)",e.util.regex.rgba="rgb[a]?\\(("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)\\s*,\\s*("+e.util.regex.number+"[%]?)(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)\\s*,\\s*(?:"+e.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hsla="hsl[a]?\\(("+e.util.regex.number+")\\s*,\\s*("+e.util.regex.number+"[%])\\s*,\\s*("+e.util.regex.number+"[%])(?:\\s*,\\s*("+e.util.regex.number+"))?\\)",e.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+e.util.regex.number+")\\s*,\\s*(?:"+e.util.regex.number+"[%])\\s*,\\s*(?:"+e.util.regex.number+"[%])(?:\\s*,\\s*(?:"+e.util.regex.number+"))?\\)",e.util.regex.hex3="\\#[0-9a-fA-F]{3}",e.util.regex.hex6="\\#[0-9a-fA-F]{6}";var i=t?t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame:null;i=i||function(e){e&&setTimeout(e,1e3/60)},e.util.requestAnimationFrame=function(e){i(e)}}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.math={},e.math.signum=function(e){return e>0?1:0>e?-1:0},e.math.distance=function(e,t){var i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},e.math.qbezierAt=function(e,t,i,r){return(1-r)*(1-r)*e+2*(1-r)*r*t+r*r*i},e.math.qbezierPtAt=function(t,i,r,n){return{x:e.math.qbezierAt(t.x,i.x,r.x,n),y:e.math.qbezierAt(t.y,i.y,r.y,n)}},e.math.boundingBoxesIntersect=function(e,t){return e.x1>t.x2?!1:t.x1>e.x2?!1:e.x2<t.x1?!1:t.x2<e.x1?!1:e.y2<t.y1?!1:t.y2<e.y1?!1:e.y1>t.y2?!1:t.y1>e.y2?!1:!0},e.math.inBoundingBox=function(e,t,i){return e.x1<=t&&t<=e.x2&&e.y1<=i&&i<=e.y2},e.math.pointInBoundingBox=function(e,t){return this.inBoundingBox(e,t.x,t.y)},e.math.roundRectangleIntersectLine=function(e,t,i,r,n,a,o){var s,l=this.getRoundRectangleRadius(n,a),u=n/2,c=a/2,d=i-u+l-o,h=r-c-o,p=i+u-l+o,v=h;if(s=this.finiteLinesIntersect(e,t,i,r,d,h,p,v,!1),s.length>0)return s;var f=i+u+o,g=r-c+l-o,y=f,m=r+c-l+o;if(s=this.finiteLinesIntersect(e,t,i,r,f,g,y,m,!1),s.length>0)return s;var x=i-u+l-o,b=r+c+o,w=i+u-l+o,_=b;if(s=this.finiteLinesIntersect(e,t,i,r,x,b,w,_,!1),s.length>0)return s;var P=i-u-o,E=r-c+l-o,S=P,T=r+c-l+o;if(s=this.finiteLinesIntersect(e,t,i,r,P,E,S,T,!1),s.length>0)return s;var k,C=i-u+l,D=r-c+l;if(k=this.intersectLineCircle(e,t,i,r,C,D,l+o),k.length>0&&k[0]<=C&&k[1]<=D)return[k[0],k[1]];var M=i+u-l,N=r-c+l;if(k=this.intersectLineCircle(e,t,i,r,M,N,l+o),k.length>0&&k[0]>=M&&k[1]<=N)return[k[0],k[1]];var I=i+u-l,B=r+c-l;if(k=this.intersectLineCircle(e,t,i,r,I,B,l+o),k.length>0&&k[0]>=I&&k[1]>=B)return[k[0],k[1]];var z=i-u+l,O=r+c-l;return k=this.intersectLineCircle(e,t,i,r,z,O,l+o),k.length>0&&k[0]<=z&&k[1]>=O?[k[0],k[1]]:[]},e.math.roundRectangleIntersectBox=function(e,t,i,r,n,a,o,s,l){var u=this.getRoundRectangleRadius(n,a),c=o-n/2-l,d=s-a/2+u-l,h=o+n/2+l,p=s+a/2-u+l,v=o-n/2+u-l,f=s-a/2-l,g=o+n/2-u+l,y=s+a/2+l,m=Math.min(e,i),x=Math.max(e,i),b=Math.min(t,r),w=Math.max(t,r);return c>x?!1:m>h?!1:f>w?!1:b>y?!1:c>=m&&x>=c&&d>=b&&w>=d?!0:h>=m&&x>=h&&d>=b&&w>=d?!0:h>=m&&x>=h&&p>=b&&w>=p?!0:c>=m&&x>=c&&p>=b&&w>=p?!0:m>=c&&h>=m&&b>=d&&p>=b?!0:x>=c&&h>=x&&b>=d&&p>=b?!0:x>=c&&h>=x&&w>=d&&p>=w?!0:m>=c&&h>=m&&w>=d&&p>=w?!0:v>=m&&x>=v&&f>=b&&w>=f?!0:g>=m&&x>=g&&f>=b&&w>=f?!0:g>=m&&x>=g&&y>=b&&w>=y?!0:v>=m&&x>=v&&y>=b&&w>=y?!0:m>=v&&g>=m&&b>=f&&y>=b?!0:x>=v&&g>=x&&b>=f&&y>=b?!0:x>=v&&g>=x&&w>=f&&y>=w?!0:m>=v&&g>=m&&w>=f&&y>=w?!0:this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,v+l,d+l)?!0:this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,g-l,d+l)?!0:this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,g-l,p-l)?!0:this.boxIntersectEllipse(m,b,x,w,l,2*u,2*u,v+l,p-l)?!0:!1},e.math.checkInBoundingCircle=function(e,t,i,r,n,a,o,s){return e=(e-o)/(n+r),t=(t-s)/(a+r),i>=e*e+t*t},e.math.boxInBezierVicinity=function(e,t,i,r,n,a,o,s,l,u,c){var d=.25*n+.5*o+.25*l,h=.25*a+.5*s+.25*u,p=Math.min(e,i)-c,v=Math.min(t,r)-c,f=Math.max(e,i)+c,g=Math.max(t,r)+c;if(n>=p&&f>=n&&a>=v&&g>=a)return 1;if(l>=p&&f>=l&&u>=v&&g>=u)return 1;if(d>=p&&f>=d&&h>=v&&g>=h)return 1;if(o>=p&&f>=o&&s>=v&&g>=s)return 1;var y=Math.min(n,d,l),m=Math.min(a,h,u),x=Math.max(n,d,l),b=Math.max(a,h,u);return y>f||p>x||m>g||v>b?0:1},e.math.checkBezierInBox=function(t,i,r,n,a,o,s,l,u,c){function d(d){var h=e.math.qbezierAt(a,s,u,d),p=e.math.qbezierAt(o,l,c,d);return h>=t&&r>=h&&p>=i&&n>=p}for(var h=0;1>=h;h+=.25)if(!d(h))return!1;return!0},e.math.checkStraightEdgeInBox=function(e,t,i,r,n,a,o,s){return n>=e&&i>=n&&o>=e&&i>=o&&a>=t&&r>=a&&s>=t&&r>=s},e.math.checkStraightEdgeCrossesBox=function(e,t,i,r,n,a,o,s,l){var u,c,d=Math.min(e,i)-l,h=Math.min(t,r)-l,p=Math.max(e,i)+l,v=Math.max(t,r)+l,f=o-n,g=n,y=s-a,m=a;if(Math.abs(f)<1e-4)return n>=d&&p>=n&&Math.min(a,s)<=h&&Math.max(a,s)>=v;var x=(d-g)/f;if(x>0&&1>=x&&(u=y*x+m,u>=h&&v>=u))return!0;var b=(p-g)/f;if(b>0&&1>=b&&(u=y*b+m,u>=h&&v>=u))return!0;var w=(h-m)/y;if(w>0&&1>=w&&(c=f*w+g,c>=d&&p>=c))return!0;var _=(v-m)/y;return _>0&&1>=_&&(c=f*_+g,c>=d&&p>=c)?!0:!1},e.math.checkBezierCrossesBox=function(e,t,i,r,n,a,o,s,l,u,c){var d=Math.min(e,i)-c,h=Math.min(t,r)-c,p=Math.max(e,i)+c,v=Math.max(t,r)+c;if(n>=d&&p>=n&&a>=h&&v>=a)return!0;if(l>=d&&p>=l&&u>=h&&v>=u)return!0;var f=n-2*o+l,g=-2*n+2*o,y=n,m=[];if(Math.abs(f)<1e-4){var x=(d-n)/g,b=(p-n)/g;m.push(x,b)}else{var w,_,P=g*g-4*f*(y-d);if(P>0){var E=Math.sqrt(P);w=(-g+E)/(2*f),_=(-g-E)/(2*f),m.push(w,_)}var S,T,k=g*g-4*f*(y-p);if(k>0){var E=Math.sqrt(k);S=(-g+E)/(2*f),T=(-g-E)/(2*f),m.push(S,T)}}m.sort(function(e,t){return e-t});var C=a-2*s+u,D=-2*a+2*s,M=a,N=[];if(Math.abs(C)<1e-4){var I=(h-a)/D,B=(v-a)/D;N.push(I,B)}else{var z,O,L=D*D-4*C*(M-h);if(L>0){var E=Math.sqrt(L);z=(-D+E)/(2*C),O=(-D-E)/(2*C),N.push(z,O)}var X,R,Y=D*D-4*C*(M-v);if(Y>0){var E=Math.sqrt(Y);X=(-D+E)/(2*C),R=(-D-E)/(2*C),N.push(X,R)}}N.sort(function(e,t){return e-t});for(var V=0;V<m.length;V+=2)for(var A=1;A<N.length;A+=2)if(m[V]<N[A]&&N[A]>=0&&m[V]<=1&&m[V+1]>N[A-1]&&N[A-1]<=1&&m[V+1]>=0)return!0;return!1},e.math.inLineVicinity=function(e,t,i,r,n,a,o){var s=o,l=Math.min(i,n),u=Math.max(i,n),c=Math.min(r,a),d=Math.max(r,a);return e>=l-s&&u+s>=e&&t>=c-s&&d+s>=t},e.math.inBezierVicinity=function(e,t,i,r,n,a,o,s){var l={x1:Math.min(i,o,n),x2:Math.max(i,o,n),y1:Math.min(r,s,a),y2:Math.max(r,s,a)};return e<l.x1||e>l.x2||t<l.y1||t>l.y2?!1:!0},e.math.solveCubic=function(e,t,i,r,n){t/=e,i/=e,r/=e;var a,o,s,l,u,c,d,h;return o=(3*i-t*t)/9,s=-(27*r)+t*(9*i-2*t*t),s/=54,a=o*o*o+s*s,n[1]=0,d=t/3,a>0?(u=s+Math.sqrt(a),u=0>u?-Math.pow(-u,1/3):Math.pow(u,1/3),c=s-Math.sqrt(a),c=0>c?-Math.pow(-c,1/3):Math.pow(c,1/3),n[0]=-d+u+c,d+=(u+c)/2,n[4]=n[2]=-d,d=Math.sqrt(3)*(-c+u)/2,n[3]=d,void(n[5]=-d)):(n[5]=n[3]=0,0===a?(h=0>s?-Math.pow(-s,1/3):Math.pow(s,1/3),n[0]=-d+2*h,void(n[4]=n[2]=-(h+d))):(o=-o,l=o*o*o,l=Math.acos(s/Math.sqrt(l)),h=2*Math.sqrt(o),n[0]=-d+h*Math.cos(l/3),n[2]=-d+h*Math.cos((l+2*Math.PI)/3),void(n[4]=-d+h*Math.cos((l+4*Math.PI)/3))))},e.math.sqDistanceToQuadraticBezier=function(e,t,i,r,n,a,o,s){var l=1*i*i-4*i*n+2*i*o+4*n*n-4*n*o+o*o+r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s,u=9*i*n-3*i*i-3*i*o-6*n*n+3*n*o+9*r*a-3*r*r-3*r*s-6*a*a+3*a*s,c=3*i*i-6*i*n+i*o-i*e+2*n*n+2*n*e-o*e+3*r*r-6*r*a+r*s-r*t+2*a*a+2*a*t-s*t,d=1*i*n-i*i+i*e-n*e+r*a-r*r+r*t-a*t,h=[];this.solveCubic(l,u,c,d,h);for(var p=1e-7,v=[],f=0;6>f;f+=2)Math.abs(h[f+1])<p&&h[f]>=0&&h[f]<=1&&v.push(h[f]);v.push(1),v.push(0);for(var g,y,m,x,b=-1,w=0;w<v.length;w++)y=Math.pow(1-v[w],2)*i+2*(1-v[w])*v[w]*n+v[w]*v[w]*o,m=Math.pow(1-v[w],2)*r+2*(1-v[w])*v[w]*a+v[w]*v[w]*s,x=Math.pow(y-e,2)+Math.pow(m-t,2),b>=0?b>x&&(b=x,g=v[w]):(b=x,g=v[w]);return b},e.math.sqDistanceToFiniteLine=function(e,t,i,r,n,a){var o=[e-i,t-r],s=[n-i,a-r],l=s[0]*s[0]+s[1]*s[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],d=c*c/l;return 0>c?u:d>l?(e-n)*(e-n)+(t-a)*(t-a):u-d},e.math.pointInsidePolygon=function(e,t,i,r,n,a,o,s,l){var u=new Array(i.length),c=Math.asin(s[1]/Math.sqrt(s[0]*s[0]+s[1]*s[1]));s[0]<0?c+=Math.PI/2:c=-c-Math.PI/2;for(var d=Math.cos(-c),h=Math.sin(-c),p=0;p<u.length/2;p++)u[2*p]=a/2*(i[2*p]*d-i[2*p+1]*h),u[2*p+1]=o/2*(i[2*p+1]*d+i[2*p]*h),u[2*p]+=r,u[2*p+1]+=n;var v;if(l>0){var f=this.expandPolygon(u,-l);v=this.joinLines(f)}else v=u;for(var g,y,m,x,b,w=0,_=0,p=0;p<v.length/2;p++)if(g=v[2*p],y=v[2*p+1],p+1<v.length/2?(m=v[2*(p+1)],x=v[2*(p+1)+1]):(m=v[2*(p+1-v.length/2)],x=v[2*(p+1-v.length/2)+1]),g==e&&m==e);else{if(!(g>=e&&e>=m||e>=g&&m>=e))continue;b=(e-g)/(m-g)*(x-y)+y,b>t&&w++,t>b&&_++}return w%2===0?!1:!0},e.math.joinLines=function(e){for(var t,i,r,n,a,o,s,l,u=new Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],i=e[4*c+1],r=e[4*c+2],n=e[4*c+3],c<e.length/4-1?(a=e[4*(c+1)],o=e[4*(c+1)+1],s=e[4*(c+1)+2],l=e[4*(c+1)+3]):(a=e[0],o=e[1],s=e[2],l=e[3]);var d=this.finiteLinesIntersect(t,i,r,n,a,o,s,l,!0);u[2*c]=d[0],u[2*c+1]=d[1]}return u},e.math.expandPolygon=function(e,t){for(var i,r,n,a,o=new Array(2*e.length),s=0;s<e.length/2;s++){i=e[2*s],r=e[2*s+1],s<e.length/2-1?(n=e[2*(s+1)],a=e[2*(s+1)+1]):(n=e[0],a=e[1]);var l=a-r,u=-(n-i),c=Math.sqrt(l*l+u*u),d=l/c,h=u/c;o[4*s]=i+d*t,o[4*s+1]=r+h*t,o[4*s+2]=n+d*t,o[4*s+3]=a+h*t}return o},e.math.intersectLineEllipse=function(e,t,i,r,n,a){var o=i-e,s=r-t;o/=n,s/=a;var l=Math.sqrt(o*o+s*s),u=l-1;if(0>u)return[];var c=u/l;return[(i-e)*c+e,(r-t)*c+t]},e.math.dotProduct=function(e,t){if(2!=e.length||2!=t.length)throw"dot product: arguments are not vectors";return e[0]*t[0]+e[1]*t[1]},e.math.intersectLineCircle=function(e,t,i,r,n,a,o){var s=[i-e,r-t],l=[n,a],u=[e-n,t-a],c=s[0]*s[0]+s[1]*s[1],d=2*(u[0]*s[0]+u[1]*s[1]),l=u[0]*u[0]+u[1]*u[1]-o*o,h=d*d-4*c*l;if(0>h)return[];var p=(-d+Math.sqrt(h))/(2*c),v=(-d-Math.sqrt(h))/(2*c),f=Math.min(p,v),g=Math.max(p,v),y=[];if(f>=0&&1>=f&&y.push(f),g>=0&&1>=g&&y.push(g),0===y.length)return[];var m=y[0]*s[0]+e,x=y[0]*s[1]+t;if(y.length>1){if(y[0]==y[1])return[m,x];var b=y[1]*s[0]+e,w=y[1]*s[1]+t;return[m,x,b,w]}return[m,x]},e.math.findCircleNearPoint=function(e,t,i,r,n){var a=r-e,o=n-t,s=Math.sqrt(a*a+o*o),l=a/s,u=o/s;return[e+l*i,t+u*i]},e.math.findMaxSqDistanceToOrigin=function(e){for(var t,i=1e-6,r=0;r<e.length/2;r++)t=e[2*r]*e[2*r]+e[2*r+1]*e[2*r+1],t>i&&(i=t);return i},e.math.finiteLinesIntersect=function(e,t,i,r,n,a,o,s,l){var u=(o-n)*(t-a)-(s-a)*(e-n),c=(i-e)*(t-a)-(r-t)*(e-n),d=(s-a)*(i-e)-(o-n)*(r-t);if(0!==d){var h=u/d,p=c/d;return h>=0&&1>=h&&p>=0&&1>=p?[e+h*(i-e),t+h*(r-t)]:l?[e+h*(i-e),t+h*(r-t)]:[]}return 0===u||0===c?[e,i,o].sort()[1]===o?[o,s]:[e,i,n].sort()[1]===n?[n,a]:[n,o,i].sort()[1]===i?[i,r]:[]:[]},e.math.boxIntersectEllipse=function(e,t,i,r,n,a,o,s,l){if(e>i){var u=e;e=i,i=u}if(t>r){var c=t;t=r,r=c}var d=[s-a/2-n,l],h=[s+a/2+n,l],p=[s,l-o/2-n],v=[s,l+o/2+n];return i<d[0]?!1:e>h[0]?!1:t>v[1]?!1:r<p[1]?!1:e<=h[0]&&h[0]<=i&&t<=h[1]&&h[1]<=r?!0:e<=d[0]&&d[0]<=i&&t<=d[1]&&d[1]<=r?!0:e<=p[0]&&p[0]<=i&&t<=p[1]&&p[1]<=r?!0:e<=v[0]&&v[0]<=i&&t<=v[1]&&v[1]<=r?!0:(e=(e-s)/(a/2+n),i=(i-s)/(a/2+n),t=(t-l)/(o/2+n),r=(r-l)/(o/2+n),1>=e*e+t*t?!0:1>=i*i+t*t?!0:1>=i*i+r*r?!0:1>=e*e+r*r?!0:!1)},e.math.boxIntersectPolygon=function(t,i,r,n,a,o,s,l,u,c,d){if(t>r){var h=t;t=r,r=h}if(i>n){var p=i;i=n,n=p}var v=new Array(a.length),f=Math.asin(c[1]/Math.sqrt(c[0]*c[0]+c[1]*c[1]));c[0]<0?f+=Math.PI/2:f=-f-Math.PI/2;for(var g=Math.cos(-f),y=Math.sin(-f),m=0;m<v.length/2;m++)v[2*m]=o/2*(a[2*m]*g-a[2*m+1]*y),v[2*m+1]=s/2*(a[2*m+1]*g+a[2*m]*y),v[2*m]+=l,v[2*m+1]+=u;for(var x=v[0],b=v[0],w=v[1],_=v[1],m=1;m<v.length/2;m++)v[2*m]>b&&(b=v[2*m]),v[2*m]<x&&(x=v[2*m]),v[2*m+1]>_&&(_=v[2*m+1]),v[2*m+1]<w&&(w=v[2*m+1]);if(x-d>r)return!1;if(t>b+d)return!1;if(w-d>n)return!1;if(i>_+d)return!1;var P;if(d>0){var E=e.math.expandPolygon(v,-d);P=e.math.joinLines(E)}else P=v;for(var m=0;m<v.length/2;m++)if(t<=v[2*m]&&v[2*m]<=r&&i<=v[2*m+1]&&v[2*m+1]<=n)return!0;for(var m=0;m<P.length/2;m++){var S,T,k=P[2*m],C=P[2*m+1];if(m<P.length/2-1?(S=P[2*(m+1)],T=P[2*(m+1)+1]):(S=P[0],T=P[1]),e.math.finiteLinesIntersect(k,C,S,T,t,i,r,i,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,C,S,T,t,n,r,n,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,C,S,T,t,i,t,n,!1).length>0)return!0;if(e.math.finiteLinesIntersect(k,C,S,T,r,i,r,n,!1).length>0)return!0}return!1},e.math.polygonIntersectLine=function(t,i,r,n,a,o,s,l){for(var u,c=[],d=new Array(r.length),h=0;h<d.length/2;h++)d[2*h]=r[2*h]*o+n,d[2*h+1]=r[2*h+1]*s+a;var p;if(l>0){var v=e.math.expandPolygon(d,-l);p=e.math.joinLines(v)}else p=d;for(var f,g,y,m,h=0;h<p.length/2;h++)f=p[2*h],g=p[2*h+1],h<p.length/2-1?(y=p[2*(h+1)],m=p[2*(h+1)+1]):(y=p[0],m=p[1]),u=this.finiteLinesIntersect(t,i,n,a,f,g,y,m),0!==u.length&&c.push(u[0],u[1]);return c},e.math.shortenIntersection=function(e,t,i){var r=[e[0]-t[0],e[1]-t[1]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(n-i)/n;return 0>a&&(a=1e-5),[t[0]+a*r[0],t[1]+a*r[1]]},e.math.generateUnitNgonPointsFitToSquare=function(t,i){var r=e.math.generateUnitNgonPoints(t,i);return r=e.math.fitPolygonToSquare(r)},e.math.fitPolygonToSquare=function(e){for(var t,i,r=e.length/2,n=1/0,a=1/0,o=-1/0,s=-1/0,l=0;r>l;l++)t=e[2*l],i=e[2*l+1],n=Math.min(n,t),o=Math.max(o,t),a=Math.min(a,i),s=Math.max(s,i);for(var u=2/(o-n),c=2/(s-a),l=0;r>l;l++)t=e[2*l]=e[2*l]*u,i=e[2*l+1]=e[2*l+1]*c,n=Math.min(n,t),o=Math.max(o,t),a=Math.min(a,i),s=Math.max(s,i);if(-1>a)for(var l=0;r>l;l++)i=e[2*l+1]=e[2*l+1]+(-1-a);return e},e.math.generateUnitNgonPoints=function(e,t){var i=1/e*2*Math.PI,r=e%2===0?Math.PI/2+i/2:Math.PI/2;r+=t;for(var n,a,o,s=new Array(2*e),l=0;e>l;l++)n=l*i+r,a=s[2*l]=Math.cos(n),o=s[2*l+1]=Math.sin(-n);return s},e.math.getRoundRectangleRadius=function(e,t){return Math.min(e/4,t/4,8)}}(cytoscape),function(e){"use strict";function t(t,i,r){var n={};switch(n[i]=r,t){case"core":case"collection":e.fn[t](n)}if("layout"===t){for(var o=r.prototype,s=["stop"],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this}),o.on=e.define.on({layout:!0}),o.one=e.define.on({layout:!0,unbindSelfOnTrigger:!0}),o.once=e.define.on({layout:!0,unbindAllBindersOnTrigger:!0}),o.off=e.define.off({layout:!0}),o.trigger=e.define.trigger({layout:!0}),o.bind=o.on,o.unbind=o.off}return e.util.setMap({map:a,keys:[t,i],value:r})}function i(t,i){return e.util.getMap({map:a,keys:[t,i]})}function r(t,i,r,n,a){return e.util.setMap({map:o,keys:[t,i,r,n],value:a})}function n(t,i,r,n){return e.util.getMap({map:o,keys:[t,i,r,n]})}var a={};e.extensions=a;var o={};e.modules=o,e.extension=function(){return 2==arguments.length?i.apply(this,arguments):3==arguments.length?t.apply(this,arguments):4==arguments.length?n.apply(this,arguments):5==arguments.length?r.apply(this,arguments):void e.util.error("Invalid extension access syntax")}}(cytoscape),function(e,t){"use strict";if(e){var i=function(e){var t=e[0]._cyreg=e[0]._cyreg||{};return t};e.fn.cytoscape=function(r){var n=e(this);if("get"===r)return i(n).cy;if(t.is.fn(r)){var a=r,o=i(n).cy;if(o&&o.isReady())o.trigger("ready",[],a);else{var s=i(n),l=s.readies=s.readies||[];l.push(a)}}else if(t.is.plainObject(r))return n.each(function(){var t=e.extend({},r,{container:e(this)[0]});cytoscape(t)})},e.cytoscape=cytoscape,null==e.fn.cy&&null==e.cy&&(e.fn.cy=e.fn.cytoscape,e.cy=e.cytoscape)}}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(e){"use strict";function t(){return!1}function i(){return!0}e.Event=function(r,n){return this instanceof e.Event?(r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented?i:t):this.type=r,n&&(this.type=void 0!==n.type?n.type:this.type,this.cy=n.cy,this.cyTarget=n.cyTarget,this.cyPosition=n.cyPosition,this.cyRenderedPosition=n.cyRenderedPosition,this.namespace=n.namespace,this.layout=n.layout,this.data=n.data),void(this.timeStamp=r&&r.timeStamp||+new Date)):new e.Event(r,n)},e.Event.prototype={preventDefault:function(){this.isDefaultPrevented=i;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=i;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},isDefaultPrevented:t,isPropagationStopped:t,isImmediatePropagationStopped:t}}(cytoscape),function(e){"use strict";e.define={data:function(t){var i={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,onSet:function(){},canSet:function(){return!0}};return t=e.util.extend({},i,t),function(i,r){var n=t,a=this,o=void 0!==a.length,s=o?a:[a],l=o?a[0]:a;if(e.is.string(i)){if(n.allowGetting&&void 0===r){var u;return l&&(u=l._private[n.field][i]),u}if(n.allowSetting&&void 0!==r){var c=!n.immutableKeys[i];if(c){for(var d=0,h=s.length;h>d;d++)n.canSet(s[d])&&(s[d]._private[n.field][i]=r);n.updateStyle&&a.updateStyle(),n.onSet(a),n.settingTriggersEvent&&a[n.triggerFnName](n.settingEvent)}}}else if(n.allowSetting&&e.is.plainObject(i)){var p,v,f=i;for(p in f){v=f[p];var c=!n.immutableKeys[p];if(c)for(var d=0,h=s.length;h>d;d++)n.canSet(s[d])&&(s[d]._private[n.field][p]=v)}n.updateStyle&&a.updateStyle(),n.onSet(a),n.settingTriggersEvent&&a[n.triggerFnName](n.settingEvent)}else if(n.allowBinding&&e.is.fn(i)){var g=i;a.bind(n.bindingEvent,g)}else if(n.allowGetting&&void 0===i){var u;return l&&(u=l._private[n.field]),u}return a}},removeData:function(t){var i={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=e.util.extend({},i,t),function(i){var r=t,n=this,a=void 0!==n.length,o=a?n:[n];if(e.is.string(i)){for(var s=i.split(/\s+/),l=s.length,u=0;l>u;u++){var c=s[u];if(!e.is.emptyString(c)){var d=!r.immutableKeys[c];if(d)for(var h=0,p=o.length;p>h;h++)o[h]._private[r.field][c]=void 0}}r.triggerEvent&&n[r.triggerFnName](r.event)}else if(void 0===i){for(var h=0,p=o.length;p>h;h++){var v=o[h]._private[r.field];for(var c in v){var f=!r.immutableKeys[c];f&&(v[c]=void 0)}}r.triggerEvent&&n[r.triggerFnName](r.event)}return n}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,falseCallback:function(){return!1}},on:function(t){var i={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return t=e.util.extend({},i,t),function(i,r,n,a){var o=this,s=void 0!==o.length,l=s?o:[o],u=e.is.string(i),c=t;if(e.is.plainObject(r)?(a=n,n=r,r=void 0):(e.is.fn(r)||r===!1)&&(a=r,n=void 0,r=void 0),(e.is.fn(n)||n===!1)&&(a=n,n=void 0),!e.is.fn(a)&&a!==!1&&u)return o;if(u){var d={};d[i]=a,i=d}for(var h in i)if(a=i[h],a===!1&&(a=e.define.event.falseCallback),e.is.fn(a)){h=h.split(/\s+/);for(var p=0;p<h.length;p++){var v=h[p];if(!e.is.emptyString(v)){var f=v.match(e.define.event.regex);if(f)for(var g=f[1],y=f[2]?f[2]:void 0,m={callback:a,data:n,delegated:r?!0:!1,selector:r,selObj:new e.Selector(r),type:g,namespace:y,unbindSelfOnTrigger:c.unbindSelfOnTrigger,unbindAllBindersOnTrigger:c.unbindAllBindersOnTrigger,binders:l},x=0;x<l.length;x++)l[x]._private.listeners.push(m)}}}return o}},off:function(t){var i={};return t=e.util.extend({},i,t),function(t,i,r){var n=this,a=void 0!==n.length,o=a?n:[n],s=e.is.string(t);if(0===arguments.length){for(var l=0;l<o.length;l++)o[l]._private.listeners=[];return n}if((e.is.fn(i)||i===!1)&&(r=i,i=void 0),s){var u={};u[t]=r,t=u}for(var c in t){r=t[c],r===!1&&(r=e.define.event.falseCallback),c=c.split(/\s+/);for(var d=0;d<c.length;d++){var h=c[d];if(!e.is.emptyString(h)){var p=h.match(e.define.event.optionalTypeRegex);if(p)for(var v=p[1]?p[1]:void 0,f=p[2]?p[2]:void 0,l=0;l<o.length;l++)for(var g=o[l]._private.listeners,y=0;y<g.length;y++){var m=g[y],x=!f||f===m.namespace,b=!v||m.type===v,w=!r||r===m.callback,_=x&&b&&w;_&&(g.splice(y,1),y--)
}}}}return n}},trigger:function(t){var i={};return t=e.util.extend({},i,t),function(i,r,n){var a=this,o=void 0!==a.length,s=o?a:[a],l=e.is.string(i),u=e.is.plainObject(i),c=e.is.event(i),d=this._private.cy||this,h=d.hasCompoundNodes();if(l){var p=i.split(/\s+/);i=[];for(var v=0;v<p.length;v++){var f=p[v];if(!e.is.emptyString(f)){var g=f.match(e.define.event.regex),y=g[1],m=g[2]?g[2]:void 0;i.push({type:y,namespace:m})}}}else if(u){var x=i;i=[x]}r?e.is.array(r)||(r=[r]):r=[];for(var v=0;v<i.length;v++)for(var b=i[v],w=0;w<s.length;w++){var f,_=s[w],P=_._private.listeners,E=e.is.element(_),S=E||t.layout;if(c?(f=b,f.cyTarget=f.cyTarget||_,f.cy=f.cy||d):f=new e.Event(b,{cyTarget:_,cy:d,namespace:b.namespace}),b.layout&&(f.layout=b.layout),t.layout&&(f.layout=_),f.cyPosition){var T=f.cyPosition,k=d.zoom(),C=d.pan();f.cyRenderedPosition={x:T.x*k+C.x,y:T.y*k+C.y}}n&&(P=[{namespace:f.namespace,type:f.type,callback:n}]);for(var D=0;D<P.length;D++){var M=P[D],N=!M.namespace||M.namespace===f.namespace,I=M.type===f.type,B=M.delegated?_!==f.cyTarget&&e.is.element(f.cyTarget)&&M.selObj.matches(f.cyTarget):!0,z=N&&I&&B;if(z){var O=[f];if(O=O.concat(r),f.data=M.data?M.data:void 0,(M.unbindSelfOnTrigger||M.unbindAllBindersOnTrigger)&&(P.splice(D,1),D--),M.unbindAllBindersOnTrigger)for(var L=M.binders,X=0;X<L.length;X++){var R=L[X];if(R&&R!==_)for(var Y=R._private.listeners,V=0;V<Y.length;V++){var A=Y[V];A===M&&(Y.splice(V,1),V--)}}var q=M.delegated?f.cyTarget:_,F=M.callback.apply(q,O);(F===!1||f.isPropagationStopped())&&(S=!1,F===!1&&(f.stopPropagation(),f.preventDefault()))}}if(S){var j=h?_._private.parent:null,W=null!=j&&0!==j.length;W?(j=j[0],j.trigger(f)):d.trigger(f)}}return a}},animated:function(t){var i={};return t=e.util.extend({},i,t),function(){var e=this,t=void 0!==e.length,i=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return!1;var n=i[0];return n?n._private.animation.current.length>0:void 0}},clearQueue:function(t){var i={};return t=e.util.extend({},i,t),function(){var e=this,t=void 0!==e.length,i=t?e:[e],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var n=0;n<i.length;n++){var a=i[n];a._private.animation.queue=[]}return this}},delay:function(t){var i={};return t=e.util.extend({},i,t),function(e,t){var i=this._private.cy||this;return i.styleEnabled()?(this.animate({delay:e},{duration:e,complete:t}),this):this}},animate:function(t){var i={};return t=e.util.extend({},i,t),function(e,t){var i=this,r=void 0!==i.length,n=r?i:[i],a=this._private.cy||this,o=!r,s=!o;if(!a.styleEnabled())return this;var l,u=+new Date,c=a.style();switch(void 0===t&&(t={}),void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}var d=!0;if(e)for(var h in e){d=!1;break}if(d)return this;if(e.css&&s&&(e.css=c.getValueStyle(e.css,{array:!0})),e.renderedPosition&&s){var p=e.renderedPosition,v=a.pan(),f=a.zoom();e.position={x:(p.x-v.x)/f,y:(p.y-v.y)/f}}if(e.panBy&&o){var g=e.panBy,y=a.pan();e.pan={x:y.x+g.x,y:y.y+g.y}}var m=e.center||e.centre;if(m&&o){var x=a.getCenterPan(m.eles,e.zoom);x&&(e.pan=x)}if(e.fit&&o){var b=e.fit,w=a.getFitViewport(b.eles||b.boundingBox,b.padding);w&&(e.pan=w.pan,e.zoom=w.zoom)}for(var h=0;h<n.length;h++){var _=n[h];l=_.animated()&&(void 0===t.queue||t.queue)?_._private.animation.queue:_._private.animation.current,l.push({properties:e,duration:t.duration,params:t,callTime:u})}return s&&a.addToAnimationPool(this),this}},stop:function(t){var i={};return t=e.util.extend({},i,t),function(e,t){var i=this,r=void 0!==i.length,n=r?i:[i],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<n.length;o++){for(var s=n[o],l=s._private.animation.current,u=0;u<l.length;u++){var c=l[u];t&&(c.duration=0)}e&&(s._private.animation.queue=[]),t||(s._private.animation.current=[])}return a.notify({collection:this,type:"draw"}),this}}}}(cytoscape),function(e){"use strict";e.fn.selector=function(t){for(var i in t){var r=t[i];e.Selector.prototype[i]=r}},e.Selector=function(t,i){if(!(this instanceof e.Selector))return new e.Selector(t,i);void 0===i&&void 0!==t&&(i=t,t=void 0);var r=this;if(r._private={selectorText:null,invalid:!0},!i||e.is.string(i)&&i.match(/^\s*$/))null==t?r.length=0:(r[0]=o(),r[0].group=t,r.length=1);else if(e.is.element(i)){var n=new e.Collection(r.cy(),[i]);r[0]=o(),r[0].collection=n,r.length=1}else if(e.is.collection(i))r[0]=o(),r[0].collection=i,r.length=1;else if(e.is.fn(i))r[0]=o(),r[0].filter=i,r.length=1;else{if(!e.is.string(i))return void e.util.error("A selector must be created from a string; found "+i);var a=null,o=function(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}},s={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:'"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",number:e.util.regex.number,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$"};s.variable="(?:[\\w-]|(?:\\\\"+s.metaChar+"))+",s.value=s.string+"|"+s.number,s.className=s.variable,s.id=s.variable;for(var l=function(e){return e.replace(new RegExp("\\\\("+s.metaChar+")","g"),function(e,t){return t})},u=s.comparatorOp.split("|"),c=0;c<u.length;c++){var d=u[c];s.comparatorOp+="|@"+d}for(var u=s.comparatorOp.split("|"),c=0;c<u.length;c++){var d=u[c];d.indexOf("!")>=0||"="!==d&&(s.comparatorOp+="|\\!"+d)}var h={group:{query:!0,regex:"(node|edge|\\*)",populate:function(e){this.group="*"==e?e:e+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:transparent|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:orphan|:nonorphan|:parent|:child|:loop|:simple|:active|:inactive|:touch)",populate:function(e){this.colonSelectors.push(e)}},id:{query:!0,regex:"\\#("+s.id+")",populate:function(e){this.ids.push(l(e))}},className:{query:!0,regex:"\\.("+s.className+")",populate:function(e){this.classes.push(l(e))}},dataExists:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*\\]",populate:function(e){this.data.push({field:l(e)})}},dataCompare:{query:!0,regex:"\\[\\s*("+s.variable+")\\s*("+s.comparatorOp+")\\s*("+s.value+")\\s*\\]",populate:function(e,t,i){var r=null!=new RegExp("^"+s.string+"$").exec(i);i=r?i.substring(1,i.length-1):parseFloat(i),this.data.push({field:l(e),operator:t,value:i})}},dataBool:{query:!0,regex:"\\[\\s*("+s.boolOp+")\\s*("+s.variable+")\\s*\\]",populate:function(e,t){this.data.push({field:l(t),operator:e})}},metaCompare:{query:!0,regex:"\\[\\[\\s*("+s.meta+")\\s*("+s.comparatorOp+")\\s*("+s.number+")\\s*\\]\\]",populate:function(e,t,i){this.meta.push({field:l(e),operator:t,value:parseFloat(i)})}},nextQuery:{separator:!0,regex:s.separator,populate:function(){r[++c]=o(),a=null}},child:{separator:!0,regex:s.child,populate:function(){var e=o();e.parent=this,e.subject=a,r[c]=e}},descendant:{separator:!0,regex:s.descendant,populate:function(){var e=o();e.ancestor=this,e.subject=a,r[c]=e}},subject:{modifier:!0,regex:s.subject,populate:function(){return null!=a&&this.subject!=this?(e.util.error("Redefinition of subject in selector `"+i+"`"),!1):(a=this,void(this.subject=this))}}},p=0;for(var v in h)h[p]=h[v],h[p].name=v,p++;h.length=p,r._private.selectorText=i;var f=i,c=0,g=function(t){for(var i,r,n,a=0;a<h.length;a++){var o=h[a],s=o.name;if(!e.is.fn(t)||t(s,o)){var l=f.match(new RegExp("^"+o.regex));if(null!=l){r=l,i=o,n=s;var u=l[0];f=f.substring(u.length);break}}}return{expr:i,match:r,name:n}},y=function(){var e=f.match(/^\s+/);if(e){var t=e[0];f=f.substring(t.length)}};for(r[0]=o(),y();;){var m=g();if(null==m.expr)return void e.util.error("The selector `"+i+"`is invalid");for(var x=[],p=1;p<m.match.length;p++)x.push(m.match[p]);var b=m.expr.populate.apply(r[c],x);if(b===!1)return;if(f.match(/^\s*$/))break}for(r.length=c+1,p=0;p<r.length;p++){var w=r[p];if(null!=w.subject){for(;w.subject!=w;)if(null!=w.parent){var _=w.parent,P=w;P.parent=null,_.child=P,w=_}else{if(null==w.ancestor){e.util.error("When adjusting references for the selector `"+w+"`, neither parent nor ancestor was found");break}var E=w.ancestor,S=w;S.ancestor=null,E.descendant=S,w=E}r[p]=w.subject}}if(null!=t)for(var p=0;p<r.length;p++){if(null!=r[p].group&&r[p].group!=t)return void e.util.error("Group `"+r[p].group+"` conflicts with implicit group `"+t+"` in selector `"+i+"`");r[p].group=t}}r._private.invalid=!1},e.selfn=e.Selector.prototype,e.selfn.size=function(){return this.length},e.selfn.eq=function(e){return this[e]},e.selfn.find=function(){};var t=function(i,r){if(null!=i.group&&"*"!=i.group&&i.group!=r._private.group)return!1;for(var n=r.cy(),a=!0,o=0;o<i.colonSelectors.length;o++){var s=i.colonSelectors[o];switch(s){case":selected":a=r.selected();break;case":unselected":a=!r.selected();break;case":selectable":a=r.selectable();break;case":unselectable":a=!r.selectable();break;case":locked":a=r.locked();break;case":unlocked":a=!r.locked();break;case":visible":a=r.visible();break;case":hidden":a=!r.visible();break;case":transparent":a=r.transparent();break;case":grabbed":a=r.grabbed();break;case":free":a=!r.grabbed();break;case":removed":a=r.removed();break;case":inside":a=!r.removed();break;case":grabbable":a=r.grabbable();break;case":ungrabbable":a=!r.grabbable();break;case":animated":a=r.animated();break;case":unanimated":a=!r.animated();break;case":parent":a=r.isNode()&&r.children().nonempty();break;case":child":case":nonorphan":a=r.isNode()&&r.parent().nonempty();break;case":orphan":a=r.isNode()&&r.parent().empty();break;case":loop":a=r.isEdge()&&r.data("source")===r.data("target");break;case":simple":a=r.isEdge()&&r.data("source")!==r.data("target");break;case":active":a=r.active();break;case":inactive":a=!r.active();break;case":touch":a=e.is.touch()}if(!a)break}if(!a)return!1;for(var l=!0,o=0;o<i.ids.length;o++){var u=i.ids[o],c=r._private.data.id;if(l=l&&u==c,!l)break}if(!l)return!1;for(var d=!0,o=0;o<i.classes.length;o++){var h=i.classes[o];if(d=d&&r.hasClass(h),!d)break}if(!d)return!1;var p=function(t){for(var r=!0,n=0;n<i[t.name].length;n++){var a,o=i[t.name][n],s=o.operator,l=o.value,u=o.field;if(null!=s&&null!=l){var c=t.fieldValue(u),d=e.is.string(c)||e.is.number(c)?""+c:"",h=""+l,p=!1;s.indexOf("@")>=0&&(d=d.toLowerCase(),h=h.toLowerCase(),s=s.replace("@",""),p=!0);var v=!1,f=!1;switch(s.indexOf("!")>=0&&(s=s.replace("!",""),v=!0),p&&(l=h.toLowerCase(),c=d.toLowerCase()),s){case"*=":a=d.search(h)>=0;break;case"$=":a=null!=new RegExp(h+"$").exec(d);break;case"^=":a=null!=new RegExp("^"+h).exec(d);break;case"=":a=c===l;break;case"!=":a=c!==l;break;case">":a=v?l>=c:c>l,f=!0;break;case">=":a=v?l>c:c>=l,f=!0;break;case"<":a=v?c>=l:l>c,f=!0;break;case"<=":a=v?c>l:l>=c,f=!0;break;default:a=!1}}else if(null!=s)switch(s){case"?":a=t.fieldTruthy(u);break;case"!":a=!t.fieldTruthy(u);break;case"^":a=t.fieldUndefined(u)}else a=!t.fieldUndefined(u);if(v&&!f&&(a=!a,f=!0),!a){r=!1;break}}return r},v=p({name:"data",fieldValue:function(e){return r._private.data[e]},fieldRef:function(e){return"element._private.data."+e},fieldUndefined:function(e){return void 0===r._private.data[e]},fieldTruthy:function(e){return r._private.data[e]?!0:!1}});if(!v)return!1;var f=p({name:"meta",fieldValue:function(e){return r[e]()},fieldRef:function(e){return"element."+e+"()"},fieldUndefined:function(e){return null==r[e]()},fieldTruthy:function(e){return r[e]()?!0:!1}});if(!f)return!1;if(null!=i.collection){var g=null!=i.collection._private.ids[r.id()];if(!g)return!1}if(null!=i.filter&&0===r.collection().filter(i.filter).size())return!1;var y=function(e,i){if(null!=e){var r=!1;if(!n.hasCompoundNodes())return!1;i=i();for(var a=0;a<i.length;a++)if(t(e,i[a])){r=!0;break}return r}return!0};return y(i.parent,function(){return r.parent()})&&y(i.ancestor,function(){return r.parents()})&&y(i.child,function(){return r.children()})&&y(i.descendant,function(){return r.descendants()})?!0:!1};e.selfn.filter=function(i){var r=this,n=i.cy();if(r._private.invalid)return new e.Collection(n);var a=function(e,i){for(var n=0;n<r.length;n++){var a=r[n];if(t(a,i))return!0}return!1};null==r._private.selectorText&&(a=function(){return!0});var o=i.filter(a);return o},e.selfn.matches=function(e){var i=this;if(i._private.invalid)return!1;for(var r=0;r<i.length;r++){var n=i[r];if(t(n,e))return!0}return!1},e.selfn.toString=e.selfn.selector=function(){for(var t="",i=function(t){return e.is.string(t)?t:""},r=function(e){var t="",a=i(e.group);t+=a.substring(0,a.length-1);for(var o=0;o<e.data.length;o++){var s=e.data[o];t+=s.value?"["+s.field+i(s.operator)+i(s.value)+"]":"["+i(s.operator)+s.field+"]"}for(var o=0;o<e.meta.length;o++){var l=e.meta[o];t+="[["+l.field+i(l.operator)+i(l.value)+"]]"}for(var o=0;o<e.colonSelectors.length;o++){var u=e.colonSelectors[n];t+=u}for(var o=0;o<e.ids.length;o++){var u="#"+e.ids[n];t+=u}for(var o=0;o<e.classes.length;o++){var u="."+e.classes[n];t+=u}return null!=e.parent&&(t=r(e.parent)+" > "+t),null!=e.ancestor&&(t=r(e.ancestor)+" "+t),null!=e.child&&(t+=" > "+r(e.child)),null!=e.descendant&&(t+=" "+r(e.descendant)),t},n=0;n<this.length;n++){var a=this[n];t+=r(a),this.length>1&&n<this.length-1&&(t+=", ")}return t}}(cytoscape),function(e){"use strict";e.Style=function(t){return this instanceof e.Style?e.is.core(t)?(this._private={cy:t,coreStyle:{},newStyle:!0},this.length=0,void this.addDefaultStylesheet()):void e.util.error("A style must have a core reference"):new e.Style(t)},e.style=e.Style,e.styfn=e.Style.prototype,e.fn.style=function(t){for(var i in t){var r=t[i];e.Style.prototype=r}},function(){var t=e.util.regex.number,i=e.util.regex.rgbaNoBackRefs,r=e.util.regex.hslaNoBackRefs,n=e.util.regex.hex3,a=e.util.regex.hex6,o=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(e){return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+t+"|\\w+|"+i+"|"+r+"|"+n+"|"+a+")\\s*\\,\\s*("+t+"|\\w+|"+i+"|"+r+"|"+n+"|"+a+")\\)$"};e.style.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%"},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},autoSize:{number:!0,min:0,enums:["auto"]},number:{number:!0},size:{number:!0,min:0},bgSize:{number:!0,min:0,allowPercent:!0},bgPos:{number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},bgFit:{enums:["none","contain","cover"]},bgClip:{enums:["none","node"]},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon","star"]},arrowShape:{enums:["tee","triangle","triangle-tee","triangle-backcurve","half-triangle-overshot","square","circle","diamond","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},text:{string:!0},data:{mapping:!0,regex:o("data")},layoutData:{mapping:!0,regex:o("layoutData")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"},propList:{propList:!0},angle:{number:!0,units:"deg|rad"}};var l=e.style.types,u=e.style.properties=[{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"content",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-transform",type:l.textTransform},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"min-zoomed-font-size",type:l.size},{name:"display",type:l.display},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"height",type:l.autoSize},{name:"width",type:l.autoSize},{name:"shape",type:l.nodeShape},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.borderStyle},{name:"background-image",type:l.url},{name:"background-image-opacity",type:l.zeroOneNumber},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"position",type:l.position},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"control-point-step-size",type:l.size},{name:"control-point-distance",type:l.number},{name:"control-point-weight",type:l.zeroOneNumber},{name:"curve-style",type:l.curveStyle},{name:"haystack-radius",type:l.zeroOneNumber},{name:"source-arrow-shape",type:l.arrowShape},{name:"target-arrow-shape",type:l.arrowShape},{name:"mid-source-arrow-shape",type:l.arrowShape},{name:"mid-target-arrow-shape",type:l.arrowShape},{name:"source-arrow-color",type:l.color},{name:"target-arrow-color",type:l.color},{name:"mid-source-arrow-color",type:l.color},{name:"mid-target-arrow-color",type:l.color},{name:"source-arrow-fill",type:l.arrowFill},{name:"target-arrow-fill",type:l.arrowFill},{name:"mid-source-arrow-fill",type:l.arrowFill},{name:"mid-target-arrow-fill",type:l.arrowFill},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}];e.style.pieBackgroundN=16,u.push({name:"pie-size",type:l.bgSize});for(var c=1;c<=e.style.pieBackgroundN;c++)u.push({name:"pie-"+c+"-background-color",type:l.color}),u.push({name:"pie-"+c+"-background-size",type:l.percent}),u.push({name:"pie-"+c+"-background-opacity",type:l.zeroOneNumber});for(var c=0;c<u.length;c++){var d=u[c];u[d.name]=d}}(),e.styfn.addDefaultStylesheet=function(){var t="Helvetica",i="normal",r="normal",n="#000",a="none",o=16;this.selector("node, edge").css({"text-valign":"top","text-halign":"center",color:n,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":a,"font-family":t,"font-style":i,"font-weight":r,"font-size":o,"min-zoomed-font-size":0,visibility:"visible",display:"element",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"background-blacken":0,"background-color":"#888","background-opacity":1,"background-image":"none","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,position:"origin","pie-size":"100%","pie-1-background-color":"black","pie-2-background-color":"black","pie-3-background-color":"black","pie-4-background-color":"black","pie-5-background-color":"black","pie-6-background-color":"black","pie-7-background-color":"black","pie-8-background-color":"black","pie-9-background-color":"black","pie-10-background-color":"black","pie-11-background-color":"black","pie-12-background-color":"black","pie-13-background-color":"black","pie-14-background-color":"black","pie-15-background-color":"black","pie-16-background-color":"black","pie-1-background-size":"0%","pie-2-background-size":"0%","pie-3-background-size":"0%","pie-4-background-size":"0%","pie-5-background-size":"0%","pie-6-background-size":"0%","pie-7-background-size":"0%","pie-8-background-size":"0%","pie-9-background-size":"0%","pie-10-background-size":"0%","pie-11-background-size":"0%","pie-12-background-size":"0%","pie-13-background-size":"0%","pie-14-background-size":"0%","pie-15-background-size":"0%","pie-16-background-size":"0%","pie-1-background-opacity":1,"pie-2-background-opacity":1,"pie-3-background-opacity":1,"pie-4-background-opacity":1,"pie-5-background-opacity":1,"pie-6-background-opacity":1,"pie-7-background-opacity":1,"pie-8-background-opacity":1,"pie-9-background-opacity":1,"pie-10-background-opacity":1,"pie-11-background-opacity":1,"pie-12-background-opacity":1,"pie-13-background-opacity":1,"pie-14-background-opacity":1,"pie-15-background-opacity":1,"pie-16-background-opacity":1,"source-arrow-shape":"none","mid-source-arrow-shape":"none","target-arrow-shape":"none","mid-target-arrow-shape":"none","source-arrow-color":"#ddd","mid-source-arrow-color":"#ddd","target-arrow-color":"#ddd","mid-target-arrow-color":"#ddd","source-arrow-fill":"filled","mid-source-arrow-fill":"filled","target-arrow-fill":"filled","mid-target-arrow-fill":"filled","line-style":"solid","line-color":"#ddd","control-point-step-size":40,"control-point-weight":.5,"curve-style":"bezier","haystack-radius":.8}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":e.is.touch()?40:15,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125})},e.styfn.clear=function(){for(var e=0;e<this.length;e++)this[e]=void 0;return this.length=0,this._private.newStyle=!0,this},e.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},e.styfn.core=function(){return this._private.coreStyle},e.styfn.parse=function(t,i,r,n){t=e.util.camel2dash(t);var a=e.style.properties[t],o=i;if(!a)return null;if(void 0===i||null===i)return null;var s=e.is.string(i);s&&(i=e.util.trim(i));var l=a.type;if(!l)return null;if(r&&(""===i||null===i))return{name:t,value:i,bypass:!0,deleteBypass:!0};var u,c,d,h;if(!s||n);else{if((u=new RegExp(e.style.types.data.regex).exec(i))||(d=new RegExp(e.style.types.layoutData.regex).exec(i))){if(r)return!1;var p=void 0!==d;return u=u||d,{name:t,value:u,strValue:""+i,mapped:p?e.style.types.layoutData:e.style.types.data,field:u[1],bypass:r,hasPie:t.match(/pie-(\d+)-background-size/)}}if((c=new RegExp(e.style.types.mapData.regex).exec(i))||(h=new RegExp(e.style.types.mapLayoutData.regex).exec(i))){if(r)return!1;var p=void 0!==h;if(c=c||h,!l.color&&!l.number)return!1;var v=this.parse(t,c[4]);if(!v||v.mapped)return!1;var f=this.parse(t,c[5]);if(!f||f.mapped)return!1;if(v.value===f.value)return!1;if(l.color){var g=v.value,y=f.value,m=!(g[0]!==y[0]||g[1]!==y[1]||g[2]!==y[2]||g[3]!==y[3]&&(null!=g[3]&&1!==g[3]||null!=y[3]&&1!==y[3]));if(m)return!1}return{name:t,value:c,strValue:""+i,mapped:p?e.style.types.mapLayoutData:e.style.types.mapData,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:v.value,valueMax:f.value,bypass:r,hasPie:t.match(/pie-(\d+)-background-size/)}}}if(l.number){var x,b="px";if(l.units&&(x=l.units),l.implicitUnits&&(b=l.implicitUnits),!l.unitless)if(s){var w="px|em"+(l.allowPercent?"|\\%":"");x&&(w=x);var _=i.match("^("+e.util.regex.number+")("+w+")?$");_&&(i=_[1],x=_[2]||b)}else(!x||l.implicitUnits)&&(x=b);if(i=parseFloat(i),isNaN(i)&&void 0===l.enums)return null;if(isNaN(i)&&void 0!==l.enums){i=o;for(var P=0;P<l.enums.length;P++){var E=l.enums[P];if(E===i)return{name:t,value:i,strValue:""+i,bypass:r}}return null}if(l.integer&&!e.is.integer(i))return null;if(void 0!==l.min&&i<l.min||void 0!==l.max&&i>l.max)return null;var S={name:t,value:i,strValue:""+i+(x?x:""),units:x,bypass:r,hasPie:t.match(/pie-(\d+)-background-size/)&&null!=i&&0!==i&&""!==i};return l.unitless||"px"!==x&&"em"!==x||(S.pxValue="px"!==x&&x?this.getEmSizeInPixels()*i:i),("ms"===x||"s"===x)&&(S.msValue="ms"===x?i:1e3*i),S}if(l.propList){var T=[],k=""+i;if("none"===k);else{for(var C=k.split(","),P=0;P<C.length;P++){var D=e.util.trim(C[P]);e.style.properties[D]&&T.push(D)}if(0===T.length)return null}return{name:t,value:T,strValue:0===T.length?"none":T.join(", "),bypass:r}}if(l.color){var M=e.util.color2tuple(i);return M?{name:t,value:M,strValue:""+i,bypass:r}:null}if(l.enums){for(var P=0;P<l.enums.length;P++){var E=l.enums[P];if(E===i)return{name:t,value:i,strValue:""+i,bypass:r}}return null}if(l.regex){var N=new RegExp(l.regex),I=N.exec(i);return I?{name:t,value:I,strValue:""+i,bypass:r}:null}return l.string?{name:t,value:i,strValue:""+i,bypass:r}:null},e.styfn.selector=function(t){var i="core"===t?null:new e.Selector(t),r=this.length++;return this[r]={selector:i,properties:[],mappedProperties:[],index:r},this},e.styfn.css=function(){var t=arguments;switch(t.length){case 1:for(var i=t[0],r=0;r<e.style.properties.length;r++){var n=e.style.properties[r],a=i[n.name];void 0===a&&(a=i[e.util.dash2camel(n.name)]),void 0!==a&&this.cssRule(n.name,a)}break;case 2:this.cssRule(t[0],t[1])}return this},e.styfn.cssRule=function(e,t){var i=this.parse(e,t);if(i){var r=this.length-1;this[r].properties.push(i),this[r].properties[i.name]=i,i.hasPie&&(this._private.hasPie=!0),i.mapped&&this[r].mappedProperties.push(i);var n=!this[r].selector;n&&(this._private.coreStyle[i.name]=i)}return this}}(cytoscape),function(e){"use strict";e.styfn.apply=function(e){var t=this;t._private.newStyle&&(this._private.contextStyles={},this._private.propDiffs={});for(var i=0;i<e.length;i++){var r=e[i],n=t.getContextMeta(r),a=t.getContextStyle(n),o=t.applyContextStyle(n,a,r);t.updateTransitions(r,o.diffProps),t.updateStyleHints(r)}t._private.newStyle=!1},e.styfn.getPropertiesDiff=function(e,t){var i=this,r=i._private.propDiffs=i._private.propDiffs||{},n=e+"-"+t,a=r[n];if(a)return a;for(var o=[],s={},l=0;l<i.length;l++){var u=i[l],c="t"===e[l],d="t"===t[l],h=c!==d,p=u.mappedProperties.length>0;if(h||p){var v;h&&p?v=u.properties:h?v=u.properties:p&&(v=u.mappedProperties);for(var f=0;f<v.length;f++){for(var g=v[f],y=g.name,m=!1,x=l+1;x<i.length;x++){var b=i[x],w="t"===t[x];if(w&&(m=null!=b.properties[g.name]))break}s[y]||m||(s[y]=!0,o.push(y))}}}return r[n]=o,o},e.styfn.getContextMeta=function(e){var t,i=this,r="",n=e._private.styleCxtKey||"";i._private.newStyle&&(n="");for(var a=0;a<i.length;a++){var o=i[a],s=o.selector&&o.selector.matches(e);r+=s?"t":"f"}return t=i.getPropertiesDiff(n,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t}},e.styfn.getContextStyle=function(e){var t=e.key,i=this,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var n={_private:{key:t}},a=0;a<i.length;a++){var o=i[a],s="t"===t[a];if(s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l],c=n[u.name]=u;c.context=o}}return r[t]=n,n},e.styfn.applyContextStyle=function(e,t,i){for(var r=this,n=e.diffPropNames,a={},o=0;o<n.length;o++){var s=n[o],l=t[s],u=i._private.style[s];if(l&&u!==l){var c=a[s]={prev:u};r.applyParsedProperty(i,l),c.next=i._private.style[s],c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:a}},e.styfn.updateStyleHints=function(t){var i=t._private,r=this,n=i.style,a=!1;if("nodes"===i.group&&r._private.hasPie)for(var o=1;o<=e.style.pieBackgroundN;o++){var s=i.style["pie-"+o+"-background-size"].value;if(s>0){a=!0;break}}i.hasPie=a;var l=n["text-transform"].strValue,u=n.content.strValue,c=n["font-style"].strValue,s=n["font-size"].pxValue+"px",d=n["font-family"].strValue,h=n["font-weight"].strValue,p=n["text-valign"].strValue,v=n["text-valign"].strValue,f=n["text-outline-width"].pxValue;i.labelKey=c+"$"+s+"$"+d+"$"+h+"$"+u+"$"+l+"$"+p+"$"+v+"$"+f,i.fontKey=c+"$"+h+"$"+s+"$"+d;var g=n.width.pxValue,y=n.height.pxValue,m=n["border-width"].pxValue;if(i.boundingBoxKey=g+"$"+y+"$"+m,"edges"===t._private.group){var x=n["control-point-step-size"].pxValue,b=n["control-point-distance"]?n["control-point-distance"].pxValue:void 0,w=n["control-point-weight"].value,_=n["curve-style"].strValue;i.boundingBoxKey+="$"+x+"$"+b+"$"+w+"$"+_}i.styleKey=Date.now()},e.styfn.applyParsedProperty=function(t,i){var r,n,a=i,o=t._private.style,s=e.style.properties[a.name].type,l=a.bypass,u=o[a.name],c=u&&u.bypass;if(("height"===i.name||"width"===i.name)&&"auto"===i.value&&t.isNode()&&!t.isParent())return!1;if(l&&a.deleteBypass){var d=o[a.name];return d?d.bypass&&d.bypassed?(o[a.name]=d.bypassed,!0):!1:!0}var h=function(){e.util.error("Do not assign mappings to elements without corresponding data (e.g. ele `"+t.id()+"` for property `"+a.name+"` with data field `"+a.field+"`); try a `["+a.field+"]` selector to limit scope to elements with `"+a.field+"` defined")};switch(a.mapped){case e.style.types.mapData:case e.style.types.mapLayoutData:for(var p=a.mapped===e.style.types.mapLayoutData,v=a.field.split("."),r=p?t._private.layoutData:t._private.data,f=0;f<v.length&&r;f++){var g=v[f];r=r[g]}var y;if(y=e.is.number(r)?(r-a.fieldMin)/(a.fieldMax-a.fieldMin):0,0>y?y=0:y>1&&(y=1),s.color){var m=a.valueMin[0],x=a.valueMax[0],b=a.valueMin[1],w=a.valueMax[1],_=a.valueMin[2],P=a.valueMax[2],E=null==a.valueMin[3]?1:a.valueMin[3],S=null==a.valueMax[3]?1:a.valueMax[3],T=[Math.round(m+(x-m)*y),Math.round(b+(w-b)*y),Math.round(_+(P-_)*y),Math.round(E+(S-E)*y)];n={bypass:a.bypass,name:a.name,value:T,strValue:"rgb("+T[0]+", "+T[1]+", "+T[2]+")"}}else{if(!s.number)return!1;var k=a.valueMin+(a.valueMax-a.valueMin)*y;n=this.parse(a.name,k,a.bypass,!0)}n||(n=this.parse(a.name,u.strValue,a.bypass,!0)),n||h(),n.mapping=a,a=n;break;case e.style.types.data:case e.style.types.layoutData:for(var p=a.mapped===e.style.types.layoutData,v=a.field.split("."),r=p?t._private.layoutData:t._private.data,f=0;f<v.length&&r;f++){var g=v[f];r=r[g]}if(n=this.parse(a.name,r,a.bypass,!0),!n){var C=u?u.strValue:"";n=this.parse(a.name,C,a.bypass,!0)}n||h(),n.mapping=a,a=n;break;case void 0:break;default:return!1}return l?(a.bypassed=c?u.bypassed:u,o[a.name]=a):c?u.bypassed=a:o[a.name]=a,!0},e.styfn.update=function(){var e=this._private.cy,t=e.elements();t.updateStyle()},e.styfn.updateMappers=function(t){for(var i=0;i<t.length;i++){for(var r=t[i],n=r._private.style,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=n[o.name];if(s&&s.mapping){var l=s.mapping;this.applyParsedProperty(r,l)}}this.updateStyleHints(r)}},e.styfn.updateTransitions=function(t,i,r){var n=this,a=t._private.style,o=a["transition-property"].value,s=a["transition-duration"].msValue,l=a["transition-delay"].msValue,u={};
if(o.length>0&&s>0){for(var c=!1,d=0;d<o.length;d++){var h=o[d],p=a[h],v=i[h];if(v){var f=v.prev,g=f,y=null!=v.next?v.next:p,m=!1;g&&(e.is.number(g.pxValue)&&e.is.number(y.pxValue)?m=g.pxValue!==y.pxValue:e.is.number(g.value)&&e.is.number(y.value)?m=g.value!==y.value:e.is.array(g.value)&&e.is.array(y.value)&&(m=g.value[0]!==y.value[0]||g.value[1]!==y.value[1]||g.value[2]!==y.value[2]),m&&(u[h]=y.strValue,this.applyBypass(t,h,g.strValue),c=!0))}}if(!c)return;t._private.transitioning=!0,t.stop(),l>0&&t.delay(l),t.animate({css:u},{duration:s,queue:!1,complete:function(){r||n.removeBypasses(t,o),t._private.transitioning=!1}})}else t._private.transitioning&&(t.stop(),this.removeBypasses(t,o),t._private.transitioning=!1)}}(cytoscape),function(e){"use strict";e.styfn.applyBypass=function(t,i,r,n){var a=[],o=!0;if("*"===i||"**"===i){if(void 0!==r)for(var s=0;s<e.style.properties.length;s++){var l=e.style.properties[s],i=l.name,u=this.parse(i,r,!0);u&&a.push(u)}}else if(e.is.string(i)){var u=this.parse(i,r,!0);u&&a.push(u)}else{if(!e.is.plainObject(i))return!1;var c=i;n=r;for(var s=0;s<e.style.properties.length;s++){var l=e.style.properties[s],i=l.name,r=c[i];if(void 0===r&&(r=c[e.util.dash2camel(i)]),void 0!==r){var u=this.parse(i,r,!0);u&&a.push(u)}}}if(0===a.length)return!1;for(var d=!1,s=0;s<t.length;s++){for(var h,p=t[s],v=p._private.style,f={},g=0;g<a.length;g++){var l=a[g];if(n){var y=v[l.name];h=f[l.name]={prev:y}}d=this.applyParsedProperty(p,l)||d,n&&(h.next=v[l.name])}n&&this.updateTransitions(p,f,o)}return d},e.styfn.overrideBypass=function(t,i,r){for(var n=0;n<t.length;n++){var a=t[n],o=a._private.style[e.util.camel2dash(i)];o.bypass?(o.value=r,o.pxValue=r):this.applyBypass(a,i,r)}},e.styfn.removeAllBypasses=function(t,i){for(var r=!0,n=0;n<t.length;n++){for(var a=t[n],o={},s=a._private.style,l=0;l<e.style.properties.length;l++){var u=e.style.properties[l],c=u.name,d="",h=this.parse(c,d,!0),p=s[u.name],v=o[u.name]={prev:p};this.applyParsedProperty(a,h),v.next=s[u.name]}i&&this.updateTransitions(a,o,r)}},e.styfn.removeBypasses=function(t,i,r){for(var n=!0,a=0;a<t.length;a++){for(var o=t[a],s={},l=o._private.style,u=0;u<i.length;u++){var c=i[u],d=e.style.properties[c],h="",p=this.parse(c,h,!0),v=l[d.name],f=s[d.name]={prev:v};this.applyParsedProperty(o,p),f.next=l[d.name]}r&&this.updateTransitions(o,s,n)}}}(cytoscape),function(e,t){"use strict";e.styfn.getEmSizeInPixels=function(){var e=this._private.cy,i=e.container();if(t&&i&&t.getComputedStyle){var r=t.getComputedStyle(i).getPropertyValue("font-size"),n=parseFloat(r);return n}return 1},e.styfn.containerCss=function(e){var i=this._private.cy,r=i.container();return t&&r&&t.getComputedStyle?t.getComputedStyle(r).getPropertyValue(e):void 0},e.styfn.containerProperty=function(e){var t=this.containerCss(e),i=this.parse(e,t);return i},e.styfn.containerPropertyAsString=function(e){var t=this.containerProperty(e);return t?t.strValue:void 0}}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.styfn.getRenderedStyle=function(t){var t=t[0];if(t){for(var i={},r=t._private.style,n=this._private.cy,a=n.zoom(),o=0;o<e.style.properties.length;o++){var s=e.style.properties[o],l=r[s.name];if(l){var u=l.unitless?l.strValue:l.pxValue*a+"px";i[s.name]=u,i[e.util.dash2camel(s.name)]=u}}return i}},e.styfn.getRawStyle=function(t){var t=t[0];if(t){for(var i={},r=t._private.style,n=0;n<e.style.properties.length;n++){var a=e.style.properties[n],o=r[a.name];o&&(i[a.name]=o.strValue,i[e.util.dash2camel(a.name)]=o.strValue)}return i}},e.styfn.getValueStyle=function(t,i){i=i||{};var r,n=i.array?[]:{};if(r=e.is.element(t)?t._private.style:t)for(var a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=r[o.name]||r[e.util.dash2camel(o.name)];void 0===s||e.is.plainObject(s)||(s=this.parse(o.name,s)),s&&(i.array?n.push(s):(n[o.name]=s,n[e.util.dash2camel(o.name)]=s))}return n}}(cytoscape),function(e){"use strict";e.style.applyFromJson=function(e,t){for(var i=0;i<t.length;i++){var r=t[i],n=r.selector,a=r.css;e.selector(n);for(var o in a){var s=a[o];e.css(o,s)}}return e},e.style.fromJson=function(t,i){var r=new e.Style(t);return e.style.applyFromJson(r,i),r},e.styfn.fromJson=function(t){var i=this;return i.resetToDefault(),e.style.applyFromJson(i,t),i},e.styfn.json=function(){for(var e=[],t=0;t<this.length;t++){for(var i=this[t],r=i.selector,n=i.properties,a={},o=0;o<n.length;o++){var s=n[o];a[s.name]=s.strValue}e.push({selector:r?r.toString():"core",css:a})}return e}}(cytoscape),function(e){"use strict";e.style.applyFromString=function(t,i){function r(){l=l.length>a.length?l.substr(a.length):""}function n(){o=o.length>s.length?o.substr(s.length):""}var a,o,s,l=""+i;for(l=l.replace(/[/][*](\s|.)+?[*][/]/g,"");;){var u=l.match(/^\s*$/);if(u)break;var c=l.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){e.util.error("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+l);break}a=c[0];var d=c[1],h=new e.Selector(d);if(h._private.invalid&&"core"!==d)e.util.error("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),r();else{var p=c[2],v=!1;o=p;for(var f=[];;){var u=o.match(/^\s*$/);if(u)break;var g=o.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!g){e.util.error("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),v=!0;break}s=g[0];var y=g[1],m=g[2],x=e.style.properties[y];if(x){var b=t.parse(y,m);b?(f.push({name:y,val:m}),n()):(e.util.error("Skipping property: Invalid property definition in: "+s),n())}else e.util.error("Skipping property: Invalid property name in: "+s),n()}if(v){r();break}t.selector(d);for(var w=0;w<f.length;w++){var x=f[w];t.css(x.name,x.val)}r()}}return t},e.style.fromString=function(t,i){var r=new e.Style(t);return e.style.applyFromString(r,i),r},e.styfn.fromString=function(t){var i=this;return i.resetToDefault(),e.style.applyFromString(i,t),i}}(cytoscape),function(e){"use strict";e.stylesheet=e.Stylesheet=function(){return this instanceof e.Stylesheet?void(this.length=0):new e.Stylesheet},e.Stylesheet.prototype.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this},e.Stylesheet.prototype.css=function(t,i){var r=this.length-1;if(e.is.string(t))this[r].properties.push({name:t,value:i});else if(e.is.plainObject(t))for(var n=t,a=0;a<e.style.properties.length;a++){var o=e.style.properties[a],s=n[o.name];if(void 0===s&&(s=n[e.util.dash2camel(o.name)]),void 0!==s){var t=o.name,i=s;this[r].properties.push({name:t,value:i})}}return this},e.Stylesheet.prototype.generateStyle=function(t){for(var i=new e.Style(t),r=0;r<this.length;r++){var n=this[r],a=n.selector,o=n.properties;i.selector(a);for(var s=0;s<o.length;s++){var l=o[s];i.css(l.name,l.value)}}return i}}(cytoscape),function(e,t){"use strict";var i=e.is.touch(),r={},n=e.util.copy(r);e.defaults=function(t){r=e.util.extend({},n,t)},e.fn.core=function(t){for(var i in t){var r=t[i];e.Core.prototype[i]=r}},e.Core=function(n){if(!(this instanceof e.Core))return new e.Core(n);var a=this;n=e.util.extend({},r,n);var o=n.container,s=o?o._cyreg:null;if(s=s||{},s&&s.cy){if(o)for(;o.firstChild;)o.removeChild(o.firstChild);s.cy.notify({type:"destroy"}),s={}}var l=s.readies=s.readies||[];o&&(o._cyreg=s),s.cy=a;var u=void 0!==t&&void 0!==o&&!n.headless,c=n;c.layout=e.util.extend({name:u?"grid":"null"},c.layout),c.renderer=e.util.extend({name:u?"canvas":"null"},c.renderer);var d=function(e,t,i){return void 0!==t?t:void 0!==i?i:e},h=this._private={container:c.container,ready:!1,initrender:!1,options:c,elements:[],id2index:{},listeners:[],aniEles:e.Collection(this),scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:d(!0,c.zoomingEnabled),userZoomingEnabled:d(!0,c.userZoomingEnabled),panningEnabled:d(!0,c.panningEnabled),userPanningEnabled:d(!0,c.userPanningEnabled),boxSelectionEnabled:d(!1,c.boxSelectionEnabled),autolock:d(!1,c.autolock,c.autolockNodes),autoungrabify:d(!1,c.autoungrabify,c.autoungrabifyNodes),autounselectify:d(!1,c.autounselectify),styleEnabled:void 0===c.styleEnabled?u:c.styleEnabled,zoom:e.is.number(c.zoom)?c.zoom:1,pan:{x:e.is.plainObject(c.pan)&&e.is.number(c.pan.x)?c.pan.x:0,y:e.is.plainObject(c.pan)&&e.is.number(c.pan.y)?c.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,deferredExecQueue:[]},p=c.selectionType;h.selectionType=void 0===p||"additive"!==p&&"single"!==p?i?"additive":"single":p,e.is.number(c.minZoom)&&e.is.number(c.maxZoom)&&c.minZoom<c.maxZoom?(h.minZoom=c.minZoom,h.maxZoom=c.maxZoom):e.is.number(c.minZoom)&&void 0===c.maxZoom?h.minZoom=c.minZoom:e.is.number(c.maxZoom)&&void 0===c.minZoom&&(h.maxZoom=c.maxZoom),h.styleEnabled&&this.setStyle(c.style),a.initRenderer(e.util.extend({hideEdgesOnViewport:c.hideEdgesOnViewport,hideLabelsOnViewport:c.hideLabelsOnViewport,textureOnViewport:c.textureOnViewport,wheelSensitivity:e.is.number(c.wheelSensitivity)&&c.wheelSensitivity>0?c.wheelSensitivity:1,motionBlur:c.motionBlur,pixelRatio:e.is.number(c.pixelRatio)&&c.pixelRatio>0?c.pixelRatio:"auto"===c.pixelRatio?void 0:1,tapThreshold:d(e.is.touch()?8:4,e.is.touch()?c.touchTapThreshold:c.desktopTapThreshold)},c.renderer)),c.initrender&&(a.on("initrender",c.initrender),a.on("initrender",function(){a._private.initrender=!0})),a.load(c.elements,function(){a.startAnimationLoop(),a._private.ready=!0,e.is.fn(c.ready)&&a.on("ready",c.ready);for(var t=0;t<l.length;t++){var i=l[t];a.on("ready",i)}s&&(s.readies=[]),a.trigger("ready")},c.done)},e.corefn=e.Core.prototype,e.fn.core({isReady:function(){return this._private.ready},ready:function(e){this.isReady()?this.trigger("ready",[],e):this.on("ready",e)},initrender:function(){return this._private.initrender},destroy:function(){this.notify({type:"destroy"});var e=this.container(),t=e.parentNode;return t&&t.removeChild(e),this},getElementById:function(t){var i=this._private.id2index[t];return void 0!==i?this._private.elements[i]:new e.Collection(this)},selectionType:function(){return this._private.selectionType},hasCompoundNodes:function(){return this._private.hasCompoundNodes},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){for(var t=this._private.elements,i=this._private.id2index,r=0;r<e.length;r++){var n=e[r],a=n._private.data.id,o=i[a],s=void 0!==o;s||(o=t.length,t.push(n),i[a]=o,n._private.index=o)}return this},removeFromPool:function(e){for(var t=this._private.elements,i=this._private.id2index,r=0;r<e.length;r++){var n=e[r],a=n._private.data.id,o=i[a],s=void 0!==o;if(s){this._private.id2index[a]=void 0,t.splice(o,1);for(var l=o;l<t.length;l++){var u=t[l]._private.data.id;i[u]--}}}},container:function(){return this._private.container},options:function(){return e.util.copy(this._private.options)},json:function(){var e={},t=this;return e.elements={},t.elements().each(function(t,i){var r=i.group();e.elements[r]||(e.elements[r]=[]),e.elements[r].push(i.json())}),this._private.styleEnabled&&(e.style=t.style().json()),e.zoomingEnabled=t._private.zoomingEnabled,e.userZoomingEnabled=t._private.userZoomingEnabled,e.zoom=t._private.zoom,e.minZoom=t._private.minZoom,e.maxZoom=t._private.maxZoom,e.panningEnabled=t._private.panningEnabled,e.userPanningEnabled=t._private.userPanningEnabled,e.pan=t._private.pan,e.boxSelectionEnabled=t._private.boxSelectionEnabled,e.layout=t._private.options.layout,e.renderer=t._private.options.renderer,e.hideEdgesOnViewport=t._private.options.hideEdgesOnViewport,e.hideLabelsOnViewport=t._private.options.hideLabelsOnViewport,e.textureOnViewport=t._private.options.textureOnViewport,e.wheelSensitivity=t._private.options.wheelSensitivity,e.motionBlur=t._private.options.motionBlur,e},defer:function(e){var t=this,i=t._private,r=i.deferredExecQueue;r.push(e),i.deferredTimeout||(i.deferredTimeout=setTimeout(function(){for(;r.length>0;)r.shift()();i.deferredTimeout=null},0))}})}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";function i(e){var t=!document||"interactive"!==document.readyState&&"complete"!==document.readyState?i:e;setTimeout(t,9,e)}e.fn.core({add:function(t){var i,r=this;if(e.is.elementOrCollection(t)){var n=t;if(n._private.cy===r)i=n.restore();else{for(var a=[],o=0;o<n.length;o++){var s=n[o];a.push(s.json())}i=new e.Collection(r,a)}}else if(e.is.array(t)){var a=t;i=new e.Collection(r,a)}else if(e.is.plainObject(t)&&(e.is.array(t.nodes)||e.is.array(t.edges))){for(var l=t,a=[],u=["nodes","edges"],o=0,c=u.length;c>o;o++){var d=u[o],h=l[d];if(e.is.array(h))for(var p=0,v=h.length;v>p;p++){var f=h[p];f.group=d,a.push(f)}}i=new e.Collection(r,a)}else{var f=t;i=new e.Element(r,f).collection()}return i},remove:function(t){if(e.is.elementOrCollection(t))t=t;else if(e.is.string(t)){var i=t;t=this.$(i)}return t.remove()},load:function(r,n,a){function o(){s.one("layoutready",function(e){s.notifications(!0),s.trigger(e),s.notify({type:"load",collection:s.elements()}),s.one("load",n),s.trigger("load")}).one("layoutstop",function(){s.one("done",a),s.trigger("done")});var t=e.util.extend({},s._private.options.layout);t.eles=s.$(),s.layout(t)}var s=this,l=s.elements();return l.length>0&&l.remove(),s.notifications(!1),null!=r&&(e.is.plainObject(r)||e.is.array(r))&&s.add(r),t?i(o):o(),this}})}(cytoscape,"undefined"==typeof window?null:window),function(e,t){"use strict";e.fn.core({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),animate:e.define.animate(),stop:e.define.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},startAnimationLoop:function(){function i(){e.util.requestAnimationFrame(function(e){r(e),i()})}function r(t){function i(i,r){var s=i._private.animation.current,l=i._private.animation.queue,u=!1;if(0===s.length){var c=l.length>0?l.shift():null;c&&(c.callTime=t,s.push(c))}for(var d=[],h=s.length-1;h>=0;h--){var p=s[h];p.started||n(i,p),a(i,p,t,r),p.done&&(d.push(p),s.splice(h,1)),u=!0}for(var h=0;h<d.length;h++){var p=d[h],v=p.params.complete;e.is.fn(v)&&v.apply(i,[t])}return r||0!==s.length||0!==l.length||o.push(i),u}t=+new Date;for(var r=l._private.aniEles,o=[],s=0;s<r.length;s++){var u=r[s];i(u)}var c=i(l,!0);if(r.length>0||c){var d;if(r.length>0){var h=r.updateCompoundBounds();d=h.length>0?r.add(h):r}l.notify({type:"draw",collection:d})}r.unmerge(o)}function n(t,i){var r=e.is.core(t),n=!r,a=t,o=l._private.style;if(n)var s=a._private.position,u={x:s.x,y:s.y},c=o.getValueStyle(a);if(r)var d=l._private.pan,h={x:d.x,y:d.y},p=l._private.zoom;i.started=!0,i.startTime=Date.now(),i.startPosition=u,i.startStyle=c,i.startPan=h,i.startZoom=p}function a(t,i,r,n){var a,u=l._private.style,c=i.properties,d=i.params,h=i.startTime,p=!n;if(a=0===i.duration?1:Math.min(1,(r-h)/i.duration),0>a?a=0:a>1&&(a=1),null==c.delay){var v=i.startPosition,f=c.position,g=t._private.position;f&&p&&(o(v.x,f.x)&&(g.x=s(v.x,f.x,a)),o(v.y,f.y)&&(g.y=s(v.y,f.y,a)));var y=i.startPan,m=c.pan,x=t._private.pan,b=null!=m&&n;b&&(o(y.x,m.x)&&(x.x=s(y.x,m.x,a)),o(y.y,m.y)&&(x.y=s(y.y,m.y,a)),t.trigger("pan"));var w=i.startZoom,_=c.zoom,P=null!=_&&n;if(P&&(o(w,_)&&(t._private.zoom=s(w,_,a)),t.trigger("zoom")),(b||P)&&t.trigger("viewport"),c.css&&p)for(var E=c.css,S=0;S<E.length;S++){var T=E[S].name,k=E[S],C=k,D=i.startStyle[T],M=s(D,C,a);u.overrideBypass(t,T,M)}}return e.is.fn(d.step)&&d.step.apply(t,[r]),a>=1&&(i.done=!0),a}function o(t,i){return null==t||null==i?!1:e.is.number(t)&&e.is.number(i)?!0:t&&i?!0:!1}function s(t,i,r){0>r?r=0:r>1&&(r=1);var n,a;if(n=null!=t.pxValue||null!=t.value?null!=t.pxValue?t.pxValue:t.value:t,a=null!=i.pxValue||null!=i.value?null!=i.pxValue?i.pxValue:i.value:i,e.is.number(n)&&e.is.number(a))return n+(a-n)*r;if(e.is.number(n[0])&&e.is.number(a[0])){var o=n,s=a,l=function(e,t){var i=t-e,n=e;return Math.round(r*i+n)},u=l(o[0],s[0]),c=l(o[1],s[1]),d=l(o[2],s[2]);return[u,c,d]}return void 0}var l=this;l.styleEnabled()&&t&&i()}})}(cytoscape,"undefined"==typeof window?null:window),function(e){"use strict";e.fn.core({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(e){"use strict";e.fn.core({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger()}),e.corefn.bind=e.corefn.on,e.corefn.unbind=e.corefn.off}(cytoscape),function(e){"use strict";e.fn.core({png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)}})}(cytoscape),function(e){"use strict";e.fn.core({layout:function(e){var t=this._private.prevLayout=null==e?this._private.prevLayout:this.initLayout(e);return t.run(),this},makeLayout:function(e){return this.initLayout(e)},initLayout:function(t){if(null==t)return void e.util.error("Layout options must be specified to make a layout");if(null==t.name)return void e.util.error("A `name` must be specified to make a layout");var i=t.name,r=e.extension("layout",i);if(null==r)return void e.util.error("Can not apply layout: No such layout `"+i+"` found; did you include its JS file?");t.eles=null!=t.eles?t.eles:this.$(),e.is.string(t.eles)&&(t.eles=this.$(t.eles));var n=new r(e.util.extend({},t,{cy:this}));return e.is.plainObject(n._private)||(n._private={}),n._private.cy=this,n._private.listeners=[],n}})}(cytoscape),function(e){"use strict";e.fn.core({notify:function(e){if(this._private.batchingNotify){var t=this._private.batchNotifyEles,i=this._private.batchNotifyTypes;if(e.collection)for(var r=0;r<e.collection.length;r++){var n=e.collection[r];t.ids[n._private.id]||t.push(n)}return void(i.ids[e.type]||i.push(e.type))}if(this._private.notificationsEnabled){var a=this.renderer();a.notify(e)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:void(t.notificationsEnabled=e?!0:!1)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},startBatch:function(){var e=this._private;return e.batchingStyle=e.batchingNotify=!0,e.batchStyleEles=[],e.batchNotifyEles=[],e.batchNotifyTypes=[],e.batchStyleEles.ids={},e.batchNotifyEles.ids={},e.batchNotifyTypes.ids={},this},endBatch:function(){var t=this._private;return t.batchingStyle=!1,new e.Collection(this,t.batchStyleEles).updateStyle(),t.batchingNotify=!1,this.notify({type:t.batchNotifyTypes,collection:t.batchNotifyEles}),this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var i in e){var r=e[i],n=t.getElementById(i);n.data(r)}})}})}(cytoscape),function(e){"use strict";e.fn.core({renderTo:function(e,t,i,r){var n=this._private.renderer;return n.renderTo(e,t,i,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify({type:"draw"}),this},resize:function(){return this.notify({type:"resize"}),this.trigger("resize"),this},initRenderer:function(t){var i=this,r=e.extension("renderer",t.name);return null==r?void e.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",t.name):void(this._private.renderer=new r(e.util.extend({},t,{cy:i,style:i._private.style})))}})}(cytoscape),function(e){"use strict";e.fn.core({collection:function(t){return e.is.string(t)?this.$(t):e.is.elementOrCollection(t)?t.collection():e.is.array(t)?new e.Collection(this,t):new e.Collection(this)},nodes:function(e){var t=this.$(function(){return this.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(){return this.isEdge()});return e?t.filter(e):t},$:function(t){var i=new e.Collection(this,this._private.elements);return t?i.filter(t):i}}),e.corefn.elements=e.corefn.filter=e.corefn.$}(cytoscape),function(e){"use strict";e.fn.core({style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(t){var i=this._private;return i.style=e.is.stylesheet(t)?t.generateStyle(this):e.is.array(t)?e.style.fromJson(this,t):e.is.string(t)?e.style.fromString(this,t):new e.Style(this),i.style}})}(cytoscape),function(e){"use strict";e.fn.core({autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=e?!0:!1,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=e?!0:!1,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=e?!0:!1,this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=e?!0:!1,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=e?!0:!1,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=e?!0:!1,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=e?!0:!1,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=e?!0:!1,this)},pan:function(){var t,i,r,n,a,o=arguments,s=this._private.pan;switch(o.length){case 0:return s;case 1:if(e.is.string(o[0]))return t=o[0],s[t];if(e.is.plainObject(o[0])){if(!this._private.panningEnabled)return this;r=o[0],n=r.x,a=r.y,e.is.number(n)&&(s.x=n),e.is.number(a)&&(s.y=a),this.trigger("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;t=o[0],i=o[1],"x"!==t&&"y"!==t||!e.is.number(i)||(s[t]=i),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},panBy:function(){var t,i,r,n,a,o=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(o.length){case 1:e.is.plainObject(o[0])&&(r=o[0],n=r.x,a=r.y,e.is.number(n)&&(s.x+=n),e.is.number(a)&&(s.y+=a),this.trigger("pan viewport"));break;case 2:t=o[0],i=o[1],"x"!==t&&"y"!==t||!e.is.number(i)||(s[t]+=i),this.trigger("pan viewport")}return this.notify({type:"viewport"}),this},fit:function(e,t){var i=this.getFitViewport(e,t);if(i){var r=this._private;r.zoom=i.zoom,r.pan=i.pan,this.trigger("pan zoom viewport"),this.notify({type:"viewport"})}return this},getFitViewport:function(t,i){if(e.is.number(t)&&void 0===i&&(i=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var r;if(e.is.string(t)){var n=t;t=this.$(n)}else if(e.is.boundingBox(t)){var a=t;r={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},r.w=r.x2-r.x1,r.h=r.y2-r.y1}else e.is.elementOrCollection(t)||(t=this.elements());r=r||t.boundingBox();var o,s=this.width(),l=this.height();if(i=e.is.number(i)?i:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(r.w)&&!isNaN(r.h)&&r.w>0&&r.h>0){o=Math.min((s-2*i)/r.w,(l-2*i)/r.h),o=o>this._private.maxZoom?this._private.maxZoom:o,o=o<this._private.minZoom?this._private.minZoom:o;var u={x:(s-o*(r.x1+r.x2))/2,y:(l-o*(r.y1+r.y2))/2};return{zoom:o,pan:u}}}},minZoom:function(t){return void 0===t?this._private.minZoom:(e.is.number(t)&&(this._private.minZoom=t),this)},maxZoom:function(t){return void 0===t?this._private.maxZoom:(e.is.number(t)&&(this._private.maxZoom=t),this)},zoom:function(t){var i,r;if(void 0===t)return this._private.zoom;if(e.is.number(t))r=t;else if(e.is.plainObject(t)){if(r=t.level,t.position){var n=t.position,a=this._private.pan,o=this._private.zoom;i={x:n.x*o+a.x,y:n.y*o+a.y}}else t.renderedPosition&&(i=t.renderedPosition);if(i&&!this._private.panningEnabled)return this}if(!this._private.zoomingEnabled)return this;if(!e.is.number(r)||i&&(!e.is.number(i.x)||!e.is.number(i.y)))return this;if(r=r>this._private.maxZoom?this._private.maxZoom:r,r=r<this._private.minZoom?this._private.minZoom:r,i){var s=this._private.pan,l=this._private.zoom,u=r,c={x:-u/l*(i.x-s.x)+i.x,y:-u/l*(i.y-s.y)+i.y};this._private.zoom=r,this._private.pan=c;var d=s.x!==c.x||s.y!==c.y;this.trigger(" zoom "+(d?" pan ":"")+" viewport ")}else this._private.zoom=r,this.trigger("zoom viewport");return this.notify({type:"viewport"}),this},viewport:function(t){var i=this._private,r=!0,n=!0,a=[],o=!1,s=!1;if(!t)return this;if(e.is.number(t.zoom)||(r=!1),e.is.plainObject(t.pan)||(n=!1),!r&&!n)return this;if(r){var l=t.zoom;l<i.minZoom||l>i.maxZoom||!i.zoomingEnabled?o=!0:(i.zoom=l,a.push("zoom"))}if(n&&(!o||!t.cancelOnFailedZoom)&&i.panningEnabled){var u=t.pan;e.is.number(u.x)&&(i.pan.x=u.x,s=!1),e.is.number(u.y)&&(i.pan.y=u.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.trigger(a.join(" ")),this.notify({type:"viewport"})),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.trigger("pan viewport"),this.notify({type:"viewport"})),this},getCenterPan:function(t,i){if(this._private.panningEnabled){if(e.is.string(t)){var r=t;t=this.elements(r)}else e.is.elementOrCollection(t)||(t=this.elements());var n=t.boundingBox(),a=this.width(),o=this.height();i=void 0===i?this._private.zoom:i;var s={x:(a-i*(n.x1+n.x2))/2,y:(o-i*(n.y1+n.y2))/2};return s}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},width:function(){var e=this._private.container;return e?e.clientWidth:1},height:function(){var e=this._private.container;return e?e.clientHeight:1},extent:function(){var e=this._private.pan,t=this._private.zoom,i=this.renderedExtent(),r={x1:(i.x1-e.x)/t,x2:(i.x2-e.x)/t,y1:(i.y1-e.y)/t,y2:(i.y2-e.y)/t};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}}}),e.corefn.centre=e.corefn.center,e.corefn.autolockNodes=e.corefn.autolock,e.corefn.autoungrabifyNodes=e.corefn.autoungrabify}(cytoscape),function(e){"use strict";e.fn.collection=e.fn.eles=function(t){for(var i in t){var r=t[i];e.Collection.prototype[i]=r}};var t={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(t,i,r){var n=e.is.element(i)?i._private:i,a=n.group,o=null!=r?r:this.prefix[a]+this.id[a];if(t.getElementById(o).empty())this.id[a]++;else for(;!t.getElementById(o).empty();)o=this.prefix[a]+ ++this.id[a];return o}};e.Element=function(t,i,r){if(!(this instanceof e.Element))return new e.Element(t,i,r);var n=this;if(r=void 0===r||r?!0:!1,void 0===t||void 0===i||!e.is.core(t))return void e.util.error("An element must have a core reference and parameters set");if("nodes"!==i.group&&"edges"!==i.group)return void e.util.error("An element must be of type `nodes` or `edges`; you specified `"+i.group+"`");if(this.length=1,this[0]=this,this._private={cy:t,single:!0,data:i.data||{},layoutData:{},position:i.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:i.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:i.selected?!0:!1,selectable:void 0===i.selectable?!0:i.selectable?!0:!1,locked:i.locked?!0:!1,grabbed:!1,grabbable:void 0===i.grabbable?!0:i.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},i.renderedPosition){var a=i.renderedPosition,o=t.pan(),s=t.zoom();this._private.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}if(e.is.string(i.classes))for(var l=i.classes.split(/\s+/),u=0,c=l.length;c>u;u++){var d=l[u];d&&""!==d&&(n._private.classes[d]=!0)}i.css&&t.style().applyBypass(this,i.css),(void 0===r||r)&&this.restore()},e.Collection=function(i,r,n){if(!(this instanceof e.Collection))return new e.Collection(i,r);if(void 0===i||!e.is.core(i))return void e.util.error("A collection must have a reference to the core");var a={},o={},s=!1;if(r){if(r.length>0&&e.is.plainObject(r[0])&&!e.is.element(r[0])){s=!0;for(var l=[],u={},c=0,d=r.length;d>c;c++){var h=r[c];null==h.data&&(h.data={});var p=h.data;if(null==p.id)p.id=t.generate(i,h);else if(0!==i.getElementById(p.id).length||u[p.id])continue;var v=new e.Element(i,h,!1);l.push(v),u[p.id]=!0}r=l}}else r=[];this.length=0;for(var c=0,d=r.length;d>c;c++){var f=r[c];if(f){var g=f._private.data.id;(!n||n.unique&&!a[g])&&(a[g]=f,o[g]=this.length,this[this.length]=f,this.length++)}}this._private={cy:i,ids:a,indexes:o},s&&this.restore()},e.elefn=e.elesfn=e.Element.prototype=e.Collection.prototype,e.elesfn.cy=function(){return this._private.cy},e.elesfn.element=function(){return this[0]},e.elesfn.collection=function(){return e.is.collection(this)?this:new e.Collection(this._private.cy,[this])},e.elesfn.unique=function(){return new e.Collection(this._private.cy,this,{unique:!0})},e.elesfn.getElementById=function(t){var i=this._private.cy,r=this._private.ids[t];return r?r:e.Collection(i)},e.elesfn.json=function(){var t=this.element();if(null==t)return void 0;var i=t._private,r=e.util.copy({data:i.data,position:i.position,group:i.group,bypass:i.bypass,removed:i.removed,selected:i.selected,selectable:i.selectable,locked:i.locked,grabbed:i.grabbed,grabbable:i.grabbable,classes:""}),n=[];for(var a in i.classes)i.classes[a]&&n.push(a);for(var o=0;o<n.length;o++){var a=n[o];r.classes+=a+(o<n.length-1?" ":"")}return r},e.elesfn.jsons=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t],r=i.json();e.push(r)}return e},e.elesfn.clone=function(){for(var t=this.cy(),i=[],r=0;r<this.length;r++){var n=this[r],a=n.json(),o=new e.Element(t,a,!1);i.push(o)}return new e.Collection(t,i)},e.elesfn.restore=function(i){var r=this,n=[],a=r.cy();void 0===i&&(i=!0);for(var o=[],s=[],l=[],u=0,c=0,d=0,h=r.length;h>d;d++){var p=r[d];p.isNode()?(s.push(p),u++):(l.push(p),c++)}o=s.concat(l);for(var d=0,h=o.length;h>d;d++){var p=o[d];if(p.removed()){var v=p._private,f=v.data;if(void 0===f.id)f.id=t.generate(a,p);else{if(e.is.emptyString(f.id)||!e.is.string(f.id)){e.util.error("Can not create element with invalid string ID `"+f.id+"`");continue}if(0!==a.getElementById(f.id).length){e.util.error("Can not create second element with ID `"+f.id+"`");continue}}var g=f.id;if(p.isEdge()){for(var y=p,m=["source","target"],x=m.length,b=!1,w=0;x>w;w++){var _=m[w],P=f[_];null==P||""===P?(e.util.error("Can not create edge `"+g+"` with unspecified "+_),b=!0):a.getElementById(P).empty()&&(e.util.error("Can not create edge `"+g+"` with nonexistant "+_+" `"+P+"`"),b=!0)}if(b)continue;var E=a.getElementById(f.source),S=a.getElementById(f.target);E._private.edges.push(y),S._private.edges.push(y),y._private.source=E,y._private.target=S}v.ids={},v.ids[g]=p,v.removed=!1,a.addToPool(p),n.push(p)}}for(var d=0;u>d;d++){var T=o[d],f=T._private.data,k=T._private.data.parent,C=null!=k;if(C){var D=a.getElementById(k);if(D.empty())f.parent=void 0;else{for(var M=!1,N=D;!N.empty();){if(T.same(N)){M=!0,f.parent=void 0;break}N=N.parent()}M||(D[0]._private.children.push(T),T._private.parent=D[0],a._private.hasCompoundNodes=!0)}}}if(n=new e.Collection(a,n),n.length>0){var I=n.add(n.connectedNodes()).add(n.parent());I.updateStyle(i),i?n.rtrigger("add"):n.trigger("add")}return r},e.elesfn.removed=function(){var e=this[0];return e&&e._private.removed},e.elesfn.inside=function(){var e=this[0];return e&&!e._private.removed},e.elesfn.remove=function(t){function i(e){for(var t=e._private.edges,i=0;i<t.length;i++)n(t[i])}function r(e){for(var t=e._private.children,i=0;i<t.length;i++)n(t[i])}function n(e){var t=c[e.id()];t||(c[e.id()]=!0,e.isNode()?(u.push(e),i(e),r(e)):u.unshift(e))}function a(e,t){for(var i=e._private.edges,r=0;r<i.length;r++){var n=i[r];if(t===n){i.splice(r,1);break}}}function o(e,t){t=t[0],e=e[0];for(var i=e._private.children,r=0;r<i.length;r++)if(i[r][0]===t[0]){i.splice(r,1);break}}var s=this,l=[],u=[],c={},d=s._private.cy;void 0===t&&(t=!0);for(var h=0,p=s.length;p>h;h++){var v=s[h];n(v)}for(var h=0;h<u.length;h++){var v=u[h];if(v._private.removed=!0,d.removeFromPool(v),l.push(v),v.isEdge()){var f=v.source()[0],g=v.target()[0];a(f,v),a(g,v)}else{var y=v.parent();0!==y.length&&o(y,v)
}}var m=d._private.elements;d._private.hasCompoundNodes=!1;for(var h=0;h<m.length;h++){var v=m[h];if(v.isParent()){d._private.hasCompoundNodes=!0;break}}var x=new e.Collection(this.cy(),l);x.size()>0&&(t&&this.cy().notify({type:"remove",collection:x}),x.trigger("remove"));for(var b={},h=0;h<u.length;h++){var v=u[h],w="nodes"===v._private.group,_=v._private.data.parent;if(w&&void 0!==_&&!b[_]){b[_]=!0;var y=d.getElementById(_);y&&0!==y.length&&!y._private.removed&&0===y.children().length&&y.updateStyle()}}return this},e.elesfn.move=function(e){var t=this._private.cy;if(void 0!==e.source||void 0!==e.target){var i=e.source,r=e.target,n=t.getElementById(i).length>0,a=t.getElementById(r).length>0;if(n||a){var o=this.jsons();this.remove();for(var s=0;s<o.length;s++){var l=o[s];"edges"===l.group&&(n&&(l.data.source=i),a&&(l.data.target=r))}return t.add(o)}}else if(void 0!==e.parent){var u=e.parent,c=null===u||t.getElementById(u).length>0;if(c){var o=this.jsons(),d=this.descendants(),h=d.merge(d.add(this).connectedEdges());this.remove();for(var s=0;s<this.length;s++){var l=o[s];"nodes"===l.group&&(l.data.parent=null===u?void 0:u)}}return t.add(o).merge(h.restore())}return this}}(cytoscape),function(e){"use strict";e.fn.eles({stdBreadthFirstSearch:function(t){return t=e.util.extend({},t,{std:!0}),this.breadthFirstSearch(t)},breadthFirstSearch:function(t,i,r){var n,a,o;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(n=t,t=n.roots,i=n.visit,r=n.directed,a=n.std,o=n.thisArg),r=2!==arguments.length||e.is.fn(i)?r:i,i=e.is.fn(i)?i:function(){};for(var s,l=this._private.cy,u=e.is.string(t)?this.filter(t):t,c=[],d=[],h={},p={},v={},f=0,g=this.nodes(),y=this.edges(),m=0;m<u.length;m++)u[m].isNode()&&(c.unshift(u[m]),v[u[m].id()]=!0,d.push(u[m]),p[u[m].id()]=0);for(;0!==c.length;){var x,u=c.shift(),b=p[u.id()],w=h[u.id()],_=null==w?void 0:w.connectedNodes().not(u)[0];if(x=a?i.call(o,u,w,_,f++,b):i.call(u,f++,b,u,w,_),x===!0){s=u;break}if(x===!1)break;for(var P=u.connectedEdges(r?function(){return this.data("source")===u.id()}:void 0).intersect(y),m=0;m<P.length;m++){var E=P[m],S=E.connectedNodes(function(){return this.id()!==u.id()}).intersect(g);0===S.length||v[S.id()]||(S=S[0],c.push(S),v[S.id()]=!0,p[S.id()]=p[u.id()]+1,d.push(S),h[S.id()]=E)}}for(var T=[],m=0;m<d.length;m++){var k=d[m],C=h[k.id()];C&&T.push(C),T.push(k)}return{path:new e.Collection(l,T,{unique:!0}),found:new e.Collection(l,s,{unique:!0})}},stdDepthFirstSearch:function(t){return t=e.util.extend({},t,{std:!0}),this.depthFirstSearch(t)},depthFirstSearch:function(t,i,r){var n,a,o;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(n=t,t=n.roots,i=n.visit,r=n.directed,a=n.std,o=n.thisArg),r=2!==arguments.length||e.is.fn(i)?r:i,i=e.is.fn(i)?i:function(){};for(var s,l=this._private.cy,u=e.is.string(t)?this.filter(t):t,c=[],d=[],h={},p={},v={},f=0,g=this.edges(),y=this.nodes(),m=0;m<u.length;m++)u[m].isNode()&&(c.push(u[m]),d.push(u[m]),p[u[m].id()]=0);for(;0!==c.length;){var u=c.pop();if(!v[u.id()]){v[u.id()]=!0;var x,b=p[u.id()],w=h[u.id()],_=null==w?void 0:w.connectedNodes().not(u)[0];if(x=a?i.call(o,u,w,_,f++,b):i.call(u,f++,b,u,w,_),x===!0){s=u;break}if(x===!1)break;for(var P=u.connectedEdges(r?function(){return this.data("source")===u.id()}:void 0).intersect(g),m=0;m<P.length;m++){var E=P[m],S=E.connectedNodes(function(){return this.id()!==u.id()}).intersect(y);0===S.length||v[S.id()]||(S=S[0],c.push(S),p[S.id()]=p[u.id()]+1,d.push(S),h[S.id()]=E)}}}for(var T=[],m=0;m<d.length;m++){var k=d[m],C=h[k.id()];C&&T.push(C),T.push(k)}return{path:new e.Collection(l,T,{unique:!0}),found:new e.Collection(l,s,{unique:!0})}},kruskal:function(t){function i(e){for(var t=0;t<n.length;t++){var i=n[t];if(i.anySame(e))return{eles:i,index:t}}}t=e.is.fn(t)?t:function(){return 1};for(var r=new e.Collection(this._private.cy,[]),n=[],a=this.nodes(),o=0;o<a.length;o++)n.push(a[o].collection());for(var s=this.edges(),l=s.toArray().sort(function(e,i){var r=t.call(e,e),n=t.call(i,i);return r-n}),o=0;o<l.length;o++){var u=l[o],c=u.source()[0],d=u.target()[0],h=i(c),p=i(d);h.index!==p.index&&(r=r.add(u),n[h.index]=h.eles.add(p.eles),n.splice(p.index,1))}return a.add(r)},dijkstra:function(t,i,r){var n;e.is.plainObject(t)&&!e.is.elementOrCollection(t)&&(n=t,t=n.root,i=n.weight,r=n.directed);var a=this._private.cy;r=e.is.fn(i)?r:i,i=e.is.fn(i)?i:function(){return 1};for(var o=e.is.string(t)?this.filter(t).eq(0):t.eq(0),s={},l={},u={},c=this.edges().filter(function(){return!this.isLoop()}),d=this.nodes(),h=[],p=0;p<d.length;p++)s[d[p].id()]=d[p].same(o)?0:1/0,h.push(d[p]);var v=function(e){return s[e.id()]};h=new e.Collection(a,h);for(var f=e.Minheap(a,h,v),g=function(e,t){for(var n,a=(r?e.edgesTo(t):e.edgesWith(t)).intersect(c),o=1/0,s=0;s<a.length;s++){var l=a[s],u=i.apply(l,[l]);(o>u||!n)&&(o=u,n=l)}return{edge:n,dist:o}};f.size()>0;){var y=f.pop(),m=y.value,x=y.id,b=a.getElementById(x);if(u[x]=m,m===Math.Infinite)break;for(var w=b.neighborhood().intersect(d),p=0;p<w.length;p++){var _=w[p],P=_.id(),E=g(b,_),S=m+E.dist;S<f.getValueById(P)&&(f.edit(P,S),l[P]={node:b,edge:E.edge})}}return{distanceTo:function(t){var i=e.is.string(t)?d.filter(t).eq(0):t.eq(0);return u[i.id()]},pathTo:function(t){var i=e.is.string(t)?d.filter(t).eq(0):t.eq(0),r=[],n=i;if(i.length>0)for(r.unshift(i);l[n.id()];){var o=l[n.id()];r.unshift(o.edge),r.unshift(o.node),n=o.node}return new e.Collection(a,r)}}}}),e.elesfn.bfs=e.elesfn.breadthFirstSearch,e.elesfn.dfs=e.elesfn.depthFirstSearch,e.elesfn.stdBfs=e.elesfn.stdBreadthFirstSearch,e.elesfn.stdDfs=e.elesfn.stdDepthFirstSearch}(cytoscape),function(e){"use strict";e.fn.eles({aStar:function(t){t=t||{};var i=function(){a&&console.log.apply(console,arguments)},r=function(e,t,i,n){if(e==t)return n.push(o.getElementById(t)),n;if(t in i){var a=i[t],s=f[t];return n.push(o.getElementById(t)),n.push(o.getElementById(s)),r(e,a,i,n)}return void 0},n=function(e,t){if(0===e.length)return void 0;for(var i=0,r=t[e[0]],n=1;n<e.length;n++){var a=t[e[n]];r>a&&(r=a,i=n)}return i};if(null!=t.debug)var a=t.debug;else var a=!1;i("Starting aStar...");var o=this._private.cy;if(null==t||null==t.root)return void 0;var s=e.is.string(t.root)?this.filter(t.root)[0]:t.root[0];if(i("Source node: %s",s.id()),null==t.goal)return void 0;var l=e.is.string(t.goal)?this.filter(t.goal)[0]:t.goal[0];if(i("Target node: %s",l.id()),null!=t.heuristic&&e.is.fn(t.heuristic))var u=t.heuristic;else var u=function(){return 0};if(null!=t.weight&&e.is.fn(t.weight))var c=t.weight;else var c=function(){return 1};if(null!=t.directed)var d=t.directed;else var d=!1;var h=[],p=[s.id()],v={},f={},g={},y={};g[s.id()]=0,y[s.id()]=u(s);for(var m=this.edges().not(":loop"),x=this.nodes(),b=0;p.length>0;){var w=n(p,y),_=this.filter("#"+p[w])[0];if(b++,i("\nStep: %s",b),i("Processing node: %s, fScore = %s",_.id(),y[_.id()]),_.id()==l.id()){i("Found goal node!");var P=r(s.id(),l.id(),v,[]);return P.reverse(),i("Path: %s",P),{found:!0,distance:g[_.id()],path:new e.Collection(o,P),steps:b}}h.push(_.id()),p.splice(w,1),i("Added node to closedSet, removed from openSet."),i("Processing neighbors...");for(var E=_.connectedEdges(d?'[source = "'+_.id()+'"]':void 0).intersect(m),S=0;S<E.length;S++){var T=E[S],k=T.connectedNodes('[id != "'+_.id()+'"]').intersect(x);if(i("   processing neighbor: %s",k.id()),-1==h.indexOf(k.id())){var C=g[_.id()]+c.apply(T,[T]);i("   tentative gScore: %d",C),-1!=p.indexOf(k.id())?C<g[k.id()]&&(g[k.id()]=C,y[k.id()]=C+u(k),v[k.id()]=_.id(),i("   better score, replacing gScore. "),i("   fScore(%s) = %s",k.id(),C)):(g[k.id()]=C,y[k.id()]=C+u(k),p.push(k.id()),v[k.id()]=_.id(),f[k.id()]=T.id(),i("   not in openSet, adding it. "),i("   fScore(%s) = %s",k.id(),C))}else i("   already in closedSet, ignoring it.")}}return i("Reached end of computation without finding our goal"),{found:!1,distance:void 0,path:void 0,steps:b}},floydWarshall:function(t){t=t||{};var i=function(){r&&console.log.apply(console,arguments)};if(null!=t.debug)var r=t.debug;else var r=!1;i("Starting floydWarshall...");var n=this._private.cy;if(null!=t.weight&&e.is.fn(t.weight))var a=t.weight;else var a=function(){return 1};if(null!=t.directed)var o=t.directed;else var o=!1;for(var s=this.edges().not(":loop"),l=this.nodes(),u=l.length,c={},d=0;u>d;d++)c[l[d].id()]=d;for(var h=[],d=0;u>d;d++){for(var p=new Array(u),v=0;u>v;v++)p[v]=d==v?0:1/0;h.push(p)}var f=[],g=[],y=function(e){for(var t=0;u>t;t++){for(var i=new Array(u),r=0;u>r;r++)i[r]=void 0;e.push(i)}};y(f),y(g);for(var d=0;d<s.length;d++){var m=c[s[d].source().id()],x=c[s[d].target().id()],b=a.apply(s[d],[s[d]]);h[m][x]>b&&(h[m][x]=b,f[m][x]=x,g[m][x]=s[d])}if(!o)for(var d=0;d<s.length;d++){var m=c[s[d].target().id()],x=c[s[d].source().id()],b=a.apply(s[d],[s[d]]);h[m][x]>b&&(h[m][x]=b,f[m][x]=x,g[m][x]=s[d])}for(var w=0;u>w;w++)for(var d=0;u>d;d++)for(var v=0;u>v;v++)h[d][w]+h[w][v]<h[d][v]&&(h[d][v]=h[d][w]+h[w][v],f[d][v]=f[d][w]);for(var _=[],d=0;u>d;d++)_.push(l[d].id());var P={distance:function(t,i){if(e.is.string(t))var r=n.filter(t)[0].id();else var r=t.id();if(e.is.string(i))var a=n.filter(i)[0].id();else var a=i.id();return h[c[r]][c[a]]},path:function(t,i){var r=function(e,t,i,r,a){if(e===t)return n.getElementById(r[e]);if(void 0===i[e][t])return void 0;for(var o=[n.getElementById(r[e])],s=e;e!==t;){s=e,e=i[e][t];var l=a[s][e];o.push(l),o.push(n.getElementById(r[e]))}return o};if(e.is.string(t))var a=n.filter(t)[0].id();else var a=t.id();if(e.is.string(i))var o=n.filter(i)[0].id();else var o=i.id();var s=r(c[a],c[o],f,_,g);return new e.Collection(n,s)}};return P},bellmanFord:function(t){t=t||{};var i=function(){r&&console.log.apply(console,arguments)};if(null!=t.debug)var r=t.debug;else var r=!1;if(i("Starting bellmanFord..."),null!=t.weight&&e.is.fn(t.weight))var n=t.weight;else var n=function(){return 1};if(null!=t.directed)var a=t.directed;else var a=!1;if(null==t.root)return void e.util.error("options.root required");if(e.is.string(t.root))var o=this.filter(t.root)[0];else var o=t.root[0];i("Source node: %s",o.id());for(var s=this._private.cy,l=this.edges().not(":loop"),u=this.nodes(),c=u.length,d={},h=0;c>h;h++)d[u[h].id()]=h;for(var p=[],v=[],f=[],h=0;c>h;h++)p[h]=u[h].id()===o.id()?0:1/0,v[h]=void 0;for(var g=!1,h=1;c>h;h++){g=!1;for(var y=0;y<l.length;y++){var m=d[l[y].source().id()],x=d[l[y].target().id()],b=n.apply(l[y],[l[y]]),w=p[m]+b;if(w<p[x]&&(p[x]=w,v[x]=m,f[x]=l[y],g=!0),!a){var w=p[x]+b;w<p[m]&&(p[m]=w,v[m]=x,f[m]=l[y],g=!0)}}if(!g)break}if(g)for(var y=0;y<l.length;y++){var m=d[l[y].source().id()],x=d[l[y].target().id()],b=n.apply(l[y],[l[y]]);if(p[m]+b<p[x])return e.util.error("Error: graph contains a negative weigth cycle!"),{pathTo:void 0,distanceTo:void 0,hasNegativeWeightCycle:!0}}for(var _=[],h=0;c>h;h++)_.push(u[h].id());var P={distanceTo:function(t){if(e.is.string(t))var i=s.filter(t)[0].id();else var i=t.id();return p[d[i]]},pathTo:function(t){var i=function(e,t,i,r,n,a){for(;;){if(n.push(s.getElementById(r[i])),n.push(a[i]),t===i)return n;var o=e[i];if("undefined"==typeof o)return void 0;i=o}};if(e.is.string(t))var r=s.filter(t)[0].id();else var r=t.id();var n=[],a=i(v,d[o.id()],d[r],_,n,f);return null!=a&&a.reverse(),new e.Collection(s,a)},hasNegativeWeightCycle:!1};return P},kargerStein:function(t){t=t||{};var i=function(){a&&console.log.apply(console,arguments)},r=function(e,t,i){for(var r=i[e],n=r[1],a=r[2],o=t[n],s=t[a],l=i.filter(function(e){return t[e[1]]===o&&t[e[2]]===s?!1:t[e[1]]===s&&t[e[2]]===o?!1:!0}),u=0;u<l.length;u++){var c=l[u];c[1]===s?(l[u]=c.slice(0),l[u][1]=o):c[2]===s&&(l[u]=c.slice(0),l[u][2]=o)}for(var u=0;u<t.length;u++)t[u]===s&&(t[u]=o);return l},n=function(e,t,i,a){if(a>=i)return t;var o=Math.floor(Math.random()*t.length),s=r(o,e,t);return n(e,s,i-1,a)};if(null!=t&&null!=t.debug)var a=t.debug;else var a=!1;i("Starting kargerStein...");var o=this._private.cy,s=this.edges().not(":loop"),l=this.nodes(),u=l.length,c=s.length,d=Math.ceil(Math.pow(Math.log(u)/Math.LN2,2)),h=Math.floor(u/Math.sqrt(2));if(2>u)return void e.util.error("At least 2 nodes are required for KargerSteing algorithm!");for(var p={},v=0;u>v;v++)p[l[v].id()]=v;for(var f=[],v=0;c>v;v++){var g=s[v];f.push([v,p[g.source().id()],p[g.target().id()]])}for(var y,m=1/0,x=[],v=0;u>v;v++)x.push(v);for(var b=0;d>=b;b++){var w=x.slice(0),_=n(w,f,u,h),P=w.slice(0),E=n(w,_,h,2),S=n(P,_,h,2);E.length<=S.length&&E.length<m?(m=E.length,y=[E,w]):S.length<=E.length&&S.length<m&&(m=S.length,y=[S,P])}for(var T=y[0].map(function(e){return s[e[0]]}),k=[],C=[],D=y[1][0],v=0;v<y[1].length;v++){var M=y[1][v];M===D?k.push(l[v]):C.push(l[v])}var N={cut:new e.Collection(o,T),partition1:new e.Collection(o,k),partition2:new e.Collection(o,C)};return N},pageRank:function(t){t=t||{};var i=function(e){for(var t=e.length,i=0,r=0;t>r;r++)i+=e[r];for(var r=0;t>r;r++)e[r]=e[r]/i},r=function(){n&&console.log.apply(console,arguments)};if(null!=t&&null!=t.debug)var n=t.debug;else var n=!1;if(r("Starting pageRank..."),null!=t&&null!=t.dampingfactor)var a=t.dampingFactor;else var a=.8;if(null!=t&&null!=t.precision)var o=t.precision;else var o=1e-6;if(null!=t&&null!=t.iterations)var s=t.iterations;else var s=200;if(null!=t&&null!=t.weight&&e.is.fn(t.weight))var l=t.weight;else var l=function(){return 1};for(var u=this._private.cy,c=this.edges().not(":loop"),d=this.nodes(),h=d.length,p=c.length,v={},f=0;h>f;f++)v[d[f].id()]=f;for(var g=[],y=[],m=(1-a)/h,f=0;h>f;f++){for(var x=[],b=0;h>b;b++)x.push(0);g.push(x),y.push(0)}for(var f=0;p>f;f++){var w=c[f],_=v[w.source().id()],P=v[w.target().id()],E=l.apply(w,[w]);g[P][_]+=E,y[_]+=E}for(var S=1/h+m,b=0;h>b;b++)if(0===y[b])for(var f=0;h>f;f++)g[f][b]=S;else for(var f=0;h>f;f++)g[f][b]=g[f][b]/y[b]+m;for(var T,k=[],C=[],f=0;h>f;f++)k.push(1),C.push(0);for(var D=0;s>D;D++){for(var M=C.slice(0),f=0;h>f;f++)for(var b=0;h>b;b++)M[f]+=g[f][b]*k[b];i(M),T=k,k=M;for(var N=0,f=0;h>f;f++)N+=Math.pow(T[f]-k[f],2);if(o>N){r("Stoped at iteration %s",D);break}}r("Result:\n"+k);var I={rank:function(t){if(e.is.string(t))var i=u.filter(t)[0].id();else var i=t.id();return k[v[i]]}};return I}})}(cytoscape),function(e){"use strict";e.fn.eles({animated:e.define.animated(),clearQueue:e.define.clearQueue(),delay:e.define.delay(),animate:e.define.animate(),stop:e.define.stop()})}(cytoscape),function(e){"use strict";e.fn.eles({classes:function(t){var i,r=this,n=[];if(e.is.fn(t))i=t;else if(!e.is.plainObject(t))return this;for(var a=0;a<r.length;a++){var o=r[a],s=!1;if(t=i?i.apply(o,[a,o]):t,t.add)for(var l=0;l<t.add.length;l++){var u=t.add[l],c=o._private.classes[u];o._private.classes[u]=!0,c||s||(n.push(o),s=!0)}if(t.remove)for(var l=0;l<t.remove.length;l++){var u=t.remove[l],c=o._private.classes[u];o._private.classes[u]=!1,c&&!s&&(n.push(o),s=!0)}if(t.toggle)for(var l=0;l<t.toggle.length;l++){var u=t.toggle[l],c=o._private.classes[u];o._private.classes[u]=!c,s||(n.push(o),s=!0)}}return n.length>0&&new e.Collection(this.cy(),n).updateStyle().trigger("class"),this},addClass:function(t){t=t.split(/\s+/);for(var i=this,r=[],n=0;n<t.length;n++){var a=t[n];if(!e.is.emptyString(a))for(var o=0;o<i.length;o++){var s=i[o],l=s._private.classes[a];s._private.classes[a]=!0,l||r.push(s)}}return r.length>0&&new e.Collection(this._private.cy,r).updateStyle().trigger("class"),i},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes[e]?!0:!1},toggleClass:function(t,i){for(var r=t.split(/\s+/),n=this,a=[],o=0,s=n.length;s>o;o++)for(var l=n[o],u=0;u<r.length;u++){var c=r[u];if(!e.is.emptyString(c)){var d=l._private.classes[c],h=i||void 0===i&&!d;h?(l._private.classes[c]=!0,d||a.push(l)):(l._private.classes[c]=!1,d&&a.push(l))}}return a.length>0&&new e.Collection(this._private.cy,a).updateStyle().trigger("class"),n},removeClass:function(t){t=t.split(/\s+/);for(var i=this,r=[],n=0;n<i.length;n++)for(var a=i[n],o=0;o<t.length;o++){var s=t[o];if(s&&""!==s){var l=a._private.classes[s];a._private.classes[s]=void 0,l&&r.push(a)}}return r.length>0&&new e.Collection(i._private.cy,r).updateStyle(),i.trigger("class"),i},flashClass:function(e,t){var i=this;if(null==t)t=250;else if(0===t)return i;return i.addClass(e),setTimeout(function(){i.removeClass(e)},t),i}})}(cytoscape),function(e){"use strict";e.fn.eles({allAre:function(e){return this.filter(e).length===this.length},is:function(e){return this.filter(e).length>0},some:function(e,t){for(var i=0;i<this.length;i++){var r=e.apply(t,[this[i],i,this]);if(r)return!0}return!1},every:function(e,t){for(var i=0;i<this.length;i++){var r=e.apply(t,[this[i],i,this]);if(!r)return!1}return!0},same:function(e){return e=this.cy().collection(e),this.length!==e.length?!1:this.intersect(e).length===this.length},anySame:function(e){return e=this.cy().collection(e),this.intersect(e).length>0},allAreNeighbors:function(e){return e=this.cy().collection(e),this.neighborhood().intersect(e).length===e.length}})}(cytoscape),function(e){"use strict";e.fn.eles({parent:function(t){for(var i=[],r=this._private.cy,n=0;n<this.length;n++){var a=this[n],o=r.getElementById(a._private.data.parent);o.size()>0&&i.push(o)}return new e.Collection(r,i,{unique:!0}).filter(t)},parents:function(t){for(var i=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var a=r[n];i.push(a)}r=r.parent()}return new e.Collection(this.cy(),i,{unique:!0}).filter(t)},commonAncestors:function(e){for(var t,i=0;i<this.length;i++){var r=this[i],n=r.parents();t=t||n,t=t.intersect(n)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().empty()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isNode()&&e.parent().nonempty()}).filter(e)},children:function(t){for(var i=[],r=0;r<this.length;r++){var n=this[r];i=i.concat(n._private.children)}return new e.Collection(this.cy(),i,{unique:!0}).filter(t)},siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];return e?0!==e._private.children.length:void 0},isChild:function(){var e=this[0];return e?void 0!==e._private.data.parent&&0!==e.parent().length:void 0},descendants:function(t){function i(e){for(var t=0;t<e.length;t++){var n=e[t];r.push(n),n.children().nonempty()&&i(n.children())}}var r=[];return i(this.children()),new e.Collection(this.cy(),r,{unique:!0}).filter(t)}}),e.elesfn.ancestors=e.elesfn.parents}(cytoscape),function(e){"use strict";var t=1,i=0;e.fn.eles({data:e.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:e.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:e.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:e.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:e.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:e.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];return e?e._private.data.id:void 0},position:e.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){var t=e.updateCompoundBounds();t.rtrigger("position")},canSet:function(e){return!e.locked()}}),silentPosition:e.define.data({field:"position",bindingEvent:"position",allowBinding:!1,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!1,triggerFnName:"trigger",allowGetting:!0,validKeys:["x","y"],onSet:function(e){e.updateCompoundBounds()},canSet:function(e){return!e.locked()}}),positions:function(t,i){if(e.is.plainObject(t))this.position(t);else if(e.is.fn(t)){for(var r=t,n=0;n<this.length;n++){var a=this[n],t=r.apply(a,[n,a]);if(t&&!a.locked()){var o=a._private.position;o.x=t.x,o.y=t.y}}var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;i?l.trigger("position"):l.rtrigger("position")}return this},silentPositions:function(e){return this.positions(e,!0)},updateCompoundBounds:function(){function t(e){var t=e.children(),i=e._private.style,n=t.boundingBox({includeLabels:!1,includeEdges:!1}),a={top:i["padding-top"].pxValue,bottom:i["padding-bottom"].pxValue,left:i["padding-left"].pxValue,right:i["padding-right"].pxValue},o=e._private.position,s=!1;"auto"===i.width.value&&(e._private.autoWidth=n.w+a.left+a.right,o.x=(n.x1+n.x2-a.left+a.right)/2,s=!0),"auto"===i.height.value&&(e._private.autoHeight=n.h+a.top+a.bottom,o.y=(n.y1+n.y2-a.top+a.bottom)/2,s=!0),s&&r.push(e)}var i=this.cy();if(!i.styleEnabled()||!i.hasCompoundNodes())return i.collection();for(var r=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var o=n[a];t(o)}n=n.parent()}return new e.Collection(i,r)},renderedPosition:function(t,i){var r=this[0],n=this.cy(),a=n.zoom(),o=n.pan(),s=e.is.plainObject(t)?t:void 0,l=void 0!==s||void 0!==i&&e.is.string(t);if(r&&r.isNode()){if(!l){var u=r._private.position;return s={x:u.x*a+o.x,y:u.y*a+o.y},void 0===t?s:s[t]}for(var c=0;c<this.length;c++){var r=this[c];void 0!==i?r._private.position[t]=(i-o[t])/a:void 0!==s&&(r._private.position={x:(s.x-o.x)/a,y:(s.y-o.y)/a})}this.rtrigger("position")}else if(!l)return void 0;return this},parentPosition:function(t,i){var r=this[0],n=this.cy(),a=e.is.plainObject(t)?t:void 0,o=void 0!==a||void 0!==i&&e.is.string(t),s=n.hasCompoundNodes();if(r&&r.isNode()){if(!o){var l=r._private.position,u=s?r.parent():null,c=u&&u.length>0,d=c;c&&(u=u[0]);var h=d?u._private.position:{x:0,y:0};return a={x:l.x-h.x,y:l.y-h.y},void 0===t?a:a[t]}for(var p=0;p<this.length;p++){var r=this[p],u=s?r.parent():null,c=u&&u.length>0,d=c;c&&(u=u[0]);var h=d?u._private.position:{x:0,y:0};void 0!==i?r._private.position[t]=i+h[t]:void 0!==a&&(r._private.position={x:a.x+h.x,y:a.y+h.y})}this.rtrigger("position")}else if(!o)return void 0;return this},width:function(){var e=this[0],t=e._private.cy,i=t._private.styleEnabled;if(e){if(i){var r=e._private.style.width;return"auto"===r.strValue?e._private.autoWidth:r.pxValue}return 1}},outerWidth:function(){var e=this[0],r=e._private.cy,n=r._private.styleEnabled;if(e){if(n){var a=e._private.style,o="auto"===a.width.strValue?e._private.autoWidth:a.width.pxValue,s=a["border-width"]?a["border-width"].pxValue*t+i:0;return o+s}return 1}},renderedWidth:function(){var e=this[0];if(e){var t=e.width();return t*this.cy().zoom()}},renderedOuterWidth:function(){var e=this[0];if(e){var t=e.outerWidth();return t*this.cy().zoom()}},height:function(){var e=this[0],t=e._private.cy,i=t._private.styleEnabled;if(e&&"nodes"===e._private.group){if(i){var r=e._private.style.height;return"auto"===r.strValue?e._private.autoHeight:r.pxValue}return 1}},outerHeight:function(){var e=this[0],r=e._private.cy,n=r._private.styleEnabled;if(e&&"nodes"===e._private.group){if(!n)return 1;var a=e._private.style,o="auto"===a.height.strValue?e._private.autoHeight:a.height.pxValue,s=a["border-width"]?a["border-width"].pxValue*t+i:0;return o+s}},renderedHeight:function(){var e=this[0];if(e&&"nodes"===e._private.group){var t=e.height();return t*this.cy().zoom()}},renderedOuterHeight:function(){var e=this[0];if(e&&"nodes"===e._private.group){var t=e.outerHeight();return t*this.cy().zoom()}},renderedBoundingBox:function(e){var t=this.boundingBox(e),i=this.cy(),r=i.zoom(),n=i.pan(),a=t.x1*r+n.x,o=t.x2*r+n.x,s=t.y1*r+n.y,l=t.y2*r+n.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},boundingBox:function(e){var t=this,i=t._private.cy,r=i._private,n=r.styleEnabled;e=e||{};var a=void 0===e.includeNodes?!0:e.includeNodes,o=void 0===e.includeEdges?!0:e.includeEdges,s=void 0===e.includeLabels?!0:e.includeLabels;n&&r.renderer.recalculateRenderedStyle(this);for(var l=1/0,u=-1/0,c=1/0,d=-1/0,h=0;h<t.length;h++){var p,v,f,g,y,m,x=t[h],b=x._private,w=n?b.style.display.value:"element",_="nodes"===b.group,P=!1;if("none"!==w){if(_&&a){P=!0;var E=b.position;y=E.x,m=E.y;var S=x.outerWidth(),T=S/2,k=x.outerHeight(),C=k/2;p=y-T,v=y+T,f=m-C,g=m+C,l=l>p?p:l,u=v>u?v:u,c=c>f?f:c,d=g>d?g:d}else if(x.isEdge()&&o){P=!0;var D=x._private.source._private.position,M=x._private.target._private.position,N=x._private.rstyle||{};if(p=D.x,v=M.x,f=D.y,g=M.y,p>v){var I=p;p=v,v=I}if(f>g){var I=f;f=g,g=I}if(l=l>p?p:l,u=v>u?v:u,c=c>f?f:c,d=g>d?g:d,n)for(var B=N.bezierPts||[],S=x._private.style.width.pxValue,z=S/2,O=0;O<B.length;O++){var L=B[O];p=L.x-z,v=L.x+z,f=L.y-z,g=L.y+z,l=l>p?p:l,u=v>u?v:u,c=c>f?f:c,d=g>d?g:d}}if(n){var X=x._private.style,N=x._private.rstyle,R=X.content.strValue,Y=X["font-size"],V=X["text-halign"],A=X["text-valign"],q=N.labelWidth,F=N.labelHeight,j=N.labelX,W=N.labelY;if(P&&s&&R&&Y&&null!=F&&null!=q&&null!=j&&null!=W&&V&&A){var H,$,Z,U,G=F,K=q;if(x.isEdge())H=j-K/2,$=j+K/2,Z=W-G/2,U=W+G/2;else{switch(V.value){case"left":H=j-K,$=j;break;case"center":H=j-K/2,$=j+K/2;break;case"right":H=j,$=j+K}switch(A.value){case"top":Z=W-G,U=W;break;case"center":Z=W-G/2,U=W+G/2;break;case"bottom":Z=W,U=W+G}}l=l>H?H:l,u=$>u?$:u,c=c>Z?Z:c,d=U>d?U:d}}}}return{x1:l,x2:u,y1:c,y2:d,w:u-l,h:d-c}}}),e.elesfn.modelPosition=e.elesfn.position,e.elesfn.modelPositions=e.elesfn.positions}(cytoscape),function(e){"use strict";function t(e){return function(t){var i=this;if(void 0===t&&(t=!0),0!==i.length&&i.isNode()&&!i.removed()){for(var r=0,n=i[0],a=n._private.edges,o=0;o<a.length;o++){var s=a[o];(t||!s.isLoop())&&(r+=e(n,s))}return r}}}function i(e,t){return function(i){for(var r,n=this.nodes(),a=0;a<n.length;a++){var o=n[a],s=o[e](i);void 0===s||void 0!==r&&!t(s,r)||(r=s)}return r}}e.fn.eles({degree:t(function(e,t){return t.source().same(t.target())?2:1}),indegree:t(function(e,t){return t.target().same(e)?1:0}),outdegree:t(function(e,t){return t.source().same(e)?1:0})}),e.fn.eles({minDegree:i("degree",function(e,t){return t>e}),maxDegree:i("degree",function(e,t){return e>t}),minIndegree:i("indegree",function(e,t){return t>e}),maxIndegree:i("indegree",function(e,t){return e>t}),minOutdegree:i("outdegree",function(e,t){return t>e}),maxOutdegree:i("outdegree",function(e,t){return e>t})}),e.fn.eles({totalDegree:function(e){for(var t=0,i=this.nodes(),r=0;r<i.length;r++)t+=i[r].degree(e);return t}})}(cytoscape),function(e){"use strict";e.fn.eles({on:e.define.on(),one:e.define.on({unbindSelfOnTrigger:!0}),once:e.define.on({unbindAllBindersOnTrigger:!0}),off:e.define.off(),trigger:e.define.trigger(),rtrigger:function(e,t){return 0!==this.length?(this.cy().notify({type:e,collection:this}),this.trigger(e,t),this):void 0}}),e.elesfn.bind=e.elesfn.on,e.elesfn.unbind=e.elesfn.off}(cytoscape),function(e){"use strict";e.fn.eles({nodes:function(e){return this.filter(function(e,t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(e,t){return t.isEdge()}).filter(e)},filter:function(t){var i=this._private.cy;if(e.is.fn(t)){for(var r=[],n=0;n<this.length;n++){var a=this[n];t.apply(a,[n,a])&&r.push(a)}return new e.Collection(i,r)}return e.is.string(t)||e.is.elementOrCollection(t)?new e.Selector(t).filter(this):void 0===t?this:new e.Collection(i)},not:function(t){var i=this._private.cy;if(t){e.is.string(t)&&(t=this.filter(t));for(var r=[],n=0;n<this.length;n++){var a=this[n],o=t._private.ids[a.id()];o||r.push(a)}return new e.Collection(i,r)}return this},intersect:function(t){var i=this._private.cy;if(e.is.string(t)){var r=t;return this.filter(r)}for(var n=[],a=this,o=t,s=this.length<t.length,l=s?o._private.ids:a._private.ids,u=s?a:o,c=0;c<u.length;c++){var d=u[c]._private.data.id,h=l[d];h&&n.push(h)}return new e.Collection(i,n)},add:function(t){var i=this._private.cy;if(!t)return this;if(e.is.string(t)){var r=t;t=i.elements(r)}for(var n=[],a=0;a<this.length;a++)n.push(this[a]);for(var a=0;a<t.length;a++){var o=!this._private.ids[t[a].id()];o&&n.push(t[a])}return new e.Collection(i,n)},merge:function(t){var i=this._private,r=i.cy;if(!t)return this;if(e.is.string(t)){var n=t;t=r.elements(n)}for(var a=0;a<t.length;a++){var o=t[a],s=o.id(),l=!i.ids[s];if(l){var u=this.length++;this[u]=o,i.ids[s]=o,i.indexes[s]=u}}return this},unmergeOne:function(e){e=e[0];var t=this._private,i=e.id(),r=t.indexes[i];if(null==r)return this;this[r]=void 0,t.ids[i]=void 0,t.indexes[i]=void 0;var n=r===this.length-1;if(this.length>1&&!n){var a=this.length-1,o=this[a];this[a]=void 0,this[r]=o,t.indexes[o.id()]=r}return this.length--,this},unmerge:function(t){var i=this._private.cy;if(!t)return this;if(e.is.string(t)){var r=t;t=i.elements(r)}for(var n=0;n<t.length;n++)this.unmergeOne(t[n]);return this},map:function(e,t){for(var i=[],r=this,n=0;n<r.length;n++){var a=r[n],o=e.apply(t,[a,n,r]);i.push(o)}return i},stdFilter:function(t,i){for(var r=[],n=this,a=this._private.cy,o=0;o<n.length;o++){var s=n[o],l=t.apply(i,[s,o,n]);l&&r.push(s)}return new e.Collection(a,r)},max:function(e,t){for(var i,r=-1/0,n=this,a=0;a<n.length;a++){var o=n[a],s=e.apply(t,[o,a,n]);s>r&&(r=s,i=o)}return{value:r,ele:i}},min:function(e,t){for(var i,r=1/0,n=this,a=0;a<n.length;a++){var o=n[a],s=e.apply(t,[o,a,n]);r>s&&(r=s,i=o)}return{value:r,ele:i}}})}(cytoscape),function(e){"use strict";e.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},isSimple:function(){return this.isEdge()&&this.source().id()!==this.target().id()},group:function(){var e=this[0];return e?e._private.group:void 0}})}(cytoscape),function(e){"use strict";e.fn.eles({each:function(t){if(e.is.fn(t))for(var i=0;i<this.length;i++){var r=this[i],n=t.apply(r,[i,r]);if(n===!1)break}return this},forEach:function(t,i){if(e.is.fn(t))for(var r=0;r<this.length;r++){var n=this[r],a=t.apply(i,[n,r,this]);if(a===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(t,i){var r=[],n=this.length;null==i&&(i=n),null==t&&(t=0),0>t&&(t=n+t),0>i&&(i=n+i);for(var a=t;a>=0&&i>a&&n>a;a++)r.push(this[a]);return new e.Collection(this.cy(),r)},size:function(){return this.length},eq:function(t){return this[t]||new e.Collection(this.cy())},first:function(){return this[0]||new e.Collection(this.cy())},last:function(){return this[this.length-1]||new e.Collection(this.cy())},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!e.is.fn(t))return this;var i=this.cy(),r=this.toArray().sort(t);return new e.Collection(i,r)},sortByZIndex:function(){return this.sort(e.Collection.zIndexSort)},zDepth:function(){var e=this[0];if(!e)return void 0;var t=e._private,i=t.group;if("nodes"===i)return t.data.parent?e.parents().size():0;var r=t.source,n=t.target,a=r._private.data.parent?r.parents().size():0,o=n._private.data.parent?n.parents().size():0;return Math.max(a-1,o-1,0)+.5}}),e.Collection.zIndexSort=function(e,t){var i=e.cy(),r=e._private,n=t._private,a=r.style["z-index"].value-n.style["z-index"].value,o=0,s=0,l=i.hasCompoundNodes(),u="nodes"===r.group,c="edges"===r.group,d="nodes"===n.group,h="edges"===n.group;l&&(o=e.zDepth(),s=t.zDepth());var p=o-s,v=0===p;return v?u&&h?1:c&&d?-1:0===a?r.index-n.index:a:p}}(cytoscape),function(e){"use strict";e.fn.eles({layoutPositions:function(t,i,r){var n=this.nodes(),a=this.cy();if(t.trigger({type:"layoutstart",layout:t}),i.animate){for(var o=0;o<n.length;o++){var s=n[o],l=o===n.length-1,u=r.call(s,o,s),c=s.position();e.is.number(c.x)&&e.is.number(c.y)||s.silentPosition({x:0,y:0}),s.animate({position:u},{duration:i.animationDuration,step:l?function(){i.fit&&a.fit(i.padding)}:void 0,complete:l?function(){null!=i.zoom&&a.zoom(i.zoom),i.pan&&a.pan(i.pan),i.fit&&a.fit(i.padding),t.one("layoutstop",i.stop),t.trigger({type:"layoutstop",layout:t})}:void 0})}t.one("layoutready",i.ready),t.trigger({type:"layoutready",layout:t})}else n.positions(r),i.fit&&a.fit(i.padding),null!=i.zoom&&a.zoom(i.zoom),i.pan&&a.pan(i.pan),t.one("layoutready",i.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",i.stop),t.trigger({type:"layoutstop",layout:t});
return this},layout:function(t){var i=this.cy();return i.layout(e.util.extend({},t,{eles:this})),this},makeLayout:function(t){var i=this.cy();return i.makeLayout(e.util.extend({},t,{eles:this}))}})}(cytoscape),function(e){"use strict";e.fn.eles({updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t._private.batchingStyle){for(var i=t._private.batchStyleEles,r=0;r<this.length;r++){var n=this[r];i.ids[n._private.id]||i.push(n)}return this}var a=t.style();e=e||void 0===e?!0:!1,a.apply(this);var o=this.updateCompoundBounds(),s=o.length>0?this.add(o):this;return e?s.rtrigger("style"):s.trigger("style"),this},updateMappers:function(e){var t=this._private.cy,i=t.style();if(e=e||void 0===e?!0:!1,!t.styleEnabled())return this;i.updateMappers(this);var r=this.updateCompoundBounds(),n=r.length>0?this.add(r):this;return e?n.rtrigger("style"):n.trigger("style"),this},renderedCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var i=this[0];if(i){var r=i.cy().style().getRenderedStyle(i);return void 0===e?r:r[e]}},css:function(t,i){var r=this.cy();if(!r.styleEnabled())return this;var n=!1,a=r.style();if(e.is.plainObject(t)){var o=t;a.applyBypass(this,o,n);var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;l.rtrigger("style")}else if(e.is.string(t)){if(void 0===i){var u=this[0];return u?u._private.style[t].strValue:void 0}a.applyBypass(this,t,i,n);var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;l.rtrigger("style")}else if(void 0===t){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeCss:function(e){var t=this.cy();if(!t.styleEnabled())return this;var i=!1,r=t.style(),n=this;if(void 0===e)for(var a=0;a<n.length;a++){var o=n[a];r.removeAllBypasses(o,i)}else{e=e.split(/\s+/);for(var a=0;a<n.length;a++){var o=n[a];r.removeBypasses(o,e,i)}}var s=this.updateCompoundBounds(),l=s.length>0?this.add(s):this;return l.rtrigger("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},visible:function(){var e=this.cy();if(!e.styleEnabled())return!0;var t=this[0],i=e.hasCompoundNodes();if(t){var r=t._private.style;if("visible"!==r.visibility.value||"element"!==r.display.value)return!1;if("nodes"===t._private.group){if(!i)return!0;var n=t._private.data.parent?t.parents():null;if(n)for(var a=0;a<n.length;a++){var o=n[a],s=o._private.style,l=s.visibility.value,u=s.display.value;if("visible"!==l||"element"!==u)return!1}return!0}var c=t._private.source,d=t._private.target;return c.visible()&&d.visible()}},hidden:function(){var e=this[0];return e?!e.visible():void 0},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),i=this[0];if(i){var r=i._private,n=r.style.opacity.value;if(!t)return n;var a=r.data.parent?i.parents():null;if(a)for(var o=0;o<a.length;o++){var s=a[o],l=s._private.style.opacity.value;n=l*n}return n}},transparent:function(){var e=this[0],t=e.cy().hasCompoundNodes();return e?t?0===e.effectiveOpacity():0===e._private.style.opacity.value:void 0},isFullAutoParent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];if(t){var i="auto"===t._private.style.width.value,r="auto"===t._private.style.height.value;return t.isParent()&&i&&r}}}),e.elesfn.style=e.elesfn.css,e.elesfn.renderedStyle=e.elesfn.renderedCss,e.elesfn.removeStyle=e.elesfn.removeCss}(cytoscape),function(e){"use strict";function t(e){return function(){var t=arguments;if(2===t.length){var i=t[0],r=t[1];this.bind(e.event,i,r)}else if(1===t.length){var r=t[0];this.bind(e.event,r)}else if(0===t.length){for(var n=0;n<this.length;n++){var a=this[n],o=!e.ableField||a._private[e.ableField];if(e.overrideAble){var s=e.overrideAble(a);if(void 0!==s&&(o=s,!s))return this}o&&(a._private[e.field]=e.value)}this.updateStyle(),this.trigger(e.event)}return this}}function i(i){e.elesfn[i.field]=function(){var e=this[0];if(e){if(i.overrideField){var t=i.overrideField(e);if(void 0!==t)return t}return e._private[i.field]}},e.elesfn[i.on]=t({event:i.on,field:i.field,ableField:i.ableField,overrideAble:i.overrideAble,value:!0}),e.elesfn[i.off]=t({event:i.off,field:i.field,ableField:i.ableField,overrideAble:i.overrideAble,value:!1})}i({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"}),i({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()?!1:void 0},on:"grabify",off:"ungrabify"}),i({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"}),i({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"}),e.elesfn.grabbed=function(){var e=this[0];return e?e._private.grabbed:void 0},i({field:"active",on:"activate",off:"unactivate"}),e.elesfn.inactive=function(){var e=this[0];return e?!e._private.active:void 0}}(cytoscape),function(e){"use strict";function t(t){return function(i){for(var r=[],n=this._private.cy,a=0;a<this.length;a++){var o=this[a],s=o._private[t.attr];s&&r.push(s)}return new e.Collection(n,r,{unique:!0}).filter(i)}}function i(t){return function(i){var r=[],n=this._private.cy,a=t||{};e.is.string(i)&&(i=n.$(i));for(var o=i.connectedEdges(),s=this._private.ids,l=0;l<o.length;l++){var u,c=o[l],d=c._private.data;if(a.thisIs){var h=d[a.thisIs];u=s[h]}else u=s[d.source]||s[d.target];u&&r.push(c)}return new e.Collection(n,r,{unique:!0})}}function r(t){var i={codirected:!1};return t=e.util.extend({},i,t),function(i){for(var r=this._private.cy,n=[],a=this.edges(),o=t,s=0;s<a.length;s++)for(var l=a[s],u=l.source()[0],c=u.id(),d=l.target()[0],h=d.id(),p=u._private.edges,v=0;v<p.length;v++){var f=p[v],g=f._private.data,y=g.target,m=g.source,x=y===h&&m===c,b=c===y&&h===m;(o.codirected&&x||!o.codirected&&(x||b))&&n.push(f)}return new e.Collection(r,n,{unique:!0}).filter(i)}}e.fn.eles({roots:function(t){for(var i=this,r=[],n=0;n<i.length;n++){var a=i[n];if(a.isNode()){var o=a.connectedEdges(function(){return this.data("target")===a.id()&&this.data("source")!==a.id()}).length>0;o||r.push(a)}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},leaves:function(t){for(var i=this,r=[],n=0;n<i.length;n++){var a=i[n];if(a.isNode()){var o=a.connectedEdges(function(){return this.data("source")===a.id()&&this.data("target")!==a.id()}).length>0;o||r.push(a)}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},outgoers:function(t){for(var i=this,r=[],n=0;n<i.length;n++){var a=i[n],o=a.id();if(a.isNode())for(var s=a._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data.source,d=u._private.data.target;c===o&&d!==o&&(r.push(u),r.push(u.target()[0]))}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},successors:function(t){for(var i=this,r=[],n={};;){var a=i.outgoers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();n[u]||(n[u]=!0,r.push(l),o=!0)}if(!o)break;i=a}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},incomers:function(t){for(var i=this,r=[],n=0;n<i.length;n++){var a=i[n],o=a.id();if(a.isNode())for(var s=a._private.edges,l=0;l<s.length;l++){var u=s[l],c=u._private.data.source,d=u._private.data.target;d===o&&c!==o&&(r.push(u),r.push(u.source()[0]))}}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)},predecessors:function(t){for(var i=this,r=[],n={};;){var a=i.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();n[u]||(n[u]=!0,r.push(l),o=!0)}if(!o)break;i=a}return new e.Collection(this._private.cy,r,{unique:!0}).filter(t)}}),e.fn.eles({neighborhood:function(t){for(var i=[],r=this._private.cy,n=this.nodes(),a=0;a<n.length;a++)for(var o=n[a],s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],c=u.connectedNodes().not(o);c.length>0&&i.push(c[0]),i.push(u[0])}return new e.Collection(r,i,{unique:!0}).filter(t)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),e.fn.eles({source:function(e){var t,i=this[0];return i&&(t=i._private.source),t&&e?t.filter(e):t},target:function(e){var t,i=this[0];return i&&(t=i._private.target),t&&e?t.filter(e):t},sources:t({attr:"source"}),targets:t({attr:"target"})}),e.fn.eles({edgesWith:i(),edgesTo:i({thisIs:"source"})}),e.fn.eles({connectedEdges:function(t){for(var i=[],r=this._private.cy,n=this,a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var s=o._private.edges,l=0;l<s.length;l++){var u=s[l];i.push(u)}}return new e.Collection(r,i,{unique:!0}).filter(t)},connectedNodes:function(t){for(var i=[],r=this._private.cy,n=this,a=0;a<n.length;a++){var o=n[a];o.isEdge()&&(i.push(o.source()[0]),i.push(o.target()[0]))}return new e.Collection(r,i,{unique:!0}).filter(t)},parallelEdges:r(),codirectedEdges:r({codirected:!0})})}(cytoscape),function(e){"use strict";e.fn.eles({fit:function(){},center:function(){}})}(cytoscape),function(e){"use strict";e.Minheap=function(t,i,r){return new e.Heap(t,i,e.Heap.minHeapComparator,r)},e.Maxheap=function(t,i,r){return new e.Heap(t,i,e.Heap.maxHeapComparator,r)},e.Heap=function(t,i,r,n){if("undefined"!=typeof r&&"undefined"!=typeof i){"undefined"==typeof n&&(n=e.Heap.idFn);var a,o,s,l=[],u={},c=[],d=0;for(i=this.getArgumentAsCollection(i,t),s=i.length,d=0;s>d;d+=1){if(l.push(n.call(t,i[d],d,i)),a=i[d].id(),u.hasOwnProperty(a))throw"ERROR: Multiple items with the same id found: "+a;u[a]=d,c.push(a)}for(this._private={cy:t,heap:l,pointers:u,elements:c,comparator:r,extractor:n,length:s},d=Math.floor(s/2);d>=0;d-=1)o=this.heapify(d);return o}},e.Heap.idFn=function(e){return e.id()},e.Heap.minHeapComparator=function(e,t){return e>=t},e.Heap.maxHeapComparator=function(e,t){return t>=e},e.fn.heap=function(t){for(var i in t){var r=t[i];e.Heap.prototype[i]=r}},e.heapfn=e.Heap.prototype,e.heapfn.size=function(){return this._private.length},e.heapfn.getArgumentAsCollection=function(t,i){var r;if("undefined"==typeof i&&(i=this._private.cy),e.is.elementOrCollection(t))r=t;else{for(var n=[],a=[].concat.apply([],[t]),o=0;o<a.length;o++){var s=a[o],l=i.getElementById(s);l.length>0&&n.push(l)}r=new e.Collection(i,n)}return r},e.heapfn.isHeap=function(){var e,t,i,r,n,a=this._private.heap,o=a.length,s=this._private.comparator;for(e=0;o>e;e+=1)if(t=2*e+1,i=t+1,r=o>t?s(a[t],a[e]):!0,n=o>i?s(a[i],a[e]):!0,!r||!n)return!1;return!0},e.heapfn.heapSwap=function(e,t){var i=this._private.heap,r=this._private.pointers,n=this._private.elements,a=i[e],o=n[e],s=n[e],l=n[t];i[e]=i[t],n[e]=n[t],r[s]=t,r[l]=e,i[t]=a,n[t]=o},e.heapfn.heapify=function(e,t){var i,r,n,a,o,s,l,u=0,c=!1;for("undefined"==typeof t&&(t=!0),i=this._private.heap,u=i.length,s=this._private.comparator,r=e;!c;)t?(n=2*r+1,a=n+1,o=r,u>n&&!s(i[n],i[o])&&(o=n),u>a&&!s(i[a],i[o])&&(o=a),c=o===r,c||(this.heapSwap(o,r),r=o)):(l=Math.floor((r-1)/2),o=r,c=0>l||s(i[o],i[l]),c||(this.heapSwap(o,l),r=l))},e.heapfn.insert=function(e){var t,i,r,n,a,o=this.getArgumentAsCollection(e),s=o.length;for(a=0;s>a;a+=1){if(t=o[a],i=this._private.heap.length,r=this._private.extractor(t),n=t.id(),this._private.pointers.hasOwnProperty(n))throw"ERROR: Multiple items with the same id found: "+n;this._private.heap.push(r),this._private.elements.push(n),this._private.pointers[n]=i,this.heapify(i,!1)}this._private.length=this._private.heap.length},e.heapfn.getValueById=function(e){if(this._private.pointers.hasOwnProperty(e)){var t=this._private.pointers[e];return this._private.heap[t]}},e.heapfn.contains=function(e){for(var t=this.getArgumentAsCollection(e),i=0;i<t.length;i+=1){var r=t[i].id();if(!this._private.pointers.hasOwnProperty(r))return!1}return!0},e.heapfn.top=function(){return this._private.length>0?{value:this._private.heap[0],id:this._private.elements[0]}:void 0},e.heapfn.pop=function(){if(this._private.length>0){var e,t,i,r=this.top(),n=this._private.length-1;return this.heapSwap(0,n),e=this._private.elements[n],t=this._private.heap[n],i=e,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[i]=void 0,this.heapify(0),r}},e.heapfn.findDirectionHeapify=function(e){var t=Math.floor((e-1)/2),i=this._private.heap,r=0>t||this._private.comparator(i[e],i[t]);this.heapify(e,r)},e.heapfn.edit=function(t,i){for(var r=this.getArgumentAsCollection(t),n=0;n<r.length;n+=1){var a=r[n].id(),o=this._private.pointers[a],s=this._private.heap[o];e.is.number(i)?this._private.heap[o]=i:e.is.fn(i)&&(this._private.heap[o]=i.call(this._private.cy,s,o)),this.findDirectionHeapify(o)}},e.heapfn.delete=function(e){for(var t=this.getArgumentAsCollection(e),i=0;i<t.length;i+=1){var r,n,a,o=t[i].id(),s=this._private.pointers[o],l=this._private.length-1;s!==l&&this.heapSwap(s,l),r=this._private.elements[l],n=this._private.heap[l],a=r,this._private.heap.pop(),this._private.elements.pop(),this._private.length=this._private.heap.length,this._private.pointers[a]=void 0,this.findDirectionHeapify(s)}return n}}(cytoscape),function(e){"use strict";function t(e){t.CANVAS_LAYERS=5,t.SELECT_BOX=0,t.DRAG=2,t.NODE=4,t.TEXTURE_BUFFER=0,t.BUFFER_COUNT=2,this.options=e,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:e.cy,container:e.cy.container(),canvases:new Array(t.CANVAS_LAYERS),contexts:new Array(t.CANVAS_LAYERS),canvasNeedsRedraw:new Array(t.CANVAS_LAYERS),bufferCanvases:new Array(t.BUFFER_COUNT),bufferContexts:new Array(t.CANVAS_LAYERS)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.showFps=e.showFps,this.bindings=[],this.data.canvasContainer=document.createElement("div");var i=this.data.canvasContainer.style;i.position="absolute",i.zIndex="0",i.overflow="hidden",this.data.container.appendChild(this.data.canvasContainer);for(var r=0;r<t.CANVAS_LAYERS;r++)this.data.canvases[r]=document.createElement("canvas"),this.data.contexts[r]=this.data.canvases[r].getContext("2d"),this.data.canvases[r].style.position="absolute",this.data.canvases[r].setAttribute("data-id","layer"+r),this.data.canvases[r].style.zIndex=String(t.CANVAS_LAYERS-r),this.data.canvasContainer.appendChild(this.data.canvases[r]),this.data.canvasNeedsRedraw[r]=!1;this.data.topCanvas=this.data.canvases[0],this.data.canvases[t.NODE].setAttribute("data-id","layer"+t.NODE+"-node"),this.data.canvases[t.SELECT_BOX].setAttribute("data-id","layer"+t.SELECT_BOX+"-selectbox"),this.data.canvases[t.DRAG].setAttribute("data-id","layer"+t.DRAG+"-drag");for(var r=0;r<t.BUFFER_COUNT;r++)this.data.bufferCanvases[r]=document.createElement("canvas"),this.data.bufferContexts[r]=this.data.bufferCanvases[r].getContext("2d"),this.data.bufferCanvases[r].style.position="absolute",this.data.bufferCanvases[r].setAttribute("data-id","buffer"+r),this.data.bufferCanvases[r].style.zIndex=String(-r-1),this.data.bufferCanvases[r].style.visibility="hidden";this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.hideLabelsOnViewport=e.hideLabelsOnViewport,this.textureOnViewport=e.textureOnViewport,this.wheelSensitivity=e.wheelSensitivity,this.motionBlurEnabled=void 0===e.motionBlur?!0:e.motionBlur,this.forcedPixelRatio=e.pixelRatio,this.motionBlur=!0,this.tapThreshold=e.tapThreshold,this.tapThreshold2=e.tapThreshold*e.tapThreshold,this.tapholdDuration=500,this.load()}t.panOrBoxSelectDelay=400,t.isTouch=e.is.touch();var i="undefined"!=typeof Path2D;t.usePaths=function(){return i},t.prototype.notify=function(i){var r;r=e.is.array(i.type)?i.type:[i.type];for(var n=0;n<r.length;n++){var a=r[n];switch(a){case"destroy":return void this.destroy();case"add":case"remove":case"load":this.updateNodesCache(),this.updateEdgesCache();break;case"viewport":this.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;break;case"style":this.updateCachedZSortedEles()}("load"===a||"resize"===a)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.data.container))}this.data.canvasNeedsRedraw[t.NODE]=!0,this.data.canvasNeedsRedraw[t.DRAG]=!0,this.redraw()},t.prototype.destroy=function(){this.destroyed=!0;for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],i=t;i.target.removeEventListener(i.event,i.handler,i.useCapture)}this.removeObserver&&this.removeObserver.disconnect()};for(var r in e.math)t.prototype[r]=e.math[r];e("renderer","canvas",t)}(cytoscape),function(e){"use strict";var t=e("renderer","canvas"),i=t.prototype,r=t.arrowShapes={};t.arrowShapeHeight=.3;var n=function(e,t,i,r,n,a){var o=i-n/2,s=i+n/2,l=r-a/2,u=r+a/2;return e>=o&&s>=e&&t>=l&&u>=t},a=function(e,t,i,r,n){r=-r;var a=e*Math.cos(r)-t*Math.sin(r),o=e*Math.sin(r)+t*Math.cos(r),s=a*i,l=o*i,u=s+n.x,c=l+n.y;return{x:u,y:c}};r.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(t,i,n,a,o,s,l,u){var c=r.arrow._points;return e.math.pointInsidePolygon(t,i,c,n,a,o,s,l,u)},roughCollide:n,draw:function(e,t,i,n){for(var o=r.arrow._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,i,n);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r.triangle=r.arrow,r["triangle-backcurve"]={_ctrlPt:[0,-.15],collide:function(t,i,n,a,o,s,l,u){var c=r.triangle._points;return e.math.pointInsidePolygon(t,i,c,n,a,o,s,l,u)},roughCollide:n,draw:function(e,t,i,n){for(var o,s=r.triangle._points,l=0;l<s.length/2;l++){var u=a(s[2*l],s[2*l+1],t,i,n);0===l&&(o=u),e.lineTo(u.x,u.y)}var c=this._ctrlPt,d=a(c[0],c[1],t,i,n);e.quadraticCurveTo(d.x,d.y,o.x,o.y)},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r["triangle-tee"]={_points:[-.15,-.3,0,0,.15,-.3,-.15,-.3],_pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,i,n,a,o,s,l,u){var c=r["triangle-tee"]._points,d=r["triangle-tee"]._pointsTee,h=e.math.pointInsidePolygon(t,i,d,n,a,o,s,l,u)||e.math.pointInsidePolygon(t,i,c,n,a,o,s,l,u);return h},roughCollide:n,draw:function(e,t,i,n){for(var o=r["triangle-tee"]._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,i,n);e.lineTo(l.x,l.y)}var u=r["triangle-tee"]._pointsTee,c=a(u[0],u[1],t,i,n);e.moveTo(c.x,c.y);for(var s=0;s<u.length/2;s++){var l=a(u[2*s],u[2*s+1],t,i,n);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r["half-triangle-overshot"]={_points:[0,-.25,-.5,-.25,.5,.25],leavePathOpen:!0,matchEdgeWidth:!0,collide:function(t,i,r,n,a,o,s,l){var u=this._points;return e.math.pointInsidePolygon(t,i,u,r,n,a,o,s,l)},roughCollide:n,draw:function(e,t,i,r){for(var n=this._points,o=0;o<n.length/2;o++){var s=a(n[2*o],n[2*o+1],t,i,r);e.lineTo(s.x,s.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}},r.circle={_baseRadius:.15,collide:function(e,t,i,n,a,o,s,l){if(a!=o){var u=(o+l)/(a+l);return t/=u,n/=u,Math.pow(i-e,2)+Math.pow(n-t,2)<=Math.pow((a+l)*r.circle._baseRadius,2)}return Math.pow(i-e,2)+Math.pow(n-t,2)<=Math.pow((a+l)*r.circle._baseRadius,2)},roughCollide:n,draw:function(e,t,i,n){e.arc(n.x,n.y,r.circle._baseRadius*t,0,2*Math.PI,!1)},spacing:function(e){return i.getArrowWidth(e._private.style.width.pxValue)*r.circle._baseRadius},gap:function(e){return 2*e._private.style.width.pxValue}},r.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(t,i,n,a,o,s,l,u){var c=r.inhibitor._points;return e.math.pointInsidePolygon(t,i,c,n,a,o,s,l,u)},roughCollide:n,draw:function(e,t,i,n){for(var o=r.inhibitor._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,i,n);e.lineTo(l.x,l.y)}},spacing:function(){return 1},gap:function(){return 1}},r.tee=r.inhibitor,r.square={_points:[-.15,0,.15,0,.15,-.3,-.15,-.3],collide:function(t,i,n,a,o,s,l,u){var c=r.square._points;return e.math.pointInsidePolygon(t,i,c,n,a,o,s,l,u)},roughCollide:n,draw:function(e,t,i,n){for(var o=r.square._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,i,n);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return 2*e._private.style.width.pxValue}},r.diamond={_points:[-.15,-.15,0,-.3,.15,-.15,0,0],collide:function(t,i,n,a,o,s,l,u){var c=r.diamond._points;return e.math.pointInsidePolygon(t,i,c,n,a,o,s,l,u)},roughCollide:n,draw:function(e,t,i,n){for(var o=r.diamond._points,s=0;s<o.length/2;s++){var l=a(o[2*s],o[2*s+1],t,i,n);e.lineTo(l.x,l.y)}},spacing:function(){return 0},gap:function(e){return e._private.style.width.pxValue}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedNodes=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedNodes&&(e.cache.cachedNodes=t.nodes()),e.cache.cachedNodes},t.prototype.updateNodesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedNodes=t.nodes()},t.prototype.getCachedEdges=function(){var e=this.data,t=this.data.cy;return null==e.cache&&(e.cache={}),null==e.cache.cachedEdges&&(e.cache.cachedEdges=t.edges()),e.cache.cachedEdges},t.prototype.updateEdgesCache=function(){var e=this.data,t=this.data.cy;null==e.cache&&(e.cache={}),e.cache.cachedEdges=t.edges()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.projectIntoViewport=function(e,t){var i=this.findContainerClientCoords(),r=i[0],n=i[1],a=e-r,o=t-n;return a-=this.data.cy.pan().x,o-=this.data.cy.pan().y,a/=this.data.cy.zoom(),o/=this.data.cy.zoom(),[a,o]},t.prototype.findContainerClientCoords=function(){var e=this.data.container,t=this.containerBB=this.containerBB||e.getBoundingClientRect();return[t.left,t.top,t.right-t.left,t.bottom-t.top]},t.prototype.invalidateContainerClientCoordsCache=function(){this.containerBB=null},t.prototype.findNearestElement=function(i,r,n){function a(e){var a=e.outerWidth(),o=e.outerHeight(),l=a/2,c=o/2,d=e._private.position;if(d.x-l<=i&&i<=d.x+l&&d.y-c<=r&&r<=d.y+c){var h=!n||e.visible()&&!e.transparent();if(n&&!h)return;var p=t.nodeShapes[s.getNodeShape(e)],f=e._private.style["border-width"].pxValue/2;p.checkPoint(i,r,f,a+v,o+v,d.x,d.y)&&u.push(e)}}function o(o){var l,c=o._private.rscratch,d=o._private.style,v=d.width.pxValue,f=v*v,g=2*v,y=o._private.source,m=o._private.target,x=!1,b=function(){if(void 0!==l)return l;if(!n)return l=!0,!0;var e=o.visible()&&!o.transparent();return e?(l=!0,!0):(l=!1,!1)};if("self"===c.edgeType)((x=e.math.inBezierVicinity(i,r,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY,f))&&b()&&f+p>e.math.sqDistanceToQuadraticBezier(i,r,c.startX,c.startY,c.cp2ax,c.cp2ay,c.selfEdgeMidX,c.selfEdgeMidY)||(x=e.math.inBezierVicinity(i,r,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY,f))&&b()&&f+p>e.math.sqDistanceToQuadraticBezier(i,r,c.selfEdgeMidX,c.selfEdgeMidY,c.cp2cx,c.cp2cy,c.endX,c.endY))&&u.push(o);else if("haystack"===c.edgeType){var w=d["haystack-radius"].value,_=w/2,P=m._private.position,E=m.width(),S=m.height(),T=y._private.position,k=y.width(),C=y.height(),D=T.x+c.source.x*k*_,M=T.y+c.source.y*C*_,N=P.x+c.target.x*E*_,I=P.y+c.target.y*S*_;(x=e.math.inLineVicinity(i,r,D,M,N,I,g))&&b()&&f+p>e.math.sqDistanceToFiniteLine(i,r,D,M,N,I)&&u.push(o)}else"straight"===c.edgeType?(x=e.math.inLineVicinity(i,r,c.startX,c.startY,c.endX,c.endY,g))&&b()&&f+p>e.math.sqDistanceToFiniteLine(i,r,c.startX,c.startY,c.endX,c.endY)&&u.push(o):"bezier"===c.edgeType&&(x=e.math.inBezierVicinity(i,r,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY,f))&&b()&&f+p>e.math.sqDistanceToQuadraticBezier(i,r,c.startX,c.startY,c.cp2x,c.cp2y,c.endX,c.endY)&&u.push(o);if(x&&b()&&0===u.length||u[u.length-1]!==o){var B=t.arrowShapes[d["source-arrow-shape"].value],z=t.arrowShapes[d["target-arrow-shape"].value],y=y||o._private.source,m=m||o._private.target,P=m._private.position,T=y._private.position,O=s.getArrowWidth(d.width.pxValue),L=s.getArrowHeight(d.width.pxValue),X=O,R=L;(B.roughCollide(i,r,c.arrowStartX,c.arrowStartY,O,L,[c.arrowStartX-T.x,c.arrowStartY-T.y],0)&&B.collide(i,r,c.arrowStartX,c.arrowStartY,O,L,[c.arrowStartX-T.x,c.arrowStartY-T.y],0)||z.roughCollide(i,r,c.arrowEndX,c.arrowEndY,X,R,[c.arrowEndX-P.x,c.arrowEndY-P.y],0)&&z.collide(i,r,c.arrowEndX,c.arrowEndY,X,R,[c.arrowEndX-P.x,c.arrowEndY-P.y],0))&&u.push(o)}h&&u.length>0&&u[u.length-1]===o&&(a(y),a(m))}for(var s=this,l=this.getCachedZSortedEles(),u=[],c=t.isTouch,d=this.data.cy.zoom(),h=this.data.cy.hasCompoundNodes(),p=(c?256:32)/d,v=(c?16:0)/d,f=l.length-1;f>=0;f--){var g=l[f];if(u.length>0)break;"nodes"===g._private.group?a(l[f]):o(l[f])}return u.length>0?u[u.length-1]:null},t.prototype.getAllInBox=function(i,r,n,a){var o=this.getCachedNodes(),s=this.getCachedEdges(),l=[],u=Math.min(i,n),c=Math.max(i,n),d=Math.min(r,a),h=Math.max(r,a);i=u,n=c,r=d,a=h;for(var p,v=0;v<o.length;v++){var f=o[v]._private.position,g=this.getNodeShape(o[v]),y=this.getNodeWidth(o[v]),m=this.getNodeHeight(o[v]),x=o[v]._private.style["border-width"].pxValue/2,b=t.nodeShapes[g];b.intersectBox(i,r,n,a,y,m,f.x,f.y,x)&&l.push(o[v])}for(var v=0;v<s.length;v++){var w=s[v]._private.rscratch;if("self"==s[v]._private.rscratch.edgeType&&((p=e.math.boxInBezierVicinity(i,r,n,a,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkBezierInBox(i,r,n,a,w.startX,w.startY,w.cp2ax,w.cp2ay,w.endX,w.endY,s[v]._private.style.width.pxValue))||(p=e.math.boxInBezierVicinity(i,r,n,a,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkBezierInBox(i,r,n,a,w.startX,w.startY,w.cp2cx,w.cp2cy,w.endX,w.endY,s[v]._private.style.width.pxValue)))&&l.push(s[v]),"bezier"==w.edgeType&&(p=e.math.boxInBezierVicinity(i,r,n,a,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkBezierInBox(i,r,n,a,w.startX,w.startY,w.cp2x,w.cp2y,w.endX,w.endY,s[v]._private.style.width.pxValue))&&l.push(s[v]),"straight"==w.edgeType&&(p=e.math.boxInBezierVicinity(i,r,n,a,w.startX,w.startY,.5*w.startX+.5*w.endX,.5*w.startY+.5*w.endY,w.endX,w.endY,s[v]._private.style.width.pxValue))&&(2==p||1==p&&e.math.checkStraightEdgeInBox(i,r,n,a,w.startX,w.startY,w.endX,w.endY,s[v]._private.style.width.pxValue))&&l.push(s[v]),"haystack"==w.edgeType){var _=s[v].target()[0],P=_.position(),E=s[v].source()[0],S=E.position(),T=S.x+w.source.x,k=S.y+w.source.y,C=P.x+w.target.x,D=P.y+w.target.y,M=T>=i&&n>=T&&k>=r&&a>=k,N=C>=i&&n>=C&&D>=r&&a>=D;M&&N&&l.push(s[v])}}return l},t.prototype.getNodeWidth=function(e){return e.width()},t.prototype.getNodeHeight=function(e){return e.height()},t.prototype.getNodeShape=function(e){var t=e._private.style.shape.value;return e.isParent()?"rectangle"===t||"roundrectangle"===t?t:"rectangle":t},t.prototype.getNodePadding=function(e){var t=e._private.style["padding-left"].pxValue,i=e._private.style["padding-right"].pxValue,r=e._private.style["padding-top"].pxValue,n=e._private.style["padding-bottom"].pxValue;return isNaN(t)&&(t=0),isNaN(i)&&(i=0),isNaN(r)&&(r=0),isNaN(n)&&(n=0),{left:t,right:i,top:r,bottom:n}},t.prototype.zOrderSort=e.Collection.zIndexSort,t.prototype.updateCachedZSortedEles=function(){this.getCachedZSortedEles(!0)},t.prototype.getCachedZSortedEles=function(e){var t=this.lastZOrderCachedNodes,i=this.lastZOrderCachedEdges,r=this.getCachedNodes(),n=this.getCachedEdges(),a=[];if(!e&&t&&i&&t===r&&i===n)a=this.cachedZSortedEles;else{for(var o=0;o<r.length;o++)r[o].visible()&&!r[o].transparent()&&a.push(r[o]);for(var o=0;o<n.length;o++)n[o].visible()&&!n[o].transparent()&&a.push(n[o]);a.sort(this.zOrderSort),this.cachedZSortedEles=a}return this.lastZOrderCachedNodes=r,this.lastZOrderCachedEdges=n,a},t.prototype.projectBezier=function(t){function i(e){a.push({x:r(e[0],e[2],e[4],.05),y:r(e[1],e[3],e[5],.05)}),a.push({x:r(e[0],e[2],e[4],.25),y:r(e[1],e[3],e[5],.25)}),a.push({x:r(e[0],e[2],e[4],.4),y:r(e[1],e[3],e[5],.4)});var t={x:r(e[0],e[2],e[4],.5),y:r(e[1],e[3],e[5],.5)};a.push(t),"self"===n.edgeType?(n.midX=n.selfEdgeMidX,n.midY=n.selfEdgeMidY):(n.midX=t.x,n.midY=t.y),a.push({x:r(e[0],e[2],e[4],.6),y:r(e[1],e[3],e[5],.6)}),a.push({x:r(e[0],e[2],e[4],.75),y:r(e[1],e[3],e[5],.75)}),a.push({x:r(e[0],e[2],e[4],.95),y:r(e[1],e[3],e[5],.95)})}var r=e.math.qbezierAt,n=t._private.rscratch,a=t._private.rstyle.bezierPts=[];"self"===n.edgeType?(i([n.startX,n.startY,n.cp2ax,n.cp2ay,n.selfEdgeMidX,n.selfEdgeMidY]),i([n.selfEdgeMidX,n.selfEdgeMidY,n.cp2cx,n.cp2cy,n.endX,n.endY])):"bezier"===n.edgeType&&i([n.startX,n.startY,n.cp2x,n.cp2y,n.endX,n.endY])},t.prototype.recalculateNodeLabelProjection=function(e){var t=e._private.style.content.strValue;if(t&&!t.match(/^\s+$/)){var i,r,n=e.outerWidth(),a=e.outerHeight(),o=e._private.position,s=e._private.style["text-halign"].strValue,l=e._private.style["text-valign"].strValue,u=e._private.rscratch,c=e._private.rstyle;switch(s){case"left":i=o.x-n/2;break;case"right":i=o.x+n/2;break;default:i=o.x}switch(l){case"top":r=o.y-a/2;break;case"bottom":r=o.y+a/2;break;default:r=o.y}u.labelX=i,u.labelY=r,c.labelX=i,c.labelY=r,this.applyLabelDimensions(e)}},t.prototype.recalculateEdgeLabelProjection=function(t){var i=t._private.style.content.strValue;if(i&&!i.match(/^\s+$/)){var r,n,a,o,s=t._private.rscratch,l=t._private.rstyle;if("self"==s.edgeType)a=s.selfEdgeMidX,o=s.selfEdgeMidY;else if("straight"==s.edgeType)a=(s.startX+s.endX)/2,o=(s.startY+s.endY)/2;else if("bezier"==s.edgeType)a=e.math.qbezierAt(s.startX,s.cp2x,s.endX,.5),o=e.math.qbezierAt(s.startY,s.cp2y,s.endY,.5);else if("haystack"==s.edgeType){var u=t._private.source._private.position,c=t._private.target._private.position;a=(u.x+s.source.x+c.x+s.target.x)/2,o=(u.y+s.source.y+c.y+s.target.y)/2}r=a,n=o,s.labelX=r,s.labelY=n,l.labelX=r,l.labelY=n,this.applyLabelDimensions(t)}},t.prototype.applyLabelDimensions=function(e){var t=e._private.rscratch,i=e._private.rstyle,r=this.getLabelText(e),n=this.calculateLabelDimensions(e,r);i.labelWidth=n.width,t.labelWidth=n.width,i.labelHeight=n.height,t.labelHeight=n.height},t.prototype.getLabelText=function(e){var t=e._private.style,i=e._private.style.content.strValue,r=t["text-transform"].value;return"none"==r||("uppercase"==r?i=i.toUpperCase():"lowercase"==r&&(i=i.toLowerCase())),i},t.prototype.calculateLabelDimensions=function(e,t){var i=this,r=e._private.style,n=r["font-style"].strValue,a=r["font-size"].pxValue+"px",o=r["font-family"].strValue,s=r["font-weight"].strValue,l=e._private.labelKey,u=i.labelDimCache||(i.labelDimCache={});if(u[l])return u[l];var c=this.labelCalcDiv;c||(c=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(c));var d=c.style;return d.fontFamily=o,d.fontStyle=n,d.fontSize=a,d.fontWeight=s,d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none",d.padding="0",d.lineHeight="1",c.textContent=t,u[l]={width:c.clientWidth,height:c.clientHeight},u[l]},t.prototype.recalculateRenderedStyle=function(e){for(var t=[],i=[],r={},n=0;n<e.length;n++){var a=e[n],o=a._private,s=o.rscratch,l=o.rstyle,u=o.data.id,c=null!=s.boundingBoxKey&&o.boundingBoxKey===s.boundingBoxKey,d=null!=s.labelKey&&o.labelKey===s.labelKey,h=c&&d;if("nodes"===a._private.group){var p=o.position,v=null!=l.nodeX&&null!=l.nodeY&&p.x===l.nodeX&&p.y===l.nodeY;v&&h||i.push(a),l.nodeX=p.x,l.nodeY=p.y}else{var f=a._private.source._private.position,g=a._private.target._private.position,y=null!=l.srcX&&null!=l.srcY&&f.x===l.srcX&&f.y===l.srcY,m=null!=l.tgtX&&null!=l.tgtY&&g.x===l.tgtX&&g.y===l.tgtY,x=y&&m;if(!x||!h){var b=o.style["curve-style"].value;if("bezier"===b){if(!r[u]){t.push(a),r[u]=!0;for(var w=a.parallelEdges(),n=0;n<w.length;n++){var _=w[n],P=_._private.data.id;r[P]||(t.push(_),r[P]=!0)
}}}else t.push(a)}l.srcX=f.x,l.srcY=f.y,l.tgtX=g.x,l.tgtY=g.y}s.boundingBoxKey=o.boundingBoxKey,s.labelKey=o.labelKey}this.recalculateEdgeProjections(t),this.recalculateLabelProjections(i,t)},t.prototype.recalculateLabelProjections=function(e,t){for(var i=0;i<e.length;i++)this.recalculateNodeLabelProjection(e[i]);for(var i=0;i<t.length;i++)this.recalculateEdgeLabelProjection(t[i])},t.prototype.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)},t.prototype.findEdgeControlPoints=function(i){if(i&&0!==i.length){for(var r,n={},a=[],o=[],s=0;s<i.length;s++){var l=i[s],u=l._private.style,c="unbundled-bezier"===u["curve-style"].value;if("none"!==u.display.value)if("haystack"!==u["curve-style"].value){var d=l._private.data.source,h=l._private.data.target;r=d>h?h+"-"+d:d+"-"+h,c&&(r="unbundled"+l._private.data.id),null==n[r]&&(n[r]=[],a.push(r)),n[r].push(l),c&&(n[r].hasUnbundled=!0)}else o.push(l)}for(var p,v,f,g,y,m,x,b,w,_,P,E,S,T,k=0;k<a.length;k++){r=a[k];var C=n[r];if(C.sort(function(e,t){return e._private.index-t._private.index}),p=C[0]._private.source,v=C[0]._private.target,p._private.data.id>v._private.data.id){var D=p;p=v,v=D}if(f=p._private.position,g=v._private.position,y=this.getNodeWidth(p),m=this.getNodeHeight(p),x=this.getNodeWidth(v),b=this.getNodeHeight(v),w=t.nodeShapes[this.getNodeShape(p)],_=t.nodeShapes[this.getNodeShape(v)],P=p._private.style["border-width"].pxValue,E=v._private.style["border-width"].pxValue,T=!1,C.length>1&&p!==v||C.hasUnbundled){var M=w.intersectLine(f.x,f.y,y,m,g.x,g.y,P/2),N=_.intersectLine(g.x,g.y,x,b,f.x,f.y,E/2),I={x1:M[0],x2:N[0],y1:M[1],y2:N[1]},B=N[1]-M[1],z=N[0]-M[0],O=Math.sqrt(z*z+B*B),L={x:z,y:B},X={x:L.x/O,y:L.y/O};S={x:-X.y,y:X.x},(_.checkPoint(M[0],M[1],E/2,x,b,g.x,g.y)||w.checkPoint(N[0],N[1],P/2,y,m,f.x,f.y))&&(S={},T=!0)}for(var l,R,s=0;s<C.length;s++){l=C[s],R=l._private.rscratch;var Y=R.lastEdgeIndex,V=s,A=R.lastNumEdges,q=C.length,F=l._private.style,j=F["control-point-step-size"].pxValue,W=void 0!==F["control-point-distance"]?F["control-point-distance"].pxValue:void 0,H=F["control-point-weight"].value,c="unbundled-bezier"===F["curve-style"].value,$=R.lastSrcCtlPtX,Z=f.x,U=R.lastSrcCtlPtY,G=f.y,K=R.lastSrcCtlPtW,J=p.outerWidth(),Q=R.lastSrcCtlPtH,et=p.outerHeight(),tt=R.lastTgtCtlPtX,it=g.x,rt=R.lastTgtCtlPtY,nt=g.y,at=R.lastTgtCtlPtW,ot=v.outerWidth(),st=R.lastTgtCtlPtH,lt=v.outerHeight();if(R.badBezier=T?!0:!1,$!==Z||U!==G||K!==J||Q!==et||tt!==it||rt!==nt||at!==ot||st!==lt||!(Y===V&&A===q||c)){if(R.lastSrcCtlPtX=Z,R.lastSrcCtlPtY=G,R.lastSrcCtlPtW=J,R.lastSrcCtlPtH=et,R.lastTgtCtlPtX=it,R.lastTgtCtlPtY=nt,R.lastTgtCtlPtW=ot,R.lastTgtCtlPtH=lt,R.lastEdgeIndex=V,R.lastNumEdges=q,p===v){R.edgeType="self";var ut=s,ct=j;c&&(ut=0,ct=W),R.cp2ax=f.x,R.cp2ay=f.y-(1+Math.pow(m,1.12)/100)*ct*(ut/3+1),R.cp2cx=p._private.position.x-(1+Math.pow(y,1.12)/100)*ct*(ut/3+1),R.cp2cy=f.y,R.selfEdgeMidX=(R.cp2ax+R.cp2cx)/2,R.selfEdgeMidY=(R.cp2ay+R.cp2cy)/2}else if(C.length%2!==1||s!==Math.floor(C.length/2)||c){var dt,ht=(.5-C.length/2+s)*j,pt=e.math.signum(ht);dt=c?W:void 0!==W?pt*W:void 0;var vt=void 0!==dt?dt:ht,ft=1-H,gt=H,yt=l._private.source!==p;yt&&(ft=H,gt=1-H);var mt={x:I.x1*ft+I.x2*gt,y:I.y1*ft+I.y2*gt};R.edgeType="bezier",R.cp2x=mt.x+S.x*vt,R.cp2y=mt.y+S.y*vt}else R.edgeType="straight";this.findEndpoints(l);var xt=!e.is.number(R.startX)||!e.is.number(R.startY),bt=!e.is.number(R.arrowStartX)||!e.is.number(R.arrowStartY),wt=!e.is.number(R.endX)||!e.is.number(R.endY),_t=!e.is.number(R.arrowEndX)||!e.is.number(R.arrowEndY),Pt=3,Et=this.getArrowWidth(l._private.style.width.pxValue)*t.arrowShapeHeight,St=Pt*Et,Tt=e.math.distance({x:R.cp2x,y:R.cp2y},{x:R.startX,y:R.startY}),kt=St>Tt,Ct=e.math.distance({x:R.cp2x,y:R.cp2y},{x:R.endX,y:R.endY}),Dt=St>Ct;if("bezier"===R.edgeType){var Mt=!1;if(xt||bt||kt){Mt=!0;var Nt={x:R.cp2x-f.x,y:R.cp2y-f.y},It=Math.sqrt(Nt.x*Nt.x+Nt.y*Nt.y),Bt={x:Nt.x/It,y:Nt.y/It},zt=Math.max(y,m),Ot={x:R.cp2x+2*Bt.x*zt,y:R.cp2y+2*Bt.y*zt},Lt=w.intersectLine(f.x,f.y,y,m,Ot.x,Ot.y,P/2);kt?(R.cp2x=R.cp2x+Bt.x*(St-Tt),R.cp2y=R.cp2y+Bt.y*(St-Tt)):(R.cp2x=Lt[0]+Bt.x*St,R.cp2y=Lt[1]+Bt.y*St)}if(wt||_t||Dt){Mt=!0;var Nt={x:R.cp2x-g.x,y:R.cp2y-g.y},It=Math.sqrt(Nt.x*Nt.x+Nt.y*Nt.y),Bt={x:Nt.x/It,y:Nt.y/It},zt=Math.max(y,m),Ot={x:R.cp2x+2*Bt.x*zt,y:R.cp2y+2*Bt.y*zt},Xt=_.intersectLine(g.x,g.y,x,b,Ot.x,Ot.y,E/2);Dt?(R.cp2x=R.cp2x+Bt.x*(St-Ct),R.cp2y=R.cp2y+Bt.y*(St-Ct)):(R.cp2x=Xt[0]+Bt.x*St,R.cp2y=Xt[1]+Bt.y*St)}Mt&&this.findEndpoints(l)}else"straight"===R.edgeType&&(R.midX=(Z+it)/2,R.midY=(G+nt)/2);this.projectBezier(l)}}}for(var s=0;s<o.length;s++){var l=o[s],Rt=l._private.rscratch;if(!Rt.haystack){var Yt=2*Math.random()*Math.PI;Rt.source={x:Math.cos(Yt),y:Math.sin(Yt)};var Yt=2*Math.random()*Math.PI;Rt.target={x:Math.cos(Yt),y:Math.sin(Yt)},Rt.edgeType="haystack",Rt.haystack=!0}}return n}},t.prototype.findEndpoints=function(i){var r,n=i.source()[0],a=i.target()[0],o=i._private.style["target-arrow-shape"].value,s=i._private.style["source-arrow-shape"].value,l=a._private.style["border-width"].pxValue,u=n._private.style["border-width"].pxValue,c=i._private.rscratch;if("self"==i._private.rscratch.edgeType){var d=[c.cp2cx,c.cp2cy];r=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],l/2);var h=e.math.shortenIntersection(r,d,t.arrowShapes[o].spacing(i)),p=e.math.shortenIntersection(r,d,t.arrowShapes[o].gap(i));c.endX=p[0],c.endY=p[1],c.arrowEndX=h[0],c.arrowEndY=h[1];var d=[c.cp2ax,c.cp2ay];r=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),d[0],d[1],u/2);var v=e.math.shortenIntersection(r,d,t.arrowShapes[s].spacing(i)),f=e.math.shortenIntersection(r,d,t.arrowShapes[s].gap(i));c.startX=f[0],c.startY=f[1],c.arrowStartX=v[0],c.arrowStartY=v[1]}else if("straight"==c.edgeType){r=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),n.position().x,n.position().y,l/2),c.noArrowPlacement=0===r.length?!0:!1;var h=e.math.shortenIntersection(r,[n.position().x,n.position().y],t.arrowShapes[o].spacing(i)),p=e.math.shortenIntersection(r,[n.position().x,n.position().y],t.arrowShapes[o].gap(i));c.endX=p[0],c.endY=p[1],c.arrowEndX=h[0],c.arrowEndY=h[1],r=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),a.position().x,a.position().y,u/2),c.noArrowPlacement=0===r.length?!0:!1;var v=e.math.shortenIntersection(r,[a.position().x,a.position().y],t.arrowShapes[s].spacing(i)),f=e.math.shortenIntersection(r,[a.position().x,a.position().y],t.arrowShapes[s].gap(i));c.startX=f[0],c.startY=f[1],c.arrowStartX=v[0],c.arrowStartY=v[1]}else if("bezier"==c.edgeType){var d=[c.cp2x,c.cp2y];r=t.nodeShapes[this.getNodeShape(a)].intersectLine(a._private.position.x,a._private.position.y,this.getNodeWidth(a),this.getNodeHeight(a),d[0],d[1],l/2);var h=e.math.shortenIntersection(r,d,t.arrowShapes[o].spacing(i)),p=e.math.shortenIntersection(r,d,t.arrowShapes[o].gap(i));c.endX=p[0],c.endY=p[1],c.arrowEndX=h[0],c.arrowEndY=h[1],r=t.nodeShapes[this.getNodeShape(n)].intersectLine(n._private.position.x,n._private.position.y,this.getNodeWidth(n),this.getNodeHeight(n),d[0],d[1],u/2);var v=e.math.shortenIntersection(r,d,t.arrowShapes[s].spacing(i)),f=e.math.shortenIntersection(r,d,t.arrowShapes[s].gap(i));c.startX=f[0],c.startY=f[1],c.arrowStartX=v[0],c.arrowStartY=v[1]}else if(c.isArcEdge)return},t.prototype.findEdges=function(e){for(var t=this.getCachedEdges(),i={},r=[],n=0;n<e.length;n++)i[e[n]._private.data.id]=e[n];for(var n=0;n<t.length;n++)(i[t[n]._private.data.source]||i[t[n]._private.data.target])&&r.push(t[n]);return r},t.prototype.getArrowWidth=t.prototype.getArrowHeight=function(e){var t=this.arrowWidthCache=this.arrowWidthCache||{},i=t[e];return i?i:(i=Math.max(Math.pow(13.37*e,.9),29),t[e]=i,i)}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdge=function(e,i,r){var n=i._private.rscratch,a=t.usePaths();if(!n.badBezier&&("bezier"!==n.edgeType&&"straight"!==n.edgeType||!isNaN(n.startX))){var o=i._private.style;if(!(o.width.pxValue<=0)){var s=o["overlay-padding"].pxValue,l=o["overlay-opacity"].value,u=o["overlay-color"].value;if(r){if(0===l)return;this.strokeStyle(e,u[0],u[1],u[2],l),e.lineCap="round","self"!=i._private.rscratch.edgeType||a||(e.lineCap="butt")}else{var c=o["line-color"].value;this.strokeStyle(e,c[0],c[1],c[2],o.opacity.value),e.lineCap="butt"}var d,h,p,v;p=d=i._private.source,v=h=i._private.target;var f=v._private.position,g=v.width(),y=v.height(),m=p._private.position,x=p.width(),b=p.height(),w=o.width.pxValue+(r?2*s:0),_=r?"solid":o["line-style"].value;if(e.lineWidth=w,"haystack"!==n.edgeType,"haystack"===n.edgeType){var P=o["haystack-radius"].value,E=P/2;this.drawStyledEdge(i,e,n.haystackPts=[n.source.x*x*E+m.x,n.source.y*b*E+m.y,n.target.x*g*E+f.x,n.target.y*y*E+f.y],_,w)}else if("self"===n.edgeType){var S=i._private.rscratch,T=[S.startX,S.startY,S.cp2ax,S.cp2ay,S.selfEdgeMidX,S.selfEdgeMidY,S.selfEdgeMidX,S.selfEdgeMidY,S.cp2cx,S.cp2cy,S.endX,S.endY],S=i._private.rscratch;this.drawStyledEdge(i,e,T,_,w)}else if("straight"===n.edgeType){var k=h._private.position.x-d._private.position.x,C=h._private.position.y-d._private.position.y,D=n.endX-n.startX,M=n.endY-n.startY;if(0>k*D+C*M)n.straightEdgeTooShort=!0;else{var S=n;this.drawStyledEdge(i,e,[S.startX,S.startY,S.endX,S.endY],_,w),n.straightEdgeTooShort=!1}}else{var S=n;this.drawStyledEdge(i,e,[S.startX,S.startY,S.cp2x,S.cp2y,S.endX,S.endY],_,w)}"haystack"===n.edgeType?this.drawArrowheads(e,i,r):n.noArrowPlacement!==!0&&void 0!==n.startX&&this.drawArrowheads(e,i,r)}}},t.prototype.drawStyledEdge=function(e,i,r,n){var a,o=e._private.rscratch,s=i,l=!1,u=t.usePaths();if(u){for(var c=r,d=o.pathCacheKey&&c.length===o.pathCacheKey.length,h=d,p=0;h&&p<c.length;p++)o.pathCacheKey[p]!==c[p]&&(h=!1);h?(a=i=o.pathCache,l=!0):(a=i=new Path2D,o.pathCacheKey=c,o.pathCache=a)}if(s.setLineDash)switch(n){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash([6,3]);break;case"solid":s.setLineDash([])}l||(i.beginPath&&i.beginPath(),i.moveTo(r[0],r[1]),6===r.length?i.quadraticCurveTo(r[2],r[3],r[4],r[5]):12===r.length?(i.quadraticCurveTo(r[2],r[3],r[4],r[5]),i.quadraticCurveTo(r[8],r[9],r[10],r[11])):(i.lineTo(r[2],r[3]),i.closePath())),i=s,u?(i.lineWidth=6,i.strokeStyle="#7c7c7c",i.stroke(a)):i.stroke(),u?(i.lineWidth=5,i.strokeStyle="lightgrey",i.stroke(a)):i.stroke(),i.beginPath(),i.arc(r[0],r[1],6,0,2*Math.PI,!1),i.closePath(),i.fillStyle="lightgrey",i.fill(),i.beginPath(),i.arc(r[0],r[1],3,0,2*Math.PI,!1),i.closePath(),i.fillStyle="darkgrey",i.fill(),i.beginPath(),i.arc(r[2],r[3],6,0,2*Math.PI,!1),i.closePath(),i.fillStyle="lightgrey",i.fill(),i.beginPath(),i.arc(r[2],r[3],3,0,2*Math.PI,!1),i.closePath(),i.fillStyle="white",i.fill(),i.setLineDash&&i.setLineDash([])},t.prototype.drawArrowheads=function(e,t,i){function r(i,r,n,a,o){var s=f[i+"-arrow-shape"].value;if("none"!==s){var l=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",d.fillStyle(e,255,255,255,1);var u="hollow"===f[i+"-arrow-fill"].value?"both":"filled",c=f[i+"-arrow-fill"].value;"half-triangle-overshot"===s&&(c="hollow",u="hollow"),d.drawArrowShape(t,i,e,u,f.width.pxValue,f[i+"-arrow-shape"].value,r,n,a,o),e.globalCompositeOperation=l;var h=f[i+"-arrow-color"].value;d.fillStyle(e,h[0],h[1],h[2],f.opacity.value),d.drawArrowShape(t,i,e,c,f.width.pxValue,f[i+"-arrow-shape"].value,r,n,a,o)}}if(!i){var n,a,o,s,l,u,c=t._private.rscratch,d=this,h="haystack"===c.edgeType,p=t.source().position(),v=t.target().position();h?(o=c.haystackPts[0],s=c.haystackPts[1],l=c.haystackPts[2],u=c.haystackPts[3]):(o=c.arrowStartX,s=c.arrowStartY,l=c.arrowEndX,u=c.arrowEndY);var f=t._private.style;n=o-p.x,a=s-p.y,h||isNaN(o)||isNaN(s)||isNaN(n)||isNaN(a)||r("source",o,s,n,a);var g=c.midX,y=c.midY;h&&(g=(o+l)/2,y=(s+u)/2),n=o-l,a=s-u,"self"===c.edgeType&&(n=1,a=-1),isNaN(g)||isNaN(y)||r("mid-target",g,y,n,a),n*=-1,a*=-1,isNaN(g)||isNaN(y)||r("mid-source",g,y,n,a),n=l-v.x,a=u-v.y,h||isNaN(l)||isNaN(u)||isNaN(n)||isNaN(a)||r("target",l,u,n,a)}},t.prototype.drawArrowShape=function(e,i,r,n,a,o,s,l,u,c){var d,h=t.usePaths(),p=e._private.rscratch,v=!1,f=r,g={x:s,y:l},y=Math.asin(c/Math.sqrt(u*u+c*c));0>u?y+=Math.PI/2:y=-(Math.PI/2+y);var m=this.getArrowWidth(a),x=t.arrowShapes[o];if(h){var b=m+"$"+o+"$"+y+"$"+s+"$"+l;p.arrowPathCacheKey=p.arrowPathCacheKey||{},p.arrowPathCache=p.arrowPathCache||{};var w=p.arrowPathCacheKey[i]===b;w?(d=r=p.arrowPathCache[i],v=!0):(d=r=new Path2D,p.arrowPathCacheKey[i]=b,p.arrowPathCache[i]=d)}r.beginPath&&r.beginPath(),v||x.draw(r,m,y,g),!x.leavePathOpen&&r.closePath&&r.closePath(),r=f,("filled"===n||"both"===n)&&(h?r.fill(d):r.fill()),("hollow"===n||"both"===n)&&(r.lineWidth=x.matchEdgeWidth?a:1,r.lineJoin="miter",h?r.stroke(d):r.stroke())}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getCachedImage=function(e,t){var i=this,r=i.imageCache=i.imageCache||{};if(r[e]&&r[e].image)return r[e].image;var n=r[e]=r[e]||{},a=n.image=new Image;return a.addEventListener("load",t),a.src=e,a},t.prototype.drawInscribedImage=function(e,i,r){var n=this,a=r._private.position.x,o=r._private.position.y,s=r._private.style,l=s["background-fit"].value,u=s["background-position-x"],c=s["background-position-y"],d=s["background-repeat"].value,h=r.width(),p=r.height(),v=r._private.rscratch,f=s["background-clip"].value,g="node"===f,y=s["background-image-opacity"].value,m=i.width,x=i.height;if(0!==m&&0!==x){if("contain"===l){var b=Math.min(h/m,p/x);m*=b,x*=b}else if("cover"===l){var b=Math.max(h/m,p/x);m*=b,x*=b}var w=a-h/2;w+="%"===u.units?(h-m)*u.value/100:u.pxValue;var _=o-p/2;_+="%"===c.units?(p-x)*c.value/100:c.pxValue,v.pathCache&&(w-=a,_-=o,a=0,o=0);var P=e.globalAlpha;if(e.globalAlpha=y,"no-repeat"===d)g&&(e.save(),v.pathCache?e.clip(v.pathCache):(t.nodeShapes[n.getNodeShape(r)].drawPath(e,a,o,h,p),e.clip())),e.drawImage(i,0,0,i.width,i.height,w,_,m,x),g&&e.restore();else{var E=e.createPattern(i,d);e.fillStyle=E,t.nodeShapes[n.getNodeShape(r)].drawPath(e,a,o,h,p),e.translate(w,_),e.fill(),e.translate(-w,-_)}e.globalAlpha=P}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawEdgeText=function(e,t){var i=t._private.style.content.strValue;if(!(!i||i.match(/^\s+$/)||this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning))){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),n=t._private.style["min-zoomed-font-size"].pxValue;if(!(n>r)){e.textAlign="center",e.textBaseline="middle";var a=t._private.rscratch;this.drawText(e,t,a.labelX,a.labelY)}}},t.prototype.drawNodeText=function(e,t){var i=t._private.style.content.strValue;if(i&&!i.match(/^\s+$/)){var r=t._private.style["font-size"].pxValue*t.cy().zoom(),n=t._private.style["min-zoomed-font-size"].pxValue;if(!(n>r)){var a=t._private.style["text-halign"].strValue,o=t._private.style["text-valign"].strValue,s=t._private.rscratch;switch(a){case"left":e.textAlign="right";break;case"right":e.textAlign="left";break;default:e.textAlign="center"}switch(o){case"top":e.textBaseline="bottom";break;case"bottom":e.textBaseline="top";break;default:e.textBaseline="middle"}this.drawText(e,t,s.labelX,s.labelY+5)}}},t.prototype.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var i=0;i<this.fontCaches.length;i++)if(t=this.fontCaches[i],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t},t.prototype.setupTextStyle=function(e,t){var i=t.effectiveOpacity(),r=t._private.style,n=r["font-style"].strValue,a=r["font-size"].pxValue+"px",o=r["font-family"].strValue,s=r["font-weight"].strValue,l=r["text-opacity"].value*r.opacity.value*i,u=r["text-outline-opacity"].value*l,c=r.color.value,d=r["text-outline-color"].value,h=t._private.fontKey,p=this.getFontCache(e);p.key!==h&&(e.font=n+" "+s+" "+a+" "+o,p.key=h);var v=String(r.content.value),f=r["text-transform"].value;return"none"==f||("uppercase"==f?v=v.toUpperCase():"lowercase"==f&&(v=v.toLowerCase())),e.lineJoin="round",this.fillStyle(e,c[0],c[1],c[2],l),this.strokeStyle(e,d[0],d[1],d[2],u),v},t.prototype.drawText=function(e,t,i,r){var n=t._private.style,a=t.effectiveOpacity();if(0!==a){var o=this.setupTextStyle(e,t);if(null!=o&&!isNaN(i)&&!isNaN(r)){var s=2*n["text-outline-width"].value;s>0&&(e.lineWidth=s,e.strokeText(o,i,r)),e.fillText(o,i,r)}}}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawNode=function(e,i,r){var n,a,o,s=this,l=i._private.style,u=i._private.rscratch,c=t.usePaths(),d=e,h=!1,p=l["overlay-padding"].pxValue,v=l["overlay-opacity"].value,f=l["overlay-color"].value;if(!r||0!==v){var g=i.effectiveOpacity();if(0!==g)if(n=this.getNodeWidth(i),a=this.getNodeHeight(i),e.lineWidth=l["border-width"].pxValue,void 0!==r&&r)v>0&&(this.fillStyle(e,f[0],f[1],f[2],v),t.nodeShapes.roundrectangle.drawPath(e,i._private.position.x,i._private.position.y,n+2*p,a+2*p),e.fill());else{var y=l["background-color"].value,m=l["border-color"].value,x=l["border-style"].value;if(this.fillStyle(e,y[0],y[1],y[2],l["background-opacity"].value*l.opacity.value*g),this.strokeStyle(e,m[0],m[1],m[2],l["border-opacity"].value*l.opacity.value*g),e.lineJoin="miter",e.setLineDash)switch(x){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var b=l["background-image"].value[2]||l["background-image"].value[1],w=l.shape.strValue,_=i._private.position;if(c){var P=w+"$"+n+"$"+a;e.translate(_.x,_.y),u.pathCacheKey===P?(o=e=u.pathCache,h=!0):(o=e=new Path2D,u.pathCacheKey=P,u.pathCache=o)}if(!h){var E=_;c&&(E={x:0,y:0}),t.nodeShapes[this.getNodeShape(i)].drawPath(e,E.x,E.y,n,a)}if(e=d,c?e.fill(o):e.fill(),void 0!==b){var S=this.getCachedImage(b,function(){s.data.canvasNeedsRedraw[t.NODE]=!0,s.data.canvasNeedsRedraw[t.DRAG]=!0,s.redraw()});S.complete&&this.drawInscribedImage(e,S,i)}var T=l["background-blacken"].value,k=l["border-width"].pxValue;if(this.hasPie(i)&&(this.drawPie(e,i),(0!==T||0!==k)&&(c||t.nodeShapes[this.getNodeShape(i)].drawPath(e,_.x,_.y,n,a))),T>0?(this.fillStyle(e,0,0,0,T),c?e.fill(o):e.fill()):0>T&&(this.fillStyle(e,255,255,255,-T),c?e.fill(o):e.fill()),"reset"==i._private.data.id){var C=e.lineWidth;e.beginPath(),e.lineWidth=2.2,e.lineCap="square",e.strokeStyle="white",e.moveTo(-3,-3),e.lineTo(3,3),e.moveTo(-3,3),e.lineTo(3,-3),e.stroke(),e.beginPath(),e.lineWidth=1.2,e.strokeStyle="#333333",e.moveTo(-4,8),e.lineTo(-4.5,8),e.lineTo(-3,9.9),e.lineTo(-1.5,8),e.lineTo(-4,8),e.lineTo(-3,9),e.stroke(),e.closePath(),e.lineWidth=C}else if("info"==i._private.data.id){var C=e.lineWidth,D=e.font;e.beginPath(),e.lineWidth=3,e.strokeStyle="white",e.fillStyle="white",e.font="bold 12pt 'Courier New', Courier, monospace",e.fillText("i",0,-8),e.closePath(),e.lineWidth=C,e.font=D}else if("inputdirectory"==i._private.data.type){var C=e.lineWidth;e.beginPath(),e.lineWidth=2,e.lineCap="round",e.strokeStyle="white",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#353535",e.arc(0,0,30,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.shadowOffsetX=2,e.shadowOffsetY=3,e.moveTo(11.5,-6),e.lineTo(11.5,9),e.lineTo(-11.5,9),e.lineTo(-11.5,-9),e.lineTo(-2,-9),e.lineTo(2,-6),e.lineTo(11.5,-6),e.stroke(),e.closePath(),e.lineWidth=.75,e.beginPath(),e.moveTo(-8.5,-6),e.lineTo(-3.5,-6),e.stroke(),e.closePath(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0}else if("inputfile"==i._private.data.type){var C=e.lineWidth;e.beginPath(),e.lineWidth=2,e.lineCap="round",e.strokeStyle="white",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#353535",e.arc(0,0,30,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.shadowOffsetX=2,e.shadowOffsetY=3,e.moveTo(8,10),e.lineTo(-8,10),e.moveTo(-8,10),e.lineTo(-8,-10),e.moveTo(-8,-10),e.lineTo(4,-10),e.moveTo(8,10),e.lineTo(8,-6),e.moveTo(8,-6),e.lineTo(4,-10),e.moveTo(8,-6),e.lineTo(4,-6),e.moveTo(4,-10),e.lineTo(4,-6),e.stroke(),e.closePath(),e.lineWidth=.75,e.beginPath(),e.moveTo(-5,-5.7),e.lineTo(1,-5.7),e.moveTo(-5,-2.7),e.lineTo(5,-2.7),e.moveTo(-5,.3),e.lineTo(5,.3),e.moveTo(-5,3.3),e.lineTo(5,3.3),e.moveTo(-5,6.3),e.lineTo(5,6.3),e.stroke(),e.closePath(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0}else if("inputfiles"==i._private.data.type){var C=e.lineWidth;e.beginPath(),e.lineWidth=2,e.lineCap="round",e.strokeStyle="white",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#353535",e.arc(0,0,30,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.shadowOffsetX=2,e.shadowOffsetY=3,e.moveTo(-6,6),e.lineTo(-11,6),e.moveTo(-11,6),e.lineTo(-11,-14),e.moveTo(-11,-14),e.lineTo(1,-14),e.moveTo(5,-7),e.lineTo(5,-10),e.moveTo(5,-10),e.lineTo(1,-14),e.moveTo(5,-10),e.lineTo(1,-10),e.moveTo(1,-14),e.lineTo(1,-10),e.stroke(),e.closePath(),e.lineWidth=.75,e.beginPath(),e.moveTo(-8,-9.7),e.lineTo(-2,-9.7),e.moveTo(-8,-6.7),e.lineTo(-5,-6.7),e.moveTo(-8,-3.7),e.lineTo(-6,-3.7),e.moveTo(-8,-.7),e.lineTo(-6,-.7),e.moveTo(-8,2.3),e.lineTo(-6,2.3),e.stroke(),e.closePath(),e.lineWidth=2,e.beginPath(),e.moveTo(11,14),e.lineTo(-5,14),e.moveTo(-5,14),e.lineTo(-5,-6),e.moveTo(-5,-6),e.lineTo(7,-6),e.moveTo(11,14),e.lineTo(11,-2),e.moveTo(11,-2),e.lineTo(7,-6),e.moveTo(11,-2),e.lineTo(7,-2),e.moveTo(7,-6),e.lineTo(7,-2),e.stroke(),e.closePath(),e.lineWidth=.75,e.beginPath(),e.moveTo(-2,-1.7),e.lineTo(4,-1.7),e.moveTo(-2,1.3),e.lineTo(8,1.3),e.moveTo(-2,4.3),e.lineTo(8,4.3),e.moveTo(-2,7.3),e.lineTo(8,7.3),e.moveTo(-2,10.3),e.lineTo(8,10.3),e.stroke(),e.closePath(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0}else if("component"==i._private.data.type){var C=e.lineWidth,M=e.strokeStyle;e.beginPath(),e.lineWidth=2.5,e.lineCap="square",e.strokeStyle="white",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#353535",e.arc(0,0,39,0,2*Math.PI,!1),e.stroke(),e.beginPath(),e.shadowOffsetX=2,e.shadowOffsetY=3,e.arc(2,-9,8,0,2*Math.PI,!1),e.arc(2,-9,10.4,0,.03*Math.PI,!1),e.moveTo(8,-3),e.arc(2,-9,10.4,.25*Math.PI,.28*Math.PI,!1),e.moveTo(2,-1),e.arc(2,-9,10.4,.5*Math.PI,.53*Math.PI,!1),e.moveTo(-4,-3),e.arc(2,-9,10.4,.75*Math.PI,.78*Math.PI,!1),e.moveTo(-6,-9),e.arc(2,-9,10.4,1*Math.PI,1.03*Math.PI,!1),e.moveTo(-4,-15),e.arc(2,-9,10.4,1.25*Math.PI,1.28*Math.PI,!1),e.moveTo(2,-17),e.arc(2,-9,10.4,1.5*Math.PI,1.53*Math.PI,!1),e.moveTo(8,-15),e.arc(2,-9,10.4,1.75*Math.PI,1.78*Math.PI,!1),e.stroke(),e.beginPath(),e.arc(-7,9,6,.15*Math.PI,2.15*Math.PI,!1),e.moveTo(-1,12),e.arc(-7,9,8.4,.15*Math.PI,.18*Math.PI,!1),e.moveTo(-5,15),e.arc(-7,9,8.4,.4*Math.PI,.43*Math.PI,!1),e.moveTo(-10,15),e.arc(-7,9,8.4,.65*Math.PI,.68*Math.PI,!1),e.moveTo(-13,11),e.arc(-7,9,8.4,.9*Math.PI,.93*Math.PI,!1),e.moveTo(-13,6),e.arc(-7,9,8.4,1.15*Math.PI,1.18*Math.PI,!1),e.moveTo(-9,3),e.arc(-7,9,8.4,1.4*Math.PI,1.43*Math.PI,!1),e.moveTo(-4,3),e.arc(-7,9,8.4,1.65*Math.PI,1.68*Math.PI,!1),e.moveTo(-1,7),e.arc(-7,9,8.4,1.9*Math.PI,1.93*Math.PI,!1),e.stroke(),e.beginPath(),e.arc(8,10,3,0,2*Math.PI,!1),e.arc(8,10,5,0,0*Math.PI,!1),e.moveTo(10,13.5),e.arc(8,10,5,.33*Math.PI,.33*Math.PI,!1),e.moveTo(6.2,13.5),e.arc(8,10,5,.66*Math.PI,.66*Math.PI,!1),e.moveTo(5,10),e.arc(8,10,5,.99*Math.PI,.99*Math.PI,!1),e.moveTo(6.2,7),e.arc(8,10,5,1.33*Math.PI,1.33*Math.PI,!1),e.moveTo(9.8,7),e.arc(8,10,5,1.66*Math.PI,1.66*Math.PI,!1),e.stroke(),e.closePath(),e.lineWidth=C,e.strokeStyle=M,e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0}if(k>0&&(c?e.stroke(o):e.stroke(),"double"===x)){e.lineWidth=l["border-width"].pxValue/3;var N=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",c?e.stroke(o):e.stroke(),e.globalCompositeOperation=N}c&&e.translate(-_.x,-_.y),e.setLineDash&&e.setLineDash([])}}},t.prototype.hasPie=function(e){return e=e[0],e._private.hasPie},t.prototype.drawPie=function(i,r){r=r[0];var n=r._private.style["pie-size"],a=this.getNodeWidth(r),o=this.getNodeHeight(r),s=r._private.position.x,l=r._private.position.y,u=Math.min(a,o)/2,c=0,d=t.usePaths();d&&(s=0,l=0),"%"===n.units?u=u*n.value/100:void 0!==n.pxValue&&(u=n.pxValue/2);for(var h=1;h<=e.style.pieBackgroundN;h++){var p=r._private.style["pie-"+h+"-background-size"].value,v=r._private.style["pie-"+h+"-background-color"].value,f=r._private.style["pie-"+h+"-background-opacity"].value,g=p/100,y=1.5*Math.PI+2*Math.PI*c,m=2*Math.PI*g,x=y+m;0===p||c>=1||c+g>1||(i.beginPath(),i.moveTo(s,l),i.arc(s,l,u,y,x),i.closePath(),this.fillStyle(i,v[0],v[1],v[2],f),i.fill(),c+=g)}i.globalAlpha=1,i.beginPath(),i.arc(s,l,30,0,2*Math.PI,!1);var b=i.createLinearGradient(0,0,0,40);"0.8px"==r[0].css("border-width")?(i.shadowColor="darkgrey",i.shadowBlur=3,b.addColorStop(0,"#8f8f8f"),b.addColorStop(1,"#b3b3b3")):(i.shadowColor="darkgrey",i.shadowBlur=0,b.addColorStop(0,"#7c7c7c"),b.addColorStop(1,"#a2a2a2")),i.fillStyle=b,i.fill(),i.closePath(),i.beginPath(),i.lineWidth=2,i.lineCap="square",i.moveTo(s,l-39),i.lineTo(s,l-31),i.strokeStyle="white",i.stroke(),i.closePath()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},t.prototype.paintCache=function(e){for(var t,i=this.paintCaches=this.paintCaches||[],r=!0,n=0;n<i.length;n++)if(t=i[n],t.context===e){r=!1;break}return r&&(t={context:e},i.push(t)),t},t.prototype.fillStyle=function(e,t,i,r,n){e.fillStyle="rgba("+t+","+i+","+r+","+n+")"},t.prototype.strokeStyle=function(e,t,i,r,n){e.strokeStyle="rgba("+t+","+i+","+r+","+n+")"},t.prototype.matchCanvasSize=function(e){var i,r=this.data,n=e.clientWidth,a=e.clientHeight,o=this.getPixelRatio(),s=n*o,l=a*o;if(s!==this.canvasWidth||l!==this.canvasHeight){this.fontCaches=null;var u=r.canvasContainer;u.style.width=n+"px",u.style.height=a+"px";for(var c=0;c<t.CANVAS_LAYERS;c++)i=r.canvases[c],(i.width!==s||i.height!==l)&&(i.width=s,i.height=l,i.style.width=n+"px",i.style.height=a+"px");for(var c=0;c<t.BUFFER_COUNT;c++)i=r.bufferCanvases[c],(i.width!==s||i.height!==l)&&(i.width=s,i.height=l,i.style.width=n+"px",i.style.height=a+"px");this.textureMult=1,1>=o&&(i=r.bufferCanvases[t.TEXTURE_BUFFER],this.textureMult=2,i.width=s*this.textureMult,i.height=l*this.textureMult),this.canvasWidth=s,this.canvasHeight=l}},t.prototype.renderTo=function(e,t,i,r){this.redraw({forcedContext:e,forcedZoom:t,forcedPan:i,drawAllLayers:!0,forcedPxRatio:r})},t.prototype.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},t.minRedrawLimit=1e3/60,t.maxRedrawLimit=1e3,t.motionBlurDelay=100,t.prototype.redraw=function(i){function r(){function i(e,t){if(e.setTransform(1,0,0,1,0,0),"motionBlur"===t){var i=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",u.fillStyle(e,255,255,255,.666),e.fillRect(0,0,u.canvasWidth,u.canvasHeight),e.globalCompositeOperation=i}else n||void 0!==t&&!t||e.clearRect(0,0,u.canvasWidth,u.canvasHeight);a||(e.translate(b.x,b.y),e.scale(m,m)),l&&e.translate(l.x,l.y),s&&e.scale(s,s)}function r(e,t){for(var i=e.eles,r=0;r<i.length;r++){var n=i[r];n.isNode()?(u.drawNode(t,n),B||u.drawNodeText(t,n),u.drawNode(t,n,!0)):I||(u.drawEdge(t,n),B||u.drawEdgeText(t,n),u.drawEdge(t,n,!0))}}var f=u.getCachedEdges(),g=d.style()._private.coreStyle,y=d.zoom(),m=void 0!==s?s:y,x=d.pan(),b={x:x.x,y:x.y};l&&(b=l),m*=c,b.x*=c,b.y*=c;var _={drag:{nodes:[],edges:[],eles:[]},nondrag:{nodes:[],edges:[],eles:[]}},P=u.textureOnViewport&&!n&&(u.pinching||u.hoverData.dragging||u.swipePanning||u.data.wheelZooming);if(P){var E;if(!u.textureCache){u.textureCache={},E=u.textureCache.bb=d.elements().boundingBox(),u.textureCache.texture=u.data.bufferCanvases[t.TEXTURE_BUFFER];var S=u.data.bufferContexts[t.TEXTURE_BUFFER];S.setTransform(1,0,0,1,0,0),S.clearRect(0,0,u.canvasWidth*u.textureMult,u.canvasHeight*u.textureMult),u.redraw({forcedContext:S,drawOnlyNodeLayer:!0,forcedPxRatio:c*u.textureMult});var T=u.textureCache.viewport={zoom:d.zoom(),pan:d.pan(),width:u.canvasWidth,height:u.canvasHeight};T.mpan={x:(0-T.pan.x)/T.zoom,y:(0-T.pan.y)/T.zoom}}p[t.DRAG]=!1,p[t.NODE]=!1;var k=h.contexts[t.NODE],C=u.textureCache.texture,T=u.textureCache.viewport;E=u.textureCache.bb,k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,T.width,T.height);var D=g["outside-texture-bg-color"].value,M=g["outside-texture-bg-opacity"].value;u.fillStyle(k,D[0],D[1],D[2],M),k.fillRect(0,0,T.width,T.height);var y=d.zoom();i(k,!1),k.clearRect(T.mpan.x,T.mpan.y,T.width/T.zoom/c,T.height/T.zoom/c),k.drawImage(C,T.mpan.x,T.mpan.y,T.width/T.zoom/c,T.height/T.zoom/c)}else u.textureOnViewport&&!n&&(u.textureCache=null);var N=u.pinching||u.hoverData.dragging||u.swipePanning||u.data.wheelZooming||u.hoverData.draggingEles,I=u.hideEdgesOnViewport&&N,B=u.hideLabelsOnViewport&&N;if(p[t.DRAG]||p[t.NODE]||a||o){I||u.findEdgeControlPoints(f);for(var z=u.getCachedZSortedEles(),O=d.extent(),L=0;L<z.length;L++){var X,R=z[L],E=n?null:R.boundingBox(),Y=n?!0:e.math.boundingBoxesIntersect(O,E);Y&&(X=R._private.rscratch.inDragLayer?_.drag:_.nondrag,X.eles.push(R))}}var V=p[t.DRAG]&&!p[t.NODE]&&v&&!u.clearedNodeLayerForMotionBlur;if(V&&(u.clearedNodeLayerForMotionBlur=!0),p[t.NODE]||a||o||V){var k=n||h.contexts[t.NODE];i(k,v&&!V?"motionBlur":void 0),r(_.nondrag,k),a||(p[t.NODE]=!1)}if(!o&&(p[t.DRAG]||a)){var k=n||h.contexts[t.DRAG];i(k,v?"motionBlur":void 0),r(_.drag,k),a||(p[t.DRAG]=!1)}if(u.showFps||!o&&p[t.SELECT_BOX]&&!a){var k=n||h.contexts[t.SELECT_BOX];if(i(k),1==h.select[4]){var y=h.cy.zoom(),A=g["selection-box-border-width"].value/y;k.lineWidth=A,k.fillStyle="rgba("+g["selection-box-color"].value[0]+","+g["selection-box-color"].value[1]+","+g["selection-box-color"].value[2]+","+g["selection-box-opacity"].value+")",k.fillRect(h.select[0],h.select[1],h.select[2]-h.select[0],h.select[3]-h.select[1]),A>0&&(k.strokeStyle="rgba("+g["selection-box-border-color"].value[0]+","+g["selection-box-border-color"].value[1]+","+g["selection-box-border-color"].value[2]+","+g["selection-box-opacity"].value+")",k.strokeRect(h.select[0],h.select[1],h.select[2]-h.select[0],h.select[3]-h.select[1]))}if(h.bgActivePosistion){{var y=h.cy.zoom();h.bgActivePosistion}k.fillStyle="rgba("+g["active-bg-color"].value[0]+","+g["active-bg-color"].value[1]+","+g["active-bg-color"].value[2]+","+g["active-bg-opacity"].value+")"}var q=u.averageRedrawTime;if(u.showFps&&q){q=Math.round(q);var F=Math.round(1e3/q);k.setTransform(1,0,0,1,0,0),k.fillStyle="rgba(255, 0, 0, 0.75)",k.strokeStyle="rgba(255, 0, 0, 0.75)",k.lineWidth=1,k.fillText("1 frame = "+q+" ms = "+F+" fps",0,20);var j=60;k.strokeRect(0,30,250,20),k.fillRect(0,30,250*Math.min(F/j,1),20)}a||(p[t.SELECT_BOX]=!1)}var W=+new Date;void 0===u.averageRedrawTime&&(u.averageRedrawTime=W-w),void 0===u.redrawCount&&(u.redrawCount=0),u.redrawCount++,void 0===u.redrawTotalTime&&(u.redrawTotalTime=0),u.redrawTotalTime+=W-w,u.lastRedrawTime=W-w,u.averageRedrawTime=u.averageRedrawTime/2+(W-w)/2,u.currentlyDrawing=!1,u.clearingMotionBlur&&(u.clearingMotionBlur=!1,u.motionBlurCleared=!0,u.motionBlur=!0),v&&(u.motionBlurTimeout=setTimeout(function(){u.motionBlurTimeout=null,u.clearedNodeLayerForMotionBlur=!1,u.motionBlur=!1,u.clearingMotionBlur=!0,p[t.NODE]=!0,p[t.DRAG]=!0,u.redraw()},t.motionBlurDelay))}i=i||{};var n=i.forcedContext,a=i.drawAllLayers,o=i.drawOnlyNodeLayer,s=i.forcedZoom,l=i.forcedPan,u=this,c=void 0===i.forcedPxRatio?this.getPixelRatio():i.forcedPxRatio,d=u.data.cy,h=u.data,p=h.canvasNeedsRedraw,v=void 0!==i.motionBlur?i.motionBlur:u.motionBlur;v=v&&!n&&u.motionBlurEnabled,u.motionBlurTimeout&&clearTimeout(u.motionBlurTimeout),this.redrawTimeout&&clearTimeout(this.redrawTimeout),this.redrawTimeout=null,void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);
var f=t.minRedrawLimit,g=t.maxRedrawLimit,y=this.averageRedrawTime;y=f>y?f:y,y=g>y?y:g,void 0===this.lastDrawTime&&(this.lastDrawTime=0);var m=+new Date,x=m-this.lastDrawTime,b=x>=y;if(!n){if(!b||this.currentlyDrawing)return void(this.redrawTimeout=setTimeout(function(){u.redraw()},y));this.lastDrawTime=m,this.currentlyDrawing=!0}var w=+new Date;n?r():e.util.requestAnimationFrame(r),n||u.initrender||(u.initrender=!0,d.trigger("initrender"))}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.drawPolygonPath=function(e,t,i,r,n,a){var o=r/2,s=n/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],i+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],i+s*a[2*l+1]);e.closePath()},t.prototype.drawPolygon=function(e,t,i,r,n,a){this.drawPolygonPath(e,t,i,r,n,a),e.fill()},t.prototype.drawRoundRectanglePath=function(t,i,r,n,a){var o=n/2,s=a/2,l=e.math.getRoundRectangleRadius(n,a);t.beginPath&&t.beginPath(),t.moveTo(i,r-s),t.arcTo(i+o,r-s,i+o,r,l),t.arcTo(i+o,r+s,i,r+s,l),t.arcTo(i-o,r+s,i-o,r,l),t.arcTo(i-o,r-s,i,r-s,l),t.lineTo(i,r-s),t.closePath()},t.prototype.drawRoundRectangle=function(e,t,i,r,n,a){this.drawRoundRectanglePath(e,t,i,r,n,a),e.fill()}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.createBuffer=function(e,t){var i=document.createElement("canvas");return i.width=e,i.height=t,[i,i.getContext("2d")]},t.prototype.bufferCanvasImage=function(e){var t=this.data,i=t.cy,r=i.elements().boundingBox(),n=e.full?Math.ceil(r.w):this.data.container.clientWidth,a=e.full?Math.ceil(r.h):this.data.container.clientHeight,o=1;void 0!==e.scale&&(n*=e.scale,a*=e.scale,o=e.scale);var s=document.createElement("canvas");s.width=n,s.height=a,s.style.width=n+"px",s.style.height=a+"px";var l=s.getContext("2d");if(n>0&&a>0)if(l.clearRect(0,0,n,a),e.bg&&(l.fillStyle=e.bg,l.rect(0,0,n,a),l.fill()),l.globalCompositeOperation="source-over",e.full)this.redraw({forcedContext:l,drawAllLayers:!0,forcedZoom:o,forcedPan:{x:-r.x1*o,y:-r.y1*o},forcedPxRatio:1});else{var u=i.pan(),c={x:u.x*o,y:u.y*o},d=i.zoom()*o;this.redraw({forcedContext:l,drawAllLayers:!0,forcedZoom:d,forcedPan:c,forcedPxRatio:1})}return s},t.prototype.png=function(e){return this.bufferCanvasImage(e).toDataURL("image/png")}}(cytoscape),function(e){"use strict";var t=e("renderer","canvas");t.prototype.registerBinding=function(e,t,i,r){this.bindings.push({target:e,event:t,handler:i,useCapture:r}),e.addEventListener(t,i,r)},t.prototype.nodeIsDraggable=function(e){return 0!==e._private.style.opacity.value&&"visible"==e._private.style.visibility.value&&"element"==e._private.style.display.value&&!e.locked()&&e.grabbable()?!0:!1},t.prototype.load=function(){var i=this,r=function(e){var t;if(e.addToList&&i.data.cy.hasCompoundNodes()){if(!e.addToList.hasId){e.addToList.hasId={};for(var r=0;r<e.addToList.length;r++){var n=e.addToList[r];e.addToList.hasId[n.id()]=!0}}t=e.addToList.hasId}return t||{}},n=function(e,t){if(e._private.cy.hasCompoundNodes())for(var i=r(t),n=e.descendants(),a=0;a<n.size();a++){var o=n[a],s=o._private;t.inDragLayer&&(s.rscratch.inDragLayer=!0),t.addToList&&!i[o.id()]&&(t.addToList.push(o),i[o.id()]=!0,s.grabbed=!0);for(var l=s.edges,u=0;t.inDragLayer&&u<l.length;u++)l[u]._private.rscratch.inDragLayer=!0}},a=function(e,t){var i=e._private,a=r(t);t.inDragLayer&&(i.rscratch.inDragLayer=!0),t.addToList&&!a[e.id()]&&(t.addToList.push(e),a[e.id()]=!0,i.grabbed=!0);for(var s=i.edges,l=0;t.inDragLayer&&l<s.length;l++)s[l]._private.rscratch.inDragLayer=!0;n(e,t),o(e,{inDragLayer:!0})},o=function(e,t){var i=e;if(e._private.cy.hasCompoundNodes()){for(;i.parent().nonempty();)i=i.parent()[0];if(i!=e){for(var n=i.descendants().add(i).not(e).not(e.descendants()),a=n.connectedEdges(),o=r(t),s=0;s<n.size();s++)void 0!==t.inDragLayer&&(n[s]._private.rscratch.inDragLayer=t.inDragLayer),t.addToList&&!o[n[s].id()]&&(t.addToList.push(n[s]),o[n[s].id()]=!0,n[s]._private.grabbed=!0);for(var l=0;void 0!==t.inDragLayer&&l<a.length;l++)a[l]._private.rscratch.inDragLayer=t.inDragLayer}}};"undefined"!=typeof MutationObserver?(i.removeObserver=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.removedNodes;if(n)for(var a=0;a<n.length;a++){var o=n[a];if(o===i.data.container){i.destroy();break}}}}),i.removeObserver.observe(i.data.container.parentNode,{childList:!0})):i.registerBinding(i.data.container,"DOMNodeRemoved",function(){i.destroy()}),i.registerBinding(window,"resize",e.util.debounce(function(){i.invalidateContainerClientCoordsCache(),i.matchCanvasSize(i.data.container),i.data.canvasNeedsRedraw[t.NODE]=!0,i.redraw()},100));for(var s=function(e){i.registerBinding(e,"scroll",function(){i.invalidateContainerClientCoordsCache()})},l=i.data.cy.container();s(l),l.parentNode;)l=l.parentNode;i.registerBinding(i.data.container,"contextmenu",function(e){e.preventDefault()});var u=function(){return 0!==i.data.select[4]};i.registerBinding(i.data.container,"mousedown",function(r){r.preventDefault(),i.hoverData.capture=!0,i.hoverData.which=r.which;var n=i.data.cy,o=i.projectIntoViewport(r.clientX,r.clientY),s=i.data.select,l=i.findNearestElement(o[0],o[1],!0),u=i.dragData.possibleDragElements;i.hoverData.mdownPos=o;var c=function(){i.hoverData.tapholdCancelled=!1,clearTimeout(i.hoverData.tapholdTimeout),i.hoverData.tapholdTimeout=setTimeout(function(){if(!i.hoverData.tapholdCancelled){var t=i.hoverData.down;t?t.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:o[0],y:o[1]}})):n.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:o[0],y:o[1]}}))}},i.tapholdDuration)};if(3==r.which){i.hoverData.cxtStarted=!0;var d=new e.Event(r,{type:"cxttapstart",cyPosition:{x:o[0],y:o[1]}});l?(l.activate(),l.trigger(d),i.hoverData.down=l):n.trigger(d),i.hoverData.downTime=(new Date).getTime(),i.hoverData.cxtDragged=!1}else if(1==r.which){if(null!=l){if(i.nodeIsDraggable(l)){var h=new e.Event(r,{type:"grab",cyPosition:{x:o[0],y:o[1]}});if(l.isNode()&&!l.selected())u=i.dragData.possibleDragElements=[],a(l,{addToList:u}),l.trigger(h);else if(l.isNode()&&l.selected()){u=i.dragData.possibleDragElements=[];for(var p=n.$(function(){return this.isNode()&&this.selected()}),v=0;v<p.length;v++)i.nodeIsDraggable(p[v])&&a(p[v],{addToList:u});l.trigger(h)}i.data.canvasNeedsRedraw[t.NODE]=!0,i.data.canvasNeedsRedraw[t.DRAG]=!0}l.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}))}else null==l&&n.trigger(new e.Event(r,{type:"mousedown",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:o[0],y:o[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:o[0],y:o[1]}}));if(i.hoverData.down=l,i.hoverData.downTime=(new Date).getTime(),null==l||l.isEdge()){s[4]=1;var f=Math.max(0,t.panOrBoxSelectDelay-(+new Date-i.hoverData.downTime));clearTimeout(i.bgActiveTimeout),n.boxSelectionEnabled()||l&&l.isEdge()?i.bgActiveTimeout=setTimeout(function(){l&&l.unactivate(),i.data.bgActivePosistion={x:o[0],y:o[1]},c(),i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.redraw()},f):(i.data.bgActivePosistion={x:o[0],y:o[1]},c(),i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.redraw())}}s[0]=s[2]=o[0],s[1]=s[3]=o[1]},!1),i.registerBinding(window,"mousemove",e.util.throttle(function(r){var n=!1,o=i.hoverData.capture;if(!o){var s=i.findContainerClientCoords();if(!(r.clientX>s[0]&&r.clientX<s[0]+i.canvasWidth&&r.clientY>s[1]&&r.clientY<s[1]+i.canvasHeight))return;for(var l=i.data.container,u=r.target,c=u.parentNode,d=!1;c;){if(c===l){d=!0;break}c=c.parentNode}if(!d)return}var h=i.data.cy,p=h.zoom(),v=(h.pan(),i.projectIntoViewport(r.clientX,r.clientY)),f=i.data.select,g=null;i.hoverData.draggingEles||(g=i.findNearestElement(v[0],v[1],!0));var y=i.hoverData.last,m=i.hoverData.down,x=[v[0]-f[2],v[1]-f[3]],b=i.dragData.possibleDragElements,w=f[2]-f[0],_=w*w,P=f[3]-f[1],E=P*P,S=_+E,T=S*p*p;i.hoverData.tapholdCancelled=!0;var k=function(){var e=i.hoverData.dragDelta=i.hoverData.dragDelta||[];0===e.length?(e.push(0),e.push(0)):(e[0]+=x[0],e[1]+=x[1])};if(n=!0,null!=g?g.trigger(new e.Event(r,{type:"mousemove",cyPosition:{x:v[0],y:v[1]}})).trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:v[0],y:v[1]}})).trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:v[0],y:v[1]}})):null==g&&h.trigger(new e.Event(r,{type:"mousemove",cyPosition:{x:v[0],y:v[1]}})).trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:v[0],y:v[1]}})).trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:v[0],y:v[1]}})),3===i.hoverData.which){var C=new e.Event(r,{type:"cxtdrag",cyPosition:{x:v[0],y:v[1]}});m?m.trigger(C):h.trigger(C),i.hoverData.cxtDragged=!0,i.hoverData.cxtOver&&g===i.hoverData.cxtOver||(i.hoverData.cxtOver&&i.hoverData.cxtOver.trigger(new e.Event(r,{type:"cxtdragout",cyPosition:{x:v[0],y:v[1]}})),i.hoverData.cxtOver=g,g&&g.trigger(new e.Event(r,{type:"cxtdragover",cyPosition:{x:v[0],y:v[1]}})))}else if(i.hoverData.dragging){if(n=!0,h.panningEnabled()&&h.userPanningEnabled()){var D;if(i.hoverData.justStartedPan){var M=i.hoverData.mdownPos;D={x:(v[0]-M[0])*p,y:(v[1]-M[1])*p},i.hoverData.justStartedPan=!1}else D={x:x[0]*p,y:x[1]*p};h.panBy(D)}v=i.projectIntoViewport(r.clientX,r.clientY)}else if(1==f[4]&&(null==m||m.isEdge())&&(!h.boxSelectionEnabled()||+new Date-i.hoverData.downTime>=t.panOrBoxSelectDelay)&&T>=i.tapThreshold2&&h.panningEnabled()&&h.userPanningEnabled())i.hoverData.dragging=!0,i.hoverData.justStartedPan=!0,f[4]=0;else{if(h.boxSelectionEnabled()&&Math.pow(f[2]-f[0],2)+Math.pow(f[3]-f[1],2)>7&&f[4]&&(clearTimeout(i.bgActiveTimeout),i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.redraw()),m&&m.isEdge()&&m.active()&&m.unactivate(),g!=y&&(y&&(y.trigger(new e.Event(r,{type:"mouseout",cyPosition:{x:v[0],y:v[1]}})),y.trigger(new e.Event(r,{type:"tapdragout",cyPosition:{x:v[0],y:v[1]}}))),g&&(g.trigger(new e.Event(r,{type:"mouseover",cyPosition:{x:v[0],y:v[1]}})),g.trigger(new e.Event(r,{type:"tapdragover",cyPosition:{x:v[0],y:v[1]}}))),i.hoverData.last=g),m&&m.isNode()&&i.nodeIsDraggable(m))if(T>=i.tapThreshold2){var N=!i.dragData.didDrag;N&&(i.data.canvasNeedsRedraw[t.NODE]=!0),i.dragData.didDrag=!0;for(var I=[],B=0;B<b.length;B++){var z=b[B];if(i.hoverData.draggingEles||a(z,{inDragLayer:!0}),z.isNode()&&i.nodeIsDraggable(z)&&z.grabbed()){var O=z._private.position;if(I.push(z),e.is.number(x[0])&&e.is.number(x[1])&&(O.x+=x[0],O.y+=x[1],N)){var L=i.hoverData.dragDelta;e.is.number(L[0])&&e.is.number(L[1])&&(O.x+=L[0],O.y+=L[1])}}}i.hoverData.draggingEles=!0;var X=new e.Collection(h,I);X.updateCompoundBounds(),X.trigger("position drag"),i.data.canvasNeedsRedraw[t.DRAG]=!0,i.redraw()}else k();n=!0}return f[2]=v[0],f[3]=v[1],n?(r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault(),!1):void 0},1e3/30,{trailing:!0}),!1),i.registerBinding(window,"mouseup",function(r){var n=i.hoverData.capture;if(n){i.hoverData.capture=!1;var a=i.data.cy,s=i.projectIntoViewport(r.clientX,r.clientY),l=i.data.select,u=i.findNearestElement(s[0],s[1],!0),c=i.dragData.possibleDragElements,d=i.hoverData.down,h=r.shiftKey;if(i.data.bgActivePosistion&&(i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.redraw()),i.data.bgActivePosistion=void 0,clearTimeout(i.bgActiveTimeout),i.hoverData.cxtStarted=!1,i.hoverData.draggingEles=!1,d&&d.unactivate(),3===i.hoverData.which){var p=new e.Event(r,{type:"cxttapend",cyPosition:{x:s[0],y:s[1]}});if(d?d.trigger(p):a.trigger(p),!i.hoverData.cxtDragged){var v=new e.Event(r,{type:"cxttap",cyPosition:{x:s[0],y:s[1]}});d?d.trigger(v):a.trigger(v)}i.hoverData.cxtDragged=!1,i.hoverData.which=null}else{if(null!=d||i.dragData.didDrag||Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]||i.hoverData.dragging||(a.$(function(){return this.selected()}).unselect(),c.length>0&&(i.data.canvasNeedsRedraw[t.NODE]=!0),i.dragData.possibleDragElements=c=[]),null!=u?u.trigger(new e.Event(r,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})):null==u&&a.trigger(new e.Event(r,{type:"mouseup",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:s[0],y:s[1]}})),Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)===0&&(null!=u?u.trigger(new e.Event(r,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:s[0],y:s[1]}})):null==u&&a.trigger(new e.Event(r,{type:"click",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"tap",cyPosition:{x:s[0],y:s[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:s[0],y:s[1]}}))),u!=d||i.dragData.didDrag||null!=u&&u._private.selectable&&(i.hoverData.dragging||("additive"===a.selectionType()||h?u.selected()?u.unselect():u.select():h||(a.$(":selected").not(u).unselect(),u.select())),i.data.canvasNeedsRedraw[t.NODE]=!0),a.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]){var f=[],g=i.getAllInBox(l[0],l[1],l[2],l[3]);i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,g.length>0&&(i.data.canvasNeedsRedraw[t.NODE]=!0);for(var y=0;y<g.length;y++)g[y]._private.selectable&&f.push(g[y]);var m=new e.Collection(a,f);"additive"===a.selectionType()?m.select():(h||a.$(":selected").not(m).unselect(),m.select()),i.redraw()}if(i.hoverData.dragging&&(i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.redraw()),i.hoverData.dragging=!1,!l[4]){i.data.canvasNeedsRedraw[t.DRAG]=!0,i.data.canvasNeedsRedraw[t.NODE]=!0;for(var y=0;y<c.length;y++)if("nodes"===c[y]._private.group){c[y]._private.rscratch.inDragLayer=!1,c[y]._private.grabbed=!1;for(var x=c[y]._private.edges,b=0;b<x.length;b++)x[b]._private.rscratch.inDragLayer=!1;o(c[y],{inDragLayer:!1})}else"edges"===c[y]._private.group&&(c[y]._private.rscratch.inDragLayer=!1);d&&d.trigger("free")}}l[4]=0,i.hoverData.down=null,i.dragData.didDrag=!1,i.hoverData.dragDelta=[]}},!1);var c=function(e){if(!i.scrollingPage){var r=i.data.cy,n=i.projectIntoViewport(e.clientX,e.clientY),a=[n[0]*r.zoom()+r.pan().x,n[1]*r.zoom()+r.pan().y];if(i.hoverData.draggingEles||i.hoverData.dragging||i.hoverData.cxtStarted||u())return void e.preventDefault();if(r.panningEnabled()&&r.userPanningEnabled()&&r.zoomingEnabled()&&r.userZoomingEnabled()){e.preventDefault(),i.data.wheelZooming=!0,clearTimeout(i.data.wheelTimeout),i.data.wheelTimeout=setTimeout(function(){i.data.wheelZooming=!1,i.data.canvasNeedsRedraw[t.NODE]=!0,i.redraw()},150);var o=e.deltaY/-250||e.wheelDeltaY/1e3||e.wheelDelta/1e3;o*=i.wheelSensitivity;var s=1===e.deltaMode;s&&(o*=33),r.zoom({level:r.zoom()*Math.pow(10,o),renderedPosition:{x:a[0],y:a[1]}})}}};i.registerBinding(i.data.container,"wheel",c,!0),i.registerBinding(window,"scroll",function(){i.scrollingPage=!0,clearTimeout(i.scrollingPageTimeout),i.scrollingPageTimeout=setTimeout(function(){i.scrollingPage=!1},250)},!0),i.registerBinding(i.data.container,"mouseout",function(t){var r=i.projectIntoViewport(t.clientX,t.clientY);i.data.cy.trigger(new e.Event(t,{type:"mouseout",cyPosition:{x:r[0],y:r[1]}}))},!1),i.registerBinding(i.data.container,"mouseover",function(t){var r=i.projectIntoViewport(t.clientX,t.clientY);i.data.cy.trigger(new e.Event(t,{type:"mouseover",cyPosition:{x:r[0],y:r[1]}}))},!1);var d,h,p,v,f,g,y,m,x,b,w,_,P,E=function(e,t,i,r){return Math.sqrt((i-e)*(i-e)+(r-t)*(r-t))},S=function(e,t,i,r){return(i-e)*(i-e)+(r-t)*(r-t)};i.registerBinding(i.data.container,"touchstart",function(r){clearTimeout(this.threeFingerSelectTimeout),r.target!==i.data.link&&r.preventDefault(),i.touchData.capture=!0,i.data.bgActivePosistion=void 0;var n=i.data.cy,o=i.getCachedNodes(),s=i.getCachedEdges(),l=i.touchData.now,u=i.touchData.earlier;if(r.touches[0]){var c=i.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=c[0],l[1]=c[1]}if(r.touches[1]){var c=i.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);l[2]=c[0],l[3]=c[1]}if(r.touches[2]){var c=i.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);l[4]=c[0],l[5]=c[1]}if(r.touches[1]){var T=function(e){for(var t=0;t<e.length;t++)e[t]._private.grabbed=!1,e[t]._private.rscratch.inDragLayer=!1,e[t].active()&&e[t].unactivate()};T(o),T(s);var k=i.findContainerClientCoords();x=k[0],b=k[1],w=k[2],_=k[3],d=r.touches[0].clientX-x,h=r.touches[0].clientY-b,p=r.touches[1].clientX-x,v=r.touches[1].clientY-b,P=d>=0&&w>=d&&p>=0&&w>=p&&h>=0&&_>=h&&v>=0&&_>=v;var C=n.pan(),D=n.zoom();f=E(d,h,p,v),g=S(d,h,p,v),y=[(d+p)/2,(h+v)/2],m=[(y[0]-C.x)/D,(y[1]-C.y)/D];var M=200,N=M*M;if(N>g&&!r.touches[2]){var I=i.findNearestElement(l[0],l[1],!0),B=i.findNearestElement(l[2],l[3],!0);return I&&I.isNode()?(I.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),i.touchData.start=I):B&&B.isNode()?(B.activate().trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),i.touchData.start=B):(n.trigger(new e.Event(r,{type:"cxttapstart",cyPosition:{x:l[0],y:l[1]}})),i.touchData.start=null),i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxt=!0,i.touchData.cxtDragged=!1,i.data.bgActivePosistion=void 0,void i.redraw()}}if(r.touches[2]);else if(r.touches[1]);else if(r.touches[0]){var z=i.findNearestElement(l[0],l[1],!0);if(null!=z){if(z.activate(),i.touchData.start=z,z.isNode()&&i.nodeIsDraggable(z)){var O=i.dragData.touchDragEles=[];if(i.data.canvasNeedsRedraw[t.NODE]=!0,i.data.canvasNeedsRedraw[t.DRAG]=!0,z.selected())for(var L=n.$(function(){return this.isNode()&&this.selected()}),X=0;X<L.length;X++){var R=L[X];i.nodeIsDraggable(R)&&a(R,{addToList:O})}else a(z,{addToList:O});z.trigger(new e.Event(r,{type:"grab",cyPosition:{x:l[0],y:l[1]}}))}z.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmousdown",cyPosition:{x:l[0],y:l[1]}}))}null==z&&(n.trigger(new e.Event(r,{type:"touchstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"tapstart",cyPosition:{x:l[0],y:l[1]}})).trigger(new e.Event(r,{type:"vmousedown",cyPosition:{x:l[0],y:l[1]}})),i.data.bgActivePosistion={x:c[0],y:c[1]},i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.redraw());for(var Y=0;Y<l.length;Y++)u[Y]=l[Y],i.touchData.startPosition[Y]=l[Y];i.touchData.singleTouchMoved=!1,i.touchData.singleTouchStartTime=+new Date,clearTimeout(i.touchData.tapholdTimeout),i.touchData.tapholdTimeout=setTimeout(function(){i.touchData.singleTouchMoved!==!1||i.pinching||(i.touchData.start?i.touchData.start.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:l[0],y:l[1]}})):(i.data.cy.trigger(new e.Event(r,{type:"taphold",cyPosition:{x:l[0],y:l[1]}})),n.$(":selected").unselect()))},i.tapholdDuration)}},!1),i.registerBinding(window,"touchmove",e.util.throttle(function(r){var n=i.data.select,o=i.touchData.capture;o&&r.preventDefault();var s=i.data.cy,l=i.touchData.now,u=i.touchData.earlier,c=s.zoom();if(r.touches[0]){var y=i.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=y[0],l[1]=y[1]}if(r.touches[1]){var y=i.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);l[2]=y[0],l[3]=y[1]}if(r.touches[2]){var y=i.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);l[4]=y[0],l[5]=y[1]}for(var w=[],_=0;_<l.length;_++)w[_]=l[_]-u[_];var T=i.touchData.startPosition,k=l[0]-T[0],C=k*k,D=l[1]-T[1],M=D*D,N=C+M,I=N*c*c;if(o&&i.touchData.cxt){var B=r.touches[0].clientX-x,z=r.touches[0].clientY-b,O=r.touches[1].clientX-x,L=r.touches[1].clientY-b,X=S(B,z,O,L),R=X/g,Y=150,V=Y*Y,A=1.5,q=A*A;if(R>=q||X>=V){i.touchData.cxt=!1,i.touchData.start&&(i.touchData.start.unactivate(),i.touchData.start=null),i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var F=new e.Event(r,{type:"cxttapend",cyPosition:{x:l[0],y:l[1]}});i.touchData.start?i.touchData.start.trigger(F):s.trigger(F)}}if(o&&i.touchData.cxt){var F=new e.Event(r,{type:"cxtdrag",cyPosition:{x:l[0],y:l[1]}});i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.touchData.start?i.touchData.start.trigger(F):s.trigger(F),i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxtDragged=!0;var j=i.findNearestElement(l[0],l[1],!0);i.touchData.cxtOver&&j===i.touchData.cxtOver||(i.touchData.cxtOver&&i.touchData.cxtOver.trigger(new e.Event(r,{type:"cxtdragout",cyPosition:{x:l[0],y:l[1]}})),i.touchData.cxtOver=j,j&&j.trigger(new e.Event(r,{type:"cxtdragover",cyPosition:{x:l[0],y:l[1]}})))}else if(o&&r.touches[2]&&s.boxSelectionEnabled())i.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,n&&0!==n.length&&void 0!==n[0]?(n[2]=(l[0]+l[2]+l[4])/3,n[3]=(l[1]+l[3]+l[5])/3):(n[0]=(l[0]+l[2]+l[4])/3,n[1]=(l[1]+l[3]+l[5])/3,n[2]=(l[0]+l[2]+l[4])/3+1,n[3]=(l[1]+l[3]+l[5])/3+1),n[4]=1,i.redraw();else if(o&&r.touches[1]&&s.zoomingEnabled()&&s.panningEnabled()&&s.userZoomingEnabled()&&s.userPanningEnabled()){i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;var W=i.dragData.touchDragEles;if(W){i.data.canvasNeedsRedraw[t.DRAG]=!0;for(var H=0;H<W.length;H++)W[H]._private.grabbed=!1,W[H]._private.rscratch.inDragLayer=!1}var B=r.touches[0].clientX-x,z=r.touches[0].clientY-b,O=r.touches[1].clientX-x,L=r.touches[1].clientY-b,$=E(B,z,O,L),Z=$/f;if(1!=Z&&P){var U=B-d,G=z-h,K=O-p,J=L-v,Q=(U+K)/2,et=(G+J)/2,tt=s.zoom(),it=tt*Z,rt=s.pan(),nt=m[0]*tt+rt.x,at=m[1]*tt+rt.y,ot={x:-it/tt*(nt-rt.x-Q)+nt,y:-it/tt*(at-rt.y-et)+at};if(i.touchData.start){var W=i.dragData.touchDragEles;if(W)for(var H=0;H<W.length;H++)W[H]._private.grabbed=!1,W[H]._private.rscratch.inDragLayer=!1;i.touchData.start._private.active=!1,i.touchData.start._private.grabbed=!1,i.touchData.start._private.rscratch.inDragLayer=!1,i.data.canvasNeedsRedraw[t.DRAG]=!0,i.touchData.start.trigger("free").trigger("unactivate")}s.viewport({zoom:it,pan:ot,cancelOnFailedZoom:!0}),f=$,d=B,h=z,p=O,v=L,i.pinching=!0}if(r.touches[0]){var y=i.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=y[0],l[1]=y[1]}if(r.touches[1]){var y=i.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);l[2]=y[0],l[3]=y[1]}if(r.touches[2]){var y=i.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);l[4]=y[0],l[5]=y[1]}}else if(r.touches[0]){var st=i.touchData.start,lt=i.touchData.last,j=j||i.findNearestElement(l[0],l[1],!0);if(null!=st&&"nodes"==st._private.group&&i.nodeIsDraggable(st))if(I>=i.tapThreshold2){for(var W=i.dragData.touchDragEles,ut=0;ut<W.length;ut++){var ct=W[ut];if(i.nodeIsDraggable(ct)&&ct.isNode()&&ct.grabbed()){i.dragData.didDrag=!0;var dt=ct._private.position,ht=!i.hoverData.draggingEles;if(e.is.number(w[0])&&e.is.number(w[1])&&(dt.x+=w[0],dt.y+=w[1]),ht){a(ct,{inDragLayer:!0});var pt=i.touchData.dragDelta;e.is.number(pt[0])&&e.is.number(pt[1])&&(dt.x+=pt[0],dt.y+=pt[1])}}}var vt=new e.Collection(s,ct);vt.updateCompoundBounds(),vt.trigger("position drag"),i.hoverData.draggingEles=!0,i.data.canvasNeedsRedraw[t.DRAG]=!0,i.touchData.startPosition[0]==u[0]&&i.touchData.startPosition[1]==u[1]&&(i.data.canvasNeedsRedraw[t.NODE]=!0),i.redraw()}else{var pt=i.touchData.dragDelta=i.touchData.dragDelta||[];0===pt.length?(pt.push(0),pt.push(0)):(pt[0]+=w[0],pt[1]+=w[1])}null!=st&&(st.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),st.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),st.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))),null==st&&(null!=j&&(j.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),j.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),j.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}}))),null==j&&(s.trigger(new e.Event(r,{type:"touchmove",cyPosition:{x:l[0],y:l[1]}})),s.trigger(new e.Event(r,{type:"tapdrag",cyPosition:{x:l[0],y:l[1]}})),s.trigger(new e.Event(r,{type:"vmousemove",cyPosition:{x:l[0],y:l[1]}})))),j!=lt&&(lt&&lt.trigger(new e.Event(r,{type:"tapdragout",cyPosition:{x:l[0],y:l[1]}})),j&&j.trigger(new e.Event(r,{type:"tapdragover",cyPosition:{x:l[0],y:l[1]}}))),i.touchData.last=j;for(var H=0;H<l.length;H++)l[H]&&i.touchData.startPosition[H]&&Math.abs(l[H]-i.touchData.startPosition[H])>4&&(i.touchData.singleTouchMoved=!0);if(o&&(null==st||st.isEdge())&&s.panningEnabled()&&s.userPanningEnabled()){i.swipePanning?s.panBy({x:w[0]*c,y:w[1]*c}):I>=i.tapThreshold2&&(i.swipePanning=!0,s.panBy({x:k*c,y:D*c})),st&&(st.unactivate(),i.data.bgActivePosistion||(i.data.bgActivePosistion={x:l[0],y:l[1]}),i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,i.touchData.start=null);var y=i.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=y[0],l[1]=y[1]}}for(var _=0;_<l.length;_++)u[_]=l[_]},1e3/30,{trailing:!0}),!1),i.registerBinding(window,"touchcancel",function(){var e=i.touchData.start;i.touchData.capture=!1,e&&e.unactivate()}),i.registerBinding(window,"touchend",function(r){var n=i.touchData.start,a=i.touchData.capture;if(a){i.touchData.capture=!1,r.preventDefault();var s=i.data.select;i.swipePanning=!1,i.hoverData.draggingEles=!1;var l=i.data.cy,u=l.zoom(),c=i.touchData.now,d=i.touchData.earlier;if(r.touches[0]){var h=i.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);c[0]=h[0],c[1]=h[1]}if(r.touches[1]){var h=i.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY);c[2]=h[0],c[3]=h[1]}if(r.touches[2]){var h=i.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY);c[4]=h[0],c[5]=h[1]}n&&n.unactivate();var p;if(i.touchData.cxt){if(p=new e.Event(r,{type:"cxttapend",cyPosition:{x:c[0],y:c[1]}}),n?n.trigger(p):l.trigger(p),!i.touchData.cxtDragged){var v=new e.Event(r,{type:"cxttap",cyPosition:{x:c[0],y:c[1]}});n?n.trigger(v):l.trigger(v)}return i.touchData.start&&(i.touchData.start._private.grabbed=!1),i.touchData.cxt=!1,i.touchData.start=null,void i.redraw()}if(!r.touches[2]&&l.boxSelectionEnabled()){clearTimeout(this.threeFingerSelectTimeout);var f=[],g=i.getAllInBox(s[0],s[1],s[2],s[3]);s[0]=void 0,s[1]=void 0,s[2]=void 0,s[3]=void 0,s[4]=0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;for(var y=0;y<g.length;y++)g[y]._private.selectable&&f.push(g[y]);var m=new e.Collection(l,f);"single"===l.selectionType()&&l.$(":selected").not(m).unselect(),m.select(),m.length>0?i.data.canvasNeedsRedraw[t.NODE]=!0:i.redraw()}var x=!1;if(null!=n&&(n._private.active=!1,x=!0,n.unactivate()),r.touches[2])i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0;else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){if(i.data.bgActivePosistion=void 0,i.data.canvasNeedsRedraw[t.SELECT_BOX]=!0,null!=n){n._private.grabbed&&(n._private.grabbed=!1,n.trigger("free"),n._private.rscratch.inDragLayer=!1);for(var b=n._private.edges,w=0;w<b.length;w++)b[w]._private.rscratch.inDragLayer=!1;if(o(n,!1),n.selected())for(var _=l.$("node:selected"),P=0;P<_.length;P++){var E=_[P];E._private.rscratch.inDragLayer=!1,E._private.grabbed=!1;for(var b=E._private.edges,w=0;w<b.length;w++)b[w]._private.rscratch.inDragLayer=!1;o(E,!1)}i.data.canvasNeedsRedraw[t.DRAG]=!0,i.data.canvasNeedsRedraw[t.NODE]=!0,n.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),n.unactivate(),i.touchData.start=null}else{var S=i.findNearestElement(c[0],c[1],!0);null!=S&&S.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}})),null==S&&l.trigger(new e.Event(r,{type:"touchend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"tapend",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vmouseup",cyPosition:{x:c[0],y:c[1]}}))}var T=i.touchData.startPosition[0]-c[0],k=T*T,C=i.touchData.startPosition[1]-c[1],D=C*C,M=k+D,N=M*u*u;null!=n&&!i.dragData.didDrag&&n._private.selectable&&N<i.tapThreshold2&&!i.pinching&&("single"===l.selectionType()?(l.$(":selected").not(n).unselect(),n.select()):n.selected()?n.unselect():n.select(),x=!0,i.data.canvasNeedsRedraw[t.NODE]=!0),i.touchData.singleTouchMoved===!1&&(n?n.trigger(new e.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}})):l.trigger(new e.Event(r,{type:"tap",cyPosition:{x:c[0],y:c[1]}})).trigger(new e.Event(r,{type:"vclick",cyPosition:{x:c[0],y:c[1]}}))),i.touchData.singleTouchMoved=!0}for(var w=0;w<c.length;w++)d[w]=c[w];i.dragData.didDrag=!1,r.touches[0]&&(i.touchData.dragDelta=[]),x&&n&&n.updateStyle(!1),r.touches.length<2&&(i.pinching=!1,i.data.canvasNeedsRedraw[t.NODE]=!0,i.redraw())}},!1)}}(cytoscape),function(e){"use strict";for(var t=e("renderer","canvas"),i=t.prototype,r=t.usePaths(),n=t.nodeShapes={},a=Math.sin(0),o=Math.cos(0),s={},l={},u=.1,c=0*Math.PI;c<2*Math.PI;c+=u)s[c]=Math.sin(c),l[c]=Math.cos(c);n.ellipse={draw:function(e,t,i,r,a){n.ellipse.drawPath(e,t,i,r,a),e.fill()},drawPath:function(e,t,i,n,c){if(r){e.beginPath&&e.beginPath();for(var d,h,p=n/2,v=c/2,f=0*Math.PI;f<2*Math.PI;f+=u)d=t-p*s[f]*a+p*l[f]*o,h=i+v*l[f]*a+v*s[f]*o,0===f?e.moveTo(d,h):e.lineTo(d,h);e.closePath()}else e.beginPath&&e.beginPath(),e.translate(t,i),e.scale(n/2,c/2),e.arc(0,0,1,0,2*Math.PI*.999,!1),e.closePath(),e.scale(2/n,2/c),e.translate(-t,-i)},intersectLine:function(t,i,r,n,a,o,s){var l=e.math.intersectLineEllipse(a,o,t,i,r/2+s,n/2+s);return l},intersectBox:function(t,i,r,n,a,o,s,l,u){return e.math.boxIntersectEllipse(t,i,r,n,u,a,o,s,l)},checkPoint:function(e,t,i,r,n,a,o){return e-=a,t-=o,e/=r/2+i,t/=n/2+i,Math.pow(e,2)+Math.pow(t,2)<=1}},n.triangle={points:e.math.generateUnitNgonPointsFitToSquare(3,0),draw:function(e,t,r,a,o){i.drawPolygon(e,t,r,a,o,n.triangle.points)},drawPath:function(e,t,r,a,o){i.drawPolygonPath(e,t,r,a,o,n.triangle.points)},intersectLine:function(t,i,r,a,o,s,l){return e.math.polygonIntersectLine(o,s,n.triangle.points,t,i,r/2,a/2,l)},intersectBox:function(t,i,r,a,o,s,l,u,c){var d=n.triangle.points;return e.math.boxIntersectPolygon(t,i,r,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,i,r,a,o,s,l){return e.math.pointInsidePolygon(t,i,n.triangle.points,s,l,a,o,[0,-1],r)}},n.square={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,a,o){i.drawPolygon(e,t,r,a,o,n.square.points)},drawPath:function(e,t,r,a,o){i.drawPolygonPath(e,t,r,a,o,n.square.points)},intersectLine:function(t,i,r,a,o,s,l){return e.math.polygonIntersectLine(o,s,n.square.points,t,i,r/2,a/2,l)},intersectBox:function(t,i,r,a,o,s,l,u,c){var d=n.square.points;return e.math.boxIntersectPolygon(t,i,r,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,i,r,a,o,s,l){return e.math.pointInsidePolygon(t,i,n.square.points,s,l,a,o,[0,-1],r)}},n.rectangle=n.square,n.octogon={},n.roundrectangle={points:e.math.generateUnitNgonPointsFitToSquare(4,0),draw:function(e,t,r,n,a){i.drawRoundRectangle(e,t,r,n,a,10)},drawPath:function(e,t,r,n,a){i.drawRoundRectanglePath(e,t,r,n,a,10)},intersectLine:function(t,i,r,n,a,o,s){return e.math.roundRectangleIntersectLine(a,o,t,i,r,n,s)},intersectBox:function(t,i,r,n,a,o,s,l,u){return e.math.roundRectangleIntersectBox(t,i,r,n,a,o,s,l,u)},checkPoint:function(t,i,r,a,o,s,l){var u=e.math.getRoundRectangleRadius(a,o);if(e.math.pointInsidePolygon(t,i,n.roundrectangle.points,s,l,a,o-2*u,[0,-1],r))return!0;if(e.math.pointInsidePolygon(t,i,n.roundrectangle.points,s,l,a-2*u,o,[0,-1],r))return!0;var c=function(e,t,i,r,n,a,o){return e-=i,t-=r,e/=n/2+o,t/=a/2+o,Math.pow(e,2)+Math.pow(t,2)<=1};return c(t,i,s-a/2+u,l-o/2+u,2*u,2*u,r)?!0:c(t,i,s+a/2-u,l-o/2+u,2*u,2*u,r)?!0:c(t,i,s+a/2-u,l+o/2-u,2*u,2*u,r)?!0:c(t,i,s-a/2+u,l+o/2-u,2*u,2*u,r)?!0:!1}},n.pentagon={points:e.math.generateUnitNgonPointsFitToSquare(5,0),draw:function(e,t,r,a,o){i.drawPolygon(e,t,r,a,o,n.pentagon.points)
},drawPath:function(e,t,r,a,o){i.drawPolygonPath(e,t,r,a,o,n.pentagon.points)},intersectLine:function(e,t,r,a,o,s,l){return i.polygonIntersectLine(o,s,n.pentagon.points,e,t,r/2,a/2,l)},intersectBox:function(t,i,r,a,o,s,l,u,c){var d=n.pentagon.points;return e.math.boxIntersectPolygon(t,i,r,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,i,r,a,o,s,l){return e.math.pointInsidePolygon(t,i,n.pentagon.points,s,l,a,o,[0,-1],r)}},n.hexagon={points:e.math.generateUnitNgonPointsFitToSquare(6,0),draw:function(e,t,r,a,o){i.drawPolygon(e,t,r,a,o,n.hexagon.points)},drawPath:function(e,t,r,a,o){i.drawPolygonPath(e,t,r,a,o,n.hexagon.points)},intersectLine:function(t,i,r,a,o,s,l){return e.math.polygonIntersectLine(o,s,n.hexagon.points,t,i,r/2,a/2,l)},intersectBox:function(t,i,r,a,o,s,l,u,c){var d=n.hexagon.points;return e.math.boxIntersectPolygon(t,i,r,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,i,r,a,o,s,l){return e.math.pointInsidePolygon(t,i,n.hexagon.points,s,l,a,o,[0,-1],r)}},n.heptagon={points:e.math.generateUnitNgonPointsFitToSquare(7,0),draw:function(e,t,r,a,o){i.drawPolygon(e,t,r,a,o,n.heptagon.points)},drawPath:function(e,t,r,a,o){i.drawPolygonPath(e,t,r,a,o,n.heptagon.points)},intersectLine:function(e,t,r,a,o,s,l){return i.polygonIntersectLine(o,s,n.heptagon.points,e,t,r/2,a/2,l)},intersectBox:function(e,t,r,a,o,s,l,u,c){var d=n.heptagon.points;return i.boxIntersectPolygon(e,t,r,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,i,r,a,o,s,l){return e.math.pointInsidePolygon(t,i,n.heptagon.points,s,l,a,o,[0,-1],r)}},n.octagon={points:e.math.generateUnitNgonPointsFitToSquare(8,0),draw:function(e,t,r,a,o){i.drawPolygon(e,t,r,a,o,n.octagon.points)},drawPath:function(e,t,r,a,o){i.drawPolygonPath(e,t,r,a,o,n.octagon.points)},intersectLine:function(e,t,r,a,o,s,l){return i.polygonIntersectLine(o,s,n.octagon.points,e,t,r/2,a/2,l)},intersectBox:function(e,t,r,a,o,s,l,u,c){var d=n.octagon.points;return i.boxIntersectPolygon(e,t,r,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,i,r,a,o,s,l){return e.math.pointInsidePolygon(t,i,n.octagon.points,s,l,a,o,[0,-1],r)}};var d=new Array(20),h=e.math.generateUnitNgonPoints(5,0),p=e.math.generateUnitNgonPoints(5,Math.PI/5),v=.5*(3-Math.sqrt(5));v*=1.57;for(var c=0;c<p.length/2;c++)p[2*c]*=v,p[2*c+1]*=v;for(var c=0;5>c;c++)d[4*c]=h[2*c],d[4*c+1]=h[2*c+1],d[4*c+2]=p[2*c],d[4*c+3]=p[2*c+1];d=e.math.fitPolygonToSquare(d),n.star5=n.star={points:d,draw:function(e,t,r,a,o){i.drawPolygon(e,t,r,a,o,n.star5.points)},drawPath:function(e,t,r,a,o){i.drawPolygonPath(e,t,r,a,o,n.star5.points)},intersectLine:function(e,t,r,a,o,s,l){return i.polygonIntersectLine(o,s,n.star5.points,e,t,r/2,a/2,l)},intersectBox:function(e,t,r,a,o,s,l,u,c){var d=n.star5.points;return i.boxIntersectPolygon(e,t,r,a,d,o,s,l,u,[0,-1],c)},checkPoint:function(t,i,r,a,o,s,l){return e.math.pointInsidePolygon(t,i,n.star5.points,s,l,a,o,[0,-1],r)}}}(cytoscape),function(e){"use strict";function t(t){this._private={},this._private.options=e.util.extend({},i,t)}var i={animate:!0,maxSimulationTime:4e3,fit:!0,padding:30,boundingBox:void 0,ungrabifyWhileSimulating:!1,ready:void 0,stop:void 0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:.1,stableEnergy:function(e){var t=e;return t.max<=.5||t.mean<=.3},infinite:!1};t.prototype.run=function(){var t=this,i=this._private.options;return e.util.require("arbor",function(r){function n(e,t){return null==t?void 0:"function"==typeof t?t.apply(e,[e._private.data,{nodes:u.length,edges:c.length,element:e}]):t}function a(e){if(!e.isFullAutoParent()){var t=e._private.data.id,r=n(e,i.nodeMass),a=e._private.locked,o=e.position(),s=p.fromScreen({x:o.x,y:o.y});e.scratch().arbor=p.addNode(t,{element:e,mass:r,fixed:a,x:a?s.x:void 0,y:a?s.y:void 0})}}function o(e){var t=e.source().id(),r=e.target().id(),a=n(e,i.edgeLength);e.scratch().arbor=p.addEdge(t,r,{length:a})}var s=i.cy,l=i.eles,u=l.nodes().not(":parent"),c=l.edges(),d=e.util.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:s.width(),h:s.height()}),h=!1;if(t.trigger({type:"layoutstart",layout:t}),void 0!==i.liveUpdate&&(i.animate=i.liveUpdate),s.nodes().size()<=1)return i.fit&&s.reset(),s.nodes().position({x:Math.round((d.x1+d.x2)/2),y:Math.round((d.y1+d.y2)/2)}),t.one("layoutready",i.ready),t.trigger({type:"layoutready",layout:t}),t.one("layoutstop",i.stop),void t.trigger({type:"layoutstop",layout:t});var p=t._private.system=r.ParticleSystem();p.parameters({repulsion:i.repulsion,stiffness:i.stiffness,friction:i.friction,gravity:i.gravity,fps:i.fps,dt:i.dt,precision:i.precision}),i.animate&&i.fit&&s.fit(d,i.padding);var v,f=250,g=!1,y=+new Date,m={init:function(){},redraw:function(){var e=p.energy();if(!i.infinite&&null!=i.stableEnergy&&null!=e&&e.n>0&&i.stableEnergy(e))return void t.stop();i.infinite||1/0==f||(clearTimeout(v),v=setTimeout(S,f));var r=s.collection();p.eachNode(function(e,t){var i=e.data,n=i.element;null!=n&&(n.locked()||n.grabbed()||(n.silentPosition({x:d.x1+t.x,y:d.y1+t.y}),r.merge(n)))}),i.animate&&r.length>0&&(h=!0,r.rtrigger("position"),i.fit&&s.fit(i.padding),y=+new Date,h=!1),g||(g=!0,t.one("layoutready",i.ready),t.trigger({type:"layoutready",layout:t}))}};p.renderer=m,p.screenSize(d.w,d.h),p.screenPadding(i.padding,i.padding,i.padding,i.padding),p.screenStep(i.stepSize);var x;u.on("grab free position",x=function(e){if(!h){var t=this.position(),n=p.fromScreen(t);if(n){var a=r.Point(n.x,n.y),o=i.padding;switch(d.x1+o<=t.x&&t.x<=d.x2-o&&d.y1+o<=t.y&&t.y<=d.y2-o&&(this.scratch().arbor.p=a),e.type){case"grab":this.scratch().arbor.fixed=!0;break;case"free":this.scratch().arbor.fixed=!1}}}});var b;u.on("lock unlock",b=function(){node.scratch().arbor.fixed=node.locked()});var w;l.on("remove",w=function(){});var _;s.on("add","*",_=function(){});var P;s.on("resize",P=function(){if(null==i.boundingBox&&null!=t._private.system){var e=s.width(),r=s.height();p.screenSize(e,r)}}),u.each(function(e,t){a(t)}),c.each(function(e,t){o(t)});var E=u.filter(":grabbable");i.ungrabifyWhileSimulating&&E.ungrabify();var S=t._private.doneHandler=function(){t._private.doneHandler=null,i.animate||(i.fit&&s.reset(),u.rtrigger("position")),u.off("grab free position",x),u.off("lock unlock",b),l.off("remove",w),s.off("add","*",_),s.off("resize",P),i.ungrabifyWhileSimulating&&E.grabify(),t.one("layoutstop",i.stop),t.trigger({type:"layoutstop",layout:t})};p.start(),!i.infinite&&null!=i.maxSimulationTime&&i.maxSimulationTime>0&&1/0!==i.maxSimulationTime&&setTimeout(function(){t.stop()},i.maxSimulationTime)}),this},t.prototype.stop=function(){return null!=this._private.system&&this._private.system.stop(),this._private.doneHandler&&this._private.doneHandler(),this},e("layout","arbor",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},i,t)}var i={fit:!0,directed:!1,padding:30,circle:!1,boundingBox:void 0,avoidOverlap:!0,roots:void 0,maximalAdjustments:0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t,i=this.options,r=i,n=i.cy,a=r.eles,o=a.nodes().not(":parent"),s=a,l=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(e.is.elementOrCollection(r.roots))t=r.roots;else if(e.is.array(r.roots)){for(var u=[],c=0;c<r.roots.length;c++){var d=r.roots[c],h=n.getElementById(d);u.push(h)}t=new e.Collection(n,u)}else if(e.is.string(r.roots))t=n.$(r.roots);else if(r.directed)t=o.roots();else{for(var p=[],v=o;v.length>0;){var f=n.collection();a.bfs({roots:v[0],visit:function(e,t,i){f=f.add(i)},directed:!1}),v=v.not(f),p.push(f)}t=n.collection();for(var c=0;c<p.length;c++){var g=p[c],y=g.maxDegree(!1),m=g.filter(function(){return this.degree(!1)===y});t=t.add(m)}}var x=[],b={},w={},_={},P={},E={};s.bfs({roots:t,directed:r.directed,visit:function(e,t,i,r,n){var a=this[0],o=a.id();if(x[t]||(x[t]=[]),x[t].push(a),b[o]=!0,w[o]=t,_[o]=n,P[o]=r,n){var s=n.id(),l=E[s]=E[s]||[];l.push(i)}}});for(var S=[],c=0;c<o.length;c++){var h=o[c];b[h.id()]||S.push(h)}for(var T=3*S.length,k=0;0!==S.length&&T>k;){for(var C=S.shift(),D=C.neighborhood().nodes(),M=!1,c=0;c<D.length;c++){var N=w[D[c].id()];if(void 0!==N){x[N].push(C),M=!0;break}}M||S.push(C),k++}for(;0!==S.length;){var C=S.shift(),M=!1;M||(0===x.length&&x.push([]),x[0].push(C))}var I=function(){for(var e=0;e<x.length;e++)for(var t=x[e],i=0;i<t.length;i++){var r=t[i];r._private.scratch.breadthfirst={depth:e,index:i}}};I();for(var B=function(e){for(var t,i=e.connectedEdges(function(){return this.data("target")===e.id()}),r=e._private.scratch.breadthfirst,n=0,a=0;a<i.length;a++){var o=i[a],s=o.source()[0],l=s._private.scratch.breadthfirst;r.depth<=l.depth&&n<l.depth&&(n=l.depth,t=s)}return t},z=0;z<r.maximalAdjustments;z++){for(var O=x.length,L=[],c=0;O>c;c++)for(var N=x[c],X=N.length,R=0;X>R;R++){var h=N[R],Y=h._private.scratch.breadthfirst,V=B(h);V&&(Y.intEle=V,L.push(h))}for(var c=0;c<L.length;c++){var h=L[c],Y=h._private.scratch.breadthfirst,V=Y.intEle,A=V._private.scratch.breadthfirst;x[Y.depth].splice(Y.index,1);for(var q=A.depth+1;q>x.length-1;)x.push([]);x[q].push(h),Y.depth=q,Y.index=x[q].length-1}I()}var F=0;if(r.avoidOverlap){for(var c=0;c<o.length;c++){var j=o[c].outerWidth(),W=o[c].outerHeight();F=Math.max(F,j,W)}F*=1.75}for(var H={},$=function(e){if(H[e.id()])return H[e.id()];for(var t=e._private.scratch.breadthfirst.depth,i=e.neighborhood().nodes(),r=0,n=0,a=0;a<i.length;a++){var o=i[a],s=o._private.scratch.breadthfirst.index,l=o._private.scratch.breadthfirst.depth,u=x[l].length;(t>l||0===t)&&(r+=s/u,n++)}return n=Math.max(1,n),r/=n,0===n&&(r=void 0),H[e.id()]=r,r},Z=function(e,t){var i=$(e),r=$(t);return i-r},U=0;3>U;U++){for(var c=0;c<x.length;c++)x[c]=x[c].sort(Z);I()}for(var G=0,c=0;c<x.length;c++)G=Math.max(x[c].length,G);for(var K={x:l.x1+l.w/2,y:l.x1+l.h/2},J=function(e,t){var i=e._private.scratch.breadthfirst,n=i.depth,a=i.index,o=x[n].length;r.strictHierarchy&&(o=G);var s=Math.max(l.w/(o+1),F),u=Math.max(l.h/(x.length+1),F),c=Math.min(l.w/2/x.length,l.h/2/x.length);if(c=Math.max(c,F),r.strictHierarchy&&!r.circle){var d={x:K.x+(a+1-(o+1)/2)*s,y:(n+1)*u};if(t)return d;var h=E[e.id()];if(h){d.x=0;for(var p=0;p<h.length;p++){var v=Q[h[p].id()];d.x+=v.x}d.x/=h.length}return d}if(r.circle){var f=c*n+c-(x.length>0&&x[0].length<=3?c/2:0),g=2*Math.PI/x[n].length*a;return 0===n&&1===x[0].length&&(f=1),{x:K.x+f*Math.cos(g),y:K.y+f*Math.sin(g)}}return{x:K.x+(a+1-(o+1)/2)*s,y:(n+1)*u}},Q={},c=x.length-1;c>=0;c--)for(var N=x[c],R=0;R<N.length;R++){var C=N[R];Q[C.id()]=J(C,c===x.length-1)}return o.layoutPositions(this,r,function(){return Q[this.id()]}),this},e("layout","breadthfirst",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},i,t)}var i={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,radius:void 0,startAngle:1.5*Math.PI,counterclockwise:!1,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){for(var t,i=this.options,r=i,n=i.cy,a=r.eles,o=a.nodes().not(":parent"),s=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),l={x:s.x1+s.w/2,y:s.y1+s.h/2},u=r.startAngle,c=2*Math.PI/o.length,d=0,h=0;h<o.length;h++){var p=o[h].outerWidth(),v=o[h].outerHeight();d=Math.max(d,p,v)}if(t=e.is.number(r.radius)?r.radius:o.length<=1?0:Math.min(s.h,s.w)/2-d,o.length>1&&r.avoidOverlap){d*=1.75;var c=2*Math.PI/o.length,f=Math.cos(c)-Math.cos(0),g=Math.sin(c)-Math.sin(0),y=Math.sqrt(d*d/(f*f+g*g));t=Math.max(y,t)}var m=function(){var e=t*Math.cos(u),i=t*Math.sin(u),n={x:l.x+e,y:l.y+i};return u=r.counterclockwise?u-c:u+c,n};return o.layoutPositions(this,r,m),this},e("layout","circle",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},i,t)}var i={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,nodeSpacing:function(){return 10},flow:void 0,alignment:void 0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1};t.prototype.run=function(){var t=this,i=this.options;return e.util.require("cola",function(r){var n=i.cy,a=i.eles,o=a.nodes(),s=a.edges(),l=!1,u=e.util.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),c=function(t,i){if(e.is.fn(t)){var r=t;return r.apply(i,[i])}return t},d=function(){for(var e={min:1/0,max:-1/0},t={min:1/0,max:-1/0},r=0;r<o.length;r++){var a=o[r],s=a._private.scratch.cola;e.min=Math.min(e.min,s.x),e.max=Math.max(e.max,s.x),t.min=Math.min(t.min,s.y),t.max=Math.max(t.max,s.y)}o.positions(function(i,r){var n=r._private.position,a=r._private.scratch.cola;r.grabbed()||(n.x=u.x1+a.x-e.min,n.y=u.y1+a.y-t.min)}),l||(p(),l=!0),i.fit&&n.fit(i.padding)},h=function(){t.manuallyStopped=!1,i.ungrabifyWhileSimulating&&y.grabify(),o.off("grab free position",m),o.off("lock unlock",x),t.one("layoutstop",i.stop),t.trigger({type:"layoutstop",layout:t})},p=function(){t.one("layoutready",i.ready),t.trigger({type:"layoutready",layout:t})},v=i.refresh,f=1;i.refresh<0?(f=Math.abs(i.refresh),v=1):v=Math.max(1,v);var g=r.adaptor({trigger:function(e){switch(e.type){case"tick":i.animate&&d();break;case"end":d(),(!i.infinite||t.manuallyStopped)&&h()}},kick:function(t){var r=0,n=function(){var e=t();return e&&i.infinite&&g.resume(),e},a=function(){var e,t=r;if(r=(r+1)%f,0!==t)return!1;for(var i=0;v>i&&!e;i++)e=e||n();return e};if(i.animate){var o=function(){a()||e.util.requestAnimationFrame(o)};e.util.requestAnimationFrame(o)}else for(;!n(););},on:function(){},drag:function(){}});t.adaptor=g;var y=o.filter(":grabbable");i.ungrabifyWhileSimulating&&y.ungrabify();var m;o.on("grab free position",m=function(t){var i=this,r=i._private.scratch.cola,n=i._private.position;switch(i.grabbed()?(r.x=n.x-u.x1,r.y=n.y-u.y1,g.dragstart(r)):e.is.number(r.x)&&e.is.number(r.y)&&(n.x=r.x+u.x1,n.y=r.y+u.y1),t.type){case"grab":g.dragstart(r),g.resume();break;case"free":g.dragend(r)}});var x;o.on("lock unlock",x=function(){var e=this,t=e._private.scratch.cola;e.locked()?g.dragstart(t):g.dragend(t)});var b=o.stdFilter(function(e){return!e.isParent()});if(g.nodes(b.map(function(e,t){var r=c(i.nodeSpacing,e),n=e.position(),a=e._private.scratch.cola={x:i.randomize?Math.round(Math.random()*u.w):n.x,y:i.randomize?Math.round(Math.random()*u.h):n.y,width:e.outerWidth()+2*r,height:e.outerHeight()+2*r,index:t};return a})),i.alignment){var w=[],_=[];b.forEach(function(e){var t=c(i.alignment,e),r=e._private.scratch.cola,n=r.index;t&&(null!=t.x&&w.push({node:n,offset:t.x}),null!=t.y&&_.push({node:n,offset:t.y}))});var P=[];w.length>0&&P.push({type:"alignment",axis:"x",offsets:w}),_.length>0&&P.push({type:"alignment",axis:"y",offsets:_}),g.constraints(P)}g.groups(o.stdFilter(function(e){return e.isParent()}).map(function(e,t){return e._private.scratch.cola={index:t,leaves:e.children().stdFilter(function(e){return!e.isParent()}).map(function(e){return e[0]._private.scratch.cola.index})},e}).map(function(e){return e._private.scratch.cola.groups=e.children().stdFilter(function(e){return e.isParent()}).map(function(e){return e._private.scratch.cola.index}),e._private.scratch.cola}));var E,S;null!=i.edgeLength?(E=i.edgeLength,S="linkDistance"):null!=i.edgeSymDiffLength?(E=i.edgeSymDiffLength,S="symmetricDiffLinkLengths"):null!=i.edgeJaccardLength?(E=i.edgeJaccardLength,S="jaccardLinkLengths"):(E=100,S="linkDistance");var T=function(e){return e.calcLength};if(g.links(s.stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()}).map(function(e){var t=e._private.scratch.cola={source:e.source()[0]._private.scratch.cola.index,target:e.target()[0]._private.scratch.cola.index};return null!=E&&(t.calcLength=c(E,e)),t})),g.size([u.w,u.h]),null!=E&&g[S](T),i.flow){var k,C="y",D=50;e.is.string(i.flow)?k={axis:i.flow,minSeparation:D}:e.is.number(i.flow)?k={axis:C,minSeparation:i.flow}:e.is.plainObject(i.flow)?(k=i.flow,k.axis=k.axis||C,k.minSeparation=null!=k.minSeparation?k.minSeparation:D):k={axis:C,minSeparation:D},g.flowLayout(k.axis,k.minSeparation)}g.avoidOverlaps(i.avoidOverlap).handleDisconnected(i.handleDisconnected).start(i.unconstrIter,i.userConstIter,i.allConstIter),t.trigger({type:"layoutstart",layout:t}),i.infinite||setTimeout(function(){g.stop()},i.maxSimulationTime)}),this},t.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},e("layout","cola",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},i,t)}var i={fit:!0,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,height:void 0,width:void 0,concentric:function(){return this.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){for(var t=this.options,i=t,r=t.cy,n=i.eles,a=n.nodes().not(":parent"),o=e.util.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=i.startAngle,c=0,d=0;d<a.length;d++){var h,p=a[d];h=i.concentric.call(p),l.push({value:h,node:p}),p._private.layoutData.concentric=h}a.updateStyle();for(var d=0;d<a.length;d++){var p=a[d];c=Math.max(c,p.outerWidth(),p.outerHeight())}l.sort(function(e,t){return t.value-e.value});for(var v=i.levelWidth(a),f=[[]],g=f[0],d=0;d<l.length;d++){var y=l[d];if(g.length>0){var m=Math.abs(g[0].value-y.value);m>=v&&(g=[],f.push(g))}g.push(y)}var x={},b=0,w=c+i.minNodeSpacing;if(!i.avoidOverlap){var _=f.length>0&&f[0].length>1,P=Math.min(o.w,o.h)/2-w,E=P/(f.length+_?1:0);w=Math.min(w,E)}for(var d=0;d<f.length;d++){var S=f[d],T=2*Math.PI/S.length;if(S.length>1&&i.avoidOverlap){var k=Math.cos(T)-Math.cos(0),C=Math.sin(T)-Math.sin(0),D=Math.sqrt(w*w/(k*k+C*C));b=Math.max(D,b)}for(var M=0;M<S.length;M++){var y=S[M],u=i.startAngle+(i.counterclockwise?1:-1)*T*M,N={x:s.x+b*Math.cos(u),y:s.y+b*Math.sin(u)};x[y.node.id()]=N}b+=w}return a.layoutPositions(this,i,function(){var e=this.id();return x[e]}),this},e("layout","concentric",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},r,t)}var i,r={ready:function(){},stop:function(){},animate:!0,refresh:4,fit:!0,padding:30,boundingBox:void 0,randomize:!0,debug:!1,nodeRepulsion:4e5,nodeOverlap:10,idealEdgeLength:10,edgeElasticity:100,nestingFactor:5,gravity:250,numIter:100,initialTemp:200,coolingFactor:.95,minTemp:1};t.prototype.run=function(){var t=this.options,r=t.cy,a=this;a.stopped=!1,a.trigger({type:"layoutstart",layout:a}),i=!0===t.debug?!0:!1;var o=new Date,d=n(r,a,t);i&&s(d),!0===t.randomize&&l(d,r),m(d,r,t);var h=function(e){return a.stopped?(w("Layout manually stopped. Stopping computation in step "+e),!1):(c(d,r,t,e),d.temperature=d.temperature*t.coolingFactor,w("New temperature: "+d.temperature),d.temperature<t.minTemp?(w("Temperature drop below minimum threshold. Stopping computation in step "+e),!1):!0)},p=function(){u(d,r,t),!0===t.fit&&r.fit(t.padding);var e=new Date;console.info("Layout took "+(e-o)+" ms"),a.one("layoutstop",t.stop),a.trigger({type:"layoutstop",layout:a})};if(t.animate){var v=0,f=function(){for(var i,n=0;n<t.refresh&&v<t.numIter;){var i=h(v);if(i===!1)break;n++,v++}u(d,r,t),t.fit&&r.fit(t.padding),i!==!1&&v+1<t.numIter?e.util.requestAnimationFrame(f):p()};e.util.requestAnimationFrame(f)}else{for(var v=0;v<t.numIter&&h(v)!==!1;v++);p()}return this},t.prototype.stop=function(){return this.stopped=!0,this};var n=function(t,i,r){for(var n=r.eles.edges(),o=r.eles.nodes(),s={layout:i,layoutNodes:[],idToIndex:{},nodeSize:o.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},l=0;l<s.nodeSize;l++){var u={};u.id=o[l].data("id"),u.parentId=o[l].data("parent"),u.children=[],u.positionX=o[l].position("x"),u.positionY=o[l].position("y"),u.offsetX=0,u.offsetY=0,u.height=o[l].height(),u.width=o[l].width(),u.maxX=u.positionX+u.width/2,u.minX=u.positionX-u.width/2,u.maxY=u.positionY+u.height/2,u.minY=u.positionY-u.height/2,u.padLeft=o[l]._private.style["padding-left"].pxValue,u.padRight=o[l]._private.style["padding-right"].pxValue,u.padTop=o[l]._private.style["padding-top"].pxValue,u.padBottom=o[l]._private.style["padding-bottom"].pxValue,s.layoutNodes.push(u),s.idToIndex[u.id]=l}for(var c=[],d=0,h=-1,p=[],l=0;l<s.nodeSize;l++){var v=s.layoutNodes[l],f=v.parentId;null!=f?s.layoutNodes[s.idToIndex[f]].children.push(v.id):(c[++h]=v.id,p.push(v.id))}for(s.graphSet.push(p);h>=d;){var g=c[d++],y=s.idToIndex[g],m=s.layoutNodes[y],x=m.children;if(x.length>0){s.graphSet.push(x);for(var l=0;l<x.length;l++)c[++h]=x[l]}}for(var l=0;l<s.graphSet.length;l++)for(var b=s.graphSet[l],_=0;_<b.length;_++){var P=s.idToIndex[b[_]];s.indexToGraph[P]=l}for(var l=0;l<s.edgeSize;l++){var E=n[l],S={};S.id=E.data("id"),S.sourceId=E.data("source"),S.targetId=E.data("target");var T=r.idealEdgeLength,k=s.idToIndex[S.sourceId],C=s.idToIndex[S.targetId],D=s.indexToGraph[k],M=s.indexToGraph[C];if(D!=M){for(var N=a(S.sourceId,S.targetId,s),I=s.graphSet[N],B=0,u=s.layoutNodes[k];-1===$.inArray(u.id,I);)u=s.layoutNodes[s.idToIndex[u.parentId]],B++;for(u=s.layoutNodes[C];-1===$.inArray(u.id,I);)u=s.layoutNodes[s.idToIndex[u.parentId]],B++;w("LCA of nodes "+S.sourceId+" and "+S.targetId+". Index: "+N+" Contents: "+I.toString()+". Depth: "+B),T*=B*r.nestingFactor}S.idealLength=T,s.layoutEdges.push(S)}return s},a=function(e,t,i){var r=o(e,t,0,i);return 2>r.count?0:r.graph},o=function(e,t,i,r){var n=r.graphSet[i];if(-1<$.inArray(e,n)&&-1<$.inArray(t,n))return{count:2,graph:i};for(var a=0,s=0;s<n.length;s++){var l=n[s],u=r.idToIndex[l],c=r.layoutNodes[u].children;if(0!==c.length){var d=r.indexToGraph[r.idToIndex[c[0]]],h=o(e,t,d,r);if(0!==h.count){if(1!==h.count)return h;if(a++,2===a)break}}}return{count:a,graph:i}},s=function(e){if(i){console.debug("layoutNodes:");for(var t=0;t<e.nodeSize;t++){var r=e.layoutNodes[t],n="\nindex: "+t+"\nId: "+r.id+"\nChildren: "+r.children.toString()+"\nparentId: "+r.parentId+"\npositionX: "+r.positionX+"\npositionY: "+r.positionY+"\nOffsetX: "+r.offsetX+"\nOffsetY: "+r.offsetY+"\npadLeft: "+r.padLeft+"\npadRight: "+r.padRight+"\npadTop: "+r.padTop+"\npadBottom: "+r.padBottom;console.debug(n)}console.debug("idToIndex");for(var t in e.idToIndex)console.debug("Id: "+t+"\nIndex: "+e.idToIndex[t]);console.debug("Graph Set");for(var a=e.graphSet,t=0;t<a.length;t++)console.debug("Set : "+t+": "+a[t].toString());for(var n="IndexToGraph",t=0;t<e.indexToGraph.length;t++)n+="\nIndex : "+t+" Graph: "+e.indexToGraph[t];console.debug(n),n="Layout Edges";for(var t=0;t<e.layoutEdges.length;t++){var o=e.layoutEdges[t];n+="\nEdge Index: "+t+" ID: "+o.id+" SouceID: "+o.sourceId+" TargetId: "+o.targetId+" Ideal Length: "+o.idealLength}console.debug(n),n="nodeSize: "+e.nodeSize,n+="\nedgeSize: "+e.edgeSize,n+="\ntemperature: "+e.temperature,console.debug(n)}},l=function(e){for(var t=e.clientWidth,i=e.clientHeight,r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];n.positionX=Math.random()*t,n.positionY=Math.random()*i}},u=function(e,t,i){var r="Refreshing positions";w(r);var n=e.layout,a=i.eles.nodes(),o=e.boundingBox,s={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};i.boundingBox&&(a.forEach(function(t){var i=e.layoutNodes[e.idToIndex[t.data("id")]];s.x1=Math.min(s.x1,i.positionX),s.x2=Math.max(s.x2,i.positionX),s.y1=Math.min(s.y1,i.positionY),s.y2=Math.max(s.y2,i.positionY)}),s.w=s.x2-s.x1,s.h=s.y2-s.y1),a.positions(function(t,n){var a=e.layoutNodes[e.idToIndex[n.data("id")]];if(r="Node: "+a.id+". Refreshed position: ("+a.positionX+", "+a.positionY+").",w(r),i.boundingBox){var l=(a.positionX-s.x1)/s.w,u=(a.positionY-s.y1)/s.h;return{x:o.x1+l*o.w,y:o.y1+u*o.h}}return{x:a.positionX,y:a.positionY}}),!0!==e.ready&&(r="Triggering layoutready",w(r),e.ready=!0,n.one("layoutready",i.ready),n.trigger({type:"layoutready",layout:this}))},c=function(e,t,i,r){var n="\n\n###############################";n+="\nSTEP: "+r,n+="\n###############################\n",w(n),d(e,t,i),f(e,t,i),g(e,t,i),y(e,t,i),m(e,t,i)},d=function(e,t,i){var r="calculateNodeForces";w(r);for(var n=0;n<e.graphSet.length;n++){var a=e.graphSet[n],o=a.length;r="Set: "+a.toString(),w(r);for(var s=0;o>s;s++)for(var l=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;o>u;u++){var c=e.layoutNodes[e.idToIndex[a[u]]];h(l,c,e,t,i)}}},h=function(e,t,i,r,n){var a="Node repulsion. Node1: "+e.id+" Node2: "+t.id,o=t.positionX-e.positionX,s=t.positionY-e.positionY;if(a+="\ndirectionX: "+o+", directionY: "+s,0===o&&0===s)return void(a+="\nNodes have the same position.");var l=v(e,t,o,s);if(l>0){a+="\nNodes DO overlap.",a+="\nOverlap: "+l;var u=n.nodeOverlap*l,c=Math.sqrt(o*o+s*s);a+="\nDistance: "+c;var d=u*o/c,h=u*s/c}else{a+="\nNodes do NOT overlap.";var f=p(e,o,s),g=p(t,-1*o,-1*s),y=g.x-f.x,m=g.y-f.y,x=y*y+m*m,c=Math.sqrt(x);a+="\nDistance: "+c;var u=n.nodeRepulsion/x,d=u*y/c,h=u*m/c}e.offsetX-=d,e.offsetY-=h,t.offsetX+=d,t.offsetY+=h,a+="\nForceX: "+d+" ForceY: "+h,w(a)},p=function(e,t,i){var r=e.positionX,n=e.positionY,a=e.height,o=e.width,s=i/t,l=a/o,u="Computing clipping point of node "+e.id+" . Height:  "+a+", Width: "+o+"\nDirection "+t+", "+i,c={};do{if(0===t&&i>0){c.x=r,u+="\nUp direction",c.y=n+a/2;break}if(0===t&&0>i){c.x=r,c.y=n+a/2,u+="\nDown direction";break}if(t>0&&s>=-1*l&&l>=s){c.x=r+o/2,c.y=n+o*i/2/t,u+="\nRightborder";break}if(0>t&&s>=-1*l&&l>=s){c.x=r-o/2,c.y=n-o*i/2/t,u+="\nLeftborder";break}if(i>0&&(-1*l>=s||s>=l)){c.x=r+a*t/2/i,c.y=n+a/2,u+="\nTop border";break}if(0>i&&(-1*l>=s||s>=l)){c.x=r-a*t/2/i,c.y=n-a/2,u+="\nBottom border";break}}while(!1);return u+="\nClipping point found at "+c.x+", "+c.y,w(u),c},v=function(e,t,i,r){if(i>0)var n=e.maxX-t.minX;else var n=t.maxX-e.minX;if(r>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return n>=0&&a>=0?Math.sqrt(n*n+a*a):0},f=function(e,t,i){for(var r=0;r<e.edgeSize;r++){var n=e.layoutEdges[r],a=e.idToIndex[n.sourceId],o=e.layoutNodes[a],s=e.idToIndex[n.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,c=l.positionY-o.positionY;if(0===u&&0===c)return;var d=p(o,u,c),h=p(l,-1*u,-1*c),v=h.x-d.x,f=h.y-d.y,g=Math.sqrt(v*v+f*f),y=Math.pow(n.idealLength-g,2)/i.edgeElasticity;if(0!==g)var m=y*v/g,x=y*f/g;else var m=0,x=0;o.offsetX+=m,o.offsetY+=x,l.offsetX-=m,l.offsetY-=x;var b="Edge force between nodes "+o.id+" and "+l.id;b+="\nDistance: "+g+" Force: ("+m+", "+x+")",w(b)}},g=function(e,t,i){var r="calculateGravityForces";w(r);for(var n=0;n<e.graphSet.length;n++){var a=e.graphSet[n],o=a.length;if(r="Set: "+a.toString(),w(r),0===n)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[u.parentId]],s=c.positionX,l=c.positionY;r="Center found at: "+s+", "+l,w(r);for(var d=0;o>d;d++){var h=e.layoutNodes[e.idToIndex[a[d]]];r="Node: "+h.id;var p=s-h.positionX,v=l-h.positionY,f=Math.sqrt(p*p+v*v);if(f>1){var g=i.gravity*p/f,y=i.gravity*v/f;h.offsetX+=g,h.offsetY+=y,r+=": Applied force: "+g+", "+y}else r+=": skypped since it's too close to center";w(r)}}},y=function(e){var t=[],i=0,r=-1;for(w("propagateForces"),t.push.apply(t,e.graphSet[0]),r+=e.graphSet[0].length;r>=i;){var n=t[i++],a=e.idToIndex[n],o=e.layoutNodes[a],s=o.children;if(0<s.length){var l=o.offsetX,u=o.offsetY,c="Propagating offset from parent node : "+o.id+". OffsetX: "+l+". OffsetY: "+u;c+="\n Children: "+s.toString(),w(c);for(var d=0;d<s.length;d++){var h=e.layoutNodes[e.idToIndex[s[d]]];h.offsetX+=l,h.offsetY+=u,t[++r]=s[d]}o.offsetX=0,o.offsetY=0}}},m=function(e){var t="Updating positions";w(t);for(var i=0;i<e.nodeSize;i++){var r=e.layoutNodes[i];0<r.children.length&&(w("Resetting boundaries of compound node: "+r.id),r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var i=0;i<e.nodeSize;i++){var r=e.layoutNodes[i];if(0<r.children.length)w("Skipping position update of node: "+r.id);else{t="Node: "+r.id+" Previous position: ("+r.positionX+", "+r.positionY+").";var n=x(r.offsetX,r.offsetY,e.temperature);r.positionX+=n.x,r.positionY+=n.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,t+=" New Position: ("+r.positionX+", "+r.positionY+").",w(t),b(r,e)}}for(var i=0;i<e.nodeSize;i++){var r=e.layoutNodes[i];0<r.children.length&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,t="Updating position, size of compound node "+r.id,t+="\nPositionX: "+r.positionX+", PositionY: "+r.positionY,t+="\nWidth: "+r.width+", Height: "+r.height,w(t))}},x=function(e,t,i){var r="Limiting force: ("+e+", "+t+"). Max: "+i,n=Math.sqrt(e*e+t*t);if(n>i)var a={x:i*e/n,y:i*t/n};else var a={x:e,y:t};return r+=".\nResult: ("+a.x+", "+a.y+")",w(r),a},b=function(e,t){var i="Propagating new position/size of node "+e.id,r=e.parentId;if(null==r)return i+=". No parent node.",void w(i);var n=t.layoutNodes[t.idToIndex[r]],a=!1;return(null==n.maxX||e.maxX+n.padRight>n.maxX)&&(n.maxX=e.maxX+n.padRight,a=!0,i+="\nNew maxX for parent node "+n.id+": "+n.maxX),(null==n.minX||e.minX-n.padLeft<n.minX)&&(n.minX=e.minX-n.padLeft,a=!0,i+="\nNew minX for parent node "+n.id+": "+n.minX),(null==n.maxY||e.maxY+n.padBottom>n.maxY)&&(n.maxY=e.maxY+n.padBottom,a=!0,i+="\nNew maxY for parent node "+n.id+": "+n.maxY),(null==n.minY||e.minY-n.padTop<n.minY)&&(n.minY=e.minY-n.padTop,a=!0,i+="\nNew minY for parent node "+n.id+": "+n.minY),a?(w(i),b(n,t)):(i+=". No changes in boundaries/position of parent node "+n.id,void w(i))},w=function(e){i&&console.debug(e)};e("layout","cose",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},i,t)}var i={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,minLen:function(){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}};t.prototype.run=function(){var t=this.options,i=this;return e.util.require("dagre",function(r){for(var n=t.cy,a=t.eles,o=e.util.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s=new r.Digraph,l=a.nodes().not(":parent"),u=0;u<l.length;u++){var c=l[u];s.addNode(c.id(),{width:c.width(),height:c.height()})}for(var d=a.edges(),u=0;u<d.length;u++){var h=d[u];s.addEdge(h.id(),h.source().id(),h.target().id(),{minLen:e.is.fn(t.minLen)?t.minLen.apply(h,[h]):t.minLen})}var p=r.layout();t.nodeSep&&p.nodeSep(t.nodeSep),t.edgeSep&&p.edgeSep(t.edgeSep),t.rankSep&&p.rankSep(t.rankSep),t.rankDir&&p.rankDir(t.rankDir),p=p.run(s),p.eachNode(function(e,t){n.getElementById(e).scratch().dagre=t});var v;t.boundingBox?(v={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},l.forEach(function(e){var t=e.scratch().dagre;v.x1=Math.min(v.x1,t.x),v.x2=Math.max(v.x2,t.x),v.y1=Math.min(v.y1,t.y),v.y2=Math.max(v.y2,t.y)}),v.w=v.x2-v.x1,v.h=v.y2-v.y1):v=o;var f=function(e){if(t.boundingBox){var i=(e.x-v.x1)/v.w,r=(e.y-v.y1)/v.h;return{x:o.x1+i*o.w,y:o.y1+r*o.h}}return e};l.layoutPositions(i,t,function(){var e=this.scratch().dagre;return f({x:e.x,y:e.y})})}),this},e("layout","dagre",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend({},i,t)}var i={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,rows:void 0,columns:void 0,position:function(){},animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,i=t,r=t.cy,n=i.eles,a=n.nodes().not(":parent"),o=e.util.makeBoundingBox(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(0===o.h||0===o.w)a.layoutPositions(this,i,function(){return{x:o.x1,y:o.y1}});else{var s=a.size(),l=Math.sqrt(s*o.h/o.w),u=Math.round(l),c=Math.round(o.w/o.h*l),d=function(e){if(null==e)return Math.min(u,c);var t=Math.min(u,c);t==u?u=e:c=e},h=function(e){if(null==e)return Math.max(u,c);var t=Math.max(u,c);t==u?u=e:c=e
};if(null!=i.rows&&null!=i.columns)u=i.rows,c=i.columns;else if(null!=i.rows&&null==i.columns)u=i.rows,c=Math.ceil(s/u);else if(null==i.rows&&null!=i.columns)c=i.columns,u=Math.ceil(s/c);else if(c*u>s){var p=d(),v=h();(p-1)*v>=s?d(p-1):(v-1)*p>=s&&h(v-1)}else for(;s>c*u;){var p=d(),v=h();(v+1)*p>=s?h(v+1):d(p+1)}var f=o.w/c,g=o.h/u;if(i.avoidOverlap)for(var y=0;y<a.length;y++){var m=a[y],x=m.outerWidth(),b=m.outerHeight();f=Math.max(f,x),g=Math.max(g,b)}for(var w={},_=function(e,t){return w["c-"+e+"-"+t]?!0:!1},P=function(e,t){w["c-"+e+"-"+t]=!0},E=0,S=0,T=function(){S++,S>=c&&(S=0,E++)},k={},y=0;y<a.length;y++){var m=a[y],C=i.position(m);if(C&&(void 0!==C.row||void 0!==C.col)){var D={row:C.row,col:C.col};if(void 0===D.col)for(D.col=0;_(D.row,D.col);)D.col++;else if(void 0===D.row)for(D.row=0;_(D.row,D.col);)D.row++;k[m.id()]=D,P(D.row,D.col)}}var M=function(e,t){var i,r;if(t.locked()||t.isFullAutoParent())return!1;var n=k[t.id()];if(n)i=n.col*f+f/2+o.x1,r=n.row*g+g/2+o.y1;else{for(;_(E,S);)T();i=S*f+f/2+o.x1,r=E*g+g/2+o.y1,P(E,S),T()}return{x:i,y:r}};a.layoutPositions(this,i,M)}return this},e("layout","grid",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},i,t)}var i={ready:function(){},stop:function(){}};t.prototype.run=function(){{var e=this.options,t=e.eles,i=this;e.cy}return i.trigger("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),i.one("layoutready",e.ready),i.trigger("layoutready"),i.one("layoutstop",e.stop),i.trigger("layoutstop"),this},t.prototype.stop=function(){return this},e("layout","null",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},i,t)}var i={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){function t(e){if(null==i.positions)return null;if(a)return i.positions.apply(e,[e]);var t=i.positions[e._private.data.id];return null==t?null:t}var i=this.options,r=i.eles,n=r.nodes(),a=e.is.fn(i.positions);return n.layoutPositions(this,i,function(e,i){var r=t(i);return i.locked()||null==r?!1:r}),this},e("layout","preset",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},i,t)}var i={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,ready:void 0,stop:void 0};t.prototype.run=function(){var t=this.options,i=t.cy,r=t.eles,n=r.nodes().not(":parent"),a=e.util.makeBoundingBox(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),o=function(){return{x:a.x1+Math.round(Math.random()*a.w),y:a.y1+Math.round(Math.random()*a.h)}};return n.layoutPositions(this,t,o),this},e("layout","random",t)}(cytoscape),function(e){"use strict";function t(t){this.options=e.util.extend(!0,{},i,t)}var i={animate:!0,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,random:!1,infinite:!1,ready:void 0,stop:void 0,stiffness:400,repulsion:400,damping:.5};t.prototype.run=function(){var t=this,i=this,r=this.options;return e.util.require("Springy",function(n){function a(e){var t=e.scratch("springy").model.id,i=w.layout.nodePoints[t].p,r=e.position(),n=null!=r.x&&null!=r.y?y(e.position()):{x:4*Math.random()-2,y:4*Math.random()-2};i.x=n.x,i.y=n.y}function o(){r.ungrabifyWhileSimulating&&P.ungrabify(),w.start()}var s=!1,l=r.cy;t.trigger({type:"layoutstart",layout:t});var u=r.eles,c=u.nodes().not(":parent"),d=u.edges(),h=e.util.makeBoundingBox(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:l.width(),h:l.height()}),p=new n.Graph;c.each(function(e,t){t.scratch("springy",{model:p.newNode({element:t})})}),d.each(function(e,t){var i=t.source().scratch("springy").model,r=t.target().scratch("springy").model;t.scratch("springy",{model:p.newEdge(i,r,{element:t})})});var v=window.sim=new n.Layout.ForceDirected(p,r.stiffness,r.repulsion,r.damping);r.infinite&&(v.minEnergyThreshold=-1/0);var f=v.getBoundingBox(),g=function(e){f=v.getBoundingBox();var t=f.topright.subtract(f.bottomleft),i=e.subtract(f.bottomleft).divide(t.x).x*h.w+h.x1,r=e.subtract(f.bottomleft).divide(t.y).y*h.h+h.x1;return new n.Vector(i,r)},y=function(e){f=v.getBoundingBox();var t=f.topright.subtract(f.bottomleft),i=(e.x-h.x1)/h.w*t.x+f.bottomleft.x,r=(e.y-h.y1)/h.h*t.y+f.bottomleft.y;return new n.Vector(i,r)},m=l.collection(),x=l.nodes().size(),b=1,w=new n.Renderer(v,function(){m.length>0&&r.animate&&(s=!0,m.rtrigger("position"),r.fit&&l.fit(r.padding),m=l.collection(),s=!1)},function(){},function(e,i){var n=g(i),a=e.data.element;a.locked()||a.grabbed()||(a._private.position={x:n.x,y:n.y},m.merge(a)),b==x&&(t.one("layoutready",r.ready),t.trigger({type:"layoutready",layout:t})),b++});c.each(function(e,t){r.random||a(t)});var _;c.on("position",_=function(){s||a(this)});var P=c.filter(":grabbable");i.stopSystem=function(){p.filterNodes(function(){return!1}),r.ungrabifyWhileSimulating&&P.grabify(),r.fit&&l.fit(r.padding),c.off("drag position",_),t.one("layoutstop",r.stop),t.trigger({type:"layoutstop",layout:t}),i.stopSystem=null},o(),r.infinite||setTimeout(function(){i.stop()},r.maxSimulationTime)}),this},t.prototype.stop=function(){return null!=this.stopSystem&&this.stopSystem(),this},e("layout","springy",t)}(cytoscape),function(e){"use strict";function t(e){this.options=e}t.prototype.recalculateRenderedStyle=function(){},t.prototype.notify=function(){},e("renderer","null",t)}(cytoscape);
!function(o,a){var n={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,autodisableForMobile:!0,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};o.fn.cytoscapePanzoom=function(a){var t=o.extend(!0,{},n,a),i=a,e={destroy:function(){var a=o(this);a.find(".ui-cytoscape-panzoom").remove()},init:function(){var a="ontouchstart"in window;return a&&t.autodisableForMobile?o(this):o(this).each(function(){function a(o){var a={x:o.originalEvent.pageX-b.offset().left-b.width()/2,y:o.originalEvent.pageY-b.offset().top-b.height()/2},n=t.panDragAreaSize,i=Math.sqrt(a.x*a.x+a.y*a.y),e=Math.min(i/n,1);if(i<t.panInactiveArea)return{x:0/0,y:0/0};a={x:a.x/i,y:a.y/i},e=Math.max(t.panMinPercentSpeed,e);var c={x:-1*a.x*e*t.panDistance,y:-1*a.y*e*t.panDistance};return c}function n(){clearInterval(A),o(window).unbind("mousemove",N),P.hide()}function i(o){var a=o,n=Math.sqrt(a.x*a.x+a.y*a.y),i={x:-1*a.x/n,y:-1*a.y/n},e=b.width(),c=b.height(),p=n/t.panDistance,s=Math.max(t.panIndicatorMinOpacity,p),r=255-Math.round(255*s);P.show().css({left:e/2*i.x+e/2,top:c/2*i.y+c/2,background:"rgb("+r+", "+r+", "+r+")"})}function e(){{var o=m.cytoscape("get");o.pan(),o.zoom()}D=m.width()/2,S=m.height()/2}function c(){F=!0,e()}function p(){F=!1}function s(o){var a=m.cytoscape("get");F||e(),a.zoom({level:o,renderedPosition:{x:D,y:S}})}function r(o,a){void 0===a&&(a=0);var n=q,i=0+n,e=h.height()-z.height()-2*n,c=o.pageY-h.offset().top-a;i>c&&(c=i),c>e&&(c=e);var p=1-(c-i)/(e-i);z.css("top",c);var r=t.minZoom,d=t.maxZoom,u=Math.log(r)/Math.log(d),m=(1-u)*p+u,v=Math.pow(d,m);r>v?v=r:v>d&&(v=d),s(v)}function d(){var o=m.cytoscape("get"),a=o.zoom(),n=t.minZoom,i=t.maxZoom,e=Math.log(n)/Math.log(i),c=Math.log(a)/Math.log(i),p=1-(c-e)/(1-e),s=q,r=h.height()-z.height()-2*q,d=p*(r-s);s>d&&(d=s),d>r&&(d=r),z.css("top",d)}function u(a,n){var i;a.bind("mousedown",function(o){if(o.preventDefault(),o.stopPropagation(),0==o.button){var a=m.cytoscape("get");return c(),i=setInterval(function(){var o=a.zoom(),i=a.zoom()*n;i<t.minZoom&&(i=t.minZoom),i>t.maxZoom&&(i=t.maxZoom),i==t.maxZoom&&o==t.maxZoom||i==t.minZoom&&o==t.minZoom||s(i)},t.zoomDelay),!1}}),o(window).bind("mouseup blur",function(){clearInterval(i),p()})}var m=o(this),v=o('<div class="ui-cytoscape-panzoom"></div>');m.append(v),t.staticPosition&&v.addClass("ui-cytoscape-panzoom-static");var l=o('<div class="ui-cytoscape-panzoom-zoom-in ui-cytoscape-panzoom-zoom-button"><span class="icon '+t.zoomInIcon+'"></span></div>');v.append(l);var f=o('<div class="ui-cytoscape-panzoom-zoom-out ui-cytoscape-panzoom-zoom-button"><span class="icon '+t.zoomOutIcon+'"></span></div>');v.append(f);var y=o('<div class="ui-cytoscape-panzoom-reset ui-cytoscape-panzoom-zoom-button"><span class="icon '+t.resetIcon+'"></span></div>');v.append(y);var h=o('<div class="ui-cytoscape-panzoom-slider"></div>');v.append(h),h.append('<div class="ui-cytoscape-panzoom-slider-background"></div>');var z=o('<div class="ui-cytoscape-panzoom-slider-handle"><span class="icon '+t.sliderHandleIcon+'"></span></div>');h.append(z);var g=o('<div class="ui-cytoscape-panzoom-no-zoom-tick"></div>');h.append(g);var b=o('<div class="ui-cytoscape-panzoom-panner"></div>');v.append(b);var w=o('<div class="ui-cytoscape-panzoom-panner-handle"></div>');b.append(w);var x=o('<div class="ui-cytoscape-panzoom-pan-up ui-cytoscape-panzoom-pan-button"></div>'),M=o('<div class="ui-cytoscape-panzoom-pan-down ui-cytoscape-panzoom-pan-button"></div>'),I=o('<div class="ui-cytoscape-panzoom-pan-left ui-cytoscape-panzoom-pan-button"></div>'),Z=o('<div class="ui-cytoscape-panzoom-pan-right ui-cytoscape-panzoom-pan-button"></div>');b.append(x).append(M).append(I).append(Z);var P=o('<div class="ui-cytoscape-panzoom-pan-indicator"></div>');b.append(P);var D,S,A,F=!1,N=function(o){o.stopPropagation(),o.preventDefault(),clearInterval(A);var n=a(o);return isNaN(n.x)||isNaN(n.y)?void P.hide():(i(n),void(A=setInterval(function(){m.cytoscape("get").panBy(n)},t.panSpeed)))};w.bind("mousedown",function(a){N(a),o(window).bind("mousemove",N)}),w.bind("mouseup",function(){n()}),o(window).bind("mouseup blur",function(){n()}),h.bind("mousedown",function(){return!1});var O,j,k=!1,q=2;z.bind("mousedown",O=function(a){var n=a.target===z[0]?a.offsetY:0;k=!0,c(),z.addClass("active");var t=0;return o(window).bind("mousemove",j=function(o){var a=+new Date;return a>t+10?(t=a,r(o,n),!1):!1}),o(window).bind("mouseup",function(){o(window).unbind("mousemove",j),k=!1,z.removeClass("active"),p()}),!1}),h.bind("mousedown",function(o){o.target!==z[0]&&(O(o),r(o))}),d();var C=m.cytoscape("get");C.on("zoom",function(){k||d()}),function(){var o=1,a=t.minZoom,n=t.maxZoom,i=Math.log(a)/Math.log(n),e=Math.log(o)/Math.log(n),c=1-(e-i)/(1-i);if(c>1||0>c)return void g.hide();var p=q,s=h.height()-z.height()-2*q,r=c*(s-p);p>r&&(r=p),r>s&&(r=s),g.css("top",r)}(),u(l,1+t.zoomFactor),u(f,1-t.zoomFactor),y.bind("mousedown",function(o){if(0==o.button){var a=m.cytoscape("get");return 0===a.elements().size()?a.reset():a.fit(t.fitPadding),!1}})})}};return e[i]?e[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?(o.error("No such function `"+i+"` for jquery.cytoscapePanzoom"),o(this)):e.init.apply(this,arguments)},o.fn.cyPanzoom=o.fn.cytoscapePanzoom,a("core","panzoom",function(a){var n=this;o(n.container()).cytoscapePanzoom(a)})}(jQuery,cytoscape);
/**
 * @license
 * Copyright (c) 2012-2013 Chris Pettitt
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
!function e(r,n,t){function o(a,d){if(!n[a]){if(!r[a]){var u="function"==typeof require&&require;if(!d&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};r[a][0].call(c.exports,function(e){var n=r[a][1][e];return o(n?n:e)},c,c.exports,e,r,n,t)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e){var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};r.dagre=e("./index")},{"./index":2}],2:[function(e,r,n){n.Digraph=e("graphlib").Digraph,n.Graph=e("graphlib").Graph,n.layout=e("./lib/layout"),n.version=e("./lib/version")},{"./lib/layout":3,"./lib/version":18,graphlib:24}],3:[function(e,r){var n=e("./util"),t=e("./rank"),o=e("./order"),i=e("graphlib").CGraph,a=e("graphlib").CDigraph;r.exports=function(){function r(e){var r=new a;e.eachNode(function(e,n){void 0===n&&(n={}),r.addNode(e,{width:n.width,height:n.height}),n.hasOwnProperty("rank")&&(r.node(e).prefRank=n.rank)}),e.parent&&e.nodes().forEach(function(n){r.parent(n,e.parent(n))}),e.eachEdge(function(e,n,t,o){void 0===o&&(o={});var i={e:e,minLen:o.minLen||1,width:o.width||0,height:o.height||0,points:[]};r.addEdge(null,n,t,i)});var n=e.graph()||{};return r.graph({rankDir:n.rankDir||l.rankDir,orderRestarts:n.orderRestarts}),r}function d(e){var i,a=g.rankSep();try{return i=n.time("initLayoutGraph",r)(e),0===i.order()?i:(i.eachEdge(function(e,r,n,t){t.minLen*=2}),g.rankSep(a/2),n.time("rank.run",t.run)(i,l.rankSimplex),n.time("normalize",u)(i),n.time("order",o)(i,l.orderMaxSweeps),n.time("position",p.run)(i),n.time("undoNormalize",c)(i),n.time("fixupEdgePoints",s)(i),n.time("rank.restoreEdges",t.restoreEdges)(i),n.time("createFinalGraph",h)(i,e.isDirected()))}finally{g.rankSep(a)}}function u(e){var r=0;e.eachEdge(function(n,t,o,i){var a=e.node(t).rank,d=e.node(o).rank;if(d>a+1){for(var u=t,c=a+1,s=0;d>c;++c,++s){var h="_D"+ ++r,f={width:i.width,height:i.height,edge:{id:n,source:t,target:o,attrs:i},rank:c,dummy:!0};0===s?f.index=0:c+1===d&&(f.index=1),e.addNode(h,f),e.addEdge(null,u,h,{}),u=h}e.addEdge(null,u,o,{}),e.delEdge(n)}})}function c(e){e.eachNode(function(r,n){if(n.dummy){if("index"in n){var t=n.edge;e.hasEdge(t.id)||e.addEdge(t.id,t.source,t.target,t.attrs);var o=e.edge(t.id).points;o[n.index]={x:n.x,y:n.y,ul:n.ul,ur:n.ur,dl:n.dl,dr:n.dr}}e.delNode(r)}})}function s(e){e.eachEdge(function(e,r,n,t){t.reversed&&t.points.reverse()})}function h(e,r){var n=r?new a:new i;n.graph(e.graph()),e.eachNode(function(e,r){n.addNode(e,r)}),e.eachNode(function(r){n.parent(r,e.parent(r))}),e.eachEdge(function(e,r,t,o){n.addEdge(o.e,r,t,o)});var t=0,o=0;return e.eachNode(function(r,n){e.children(r).length||(t=Math.max(t,n.x+n.width/2),o=Math.max(o,n.y+n.height/2))}),e.eachEdge(function(e,r,n,i){var a=Math.max.apply(Math,i.points.map(function(e){return e.x})),d=Math.max.apply(Math,i.points.map(function(e){return e.y}));t=Math.max(t,a+i.width/2),o=Math.max(o,d+i.height/2)}),n.graph().width=t,n.graph().height=o,n}function f(e){return function(){return arguments.length?(e.apply(null,arguments),g):e()}}var l={debugLevel:0,orderMaxSweeps:o.DEFAULT_MAX_SWEEPS,rankSimplex:!1,rankDir:"TB"},p=e("./position")(),g={};return g.orderIters=n.propertyAccessor(g,l,"orderMaxSweeps"),g.rankSimplex=n.propertyAccessor(g,l,"rankSimplex"),g.nodeSep=f(p.nodeSep),g.edgeSep=f(p.edgeSep),g.universalSep=f(p.universalSep),g.rankSep=f(p.rankSep),g.rankDir=n.propertyAccessor(g,l,"rankDir"),g.debugAlignment=f(p.debugAlignment),g.debugLevel=n.propertyAccessor(g,l,"debugLevel",function(e){n.log.level=e,p.debugLevel(e)}),g.run=n.time("Total layout",d),g._normalize=u,g}},{"./order":4,"./position":9,"./rank":10,"./util":17,graphlib:24}],4:[function(e,r){function n(e,r){function n(){e.eachNode(function(e,r){l[e]=r.order})}arguments.length<2&&(r=p);var t=e.graph().orderRestarts||0,o=h(e);o.forEach(function(r){r=r.filterNodes(function(r){return!e.children(r).length})});for(var i,d=0,u=Number.MAX_VALUE,l={},g=0;g<Number(t)+1&&0!==u;++g){i=Number.MAX_VALUE,f(e,t>0),c.log(2,"Order phase start cross count: "+e.graph().orderInitCC);var v,y,E;for(v=0,y=0;4>y&&r>v&&i>0;++v,++y,++d)a(e,o,v),E=s(e),i>E&&(y=0,i=E,u>E&&(n(),u=E)),c.log(3,"Order phase start "+g+" iter "+v+" cross count: "+E)}Object.keys(l).forEach(function(r){e.children&&e.children(r).length||(e.node(r).order=l[r])}),e.graph().orderCC=u,c.log(2,"Order iterations: "+d),c.log(2,"Order phase best cross count: "+e.graph().orderCC)}function t(e,r){var n={};return r.forEach(function(r){n[r]=e.inEdges(r).map(function(r){return e.node(e.source(r)).order})}),n}function o(e,r){var n={};return r.forEach(function(r){n[r]=e.outEdges(r).map(function(r){return e.node(e.target(r)).order})}),n}function a(e,r,n){n%2===0?d(e,r,n):u(e,r,n)}function d(e,r){var n;for(i=1;i<r.length;++i)n=l(r[i],n,t(e,r[i].nodes()))}function u(e,r){var n;for(i=r.length-2;i>=0;--i)l(r[i],n,o(e,r[i].nodes()))}var c=e("./util"),s=e("./order/crossCount"),h=e("./order/initLayerGraphs"),f=e("./order/initOrder"),l=e("./order/sortLayer");r.exports=n;var p=24;n.DEFAULT_MAX_SWEEPS=p},{"./order/crossCount":5,"./order/initLayerGraphs":6,"./order/initOrder":7,"./order/sortLayer":8,"./util":17}],5:[function(e,r){function n(e){for(var r=0,n=o.ordering(e),i=1;i<n.length;++i)r+=t(e,n[i-1],n[i]);return r}function t(e,r,n){var t=[];r.forEach(function(r){var n=[];e.outEdges(r).forEach(function(r){n.push(e.node(e.target(r)).order)}),n.sort(function(e,r){return e-r}),t=t.concat(n)});for(var o=1;o<n.length;)o<<=1;var i=2*o-1;o-=1;for(var a=[],d=0;i>d;++d)a[d]=0;var u=0;return t.forEach(function(e){var r=e+o;for(++a[r];r>0;)r%2&&(u+=a[r+1]),r=r-1>>1,++a[r]}),u}var o=e("../util");r.exports=n},{"../util":17}],6:[function(e,r){function n(e){function r(t){if(null===t)return void e.children(t).forEach(function(e){r(e)});var i=e.node(t);i.minRank="rank"in i?i.rank:Number.MAX_VALUE,i.maxRank="rank"in i?i.rank:Number.MIN_VALUE;var a=new o;return e.children(t).forEach(function(n){var t=r(n);a=o.union([a,t]),i.minRank=Math.min(i.minRank,e.node(n).minRank),i.maxRank=Math.max(i.maxRank,e.node(n).maxRank)}),"rank"in i&&a.add(i.rank),a.keys().forEach(function(e){e in n||(n[e]=[]),n[e].push(t)}),a}var n=[];r(null);var i=[];return n.forEach(function(r,n){i[n]=e.filterNodes(t(r))}),i}var t=e("graphlib").filter.nodesFromList,o=e("cp-data").Set;r.exports=n},{"cp-data":19,graphlib:24}],7:[function(e,r){function n(e,r){var n=[];e.eachNode(function(r,t){var o=n[t.rank];e.children&&e.children(r).length>0||(o||(o=n[t.rank]=[]),o.push(r))}),n.forEach(function(n){r&&o.shuffle(n),n.forEach(function(r,n){e.node(r).order=n})});var i=t(e);e.graph().orderInitCC=i,e.graph().orderCC=Number.MAX_VALUE}var t=e("./crossCount"),o=e("../util");r.exports=n},{"../util":17,"./crossCount":5}],8:[function(e,r){function n(e,r,n){var o=[],i={};e.eachNode(function(e,r){o[r.order]=e;var a=n[e];a.length&&(i[e]=t.sum(a)/a.length)});var a=e.nodes().filter(function(e){return void 0!==i[e]});a.sort(function(r,n){return i[r]-i[n]||e.node(r).order-e.node(n).order});for(var d=0,u=0,c=a.length;c>u;++d)void 0!==i[o[d]]&&(e.node(a[u++]).order=d)}var t=e("../util");r.exports=n},{"../util":17}],9:[function(e,r){var n=e("./util");r.exports=function(){function e(e){e=e.filterNodes(n.filterNonSubgraphs(e));var r=n.ordering(e),a=t(e,r),d={};["u","d"].forEach(function(n){"d"===n&&r.reverse(),["l","r"].forEach(function(t){"r"===t&&s(r);var u=n+t,h=o(e,r,a,"u"===n?"predecessors":"successors");d[u]=i(e,r,h.pos,h.root,h.align),E.debugLevel>=3&&y(n+t,e,r,d[u]),"r"===t&&c(d[u]),"r"===t&&s(r)}),"d"===n&&r.reverse()}),u(e,r,d),e.eachNode(function(r){var n=[];for(var t in d){var o=d[t][r];g(t,e,r,o),n.push(o)}n.sort(function(e,r){return e-r}),p(e,r,(n[1]+n[2])/2)});var l=0,m="BT"===e.graph().rankDir||"RL"===e.graph().rankDir;r.forEach(function(r){var t=n.max(r.map(function(r){return f(e,r)}));l+=t/2,r.forEach(function(r){v(e,r,m?-l:l)}),l+=t/2+E.rankSep});var k=n.min(e.nodes().map(function(r){return p(e,r)-h(e,r)/2})),_=n.min(e.nodes().map(function(r){return v(e,r)-f(e,r)/2}));e.eachNode(function(r){p(e,r,p(e,r)-k),v(e,r,v(e,r)-_)})}function r(e,r){return r>e?e.toString().length+":"+e+"-"+r:r.toString().length+":"+r+"-"+e}function t(e,n){function t(e){var n=s[e];(a>n||n>u)&&(c[r(i[d],e)]=!0)}var o,i,a,d,u,c={},s={};if(n.length<=2)return c;n[1].forEach(function(e,r){s[e]=r});for(var h=1;h<n.length-1;++h){o=n[h],i=n[h+1],a=0,d=0;for(var f=0;f<i.length;++f){var l=i[f];if(s[l]=f,u=void 0,e.node(l).dummy){var p=e.predecessors(l)[0];void 0!==p&&e.node(p).dummy&&(u=s[p])}if(void 0===u&&f===i.length-1&&(u=o.length-1),void 0!==u){for(;f>=d;++d)e.predecessors(i[d]).forEach(t);a=u}}}return c}function o(e,n,t,o){var i={},a={},d={};return n.forEach(function(e){e.forEach(function(e,r){a[e]=e,d[e]=e,i[e]=r})}),n.forEach(function(n){var u=-1;n.forEach(function(n){var c,s=e[o](n);s.length>0&&(s.sort(function(e,r){return i[e]-i[r]}),c=(s.length-1)/2,s.slice(Math.floor(c),Math.ceil(c)+1).forEach(function(e){d[n]===n&&!t[r(e,n)]&&u<i[e]&&(d[e]=n,d[n]=a[n]=a[e],u=i[e])}))})}),{pos:i,root:a,align:d}}function i(e,r,t,o,i){function a(e,r,n){c[e][r]=r in c[e]?Math.min(c[e][r],n):n}function d(r){if(!(r in f)){f[r]=0;var n=r;do{if(t[n]>0){var c=o[h[n]];d(c),u[r]===r&&(u[r]=u[c]);var s=l(e,h[n])+l(e,n);u[r]!==u[c]?a(u[c],u[r],f[r]-f[c]-s):f[r]=Math.max(f[r],f[c]+s)}n=i[n]}while(n!==r)}}var u={},c={},s={},h={},f={};return r.forEach(function(e){e.forEach(function(r,n){u[r]=r,c[r]={},n>0&&(h[r]=e[n-1])})}),n.values(o).forEach(function(e){d(e)}),r.forEach(function(e){e.forEach(function(e){if(f[e]=f[o[e]],e===o[e]&&e===u[e]){var r=0;e in c&&Object.keys(c[e]).length>0&&(r=n.min(Object.keys(c[e]).map(function(r){return c[e][r]+(r in s?s[r]:0)}))),s[e]=r}})}),r.forEach(function(e){e.forEach(function(e){f[e]+=s[u[o[e]]]||0})}),f}function a(e,r,t){return n.min(r.map(function(e){var r=e[0];return t[r]}))}function d(e,r,t){return n.max(r.map(function(e){var r=e[e.length-1];return t[r]}))}function u(e,r,n){function t(e){n[h][e]+=c[h]}var o,i={},u={},c={},s=Number.POSITIVE_INFINITY;for(var h in n){var f=n[h];i[h]=a(e,r,f),u[h]=d(e,r,f);var l=u[h]-i[h];s>l&&(s=l,o=h)}["u","d"].forEach(function(e){["l","r"].forEach(function(r){var n=e+r;c[n]="l"===r?i[o]-i[n]:u[o]-u[n]})});for(h in n)e.eachNode(t)}function c(e){for(var r in e)e[r]=-e[r]}function s(e){e.forEach(function(e){e.reverse()})}function h(e,r){switch(e.graph().rankDir){case"LR":return e.node(r).height;case"RL":return e.node(r).height;default:return e.node(r).width}}function f(e,r){switch(e.graph().rankDir){case"LR":return e.node(r).width;case"RL":return e.node(r).width;default:return e.node(r).height}}function l(e,r){if(null!==E.universalSep)return E.universalSep;var n=h(e,r),t=e.node(r).dummy?E.edgeSep:E.nodeSep;return(n+t)/2}function p(e,r,n){if("LR"===e.graph().rankDir||"RL"===e.graph().rankDir){if(arguments.length<3)return e.node(r).y;e.node(r).y=n}else{if(arguments.length<3)return e.node(r).x;e.node(r).x=n}}function g(e,r,n,t){if("LR"===r.graph().rankDir||"RL"===r.graph().rankDir){if(arguments.length<3)return r.node(n)[e];r.node(n)[e]=t}else{if(arguments.length<3)return r.node(n)[e];r.node(n)[e]=t}}function v(e,r,n){if("LR"===e.graph().rankDir||"RL"===e.graph().rankDir){if(arguments.length<3)return e.node(r).x;e.node(r).x=n}else{if(arguments.length<3)return e.node(r).y;e.node(r).y=n}}function y(e,r,n,t){n.forEach(function(n,o){var i,a;n.forEach(function(n){var d=t[n];if(i){var u=l(r,i)+l(r,n);u>d-a&&console.log("Position phase: sep violation. Align: "+e+". Layer: "+o+". U: "+i+" V: "+n+". Actual sep: "+(d-a)+" Expected sep: "+u)}i=n,a=d})})}var E={nodeSep:50,edgeSep:10,universalSep:null,rankSep:30},m={};return m.nodeSep=n.propertyAccessor(m,E,"nodeSep"),m.edgeSep=n.propertyAccessor(m,E,"edgeSep"),m.universalSep=n.propertyAccessor(m,E,"universalSep"),m.rankSep=n.propertyAccessor(m,E,"rankSep"),m.debugLevel=n.propertyAccessor(m,E,"debugLevel"),m.run=e,m}},{"./util":17}],10:[function(e,r,n){function t(e,r){i(e),h.time("constraints.apply",g.apply)(e),a(e),h.time("acyclic",f)(e);var n=e.filterNodes(h.filterNonSubgraphs(e));l(n),y(n).forEach(function(e){var t=n.filterNodes(E.nodesFromList(e));c(t,r)}),h.time("constraints.relax",g.relax(e)),h.time("reorientEdges",u)(e)}function o(e){f.undo(e)}function i(e){e.eachEdge(function(r,n,t,o){if(n===t){var i=d(e,r,n,t,o,0,!1),a=d(e,r,n,t,o,1,!0),u=d(e,r,n,t,o,2,!1);e.addEdge(null,i,n,{minLen:1,selfLoop:!0}),e.addEdge(null,i,a,{minLen:1,selfLoop:!0}),e.addEdge(null,n,u,{minLen:1,selfLoop:!0}),e.addEdge(null,a,u,{minLen:1,selfLoop:!0}),e.delEdge(r)}})}function a(e){e.eachEdge(function(r,n,t,o){if(n===t){var i=o.originalEdge,a=d(e,i.e,i.u,i.v,i.value,0,!0);e.addEdge(null,n,a,{minLen:1}),e.addEdge(null,a,t,{minLen:1}),e.delEdge(r)}})}function d(e,r,n,t,o,i,a){return e.addNode(null,{width:a?o.width:0,height:a?o.height:0,edge:{id:r,source:n,target:t,attrs:o},dummy:!0,index:i})}function u(e){e.eachEdge(function(r,n,t,o){e.node(n).rank>e.node(t).rank&&(e.delEdge(r),o.reversed=!0,e.addEdge(r,t,n,o))})}function c(e,r){var n=p(e);r&&(h.log(1,"Using network simplex for ranking"),v(e,n)),s(e)}function s(e){var r=h.min(e.nodes().map(function(r){return e.node(r).rank}));e.eachNode(function(e,n){n.rank-=r})}var h=e("./util"),f=e("./rank/acyclic"),l=e("./rank/initRank"),p=e("./rank/feasibleTree"),g=e("./rank/constraints"),v=e("./rank/simplex"),y=e("graphlib").alg.components,E=e("graphlib").filter;n.run=t,n.restoreEdges=o},{"./rank/acyclic":11,"./rank/constraints":12,"./rank/feasibleTree":13,"./rank/initRank":14,"./rank/simplex":16,"./util":17,graphlib:24}],11:[function(e,r){function n(e){function r(o){o in t||(t[o]=n[o]=!0,e.outEdges(o).forEach(function(t){var a,d=e.target(t);o===d?console.error('Warning: found self loop "'+t+'" for node "'+o+'"'):d in n?(a=e.edge(t),e.delEdge(t),a.reversed=!0,++i,e.addEdge(t,d,o,a)):r(d)}),delete n[o])}var n={},t={},i=0;return e.eachNode(function(e){r(e)}),o.log(2,"Acyclic Phase: reversed "+i+" edge(s)"),i}function t(e){e.eachEdge(function(r,n,t,o){o.reversed&&(delete o.reversed,e.delEdge(r),e.addEdge(r,t,n,o))})}var o=e("../util");r.exports=n,r.exports.undo=t},{"../util":17}],12:[function(e,r,n){function t(e){return"min"!==e&&"max"!==e&&0!==e.indexOf("same_")?(console.error("Unsupported rank type: "+e),!1):!0}function o(e,r,n,t){e.inEdges(r).forEach(function(r){var o,i=e.edge(r);o=i.originalEdge?i:{originalEdge:{e:r,u:e.source(r),v:e.target(r),value:i},minLen:e.edge(r).minLen},i.selfLoop&&(t=!1),t?(e.addEdge(null,n,e.source(r),o),o.reversed=!0):e.addEdge(null,e.source(r),n,o)})}function i(e,r,n,t){e.outEdges(r).forEach(function(r){var o,i=e.edge(r);o=i.originalEdge?i:{originalEdge:{e:r,u:e.source(r),v:e.target(r),value:i},minLen:e.edge(r).minLen},i.selfLoop&&(t=!1),t?(e.addEdge(null,e.target(r),n,o),o.reversed=!0):e.addEdge(null,n,e.target(r),o)})}function a(e,r,n){void 0!==n&&e.children(r).forEach(function(r){r===n||e.outEdges(n,r).length||e.node(r).dummy||e.addEdge(null,n,r,{minLen:0})})}function d(e,r,n){void 0!==n&&e.children(r).forEach(function(r){r===n||e.outEdges(r,n).length||e.node(r).dummy||e.addEdge(null,r,n,{minLen:0})})}n.apply=function(e){function r(n){var u={};e.children(n).forEach(function(a){if(e.children(a).length)return void r(a);var d=e.node(a),c=d.prefRank;if(void 0!==c){if(!t(c))return;c in u?u.prefRank.push(a):u.prefRank=[a];var s=u[c];void 0===s&&(s=u[c]=e.addNode(null,{originalNodes:[]}),e.parent(s,n)),o(e,a,s,"min"===c),i(e,a,s,"max"===c),e.node(s).originalNodes.push({u:a,value:d,parent:n}),e.delNode(a)}}),a(e,n,u.min),d(e,n,u.max)}r(null)},n.relax=function(e){var r=[];e.eachEdge(function(e,n,t,o){var i=o.originalEdge;i&&r.push(i)}),e.eachNode(function(r,n){var t=n.originalNodes;t&&(t.forEach(function(r){r.value.rank=n.rank,e.addNode(r.u,r.value),e.parent(r.u,r.parent)}),e.delNode(r))}),r.forEach(function(r){e.addEdge(r.e,r.u,r.v,r.value)})}},{}],13:[function(e,r){function n(e){function r(n){var o=!0;return e.predecessors(n).forEach(function(i){a.has(i)&&!t(e,i,n)&&(a.has(n)&&(d.addNode(n,{}),a.remove(n),d.graph({root:n})),d.addNode(i,{}),d.addEdge(null,i,n,{reversed:!0}),a.remove(i),r(i),o=!1)}),e.successors(n).forEach(function(i){a.has(i)&&!t(e,n,i)&&(a.has(n)&&(d.addNode(n,{}),a.remove(n),d.graph({root:n})),d.addNode(i,{}),d.addEdge(null,n,i,{}),a.remove(i),r(i),o=!1)}),o}function n(){var r=Number.MAX_VALUE;a.keys().forEach(function(n){e.predecessors(n).forEach(function(o){if(!a.has(o)){var i=t(e,o,n);Math.abs(i)<Math.abs(r)&&(r=-i)}}),e.successors(n).forEach(function(o){if(!a.has(o)){var i=t(e,n,o);Math.abs(i)<Math.abs(r)&&(r=i)}})}),d.eachNode(function(n){e.node(n).rank-=r})}var a=new o(e.nodes()),d=new i;if(1===a.size()){var u=e.nodes()[0];return d.addNode(u,{}),d.graph({root:u}),d}for(;a.size();){for(var c=d.order()?d.nodes():a.keys(),s=0,h=c.length;h>s&&r(c[s]);++s);a.size()&&n()}return d}function t(e,r,n){var t=e.node(n).rank-e.node(r).rank,o=a.max(e.outEdges(r,n).map(function(r){return e.edge(r).minLen}));return t-o}var o=e("cp-data").Set,i=e("graphlib").Digraph,a=e("../util");r.exports=n},{"../util":17,"cp-data":19,graphlib:24}],14:[function(e,r){function n(e){var r=o(e);r.forEach(function(r){var n=e.inEdges(r);if(0===n.length)return void(e.node(r).rank=0);var o=n.map(function(r){return e.node(e.source(r)).rank+e.edge(r).minLen});e.node(r).rank=t.max(o)})}var t=e("../util"),o=e("graphlib").alg.topsort;r.exports=n},{"../util":17,graphlib:24}],15:[function(e,r){function n(e,r,n,t){return Math.abs(e.node(r).rank-e.node(n).rank)-t}r.exports={slack:n}},{}],16:[function(e,r){function n(e,r){for(t(e,r);;){var n=d(r);if(null===n)break;var o=u(e,r,n);c(e,r,n,o)}}function t(e,r){function n(t){var o=r.successors(t);for(var a in o){var d=o[a];n(d)}t!==r.graph().root&&i(e,r,t)}o(r),r.eachEdge(function(e,r,n,t){t.cutValue=0}),n(r.graph().root)}function o(e){function r(t){var o=e.successors(t),i=n;for(var a in o){var d=o[a];r(d),i=Math.min(i,e.node(d).low)}e.node(t).low=i,e.node(t).lim=n++}var n=0;r(e.graph().root)}function i(e,r,n){var t=r.inEdges(n)[0],o=[],i=r.outEdges(n);for(var d in i)o.push(r.target(i[d]));var u,c=0,s=0,h=0,f=0,l=0,p=e.outEdges(n);for(var g in p){var v=e.target(p[g]);for(u in o)a(r,v,o[u])&&s++;a(r,v,n)||f++}var y=e.inEdges(n);for(var E in y){var m=e.source(y[E]);for(u in o)a(r,m,o[u])&&h++;a(r,m,n)||l++}var k=0;for(u in o){var _=r.edge(i[u]).cutValue;r.edge(i[u]).reversed?k-=_:k+=_}r.edge(t).reversed?c-=k-s+h-f+l:c+=k-s+h-f+l,r.edge(t).cutValue=c}function a(e,r,n){return e.node(n).low<=e.node(r).lim&&e.node(r).lim<=e.node(n).lim}function d(e){var r=e.edges();for(var n in r){var t=r[n],o=e.edge(t);if(o.cutValue<0)return t}return null}function u(e,r,n){var t,o=r.source(n),i=r.target(n),d=r.node(i).lim<r.node(o).lim?i:o,u=!r.edge(n).reversed,c=Number.POSITIVE_INFINITY;if(e.eachEdge(u?function(o,i,u,s){if(o!==n&&a(r,i,d)&&!a(r,u,d)){var h=l.slack(e,i,u,s.minLen);c>h&&(c=h,t=o)}}:function(o,i,u,s){if(o!==n&&!a(r,i,d)&&a(r,u,d)){var h=l.slack(e,i,u,s.minLen);c>h&&(c=h,t=o)}}),void 0===t){var s=[],h=[];throw e.eachNode(function(e){a(r,e,d)?h.push(e):s.push(e)}),new Error("No edge found from outside of tree to inside")}return t}function c(e,r,n,o){function i(e){var n=r.inEdges(e);for(var t in n){var o=n[t],a=r.source(o),d=r.edge(o);i(a),r.delEdge(o),d.reversed=!d.reversed,r.addEdge(o,e,a,d)}}r.delEdge(n);var a=e.source(o),d=e.target(o);i(d);for(var u=a,c=r.inEdges(u);c.length>0;)u=r.source(c[0]),c=r.inEdges(u);r.graph().root=u,r.addEdge(null,a,d,{cutValue:0}),t(e,r),s(e,r)}function s(e,r){function n(t){var o=r.successors(t);o.forEach(function(r){var o=h(e,t,r);e.node(r).rank=e.node(t).rank+o,n(r)})}n(r.graph().root)}function h(e,r,n){var t=e.outEdges(r,n);if(t.length>0)return f.max(t.map(function(r){return e.edge(r).minLen}));var o=e.inEdges(r,n);return o.length>0?-f.max(o.map(function(r){return e.edge(r).minLen})):void 0}var f=e("../util"),l=e("./rankUtil");r.exports=n},{"../util":17,"./rankUtil":15}],17:[function(e,r,n){function t(e,r){return function(){var n=(new Date).getTime();try{return r.apply(null,arguments)}finally{o(1,e+" time: "+((new Date).getTime()-n)+"ms")}}}function o(e){o.level>=e&&console.log.apply(console,Array.prototype.slice.call(arguments,1))}n.min=function(e){return Math.min.apply(Math,e)},n.max=function(e){return Math.max.apply(Math,e)},n.all=function(e,r){for(var n=0;n<e.length;++n)if(!r(e[n]))return!1;return!0},n.sum=function(e){return e.reduce(function(e,r){return e+r},0)},n.values=function(e){return Object.keys(e).map(function(r){return e[r]})},n.shuffle=function(e){for(i=e.length-1;i>0;--i){var r=Math.floor(Math.random()*(i+1)),n=e[r];e[r]=e[i],e[i]=n}},n.propertyAccessor=function(e,r,n,t){return function(o){return arguments.length?(r[n]=o,t&&t(o),e):r[n]}},n.ordering=function(e){var r=[];return e.eachNode(function(e,n){var t=r[n.rank]||(r[n.rank]=[]);t[n.order]=e}),r},n.filterNonSubgraphs=function(e){return function(r){return 0===e.children(r).length}},t.enabled=!1,n.time=t,o.level=0,n.log=o},{}],18:[function(e,r){r.exports="0.4.5"},{}],19:[function(e,r,n){n.Set=e("./lib/Set"),n.PriorityQueue=e("./lib/PriorityQueue"),n.version=e("./lib/version")},{"./lib/PriorityQueue":20,"./lib/Set":21,"./lib/version":23}],20:[function(e,r){function n(){this._arr=[],this._keyIndices={}}r.exports=n,n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(e){return e.key})},n.prototype.has=function(e){return e in this._keyIndices},n.prototype.priority=function(e){var r=this._keyIndices[e];return void 0!==r?this._arr[r].priority:void 0},n.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(e,r){var n=this._keyIndices;if(!(e in n)){var t=this._arr,o=t.length;return n[e]=o,t.push({key:e,priority:r}),this._decrease(o),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},n.prototype.decrease=function(e,r){var n=this._keyIndices[e];if(r>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+r);this._arr[n].priority=r,this._decrease(n)},n.prototype._heapify=function(e){var r=this._arr,n=2*e,t=n+1,o=e;n<r.length&&(o=r[n].priority<r[o].priority?n:o,t<r.length&&(o=r[t].priority<r[o].priority?t:o),o!==e&&(this._swap(e,o),this._heapify(o)))},n.prototype._decrease=function(e){for(var r,n=this._arr,t=n[e].priority;0!==e&&(r=e>>1,!(n[r].priority<t));)this._swap(e,r),e=r},n.prototype._swap=function(e,r){var n=this._arr,t=this._keyIndices,o=n[e],i=n[r];n[e]=i,n[r]=o,t[i.key]=e,t[o.key]=r}},{}],21:[function(e,r){function n(e){if(this._size=0,this._keys={},e)for(var r=0,n=e.length;n>r;++r)this.add(e[r])}function t(e){var r,n=Object.keys(e),t=n.length,o=new Array(t);for(r=0;t>r;++r)o[r]=e[n[r]];return o}var o=e("./util");r.exports=n,n.intersect=function(e){if(0===e.length)return new n;for(var r=new n(o.isArray(e[0])?e[0]:e[0].keys()),t=1,i=e.length;i>t;++t)for(var a=r.keys(),d=o.isArray(e[t])?new n(e[t]):e[t],u=0,c=a.length;c>u;++u){var s=a[u];d.has(s)||r.remove(s)}return r},n.union=function(e){for(var r=o.reduce(e,function(e,r){return e+(r.size?r.size():r.length)},0),t=new Array(r),i=0,a=0,d=e.length;d>a;++a)for(var u=e[a],c=o.isArray(u)?u:u.keys(),s=0,h=c.length;h>s;++s)t[i++]=c[s];return new n(t)},n.prototype.size=function(){return this._size},n.prototype.keys=function(){return t(this._keys)},n.prototype.has=function(e){return e in this._keys},n.prototype.add=function(e){return e in this._keys?!1:(this._keys[e]=e,++this._size,!0)},n.prototype.remove=function(e){return e in this._keys?(delete this._keys[e],--this._size,!0):!1}},{"./util":22}],22:[function(e,r,n){n.isArray=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.reduce="function"!=typeof Array.prototype.reduce?function(e,r,n){"use strict";if(null===e||"undefined"==typeof e)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof r)throw new TypeError(r+" is not a function");var t,o,i=e.length>>>0,a=!1;for(1<arguments.length&&(o=n,a=!0),t=0;i>t;++t)e.hasOwnProperty(t)&&(a?o=r(o,e[t],t,e):(o=e[t],a=!0));if(!a)throw new TypeError("Reduce of empty array with no initial value");return o}:function(e,r,n){return e.reduce(r,n)}},{}],23:[function(e,r){r.exports="1.1.3"},{}],24:[function(e,r,n){n.Graph=e("./lib/Graph"),n.Digraph=e("./lib/Digraph"),n.CGraph=e("./lib/CGraph"),n.CDigraph=e("./lib/CDigraph"),e("./lib/graph-converters"),n.alg={isAcyclic:e("./lib/alg/isAcyclic"),components:e("./lib/alg/components"),dijkstra:e("./lib/alg/dijkstra"),dijkstraAll:e("./lib/alg/dijkstraAll"),findCycles:e("./lib/alg/findCycles"),floydWarshall:e("./lib/alg/floydWarshall"),postorder:e("./lib/alg/postorder"),preorder:e("./lib/alg/preorder"),prim:e("./lib/alg/prim"),tarjan:e("./lib/alg/tarjan"),topsort:e("./lib/alg/topsort")},n.converter={json:e("./lib/converter/json.js")};var t=e("./lib/filter");n.filter={all:t.all,nodesFromList:t.nodesFromList},n.version=e("./lib/version")},{"./lib/CDigraph":26,"./lib/CGraph":27,"./lib/Digraph":28,"./lib/Graph":29,"./lib/alg/components":30,"./lib/alg/dijkstra":31,"./lib/alg/dijkstraAll":32,"./lib/alg/findCycles":33,"./lib/alg/floydWarshall":34,"./lib/alg/isAcyclic":35,"./lib/alg/postorder":36,"./lib/alg/preorder":37,"./lib/alg/prim":38,"./lib/alg/tarjan":39,"./lib/alg/topsort":40,"./lib/converter/json.js":42,"./lib/filter":43,"./lib/graph-converters":44,"./lib/version":46}],25:[function(e,r){function n(){this._value=void 0,this._nodes={},this._edges={},this._nextId=0}function t(e,r,n){(e[r]||(e[r]=new i)).add(n)}function o(e,r,n){var t=e[r];t.remove(n),0===t.size()&&delete e[r]}var i=e("cp-data").Set;r.exports=n,n.prototype.order=function(){return Object.keys(this._nodes).length},n.prototype.size=function(){return Object.keys(this._edges).length},n.prototype.graph=function(e){return 0===arguments.length?this._value:void(this._value=e)},n.prototype.hasNode=function(e){return e in this._nodes},n.prototype.node=function(e,r){var n=this._strictGetNode(e);return 1===arguments.length?n.value:void(n.value=r)},n.prototype.nodes=function(){var e=[];return this.eachNode(function(r){e.push(r)}),e},n.prototype.eachNode=function(e){for(var r in this._nodes){var n=this._nodes[r];e(n.id,n.value)}},n.prototype.hasEdge=function(e){return e in this._edges},n.prototype.edge=function(e,r){var n=this._strictGetEdge(e);return 1===arguments.length?n.value:void(n.value=r)},n.prototype.edges=function(){var e=[];return this.eachEdge(function(r){e.push(r)}),e},n.prototype.eachEdge=function(e){for(var r in this._edges){var n=this._edges[r];e(n.id,n.u,n.v,n.value)}},n.prototype.incidentNodes=function(e){var r=this._strictGetEdge(e);return[r.u,r.v]},n.prototype.addNode=function(e,r){if(void 0===e||null===e){do e="_"+ ++this._nextId;while(this.hasNode(e))}else if(this.hasNode(e))throw new Error("Graph already has node '"+e+"'");return this._nodes[e]={id:e,value:r},e},n.prototype.delNode=function(e){this._strictGetNode(e),this.incidentEdges(e).forEach(function(e){this.delEdge(e)},this),delete this._nodes[e]},n.prototype._addEdge=function(e,r,n,o,i,a){if(this._strictGetNode(r),this._strictGetNode(n),void 0===e||null===e){do e="_"+ ++this._nextId;while(this.hasEdge(e))}else if(this.hasEdge(e))throw new Error("Graph already has edge '"+e+"'");return this._edges[e]={id:e,u:r,v:n,value:o},t(i[n],r,e),t(a[r],n,e),e},n.prototype._delEdge=function(e,r,n){var t=this._strictGetEdge(e);o(r[t.v],t.u,e),o(n[t.u],t.v,e),delete this._edges[e]},n.prototype.copy=function(){var e=new this.constructor;return e.graph(this.graph()),this.eachNode(function(r,n){e.addNode(r,n)}),this.eachEdge(function(r,n,t,o){e.addEdge(r,n,t,o)}),e._nextId=this._nextId,e},n.prototype.filterNodes=function(e){var r=new this.constructor;return r.graph(this.graph()),this.eachNode(function(n,t){e(n)&&r.addNode(n,t)}),this.eachEdge(function(e,n,t,o){r.hasNode(n)&&r.hasNode(t)&&r.addEdge(e,n,t,o)}),r},n.prototype._strictGetNode=function(e){var r=this._nodes[e];if(void 0===r)throw new Error("Node '"+e+"' is not in graph");return r},n.prototype._strictGetEdge=function(e){var r=this._edges[e];if(void 0===r)throw new Error("Edge '"+e+"' is not in graph");return r}},{"cp-data":19}],26:[function(e,r){var n=e("./Digraph"),t=e("./compoundify"),o=t(n);r.exports=o,o.fromDigraph=function(e){var r=new o,n=e.graph();return void 0!==n&&r.graph(n),e.eachNode(function(e,n){void 0===n?r.addNode(e):r.addNode(e,n)}),e.eachEdge(function(e,n,t,o){void 0===o?r.addEdge(null,n,t):r.addEdge(null,n,t,o)}),r},o.prototype.toString=function(){return"CDigraph "+JSON.stringify(this,null,2)}},{"./Digraph":28,"./compoundify":41}],27:[function(e,r){var n=e("./Graph"),t=e("./compoundify"),o=t(n);r.exports=o,o.fromGraph=function(e){var r=new o,n=e.graph();return void 0!==n&&r.graph(n),e.eachNode(function(e,n){void 0===n?r.addNode(e):r.addNode(e,n)}),e.eachEdge(function(e,n,t,o){void 0===o?r.addEdge(null,n,t):r.addEdge(null,n,t,o)}),r},o.prototype.toString=function(){return"CGraph "+JSON.stringify(this,null,2)}},{"./Graph":29,"./compoundify":41}],28:[function(e,r){function n(){o.call(this),this._inEdges={},this._outEdges={}}var t=e("./util"),o=e("./BaseGraph"),i=e("cp-data").Set;r.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.isDirected=function(){return!0},n.prototype.successors=function(e){return this._strictGetNode(e),Object.keys(this._outEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.predecessors=function(e){return this._strictGetNode(e),Object.keys(this._inEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.neighbors=function(e){return i.union([this.successors(e),this.predecessors(e)]).keys()},n.prototype.sources=function(){var e=this;return this._filterNodes(function(r){return 0===e.inEdges(r).length})},n.prototype.sinks=function(){var e=this;return this._filterNodes(function(r){return 0===e.outEdges(r).length})},n.prototype.source=function(e){return this._strictGetEdge(e).u},n.prototype.target=function(e){return this._strictGetEdge(e).v},n.prototype.inEdges=function(e,r){this._strictGetNode(e);var n=i.union(t.values(this._inEdges[e])).keys();return arguments.length>1&&(this._strictGetNode(r),n=n.filter(function(e){return this.source(e)===r},this)),n},n.prototype.outEdges=function(e,r){this._strictGetNode(e);var n=i.union(t.values(this._outEdges[e])).keys();return arguments.length>1&&(this._strictGetNode(r),n=n.filter(function(e){return this.target(e)===r},this)),n},n.prototype.incidentEdges=function(e,r){return arguments.length>1?i.union([this.outEdges(e,r),this.outEdges(r,e)]).keys():i.union([this.inEdges(e),this.outEdges(e)]).keys()},n.prototype.toString=function(){return"Digraph "+JSON.stringify(this,null,2)},n.prototype.addNode=function(e,r){return e=o.prototype.addNode.call(this,e,r),this._inEdges[e]={},this._outEdges[e]={},e},n.prototype.delNode=function(e){o.prototype.delNode.call(this,e),delete this._inEdges[e],delete this._outEdges[e]},n.prototype.addEdge=function(e,r,n,t){return o.prototype._addEdge.call(this,e,r,n,t,this._inEdges,this._outEdges)},n.prototype.delEdge=function(e){o.prototype._delEdge.call(this,e,this._inEdges,this._outEdges)},n.prototype._filterNodes=function(e){var r=[];return this.eachNode(function(n){e(n)&&r.push(n)}),r}},{"./BaseGraph":25,"./util":45,"cp-data":19}],29:[function(e,r){function n(){o.call(this),this._incidentEdges={}}var t=e("./util"),o=e("./BaseGraph"),i=e("cp-data").Set;r.exports=n,n.prototype=new o,n.prototype.constructor=n,n.prototype.isDirected=function(){return!1},n.prototype.neighbors=function(e){return this._strictGetNode(e),Object.keys(this._incidentEdges[e]).map(function(e){return this._nodes[e].id},this)},n.prototype.incidentEdges=function(e,r){return this._strictGetNode(e),arguments.length>1?(this._strictGetNode(r),r in this._incidentEdges[e]?this._incidentEdges[e][r].keys():[]):i.union(t.values(this._incidentEdges[e])).keys()
},n.prototype.toString=function(){return"Graph "+JSON.stringify(this,null,2)},n.prototype.addNode=function(e,r){return e=o.prototype.addNode.call(this,e,r),this._incidentEdges[e]={},e},n.prototype.delNode=function(e){o.prototype.delNode.call(this,e),delete this._incidentEdges[e]},n.prototype.addEdge=function(e,r,n,t){return o.prototype._addEdge.call(this,e,r,n,t,this._incidentEdges,this._incidentEdges)},n.prototype.delEdge=function(e){o.prototype._delEdge.call(this,e,this._incidentEdges,this._incidentEdges)}},{"./BaseGraph":25,"./util":45,"cp-data":19}],30:[function(e,r){function n(e){function r(n,t){o.has(n)||(o.add(n),t.push(n),e.neighbors(n).forEach(function(e){r(e,t)}))}var n=[],o=new t;return e.nodes().forEach(function(e){var t=[];r(e,t),t.length>0&&n.push(t)}),n}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],31:[function(e,r){function n(e,r,n,o){function i(r){var t=e.incidentNodes(r),o=t[0]!==u?t[0]:t[1],i=a[o],s=n(r),h=c.distance+s;if(0>s)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+r+" Weight: "+s);h<i.distance&&(i.distance=h,i.predecessor=u,d.decrease(o,h))}var a={},d=new t;n=n||function(){return 1},o=o||(e.isDirected()?function(r){return e.outEdges(r)}:function(r){return e.incidentEdges(r)}),e.eachNode(function(e){var n=e===r?0:Number.POSITIVE_INFINITY;a[e]={distance:n},d.add(e,n)});for(var u,c;d.size()>0&&(u=d.removeMin(),c=a[u],c.distance!==Number.POSITIVE_INFINITY);)o(u).forEach(i);return a}var t=e("cp-data").PriorityQueue;r.exports=n},{"cp-data":19}],32:[function(e,r){function n(e,r,n){var o={};return e.eachNode(function(i){o[i]=t(e,i,r,n)}),o}var t=e("./dijkstra");r.exports=n},{"./dijkstra":31}],33:[function(e,r){function n(e){return t(e).filter(function(e){return e.length>1})}var t=e("./tarjan");r.exports=n},{"./tarjan":39}],34:[function(e,r){function n(e,r,n){var t={},o=e.nodes();return r=r||function(){return 1},n=n||(e.isDirected()?function(r){return e.outEdges(r)}:function(r){return e.incidentEdges(r)}),o.forEach(function(i){t[i]={},t[i][i]={distance:0},o.forEach(function(e){i!==e&&(t[i][e]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(n){var o=e.incidentNodes(n),a=o[0]!==i?o[0]:o[1],d=r(n);d<t[i][a].distance&&(t[i][a]={distance:d,predecessor:i})})}),o.forEach(function(e){var r=t[e];o.forEach(function(n){var i=t[n];o.forEach(function(n){var t=i[e],o=r[n],a=i[n],d=t.distance+o.distance;d<a.distance&&(a.distance=d,a.predecessor=o.predecessor)})})}),t}r.exports=n},{}],35:[function(e,r){function n(e){try{t(e)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}var t=e("./topsort");r.exports=n},{"./topsort":40}],36:[function(e,r){function n(e,r,n){function o(r,t){if(i.has(r))throw new Error("The input graph is not a tree: "+e);i.add(r),e.neighbors(r).forEach(function(e){e!==t&&o(e,r)}),n(r)}var i=new t;if(e.isDirected())throw new Error("This function only works for undirected graphs");o(r)}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],37:[function(e,r){function n(e,r,n){function o(r,t){if(i.has(r))throw new Error("The input graph is not a tree: "+e);i.add(r),n(r),e.neighbors(r).forEach(function(e){e!==t&&o(e,r)})}var i=new t;if(e.isDirected())throw new Error("This function only works for undirected graphs");o(r)}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],38:[function(e,r){function n(e,r){function n(n){var t=e.incidentNodes(n),o=t[0]!==i?t[0]:t[1],a=u.priority(o);if(void 0!==a){var c=r(n);a>c&&(d[o]=i,u.decrease(o,c))}}var i,a=new t,d={},u=new o;if(0===e.order())return a;e.eachNode(function(e){u.add(e,Number.POSITIVE_INFINITY),a.addNode(e)}),u.decrease(e.nodes()[0],0);for(var c=!1;u.size()>0;){if(i=u.removeMin(),i in d)a.addEdge(null,i,d[i]);else{if(c)throw new Error("Input graph is not connected: "+e);c=!0}e.incidentEdges(i).forEach(n)}return a}var t=e("../Graph"),o=e("cp-data").PriorityQueue;r.exports=n},{"../Graph":29,"cp-data":19}],39:[function(e,r){function n(e){function r(a){var d=o[a]={onStack:!0,lowlink:n,index:n++};if(t.push(a),e.successors(a).forEach(function(e){e in o?o[e].onStack&&(d.lowlink=Math.min(d.lowlink,o[e].index)):(r(e),d.lowlink=Math.min(d.lowlink,o[e].lowlink))}),d.lowlink===d.index){var u,c=[];do u=t.pop(),o[u].onStack=!1,c.push(u);while(a!==u);i.push(c)}}if(!e.isDirected())throw new Error("tarjan can only be applied to a directed graph. Bad input: "+e);var n=0,t=[],o={},i=[];return e.nodes().forEach(function(e){e in o||r(e)}),i}r.exports=n},{}],40:[function(e,r){function n(e){function r(a){if(a in o)throw new t;a in n||(o[a]=!0,n[a]=!0,e.predecessors(a).forEach(function(e){r(e)}),delete o[a],i.push(a))}if(!e.isDirected())throw new Error("topsort can only be applied to a directed graph. Bad input: "+e);var n={},o={},i=[],a=e.sinks();if(0!==e.order()&&0===a.length)throw new t;return e.sinks().forEach(function(e){r(e)}),i}function t(){}r.exports=n,n.CycleException=t,t.prototype.toString=function(){return"Graph has at least one cycle"}},{}],41:[function(e,r){function n(e){function r(){e.call(this),this._parents={},this._children={},this._children[null]=new t}return r.prototype=new e,r.prototype.constructor=r,r.prototype.parent=function(e,r){if(this._strictGetNode(e),arguments.length<2)return this._parents[e];if(e===r)throw new Error("Cannot make "+e+" a parent of itself");null!==r&&this._strictGetNode(r),this._children[this._parents[e]].remove(e),this._parents[e]=r,this._children[r].add(e)},r.prototype.children=function(e){return null!==e&&this._strictGetNode(e),this._children[e].keys()},r.prototype.addNode=function(r,n){return r=e.prototype.addNode.call(this,r,n),this._parents[r]=null,this._children[r]=new t,this._children[null].add(r),r},r.prototype.delNode=function(r){var n=this.parent(r);return this._children[r].keys().forEach(function(e){this.parent(e,n)},this),this._children[n].remove(r),delete this._parents[r],delete this._children[r],e.prototype.delNode.call(this,r)},r.prototype.copy=function(){var r=e.prototype.copy.call(this);return this.nodes().forEach(function(e){r.parent(e,this.parent(e))},this),r},r.prototype.filterNodes=function(r){function n(e){var r=t.parent(e);return null===r||o.hasNode(r)?(i[e]=r,r):r in i?i[r]:n(r)}var t=this,o=e.prototype.filterNodes.call(this,r),i={};return o.eachNode(function(e){o.parent(e,n(e))}),o},r}var t=e("cp-data").Set;r.exports=n},{"cp-data":19}],42:[function(e,r,n){function t(e){return Object.prototype.toString.call(e).slice(8,-1)}var o=e("../Graph"),i=e("../Digraph"),a=e("../CGraph"),d=e("../CDigraph");n.decode=function(e,r,n){if(n=n||i,"Array"!==t(e))throw new Error("nodes is not an Array");if("Array"!==t(r))throw new Error("edges is not an Array");if("string"==typeof n)switch(n){case"graph":n=o;break;case"digraph":n=i;break;case"cgraph":n=a;break;case"cdigraph":n=d;break;default:throw new Error("Unrecognized graph type: "+n)}var u=new n;return e.forEach(function(e){u.addNode(e.id,e.value)}),u.parent&&e.forEach(function(e){e.children&&e.children.forEach(function(r){u.parent(r,e.id)})}),r.forEach(function(e){u.addEdge(e.id,e.u,e.v,e.value)}),u},n.encode=function(e){var r=[],n=[];e.eachNode(function(n,t){var o={id:n,value:t};if(e.children){var i=e.children(n);i.length&&(o.children=i)}r.push(o)}),e.eachEdge(function(e,r,t,o){n.push({id:e,u:r,v:t,value:o})});var t;if(e instanceof d)t="cdigraph";else if(e instanceof a)t="cgraph";else if(e instanceof i)t="digraph";else{if(!(e instanceof o))throw new Error("Couldn't determine type of graph: "+e);t="graph"}return{nodes:r,edges:n,type:t}}},{"../CDigraph":26,"../CGraph":27,"../Digraph":28,"../Graph":29}],43:[function(e,r,n){var t=e("cp-data").Set;n.all=function(){return function(){return!0}},n.nodesFromList=function(e){var r=new t(e);return function(e){return r.has(e)}}},{"cp-data":19}],44:[function(e){var r=e("./Graph"),n=e("./Digraph");r.prototype.toDigraph=r.prototype.asDirected=function(){var e=new n;return this.eachNode(function(r,n){e.addNode(r,n)}),this.eachEdge(function(r,n,t,o){e.addEdge(null,n,t,o),e.addEdge(null,t,n,o)}),e},n.prototype.toGraph=n.prototype.asUndirected=function(){var e=new r;return this.eachNode(function(r,n){e.addNode(r,n)}),this.eachEdge(function(r,n,t,o){e.addEdge(r,n,t,o)}),e}},{"./Digraph":28,"./Graph":29}],45:[function(e,r,n){n.values=function(e){var r,n=Object.keys(e),t=n.length,o=new Array(t);for(r=0;t>r;++r)o[r]=e[n[r]];return o}},{}],46:[function(e,r){r.exports="0.7.4"},{}]},{},[1]);
/*!
 * Handsontable 0.13.1
 * Handsontable is a JavaScript library for editable tables with basic copy-paste compatibility with Excel and Google Docs
 *
 * Copyright (c) 2012-2014 Marcin Warpechowski
 * Copyright (c) 2015 Handsoncode sp. z o.o. <hello@handsontable.com>
 * Licensed under the MIT license.
 * http://handsontable.com/
 *
 * Date: Thu Mar 19 2015 15:05:12 GMT+0100 (CET)
 */
var Handsontable=function(a,b){b=b||{};var c=new Handsontable.Core(a,b);return c.init(),c};Handsontable.plugins={},function(a,b){"use strict";function c(){this.refCounter=0,this.init()}function d(){function a(){var a=this;a._registerTimeout(setTimeout(function(){a.updateSettings({observeChanges:!0})},0))}function c(a){return function(b,c){return"string"==typeof b[1]&&(b[1]=b[1].toLowerCase()),"string"==typeof c[1]&&(c[1]=c[1].toLowerCase()),b[1]===c[1]?0:null===b[1]||""===b[1]?1:null===c[1]||""===c[1]?-1:b[1]<c[1]?a?-1:1:b[1]>c[1]?a?1:-1:0}}function d(a){return function(b,c){if(b[1]===c[1])return 0;if(null===b[1])return 1;if(null===c[1])return-1;var d=new Date(b[1]),e=new Date(c[1]);return e>d?a?-1:1:d>e?a?1:-1:0}}function e(a){return"undefined"!=typeof a.sortColumn}var f=this;this.init=function(b){var c,d,e=this,g=e.getSettings().columnSorting;if(e.sortingEnabled=!!g,e.sortingEnabled){e.sortIndex=[];var j=h.call(e);"undefined"!=typeof j?(c=j.sortColumn,d=j.sortOrder):(c=g.column,d=g.sortOrder),f.sortByColumn.call(e,c,d),e.sort=function(){var a=Array.prototype.slice.call(arguments);return f.sortByColumn.apply(e,a)},"undefined"==typeof e.getSettings().observeChanges&&a.call(e),"afterInit"==b&&(i.call(e),e.addHook("afterCreateRow",f.afterCreateRow),e.addHook("afterRemoveRow",f.afterRemoveRow),e.addHook("afterLoadData",f.init))}else delete e.sort,e.removeHook("afterCreateRow",f.afterCreateRow),e.removeHook("afterRemoveRow",f.afterRemoveRow),e.removeHook("afterLoadData",f.init)},this.setSortingColumn=function(a,b){var c=this;return"undefined"==typeof a?(delete c.sortColumn,void delete c.sortOrder):(c.sortOrder=c.sortColumn===a&&"undefined"==typeof b?!c.sortOrder:"undefined"!=typeof b?b:!0,void(c.sortColumn=a))},this.sortByColumn=function(a,c){var d=this;f.setSortingColumn.call(d,a,c),"undefined"!=typeof d.sortColumn&&(b.hooks.run(d,"beforeColumnSort",d.sortColumn,d.sortOrder),f.sort.call(d),d.render(),g.call(d),b.hooks.run(d,"afterColumnSort",d.sortColumn,d.sortOrder))};var g=function(){var a=this,c={};"undefined"!=typeof a.sortColumn&&(c.sortColumn=a.sortColumn),"undefined"!=typeof a.sortOrder&&(c.sortOrder=a.sortOrder),(c.hasOwnProperty("sortColumn")||c.hasOwnProperty("sortOrder"))&&b.hooks.run(a,"persistentStateSave","columnSorting",c)},h=function(){var a=this,c={};return b.hooks.run(a,"persistentStateLoad","columnSorting",c),c.value},i=function(){function a(){var a=d.view.TBODY.querySelector("tr").querySelectorAll("th");return a.length}function c(c){var d=b.Dom.closest(c,"TH");return b.Dom.index(d)-a()}var d=this,e=b.eventManager(d);e.addEventListener(d.rootElement,"click",function(a){if(b.Dom.hasClass(a.target,"columnSorting")){var e=c(a.target);f.sortByColumn.call(d,e)}})};this.sort=function(){var a=this;if("undefined"!=typeof a.sortOrder){a.sortingEnabled=!1,a.sortIndex.length=0;for(var b=this.colOffset(),e=0,f=this.countRows()-a.getSettings().minSpareRows;f>e;e++)this.sortIndex.push([e,a.getDataAtCell(e,this.sortColumn+b)]);var g,h=a.getCellMeta(0,a.sortColumn);switch(h.type){case"date":g=d;break;default:g=c}this.sortIndex.sort(g(a.sortOrder));for(var e=this.sortIndex.length;e<a.countRows();e++)this.sortIndex.push([e,a.getDataAtCell(e,this.sortColumn+b)]);a.sortingEnabled=!0}},this.translateRow=function(a){var b=this;return b.sortingEnabled&&b.sortIndex&&b.sortIndex.length&&b.sortIndex[a]?b.sortIndex[a][0]:a},this.untranslateRow=function(a){var b=this;if(b.sortingEnabled&&b.sortIndex&&b.sortIndex.length)for(var c=0;c<b.sortIndex.length;c++)if(b.sortIndex[c][0]==a)return c},this.getColHeader=function(a,c){this.getSettings().columnSorting&&a>=0&&b.Dom.addClass(c.querySelector(".colHeader"),"columnSorting")},this.afterCreateRow=function(a,b){var c=this;if(e(c)){for(var d=0;d<c.sortIndex.length;d++)c.sortIndex[d][0]>=a&&(c.sortIndex[d][0]+=b);for(var d=0;b>d;d++)c.sortIndex.splice(a+d,0,[a+d,c.getData()[a+d][c.sortColumn+c.colOffset()]]);g.call(c)}},this.afterRemoveRow=function(a,b){var c=this;if(e(c)){var d=f.translateRow.call(c,a);c.sortIndex.splice(a,b);for(var h=0;h<c.sortIndex.length;h++)c.sortIndex[h][0]>d&&(c.sortIndex[h][0]-=b);g.call(c)}},this.afterChangeSort=function(a){var b=this,c=!1,d={};if(a){for(var e=0;e<a.length;e++)if(a[e][1]==b.sortColumn){c=!0,d.row=f.translateRow.call(b,a[e][0]),d.col=a[e][1];break}c&&b._registerTimeout(setTimeout(function(){f.sort.call(b),b.render(),b.selectCell(f.untranslateRow.call(b,d.row),d.col)},0))}}}function e(a){var c=b.eventManager(a),d=function(a,b,c,d){d.setCellMeta(a,b,"comment",c),d.render()},e=function(a,b,c){d(a.from.row,a.from.col,b,c)},f=function(){var a=j();a.style.display="none",a.value=""},g=function(d){function g(b){if(c.removeEventListener(document,"mouseover"),"htCommentTextArea"!=b.target.className&&-1==b.target.innerHTML.indexOf("Comment")){var g=document.querySelector(".htCommentTextArea").value;g.trim().length>1&&e(d,g,a),h(),f()}}c.addEventListener(document,"mousedown",b.helper.proxy(g))},h=function(){c.removeEventListener(document,"mousedown"),c.addEventListener(document,"mousedown",b.helper.proxy(k))},i=function(c,d){var e=a.view.wt.wtTable.getCell(c.from),f=b.Dom.offset(e),h=a.getColWidth(c.from.col);d.style.position="absolute",d.style.left=f.left+h+"px",d.style.top=f.top+"px",d.style.zIndex=2,g(c,d)},j=function(a){var c=document.querySelector(".htComments");if(!c){c=document.createElement("DIV");var d=document.createElement("TEXTAREA");b.Dom.addClass(d,"htCommentTextArea"),c.appendChild(d),b.Dom.addClass(c,"htComments"),document.getElementsByTagName("body")[0].appendChild(c)}return a=a||"",document.querySelector(".htCommentTextArea").value=a,c},k=function(c){if(-1!=c.target.className.indexOf("htCommentCell")){h();var d=a.view.wt.wtTable.getCoords(c.target),e={from:new l(d.row,d.col)};b.Comments.showComment(e)}else"htCommentTextArea"!=c.target.className&&f()};return{init:function(){c.addEventListener(document,"mouseover",b.helper.proxy(k))},showComment:function(b){var c=a.getCellMeta(b.from.row,b.from.col),d="";c.comment&&(d=c.comment);var e=j(d);e.style.display="block",i(b,e)},removeComment:function(b,c){a.removeCellMeta(b,c,"comment"),a.render()},checkSelectionCommentsConsistency:function(){var b=!1,c=a.getSelectedRange().from;return a.getCellMeta(c.row,c.col).comment&&(b=!0),b}}}function f(b){var c,d=function(){a.localStorage[b+"__persistentStateKeys"]=JSON.stringify(c)},e=function(){var d=a.localStorage[b+"__persistentStateKeys"],e="string"==typeof d?JSON.parse(d):void 0;c=e?e:[]},f=function(){c=[],d()};e(),this.saveValue=function(e,f){a.localStorage[b+"_"+e]=JSON.stringify(f),-1==c.indexOf(e)&&(c.push(e),d())},this.loadValue=function(c,d){c="undefined"!=typeof c?c:d;var e=a.localStorage[b+"_"+c];return"undefined"==typeof e?void 0:JSON.parse(e)},this.reset=function(c){a.localStorage.removeItem(b+"_"+c)},this.resetAll=function(){for(var d=0;d<c.length;d++)a.localStorage.removeItem(b+"_"+c[d]);f()}}function g(){this.boundaries=null,this.callback=null}function h(){var a=[];return a.getInfo=function(a,b){for(var c=0,d=this.length;d>c;c++)if(this[c].row<=a&&this[c].row+this[c].rowspan-1>=a&&this[c].col<=b&&this[c].col+this[c].colspan-1>=b)return this[c]},a.setInfo=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b].row===a.row&&this[b].col===a.col)return void(this[b]=a);this.push(a)},a.removeInfo=function(a,b){for(var c=0,d=this.length;d>c;c++)if(this[c].row===a&&this[c].col===b){this.splice(c,1);break}},a}function i(a){if(this.mergedCellInfoCollection=new h,Array.isArray(a))for(var b=0,c=a.length;c>b;b++)this.mergedCellInfoCollection.setInfo(a[b])}function j(){}function k(a,c){var d,e=function(){this.selectionHandles={topLeft:document.createElement("DIV"),topLeftHitArea:document.createElement("DIV"),bottomRight:document.createElement("DIV"),bottomRightHitArea:document.createElement("DIV")};var a=10,b=40;this.selectionHandles.topLeft.className="topLeftSelectionHandle",this.selectionHandles.topLeftHitArea.className="topLeftSelectionHandle-HitArea",this.selectionHandles.bottomRight.className="bottomRightSelectionHandle",this.selectionHandles.bottomRightHitArea.className="bottomRightSelectionHandle-HitArea",this.selectionHandles.styles={topLeft:this.selectionHandles.topLeft.style,topLeftHitArea:this.selectionHandles.topLeftHitArea.style,bottomRight:this.selectionHandles.bottomRight.style,bottomRightHitArea:this.selectionHandles.bottomRightHitArea.style};var c={position:"absolute",height:b+"px",width:b+"px","border-radius":parseInt(b/1.5,10)+"px"};for(var d in c)c.hasOwnProperty(d)&&(this.selectionHandles.styles.bottomRightHitArea[d]=c[d],this.selectionHandles.styles.topLeftHitArea[d]=c[d]);var e={position:"absolute",height:a+"px",width:a+"px","border-radius":parseInt(a/1.5,10)+"px",background:"#F5F5FF",border:"1px solid #4285c8"};for(var d in e)e.hasOwnProperty(d)&&(this.selectionHandles.styles.bottomRight[d]=e[d],this.selectionHandles.styles.topLeft[d]=e[d]);this.main.appendChild(this.selectionHandles.topLeft),this.main.appendChild(this.selectionHandles.bottomRight),this.main.appendChild(this.selectionHandles.topLeftHitArea),this.main.appendChild(this.selectionHandles.bottomRightHitArea)};if(c){var f=b.eventManager(a);this.instance=a,this.settings=c,this.main=document.createElement("div"),d=this.main.style,d.position="absolute",d.top=0,d.left=0;for(var g=["top","left","bottom","right","corner"],h=0;5>h;h++){var i=g[h],j=document.createElement("DIV");j.className="wtBorder "+(this.settings.className||""),this.settings[i]&&this.settings[i].hide&&(j.className+=" hidden"),d=j.style,d.backgroundColor=this.settings[i]&&this.settings[i].color?this.settings[i].color:c.border.color,d.height=this.settings[i]&&this.settings[i].width?this.settings[i].width+"px":c.border.width+"px",d.width=this.settings[i]&&this.settings[i].width?this.settings[i].width+"px":c.border.width+"px",this.main.appendChild(j)}this.top=this.main.childNodes[0],this.left=this.main.childNodes[1],this.bottom=this.main.childNodes[2],this.right=this.main.childNodes[3],this.topStyle=this.top.style,this.leftStyle=this.left.style,this.bottomStyle=this.bottom.style,this.rightStyle=this.right.style,this.cornerDefaultStyle={width:"5px",height:"5px",borderWidth:"2px",borderStyle:"solid",borderColor:"#FFF"},this.corner=this.main.childNodes[4],this.corner.className+=" corner",this.cornerStyle=this.corner.style,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.height=this.cornerDefaultStyle.height,this.cornerStyle.border=[this.cornerDefaultStyle.borderWidth,this.cornerDefaultStyle.borderStyle,this.cornerDefaultStyle.borderColor].join(" "),b.mobileBrowser&&e.call(this),this.disappear(),a.wtTable.bordersHolder||(a.wtTable.bordersHolder=document.createElement("div"),a.wtTable.bordersHolder.className="htBorders",a.wtTable.hider.appendChild(a.wtTable.bordersHolder)),a.wtTable.bordersHolder.insertBefore(this.main,a.wtTable.bordersHolder.firstChild);var k=!1;f.addEventListener(document.body,"mousedown",function(){k=!0}),f.addEventListener(document.body,"mouseup",function(){k=!1});for(var l=0,m=this.main.childNodes.length;m>l;l++)f.addEventListener(this.main.childNodes[l],"mouseenter",function(b){if(k&&a.getSetting("hideBorderOnMouseDownOver")){b.preventDefault(),b.stopImmediatePropagation();var c=this.getBoundingClientRect();this.style.display="none";var d=function(a){return a.clientY<Math.floor(c.top)?!0:a.clientY>Math.ceil(c.top+c.height)?!0:a.clientX<Math.floor(c.left)?!0:a.clientX>Math.ceil(c.left+c.width)?!0:void 0},e=function(a){d(a)&&(f.removeEventListener(document.body,"mousemove",e),this.style.display="block")};f.addEventListener(document.body,"mousemove",e)}})}}function l(a,b){"undefined"!=typeof a&&"undefined"!=typeof b?(this.row=a,this.col=b):(this.row=null,this.col=null)}function m(a,b,c){this.highlight=a,this.from=b,this.to=c}function n(a,b,c){this.offset=a,this.total=b,this.countTH=c}function o(a,b,c,d){var e,f=0;for(this.instance=a,this.containerSizeFn=b,this.cellSizesSum=0,this.cellSizes=[],this.cellStretch=[],this.cellCount=0,this.visibleCellCount=0,this.remainingSize=0,this.strategy=d;;){if(e=c(f),void 0===e)break;this.cellSizesSum<this.getContainerSize()&&this.visibleCellCount++,this.cellSizes.push(e),this.cellSizesSum+=e,this.cellCount++,f++}var g=this.getContainerSize();this.remainingSize=this.cellSizesSum-g}function p(a){var c=[];if(this.guid="wt_"+s(),a.cloneSource?(this.cloneSource=a.cloneSource,this.cloneOverlay=a.cloneOverlay,this.wtSettings=a.cloneSource.wtSettings,this.wtTable=new B(this,a.table),this.wtScroll=new u(this),this.wtViewport=a.cloneSource.wtViewport,this.wtEvent=new r(this),this.selections=this.cloneSource.selections):(this.wtSettings=new A(this,a),this.wtTable=new B(this,a.table),this.wtScroll=new u(this),this.wtViewport=new D(this),this.wtEvent=new r(this),this.selections=this.getSetting("selections"),this.wtScrollbars=new y(this)),this.wtTable.THEAD.childNodes.length&&this.wtTable.THEAD.childNodes[0].childNodes.length){for(var d=0,e=this.wtTable.THEAD.childNodes[0].childNodes.length;e>d;d++)c.push(this.wtTable.THEAD.childNodes[0].childNodes[d].innerHTML);this.getSetting("columnHeaders").length||this.update("columnHeaders",[function(a,d){b.Dom.fastInnerText(d,c[a])}])}this.drawn=!1,this.drawInterrupted=!1}function q(a){this.instance=a,this.init(),this.clone=this.makeClone("debug"),this.clone.wtTable.holder.style.opacity=.4,this.clone.wtTable.holder.style.textShadow="0 0 2px #ff0000",this.lastTimeout=null,b.Dom.addClass(this.clone.wtTable.holder.parentNode,"wtDebugVisible")}function r(c){var d=this,e=b.eventManager(c);this.instance=c;var f=[null,null];this.dblClickTimeout=[null,null];var g,h,i=function(a){var c=d.parentCell(a.target);b.Dom.hasClass(a.target,"corner")?d.instance.getSetting("onCellCornerMouseDown",a,a.target):c.TD&&d.instance.hasSetting("onCellMouseDown")&&d.instance.getSetting("onCellMouseDown",a,c.coords,c.TD,d.instance),2!==a.button&&c.TD&&(f[0]=c.TD,clearTimeout(d.dblClickTimeout[0]),d.dblClickTimeout[0]=setTimeout(function(){f[0]=null},1e3))},j=function(){d.instance.touchMoving=!0},k=function(a){e.addEventListener(this,"touchmove",j),d.checkIfTouchMove=setTimeout(function(){return d.instance.touchMoving===!0?(d.instance.touchMoving=void 0,void e.removeEventListener("touchmove",j,!1)):void i(a)},30)},l=function(a){if(d.instance.hasSetting("onCellMouseOver")){var c=d.instance.wtTable.TABLE,e=b.Dom.closest(a.target,["TD","TH"],c);e&&e!==h&&b.Dom.isChildOf(e,c)&&(h=e,d.instance.getSetting("onCellMouseOver",a,d.instance.wtTable.getCoords(e),e,d.instance))}},m=function(a){if(2!==a.button){var c=d.parentCell(a.target);c.TD===f[0]&&c.TD===f[1]?(b.Dom.hasClass(a.target,"corner")?d.instance.getSetting("onCellCornerDblClick",a,c.coords,c.TD,d.instance):d.instance.getSetting("onCellDblClick",a,c.coords,c.TD,d.instance),f[0]=null,f[1]=null):c.TD===f[0]&&(f[1]=c.TD,clearTimeout(d.dblClickTimeout[1]),d.dblClickTimeout[1]=setTimeout(function(){f[1]=null},500))}},n=function(a){clearTimeout(g),a.preventDefault(),m(a)};if(e.addEventListener(this.instance.wtTable.holder,"mousedown",i),e.addEventListener(this.instance.wtTable.TABLE,"mouseover",l),e.addEventListener(this.instance.wtTable.holder,"mouseup",m),this.instance.wtTable.holder.parentNode.parentNode&&b.mobileBrowser){var o="."+this.instance.wtTable.holder.parentNode.className.split(" ").join(".");e.addEventListener(this.instance.wtTable.holder.parentNode.parentNode,"touchstart",function(a){d.instance.touchApplied=!0,b.Dom.isChildOf(a.target,o)&&k.call(a.target,a)}),e.addEventListener(this.instance.wtTable.holder.parentNode.parentNode,"touchend",function(a){d.instance.touchApplied=!1,b.Dom.isChildOf(a.target,o)&&n.call(a.target,a)}),d.instance.momentumScrolling||(d.instance.momentumScrolling={}),e.addEventListener(this.instance.wtTable.holder.parentNode.parentNode,"scroll",function(){clearTimeout(d.instance.momentumScrolling._timeout),d.instance.momentumScrolling.ongoing||d.instance.getSetting("onBeforeTouchScroll"),d.instance.momentumScrolling.ongoing=!0,d.instance.momentumScrolling._timeout=setTimeout(function(){d.instance.touchApplied||(d.instance.momentumScrolling.ongoing=!1,d.instance.getSetting("onAfterMomentumScroll"))},200)})}e.addEventListener(a,"resize",function(){d.instance.draw()}),this.destroy=function(){clearTimeout(this.dblClickTimeout[0]),clearTimeout(this.dblClickTimeout[1]),e.clear()}}function s(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+a()+a()}function t(a,b,c){this.offset=a,this.total=b,this.countTH=c}function u(a){this.instance=a}function v(a){this.instance=a,this.type="corner",this.init(),this.clone=this.makeClone("corner")}function w(a){this.instance=a,this.type="horizontal",this.offset=0,this.init(),this.clone=this.makeClone("left")}function x(a){this.instance=a,this.type="vertical",this.init(),this.clone=this.makeClone("top")}function y(a){this.instance=a,a.update("scrollbarWidth",b.Dom.getScrollbarWidth()),a.update("scrollbarHeight",b.Dom.getScrollbarWidth()),this.vertical=new x(a),this.horizontal=new w(a),this.corner=new v(a),a.getSetting("debug")&&(this.debug=new q(a)),this.registerListeners()}function z(a,b){this.settings=a,this.cellRange=b||null,this.instanceBorders={}}function A(a,c){var d=this;this.instance=a,this.defaults={table:void 0,debug:!1,stretchH:"none",currentRowClassName:null,currentColumnClassName:null,data:void 0,fixedColumnsLeft:0,fixedRowsTop:0,rowHeaders:function(){return[]},columnHeaders:function(){return[]},totalRows:void 0,totalColumns:void 0,cellRenderer:function(a,c,e){var f=d.getSetting("data",a,c);b.Dom.fastInnerText(e,void 0===f||null===f?"":f)},columnWidth:function(){},rowHeight:function(){},defaultRowHeight:23,defaultColumnWidth:50,selections:null,hideBorderOnMouseDownOver:!1,viewportRowCalculatorOverride:null,viewportColumnCalculatorOverride:null,onCellMouseDown:null,onCellMouseOver:null,onCellDblClick:null,onCellCornerMouseDown:null,onCellCornerDblClick:null,beforeDraw:null,onDraw:null,onBeforeDrawBorders:null,onScrollVertically:null,onScrollHorizontally:null,onBeforeTouchScroll:null,onAfterMomentumScroll:null,scrollbarWidth:10,scrollbarHeight:10,renderAllRows:!1,groups:!1},this.settings={};for(var e in this.defaults)if(this.defaults.hasOwnProperty(e))if(void 0!==c[e])this.settings[e]=c[e];else{if(void 0===this.defaults[e])throw new Error('A required setting "'+e+'" was not provided');this.settings[e]=this.defaults[e]}}function B(a,c){this.instance=a,this.TABLE=c,b.Dom.removeTextNodes(this.TABLE);var d=this.TABLE.parentNode;if(!d||1!==d.nodeType||!b.Dom.hasClass(d,"wtHolder")){var e=document.createElement("DIV");e.className="wtSpreader",d&&d.insertBefore(e,this.TABLE),e.appendChild(this.TABLE)}if(this.spreader=this.TABLE.parentNode,d=this.spreader.parentNode,!d||1!==d.nodeType||!b.Dom.hasClass(d,"wtHolder")){var f=document.createElement("DIV");f.className="wtHider",d&&d.insertBefore(f,this.spreader),f.appendChild(this.spreader)}if(this.hider=this.spreader.parentNode,this.hiderStyle=this.hider.style,this.hiderStyle.position="relative",d=this.hider.parentNode,!d||1!==d.nodeType||!b.Dom.hasClass(d,"wtHolder")){var g=document.createElement("DIV");g.style.position="relative",g.className="wtHolder",a.cloneSource||(g.className+=" ht_master"),d&&d.insertBefore(g,this.hider),g.appendChild(this.hider)}if(this.holder=this.hider.parentNode,this.isWorkingOnClone()||(this.holder.parentNode.style.position="relative"),this.TBODY=this.TABLE.getElementsByTagName("TBODY")[0],this.TBODY||(this.TBODY=document.createElement("TBODY"),this.TABLE.appendChild(this.TBODY)),this.THEAD=this.TABLE.getElementsByTagName("THEAD")[0],this.THEAD||(this.THEAD=document.createElement("THEAD"),this.TABLE.insertBefore(this.THEAD,this.TBODY)),this.COLGROUP=this.TABLE.getElementsByTagName("COLGROUP")[0],this.COLGROUP||(this.COLGROUP=document.createElement("COLGROUP"),this.TABLE.insertBefore(this.COLGROUP,this.THEAD)),this.instance.getSetting("columnHeaders").length&&!this.THEAD.childNodes.length){var h=document.createElement("TR");this.THEAD.appendChild(h)}this.colgroupChildrenLength=this.COLGROUP.childNodes.length,this.theadChildrenLength=this.THEAD.firstChild?this.THEAD.firstChild.childNodes.length:0,this.tbodyChildrenLength=this.TBODY.childNodes.length,this.rowFilter=null,this.columnFilter=null}function C(a){this.wtTable=a,this.instance=a.instance,this.rowFilter=a.rowFilter,this.columnFilter=a.columnFilter,this.TABLE=a.TABLE,this.THEAD=a.THEAD,this.TBODY=a.TBODY,this.COLGROUP=a.COLGROUP,this.utils=C.utils}function D(c){this.instance=c,this.oversizedRows=[],this.oversizedCols=[],this.oversizedColumnHeaders=[];var d=this,e=b.eventManager(c);e.addEventListener(a,"resize",function(){d.clientHeight=d.getWorkspaceHeight()})}function E(a,b,c,d,e,f,g){function h(a,b){var d=0;if(m.stretchAllColumnsWidth[a]||(m.stretchAllColumnsWidth[a]=Math.round(b*m.stretchAllRatio)),m.stretchAllColumnsWidth.length===c&&m.needVerifyLastColumnWidth){m.needVerifyLastColumnWidth=!1;for(var e=0;e<m.stretchAllColumnsWidth.length;e++)d+=m.stretchAllColumnsWidth[e];d!=m.totalTargetWidth&&(m.stretchAllColumnsWidth[m.stretchAllColumnsWidth.length-1]+=m.totalTargetWidth-d)}return m.stretchAllColumnsWidth[a]}function i(a){return a===c-1?m.stretchLastWidth:null}var j,k,l,m=this,n=1,o=0,p=!0,q=50,r=[];for(this.scrollOffset=b,this.startColumn=null,this.endColumn=null,this.startPosition=null,this.count=0,this.stretchAllRatio=0,this.stretchLastWidth=0,this.stretch=g,this.totalTargetWidth=0,this.needVerifyLastColumnWidth=!0,this.stretchAllColumnsWidth=[],j=function(a){var b=d(a);return n=n||1,void 0===b&&(b=q),b},this.refreshStretching=function(a){for(var b,d,e=0,f=0;c>f;f++)b=j(f),e+=b;this.totalTargetWidth=a,d=e-a,"all"===this.stretch&&0>d?(this.stretchAllRatio=a/e,this.stretchAllColumnsWidth=[],this.needVerifyLastColumnWidth=!0):"last"===this.stretch&&1/0!==a&&(this.stretchLastWidth=-d+j(c-1))},this.getStretchedColumnWidth=function(a,b){var c=null;return"all"===this.stretch&&0!==this.stretchAllRatio?c=h(a,b):"last"===this.stretch&&0!==this.stretchLastWidth&&(c=i(a,b)),c},l=0;c>l;l++)if(k=j(l),b>=o&&!f&&(this.startColumn=l),o>=b&&b+a>=o+k&&(null==this.startColumn&&(this.startColumn=l),this.endColumn=l),r.push(o),o+=k,f||(this.endColumn=l),o>=b+a){p=!1;break}if(this.endColumn==c-1&&p)for(this.startColumn=this.endColumn;this.startColumn>0;){var s=r[this.endColumn]+k-r[this.startColumn-1];if((a>=s||!f)&&this.startColumn--,s>a)break}null!==this.startColumn&&e&&e(this),this.startPosition=r[this.startColumn],void 0==this.startPosition&&(this.startPosition=null),null!=this.startColumn&&(this.count=this.endColumn-this.startColumn+1)}function F(a,b,c,d,e,f){this.scrollOffset=b,this.startRow=null,this.startPosition=null,this.endRow=null,this.count=0;for(var g,h=0,i=!0,j=23,k=[],l=0;c>l;l++)if(g=d(l),void 0===g&&(g=j),b>=h&&!f&&(this.startRow=l),h>=b&&b+a>=h+g&&(null==this.startRow&&(this.startRow=l),this.endRow=l),k.push(h),h+=g,f||(this.endRow=l),h>=b+a){i=!1;break}if(this.endRow==c-1&&i)for(this.startRow=this.endRow;this.startRow>0;){var m=k[this.endRow]+g-k[this.startRow-1];if((a>=m||!f)&&this.startRow--,m>=a)break}null!==this.startRow&&e&&e(this),this.startPosition=k[this.startRow],void 0==this.startPosition&&(this.startPosition=null),null!=this.startRow&&(this.count=this.endRow-this.startRow+1)}Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a,b){function c(a){return/NodeList/i.test(a.item)}function d(a){for(var b=[],c=0,d=a.length;d>c;c++)b[c]=a[c];return b}if("undefined"==typeof this||null===this)throw new TypeError;if("function"!=typeof a)throw new TypeError;b=b||this,c(b)&&(b=d(b));var e,f,g=b.length,h=[];for(e=0;g>e;e+=1)b.hasOwnProperty(e)&&(f=b[e],a.call(b,f,e,b)&&h.push(f));return h}),Array.isArray||(Array.isArray=function(a){return"[object Array]"==toString.call(a)}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),"undefined"==typeof WeakMap&&!function(){var b=Object.defineProperty;try{var c=!0;b(function(){},"foo",{})}catch(d){c=!1}var e=+new Date%1e9,f=function(){this.name="__st"+(1e9*Math.random()>>>0)+(e++ +"__"),c||(this._wmCache=[])};f.prototype=c?{set:function(a,c){var d=a[this.name];d&&d[0]===a?d[1]=c:b(a,this.name,{value:[a,c],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){this.set(a,void 0)}}:{set:function(a,b){if("undefined"!=typeof a&&"undefined"!=typeof b){for(var c=0,d=this._wmCache.length;d>c;c++)if(this._wmCache[c].key==a)return void(this._wmCache[c].value=b);this._wmCache.push({key:a,value:b})}},get:function(a){if("undefined"!=typeof a)for(var b=0,c=this._wmCache.length;c>b;b++)if(this._wmCache[b].key==a)return this._wmCache[b].value},"delete":function(a){if("undefined"!=typeof a)for(var b=0,c=this._wmCache.length;c>b;b++)this._wmCache[b].key==a&&Array.prototype.slice.call(this._wmCache,b,1)}},a.WeakMap=f}(),b.activeGuid=null,b.Core=function(a,c){function d(){var a=!1;return{validatorsInQueue:0,addValidatorToQueue:function(){this.validatorsInQueue++,a=!1},removeValidatorFormQueue:function(){this.validatorsInQueue=this.validatorsInQueue-1<0?0:this.validatorsInQueue-1,this.checkIfQueueIsEmpty()},onQueueEmpty:function(){},checkIfQueueIsEmpty:function(){0==this.validatorsInQueue&&0==a&&(a=!0,this.onQueueEmpty())}}}function e(a,c,e){function f(){var d;a.length&&(d=b.hooks.run(s,"beforeChange",a,c),"function"==typeof d?console.warn("Your beforeChange callback returns a function. It's not supported since Handsontable 0.12.1 (and the returned function will not be executed)."):d===!1&&a.splice(0,a.length)),e()}var g=new d;g.onQueueEmpty=f;for(var h=a.length-1;h>=0;h--)if(null===a[h])a.splice(h,1);else{var i=a[h][0],j=o.propToCol(a[h][1]),k=s.runHooks("modifyCol",j),l=s.getCellMeta(i,k);if("numeric"===l.type&&"string"==typeof a[h][3]&&a[h][3].length>0&&(/^-?[\d\s]*(\.|\,)?\d*$/.test(a[h][3])||l.format)){var m=a[h][3].length;numeral.language("undefined"==typeof l.language?"en":a[h][3].indexOf(".")===m-3&&-1===a[h][3].indexOf(",")?"en":l.language),numeral.validate(a[h][3])&&(a[h][3]=numeral().unformat(a[h][3]))}s.getCellValidator(l)&&(g.addValidatorToQueue(),s.validateCell(a[h][3],l,function(b,c){return function(d){if("boolean"!=typeof d)throw new Error("Validation error: result is not boolean");d===!1&&c.allowInvalid===!1&&(a.splice(b,1),c.valid=!0,--b),g.removeValidatorFormQueue()}}(h,l),c))}g.checkIfQueueIsEmpty()}function f(a,c){var d=a.length-1;if(!(0>d)){for(;d>=0;d--)if(null!==a[d]){if(null!=a[d][2]||null!=a[d][3]){if(n.settings.allowInsertRow)for(;a[d][0]>s.countRows()-1;)o.createRow();if("array"===s.dataType&&n.settings.allowInsertColumn)for(;o.propToCol(a[d][1])>s.countCols()-1;)o.createCol();o.set(a[d][0],a[d][1],a[d][3])}}else a.splice(d,1);s.forceFullRender=!0,p.adjustRowsAndCols(),b.hooks.run(s,"beforeChangeRender",a,c),q.refreshBorders(null,!0),b.hooks.run(s,"afterChange",a,c||"edit")}}function g(a,b,c){return"object"==typeof a?a:[[a,b,c]]}function h(a){if(a.hasOwnProperty("type")){var c,d={};if("object"==typeof a.type)c=a.type;else if("string"==typeof a.type&&(c=b.cellTypes[a.type],void 0===c))throw new Error('You declared cell type "'+a.type+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');for(var e in c)c.hasOwnProperty(e)&&!a.hasOwnProperty(e)&&(d[e]=c[e]);return d}}function i(a){return b.hooks.run(s,"modifyRow",a)}function j(a){return b.hooks.run(s,"modifyCol",a)}function k(){throw new Error("This method cannot be called because this Handsontable instance has been destroyed")}var n,o,p,q,r,s=this,t=function(){},u=b.eventManager(s);b.helper.extend(t.prototype,G.prototype),b.helper.extend(t.prototype,c),b.helper.extend(t.prototype,h(c)),this.rootElement=a,this.isHotTableEnv=b.Dom.isChildOfWebComponentTable(this.rootElement),b.eventManager.isHotTableEnv=this.isHotTableEnv,this.container=document.createElement("DIV"),this.container.className="htContainer",a.insertBefore(this.container,a.firstChild),this.guid="ht_"+b.helper.randomString(),this.rootElement.id&&"ht_"!==this.rootElement.id.substring(0,3)||(this.rootElement.id=this.guid),n={cellSettings:[],columnSettings:[],columnsSettingConflicts:["data","width"],settings:new t,selRange:null,isPopulated:null,scrollable:null,firstRun:!0},p={alter:function(a,b,c,d,e){var f;switch(c=c||1,a){case"insert_row":f=o.createRow(b,c),f&&(q.isSelected()&&n.selRange.from.row>=b?(n.selRange.from.row=n.selRange.from.row+f,q.transformEnd(f,0)):q.refreshBorders());break;case"insert_col":if(f=o.createCol(b,c)){if(Array.isArray(s.getSettings().colHeaders)){var g=[b,0];g.length+=f,Array.prototype.splice.apply(s.getSettings().colHeaders,g)}q.isSelected()&&n.selRange.from.col>=b?(n.selRange.from.col=n.selRange.from.col+f,q.transformEnd(0,f)):q.refreshBorders()}break;case"remove_row":b=s.runHooks("modifyCol",b),o.removeRow(b,c),n.cellSettings.splice(b,c);var h=s.getSettings().fixedRowsTop;h>=b+1&&(s.getSettings().fixedRowsTop-=Math.min(c,h-b)),p.adjustRowsAndCols(),q.refreshBorders();break;case"remove_col":o.removeCol(b,c);for(var i=0,j=o.getAll().length;j>i;i++)i in n.cellSettings&&n.cellSettings[i].splice(b,c);var k=s.getSettings().fixedColumnsLeft;k>=b+1&&(s.getSettings().fixedColumnsLeft-=Math.min(c,k-b)),Array.isArray(s.getSettings().colHeaders)&&("undefined"==typeof b&&(b=-1),s.getSettings().colHeaders.splice(b,c)),p.adjustRowsAndCols(),q.refreshBorders();break;default:throw new Error('There is no such action "'+a+'"')}e||p.adjustRowsAndCols()},adjustRowsAndCols:function(){var a,b,c,d;if(b=s.countRows(),b<n.settings.minRows)for(a=0;a<n.settings.minRows-b;a++)o.createRow(s.countRows(),1,!0);if(c=s.countEmptyRows(!0),c<n.settings.minSpareRows)for(;c<n.settings.minSpareRows&&s.countRows()<n.settings.maxRows;c++)o.createRow(s.countRows(),1,!0);if(d=s.countEmptyCols(!0),!n.settings.columns&&s.countCols()<n.settings.minCols)for(;s.countCols()<n.settings.minCols;d++)o.createCol(s.countCols(),1,!0);if(!n.settings.columns&&"array"===s.dataType&&d<n.settings.minSpareCols)for(;d<n.settings.minSpareCols&&s.countCols()<n.settings.maxCols;d++)o.createCol(s.countCols(),1,!0);var e=s.countRows(),f=s.countCols();if((0===e||0===f)&&q.deselect(),q.isSelected()){var g,h=n.selRange.from.row,i=n.selRange.from.col,j=n.selRange.to.row,k=n.selRange.to.col;h>e-1?(h=e-1,g=!0,j>h&&(j=h)):j>e-1&&(j=e-1,g=!0,h>j&&(h=j)),i>f-1?(i=f-1,g=!0,k>i&&(k=i)):k>f-1&&(k=f-1,g=!0,i>k&&(i=k)),g&&s.selectCell(h,i,j,k)}},populateFromArray:function(a,c,d,e,f,g,h){var i,j,k,l,m=[],o={};if(j=c.length,0===j)return!1;var p,q,r,t;switch(f){case"shift_down":for(p=d?d.col-a.col+1:0,q=d?d.row-a.row+1:0,c=b.helper.translateRowsToColumns(c),k=0,l=c.length,r=Math.max(l,p);r>k;k++)if(l>k){for(i=0,j=c[k].length;q-j>i;i++)c[k].push(c[k][i%j]);c[k].unshift(a.col+k,a.row,0),s.spliceCol.apply(s,c[k])}else c[k%l][0]=a.col+k,s.spliceCol.apply(s,c[k%l]);break;case"shift_right":for(p=d?d.col-a.col+1:0,q=d?d.row-a.row+1:0,i=0,j=c.length,t=Math.max(j,q);t>i;i++)if(j>i){for(k=0,l=c[i].length;p-l>k;k++)c[i].push(c[i][k%l]);c[i].unshift(a.row+i,a.col,0),s.spliceRow.apply(s,c[i])}else c[i%j][0]=a.row+i,s.spliceRow.apply(s,c[i%j]);break;case"overwrite":default:o.row=a.row,o.col=a.col;var u={row:0,col:0},v={row:d&&a?d.row-a.row+1:1,col:d&&a?d.col-a.col+1:1};for(-1!==["up","left"].indexOf(g)?u={row:Math.ceil(v.row/j)||1,col:Math.ceil(v.col/c[0].length)||1}:-1!==["down","right"].indexOf(g)&&(u={row:1,col:1}),i=0;j>i&&!(d&&o.row>d.row||!n.settings.allowInsertRow&&o.row>s.countRows()-1||o.row>=n.settings.maxRows);i++){for(o.col=a.col,l=c[i]?c[i].length:0,k=0;l>k&&!(d&&o.col>d.col||!n.settings.allowInsertColumn&&o.col>s.countCols()-1||o.col>=n.settings.maxCols);k++){if(!s.getCellMeta(o.row,o.col).readOnly){var w,x=c[i][k],y={row:i,col:k};
"autofill"===e&&(w=s.runHooks("beforeAutofillInsidePopulate",y,g,c,h,u,v),w&&(u="undefined"!=typeof w.iterators?w.iterators:u,x="undefined"!=typeof w.value?w.value:x)),m.push([o.row,o.col,x])}o.col++,d&&k===l-1&&(k=-1,-1!==["down","right"].indexOf(g)?u.col++:-1!==["up","left"].indexOf(g)&&u.col>1&&u.col--)}o.row++,u.col=1,d&&i===j-1&&(i=-1,-1!==["down","right"].indexOf(g)?u.row++:-1!==["up","left"].indexOf(g)&&u.row>1&&u.row--)}s.setDataAtCell(m,null,null,e||"populateFromArray")}}},this.selection=q={inProgress:!1,selectedHeader:{cols:!1,rows:!1},setSelectedHeaders:function(a,b){s.selection.selectedHeader.rows=a,s.selection.selectedHeader.cols=b},begin:function(){s.selection.inProgress=!0},finish:function(){var a=s.getSelected();b.hooks.run(s,"afterSelectionEnd",a[0],a[1],a[2],a[3]),b.hooks.run(s,"afterSelectionEndByProp",a[0],s.colToProp(a[1]),a[2],s.colToProp(a[3])),s.selection.inProgress=!1},isInProgress:function(){return s.selection.inProgress},setRangeStart:function(a,c){b.hooks.run(s,"beforeSetRangeStart",a),n.selRange=new m(a,a,a),q.setRangeEnd(a,null,c)},setRangeEnd:function(a,c,d){b.hooks.run(s,"beforeSetRangeEnd",a),s.selection.begin(),n.selRange.to=new l(a.row,a.col),n.settings.multiSelect||(n.selRange.from=a),s.view.wt.selections.current.clear(),s.view.wt.selections.current.add(n.selRange.highlight),s.view.wt.selections.area.clear(),q.isMultiple()&&(s.view.wt.selections.area.add(n.selRange.from),s.view.wt.selections.area.add(n.selRange.to)),(n.settings.currentRowClassName||n.settings.currentColClassName)&&(s.view.wt.selections.highlight.clear(),s.view.wt.selections.highlight.add(n.selRange.from),s.view.wt.selections.highlight.add(n.selRange.to)),b.hooks.run(s,"afterSelection",n.selRange.from.row,n.selRange.from.col,n.selRange.to.row,n.selRange.to.col),b.hooks.run(s,"afterSelectionByProp",n.selRange.from.row,o.colToProp(n.selRange.from.col),n.selRange.to.row,o.colToProp(n.selRange.to.col)),c!==!1&&s.view.mainViewIsActive()&&s.view.scrollViewport(n.selRange.from&&!q.isMultiple()?n.selRange.from:a),q.refreshBorders(null,d)},refreshBorders:function(a,b){b||r.destroyEditor(a),s.view.render(),q.isSelected()&&!b&&r.prepareEditor()},isMultiple:function(){var a=!(n.selRange.to.col===n.selRange.from.col&&n.selRange.to.row===n.selRange.from.row),c=b.hooks.run(s,"afterIsMultipleSelection",a);return a?c:void 0},transformStart:function(a,b,c,d){var e=new l(a,b);s.runHooks("modifyTransformStart",e),n.selRange.highlight.row+a>s.countRows()-1?c&&n.settings.minSpareRows>0?s.alter("insert_row",s.countRows()):n.settings.autoWrapCol&&(e.row=1-s.countRows(),e.col=n.selRange.highlight.col+e.col==s.countCols()-1?1-s.countCols():1):n.settings.autoWrapCol&&n.selRange.highlight.row+e.row<0&&n.selRange.highlight.col+e.col>=0&&(e.row=s.countRows()-1,e.col=n.selRange.highlight.col+e.col==0?s.countCols()-1:-1),n.selRange.highlight.col+e.col>s.countCols()-1?c&&n.settings.minSpareCols>0?s.alter("insert_col",s.countCols()):n.settings.autoWrapRow&&(e.row=n.selRange.highlight.row+e.row==s.countRows()-1?1-s.countRows():1,e.col=1-s.countCols()):n.settings.autoWrapRow&&n.selRange.highlight.col+e.col<0&&n.selRange.highlight.row+e.row>=0&&(e.row=n.selRange.highlight.row+e.row==0?s.countRows()-1:-1,e.col=s.countCols()-1);var f=s.countRows(),g=s.countCols(),h=new l(n.selRange.highlight.row+e.row,n.selRange.highlight.col+e.col);h.row<0?h.row=0:h.row>0&&h.row>=f&&(h.row=f-1),h.col<0?h.col=0:h.col>0&&h.col>=g&&(h.col=g-1),q.setRangeStart(h,d)},transformEnd:function(a,b){var c=new l(a,b);s.runHooks("modifyTransformEnd",c);var d=s.countRows(),e=s.countCols(),f=new l(n.selRange.to.row+c.row,n.selRange.to.col+c.col);f.row<0?f.row=0:f.row>0&&f.row>=d&&(f.row=d-1),f.col<0?f.col=0:f.col>0&&f.col>=e&&(f.col=e-1),q.setRangeEnd(f,!0)},isSelected:function(){return null!==n.selRange},inInSelection:function(a){return q.isSelected()?n.selRange.includes(a):!1},deselect:function(){q.isSelected()&&(s.selection.inProgress=!1,n.selRange=null,s.view.wt.selections.current.clear(),s.view.wt.selections.area.clear(),(n.settings.currentRowClassName||n.settings.currentColClassName)&&s.view.wt.selections.highlight.clear(),r.destroyEditor(),q.refreshBorders(),b.hooks.run(s,"afterDeselect"))},selectAll:function(){n.settings.multiSelect&&(q.setRangeStart(new l(0,0)),q.setRangeEnd(new l(s.countRows()-1,s.countCols()-1),!1))},empty:function(){if(q.isSelected()){var a,b,c=n.selRange.getTopLeftCorner(),d=n.selRange.getBottomRightCorner(),e=[];for(a=c.row;a<=d.row;a++)for(b=c.col;b<=d.col;b++)s.getCellMeta(a,b).readOnly||e.push([a,b,""]);s.setDataAtCell(e)}}},this.init=function(){b.hooks.run(s,"beforeInit"),b.mobileBrowser&&b.Dom.addClass(s.rootElement,"mobile"),this.updateSettings(n.settings,!0),this.view=new b.TableView(this),r=new b.EditorManager(s,n,q,o),this.forceFullRender=!0,this.view.render(),"object"==typeof n.firstRun&&(b.hooks.run(s,"afterChange",n.firstRun[0],n.firstRun[1]),n.firstRun=!1),b.hooks.run(s,"afterInit")},this.validateCell=function(a,c,d,e){function f(a){var b=c.col,e=c.row,f=s.getCell(e,b,!0);f&&s.view.wt.wtSettings.settings.cellRenderer(e,b,f),d(a)}var g=s.getCellValidator(c);"[object RegExp]"===Object.prototype.toString.call(g)&&(g=function(a){return function(b,c){c(a.test(b))}}(g)),"function"==typeof g?(a=b.hooks.run(s,"beforeValidate",a,c.row,c.prop,e),s._registerTimeout(setTimeout(function(){g.call(c,a,function(d){d=b.hooks.run(s,"afterValidate",d,a,c.row,c.prop,e),c.valid=d,f(d),b.hooks.run(s,"postAfterValidate",d,a,c.row,c.prop,e)})},0))):(c.valid=!0,f(c.valid))},this.setDataAtCell=function(a,b,c,d){var h,i,j,k=g(a,b,c),l=[];for(h=0,i=k.length;i>h;h++){if("object"!=typeof k[h])throw new Error("Method `setDataAtCell` accepts row number or changes array of arrays as its first parameter");if("number"!=typeof k[h][1])throw new Error("Method `setDataAtCell` accepts row and column number as its parameters. If you want to use object property name, use method `setDataAtRowProp`");j=o.colToProp(k[h][1]),l.push([k[h][0],j,o.get(k[h][0],j),k[h][2]])}d||"object"!=typeof a||(d=b),e(l,d,function(){f(l,d)})},this.setDataAtRowProp=function(a,b,c,d){var h,i,j=g(a,b,c),k=[];for(h=0,i=j.length;i>h;h++)k.push([j[h][0],j[h][1],o.get(j[h][0],j[h][1]),j[h][2]]);d||"object"!=typeof a||(d=b),e(k,d,function(){f(k,d)})},this.listen=function(){b.activeGuid=s.guid,document.activeElement&&document.activeElement!==document.body?document.activeElement.blur():document.activeElement||document.body.focus()},this.unlisten=function(){b.activeGuid=null},this.isListening=function(){return b.activeGuid===s.guid},this.destroyEditor=function(a){q.refreshBorders(a)},this.populateFromArray=function(a,b,c,d,e,f,g,h,i){var j;if("object"!=typeof c||"object"!=typeof c[0])throw new Error("populateFromArray parameter `input` must be an array of arrays");return j="number"==typeof d?new l(d,e):null,p.populateFromArray(new l(a,b),c,j,f,g,h,i)},this.spliceCol=function(){return o.spliceCol.apply(o,arguments)},this.spliceRow=function(){return o.spliceRow.apply(o,arguments)},this.getSelected=function(){return q.isSelected()?[n.selRange.from.row,n.selRange.from.col,n.selRange.to.row,n.selRange.to.col]:void 0},this.getSelectedRange=function(){return q.isSelected()?n.selRange:void 0},this.render=function(){s.view&&(s.forceFullRender=!0,q.refreshBorders(null,!0))},this.loadData=function(a){function c(){n.cellSettings.length=0}if("object"==typeof a&&null!==a)a.push&&a.splice||(a=[a]);else{if(null!==a)throw new Error("loadData only accepts array of objects or array of arrays ("+typeof a+" given)");a=[];for(var d,e=0,f=n.settings.startRows;f>e;e++){d=[];for(var g=0,h=n.settings.startCols;h>g;g++)d.push(null);a.push(d)}}n.isPopulated=!1,t.prototype.data=a,s.dataType=Array.isArray(n.settings.dataSchema)||Array.isArray(a[0])?"array":"function"==typeof n.settings.dataSchema?"function":"object",o=new b.DataMap(s,n,t),c(),p.adjustRowsAndCols(),b.hooks.run(s,"afterLoadData"),n.firstRun?n.firstRun=[null,"loadData"]:(b.hooks.run(s,"afterChange",null,"loadData"),s.render()),n.isPopulated=!0},this.getData=function(a,b,c,d){return"undefined"==typeof a?o.getAll():o.getRange(new l(a,b),new l(c,d),o.DESTINATION_RENDERER)},this.getCopyableData=function(a,b,c,d){return o.getCopyableText(new l(a,b),new l(c,d))},this.updateSettings=function(a,c){var d,e;if("undefined"!=typeof a.rows)throw new Error("'rows' setting is no longer supported. do you mean startRows, minRows or maxRows?");if("undefined"!=typeof a.cols)throw new Error("'cols' setting is no longer supported. do you mean startCols, minCols or maxCols?");for(d in a)"data"!==d&&(void 0!==b.hooks.hooks[d]||void 0!==b.hooks.legacy[d]?("function"==typeof a[d]||Array.isArray(a[d]))&&s.addHook(d,a[d]):!c&&a.hasOwnProperty(d)&&(t.prototype[d]=a[d]));if(void 0===a.data&&void 0===n.settings.data?s.loadData(null):void 0!==a.data?s.loadData(a.data):void 0!==a.columns&&o.createMap(),e=s.countCols(),n.cellSettings.length=0,e>0){var f,g;for(d=0;e>d;d++)n.columnSettings[d]=b.helper.columnFactory(t,n.columnsSettingConflicts),f=n.columnSettings[d].prototype,t.prototype.columns&&(g=t.prototype.columns[d],b.helper.extend(f,g),b.helper.extend(f,h(g)))}if("undefined"!=typeof a.cell)for(d in a.cell){var i=a.cell[d];s.setCellMetaObject(i.row,i.col,i)}if(b.hooks.run(s,"afterCellMetaReset"),"undefined"!=typeof a.className&&(t.prototype.className&&b.Dom.removeClass(s.rootElement,t.prototype.className),a.className&&b.Dom.addClass(s.rootElement,a.className)),"undefined"!=typeof a.height){var j=a.height;"function"==typeof j&&(j=j()),s.rootElement.style.height=j+"px"}if("undefined"!=typeof a.width){var k=a.width;"function"==typeof k&&(k=k()),s.rootElement.style.width=k+"px"}j&&(s.rootElement.style.overflow="auto"),c||b.hooks.run(s,"afterUpdateSettings"),p.adjustRowsAndCols(),s.view&&!n.firstRun&&(s.forceFullRender=!0,q.refreshBorders(null,!0))},this.getValue=function(){var a=s.getSelected();if(t.prototype.getValue){if("function"==typeof t.prototype.getValue)return t.prototype.getValue.call(s);if(a)return s.getData()[a[0]][t.prototype.getValue]}else if(a)return s.getDataAtCell(a[0],a[1])},this.getSettings=function(){return n.settings},this.clear=function(){q.selectAll(),q.empty()},this.alter=function(a,b,c,d,e){p.alter(a,b,c,d,e)},this.getCell=function(a,b,c){return s.view.getCellAtCoords(new l(a,b),c)},this.getCoords=function(a){return this.view.wt.wtTable.getCoords.call(this.view.wt.wtTable,a)},this.colToProp=function(a){return o.colToProp(a)},this.propToCol=function(a){return o.propToCol(a)},this.getDataAtCell=function(a,b){return o.get(a,o.colToProp(b))},this.getDataAtRowProp=function(a,b){return o.get(a,b)},this.getDataAtCol=function(a){var b=[];return b.concat.apply(b,o.getRange(new l(0,a),new l(n.settings.data.length-1,a),o.DESTINATION_RENDERER))},this.getDataAtProp=function(a){var b,c=[];return b=o.getRange(new l(0,o.propToCol(a)),new l(n.settings.data.length-1,o.propToCol(a)),o.DESTINATION_RENDERER),c.concat.apply(c,b)},this.getSourceDataAtCol=function(a){for(var b=[],c=n.settings.data,d=0;d<c.length;d++)b.push(c[d][a]);return b},this.getSourceDataAtRow=function(a){return n.settings.data[a]},this.getDataAtRow=function(a){var b=o.getRange(new l(a,0),new l(a,this.countCols()-1),o.DESTINATION_RENDERER);return b[0]},this.removeCellMeta=function(a,b,c){var d=s.getCellMeta(a,b);void 0!=d[c]&&delete n.cellSettings[a][b][c]},this.setCellMetaObject=function(a,b,c){if("object"==typeof c)for(var d in c){var e=c[d];this.setCellMeta(a,b,d,e)}},this.setCellMeta=function(a,c,d,e){n.cellSettings[a]||(n.cellSettings[a]=[]),n.cellSettings[a][c]||(n.cellSettings[a][c]=new n.columnSettings[c]),n.cellSettings[a][c][d]=e,b.hooks.run(s,"afterSetCellMeta",a,c,d,e)},this.getCellMeta=function(a,c){var d,e=o.colToProp(c);if(a=i(a),c=j(c),n.columnSettings[c]||(n.columnSettings[c]=b.helper.columnFactory(t,n.columnsSettingConflicts)),n.cellSettings[a]||(n.cellSettings[a]=[]),n.cellSettings[a][c]||(n.cellSettings[a][c]=new n.columnSettings[c]),d=n.cellSettings[a][c],d.row=a,d.col=c,d.prop=e,d.instance=s,b.hooks.run(s,"beforeGetCellMeta",a,c,d),b.helper.extend(d,h(d)),d.cells){var f=d.cells.call(d,a,c,e);f&&(b.helper.extend(d,f),b.helper.extend(d,h(f)))}return b.hooks.run(s,"afterGetCellMeta",a,c,d),d};var v=b.helper.cellMethodLookupFactory("renderer");this.getCellRenderer=function(a,c){var d=v.call(this,a,c);return b.renderers.getRenderer(d)},this.getCellEditor=b.helper.cellMethodLookupFactory("editor"),this.getCellValidator=b.helper.cellMethodLookupFactory("validator"),this.validateCells=function(a){var b=new d;b.onQueueEmpty=a;for(var c=s.countRows()-1;c>=0;){for(var e=s.countCols()-1;e>=0;)b.addValidatorToQueue(),s.validateCell(s.getDataAtCell(c,e),s.getCellMeta(c,e),function(){b.removeValidatorFormQueue()},"validateCells"),e--;c--}b.checkIfQueueIsEmpty()},this.getRowHeader=function(a){if(void 0===a){for(var b=[],c=0,d=s.countRows();d>c;c++)b.push(s.getRowHeader(c));return b}return Array.isArray(n.settings.rowHeaders)&&void 0!==n.settings.rowHeaders[a]?n.settings.rowHeaders[a]:"function"==typeof n.settings.rowHeaders?n.settings.rowHeaders(a):n.settings.rowHeaders&&"string"!=typeof n.settings.rowHeaders&&"number"!=typeof n.settings.rowHeaders?a+1:n.settings.rowHeaders},this.hasRowHeaders=function(){return!!n.settings.rowHeaders},this.hasColHeaders=function(){if(void 0!==n.settings.colHeaders&&null!==n.settings.colHeaders)return!!n.settings.colHeaders;for(var a=0,b=s.countCols();b>a;a++)if(s.getColHeader(a))return!0;return!1},this.getColHeader=function(a){if(void 0===a){for(var c=[],d=0,e=s.countCols();e>d;d++)c.push(s.getColHeader(d));return c}var f=a;return a=b.hooks.run(s,"modifyCol",a),n.settings.columns&&n.settings.columns[a]&&n.settings.columns[a].title?n.settings.columns[a].title:Array.isArray(n.settings.colHeaders)&&void 0!==n.settings.colHeaders[a]?n.settings.colHeaders[a]:"function"==typeof n.settings.colHeaders?n.settings.colHeaders(a):n.settings.colHeaders&&"string"!=typeof n.settings.colHeaders&&"number"!=typeof n.settings.colHeaders?b.helper.spreadsheetColumnLabel(f):n.settings.colHeaders},this._getColWidthFromSettings=function(a){var b=s.getCellMeta(0,a),c=b.width;if((void 0===c||c===n.settings.width)&&(c=b.colWidths),void 0!==c&&null!==c){switch(typeof c){case"object":c=c[a];break;case"function":c=c(a)}"string"==typeof c&&(c=parseInt(c,10))}return c},this.getColWidth=function(a){var c=s._getColWidthFromSettings(a);return c||(c=50),c=b.hooks.run(s,"modifyColWidth",c,a)},this._getRowHeightFromSettings=function(a){var b=n.settings.rowHeights;if(void 0!==b&&null!==b){switch(typeof b){case"object":b=b[a];break;case"function":b=b(a)}"string"==typeof b&&(b=parseInt(b,10))}return b},this.getRowHeight=function(a){var c=s._getRowHeightFromSettings(a);return c=b.hooks.run(s,"modifyRowHeight",c,a)},this.countRows=function(){return n.settings.data.length},this.countCols=function(){return"object"===s.dataType||"function"===s.dataType?n.settings.columns&&n.settings.columns.length?n.settings.columns.length:o.colToPropCache.length:"array"===s.dataType?n.settings.columns&&n.settings.columns.length?n.settings.columns.length:n.settings.data&&n.settings.data[0]&&n.settings.data[0].length?n.settings.data[0].length:0:void 0},this.rowOffset=function(){return s.view.wt.wtTable.getFirstRenderedRow()},this.colOffset=function(){return s.view.wt.wtTable.getFirstRenderedColumn()},this.countRenderedRows=function(){return s.view.wt.drawn?s.view.wt.wtTable.getRenderedRowsCount():-1},this.countVisibleRows=function(){return s.view.wt.drawn?s.view.wt.wtTable.getVisibleRowsCount():-1},this.countRenderedCols=function(){return s.view.wt.drawn?s.view.wt.wtTable.getRenderedColumnsCount():-1},this.countVisibleCols=function(){return s.view.wt.drawn?s.view.wt.wtTable.getVisibleColumnsCount():-1},this.countEmptyRows=function(a){for(var c,d=s.countRows()-1,e=0;d>=0;){if(c=b.hooks.run(this,"modifyRow",d),s.isEmptyRow(c))e++;else if(a)break;d--}return e},this.countEmptyCols=function(a){if(s.countRows()<1)return 0;for(var b=s.countCols()-1,c=0;b>=0;){if(s.isEmptyCol(b))c++;else if(a)break;b--}return c},this.isEmptyRow=function(a){return n.settings.isEmptyRow.call(s,a)},this.isEmptyCol=function(a){return n.settings.isEmptyCol.call(s,a)},this.selectCell=function(a,b,c,d,e){if("number"!=typeof a||0>a||a>=s.countRows())return!1;if("number"!=typeof b||0>b||b>=s.countCols())return!1;if("undefined"!=typeof c){if("number"!=typeof c||0>c||c>=s.countRows())return!1;if("number"!=typeof d||0>d||d>=s.countCols())return!1}var f=new l(a,b);return n.selRange=new m(f,f,f),document.activeElement&&document.activeElement!==document.documentElement&&document.activeElement!==document.body&&document.activeElement.blur(),s.listen(),"undefined"==typeof c?q.setRangeEnd(n.selRange.from,e):q.setRangeEnd(new l(c,d),e),s.selection.finish(),!0},this.selectCellByProp=function(){return arguments[1]=o.propToCol(arguments[1]),"undefined"!=typeof arguments[3]&&(arguments[3]=o.propToCol(arguments[3])),s.selectCell.apply(s,arguments)},this.deselectCell=function(){q.deselect()},this.destroy=function(){s._clearTimeouts(),s.view&&s.view.destroy(),b.Dom.empty(s.rootElement),u.clear(),b.hooks.run(s,"afterDestroy"),b.hooks.destroy(s);for(var a in s)s.hasOwnProperty(a)&&("function"==typeof s[a]?"runHooks"!==a&&(s[a]=k):"guid"!==a&&(s[a]=null));n=null,o=null,p=null,q=null,r=null,s=null,t=null},this.getActiveEditor=function(){return r.getActiveEditor()},this.getInstance=function(){return s},this.addHook=function(a,c){b.hooks.add(a,c,s)},this.addHookOnce=function(a,c){b.hooks.once(a,c,s)},this.removeHook=function(a,c){b.hooks.remove(a,c,s)},this.runHooks=function(a,c,d,e,f,g,h){return b.hooks.run(s,a,c,d,e,f,g,h)},this.timeouts=[],this._registerTimeout=function(a){this.timeouts.push(a)},this._clearTimeouts=function(){for(var a=0,b=this.timeouts.length;b>a;a++)clearTimeout(this.timeouts[a])},this.version="0.13.1"};var G=function(){};if(G.prototype={data:void 0,dataSchema:void 0,width:void 0,height:void 0,startRows:5,startCols:5,rowHeaders:null,colHeaders:null,colWidths:void 0,columns:void 0,cells:void 0,cell:[],comments:!1,customBorders:!1,minRows:0,minCols:0,maxRows:1/0,maxCols:1/0,minSpareRows:0,minSpareCols:0,allowInsertRow:!0,allowInsertColumn:!0,allowRemoveRow:!0,allowRemoveColumn:!0,multiSelect:!0,fillHandle:!0,fixedRowsTop:0,fixedColumnsLeft:0,outsideClickDeselects:!0,enterBeginsEditing:!0,enterMoves:{row:1,col:0},tabMoves:{row:0,col:1},autoWrapRow:!1,autoWrapCol:!1,copyRowsLimit:1e3,copyColsLimit:1e3,pasteMode:"overwrite",persistentState:!1,currentRowClassName:void 0,currentColClassName:void 0,stretchH:"none",isEmptyRow:function(a){for(var b,c=0,d=this.countCols();d>c;c++)if(b=this.getDataAtCell(a,c),""!==b&&null!==b&&"undefined"!=typeof b)return!1;return!0},isEmptyCol:function(a){for(var b,c=0,d=this.countRows();d>c;c++)if(b=this.getDataAtCell(c,a),""!==b&&null!==b&&"undefined"!=typeof b)return!1;return!0},observeDOMVisibility:!0,allowInvalid:!0,invalidCellClassName:"htInvalid",placeholder:!1,placeholderCellClassName:"htPlaceholder",readOnlyCellClassName:"htDimmed",renderer:void 0,commentedCellClassName:"htCommentCell",fragmentSelection:!1,readOnly:!1,search:!1,type:"text",copyable:!0,editor:"text",autoComplete:void 0,debug:!1,wordWrap:!0,noWordWrapClassName:"htNoWrap",contextMenu:void 0,undo:void 0,columnSorting:void 0,manualColumnMove:void 0,manualColumnResize:void 0,manualRowMove:void 0,manualRowResize:void 0,mergeCells:!1,viewportRowRenderingOffset:10,viewportColumnRenderingOffset:10,groups:void 0,validator:void 0,manualColumnFreeze:void 0,trimWhitespace:!0,settings:void 0,source:void 0,title:void 0,checkedTemplate:void 0,uncheckedTemplate:void 0,format:void 0,className:void 0},b.DefaultSettings=G,function(a){function b(){function a(a){return null!==a&&!c(a)&&("string"==typeof a||"number"==typeof a)}function b(a){return null!==a&&("object"==typeof a||"function"==typeof a)}function c(a){return a!==a}var d={arrayMap:[],weakMap:new WeakMap};return{get:function(c){return a(c)?d.arrayMap[c]:b(c)?d.weakMap.get(c):void 0},set:function(c,e){if(a(c))d.arrayMap[c]=e;else{if(!b(c))throw new Error("Invalid key type");d.weakMap.set(c,e)}},"delete":function(c){a(c)?delete d.arrayMap[c]:b(c)&&d.weakMap["delete"](c)}}}a.MultiMap||(a.MultiMap=b)}(a),!a.Handsontable)var b={};if(b.Dom={},b.Dom.enableImmediatePropagation=function(a){null!=a&&null==a.isImmediatePropagationEnabled&&(a.stopImmediatePropagation=function(){this.isImmediatePropagationEnabled=!1,this.cancelBubble=!0},a.isImmediatePropagationEnabled=!0,a.isImmediatePropagationStopped=function(){return!this.isImmediatePropagationEnabled})},b.Dom.closest=function(a,b,c){for(;null!=a&&a!==c;){if(1===a.nodeType&&b.indexOf(a.nodeName)>-1)return a;a=a.parentNode}return null},b.Dom.isChildOf=function(a,b){var c=a.parentNode,d=[];for("string"==typeof b?d=Array.prototype.slice.call(document.querySelectorAll(b),0):d.push(b);null!=c;){if(d.indexOf(c)>-1)return!0;c=c.parentNode}return!1},b.Dom.isChildOfWebComponentTable=function(a){function b(a){return a.nodeType===Node.ELEMENT_NODE&&a.nodeName===d.toUpperCase()}var c,d="hot-table",e=!1;for(c="undefined"==typeof wrap?a:wrap(a);null!=c;){if(b(c)){e=!0;break}if(c.host&&c.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(e=b(c.host))break;c=c.host}c=c.parentNode}return e},b.Dom.index=function(a){var b=0;if(a.previousSibling)for(;a=a.previousSibling;)++b;return b},document.documentElement.classList?(b.Dom.hasClass=function(a,b){return a.classList.contains(b)},b.Dom.addClass=function(a,b){b&&a.classList.add(b)},b.Dom.removeClass=function(a,b){a.classList.remove(b)}):(b.Dom.hasClass=function(a,b){return a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},b.Dom.addClass=function(a,b){""===a.className?a.className=b:this.hasClass(a,b)||(a.className+=" "+b)},b.Dom.removeClass=function(a,b){if(this.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").trim()}}),b.Dom.removeTextNodes=function(a,b){if(3===a.nodeType)b.removeChild(a);else if(["TABLE","THEAD","TBODY","TFOOT","TR"].indexOf(a.nodeName)>-1)for(var c=a.childNodes,d=c.length-1;d>=0;d--)this.removeTextNodes(c[d],a)},b.Dom.empty=function(a){for(var b;b=a.lastChild;)a.removeChild(b)},b.Dom.HTML_CHARACTERS=/(<(.*)>|&(.*);)/,b.Dom.fastInnerHTML=function(a,b){this.HTML_CHARACTERS.test(b)?a.innerHTML=b:this.fastInnerText(a,b)},b.Dom.fastInnerText=document.createTextNode("test").textContent?function(a,b){var c=a.firstChild;c&&3===c.nodeType&&null===c.nextSibling?c.textContent=b:(this.empty(a),a.appendChild(document.createTextNode(b)))}:function(a,b){var c=a.firstChild;c&&3===c.nodeType&&null===c.nextSibling?c.data=b:(this.empty(a),a.appendChild(document.createTextNode(b)))},b.Dom.isVisible=function(a){function c(a){return"undefined"==typeof unwrap?a:unwrap(a)}for(var d=a;c(d)!==document.documentElement;){if(null===d)return!1;if(d.nodeType===Node.DOCUMENT_FRAGMENT_NODE){if(d.host){if(d.host.impl)return b.Dom.isVisible(d.host.impl);if(d.host)return b.Dom.isVisible(d.host);throw new Error("Lost in Web Components world")}return!1}if("none"===d.style.display)return!1;d=d.parentNode}return!0},b.Dom.offset=function(b){var c,d,e,f,g;if(f=document.documentElement,this.hasCaptionProblem()&&b.firstChild&&"CAPTION"===b.firstChild.nodeName)return g=b.getBoundingClientRect(),{top:g.top+(a.pageYOffset||f.scrollTop)-(f.clientTop||0),left:g.left+(a.pageXOffset||f.scrollLeft)-(f.clientLeft||0)};for(c=b.offsetLeft,d=b.offsetTop,e=b;(b=b.offsetParent)&&b!==document.body;)c+=b.offsetLeft,d+=b.offsetTop,e=b;return e&&"fixed"===e.style.position&&(c+=a.pageXOffset||f.scrollLeft,d+=a.pageYOffset||f.scrollTop),{left:c,top:d}},b.Dom.getWindowScrollTop=function(){var b=a.scrollY;return void 0==b&&(b=document.documentElement.scrollTop),b},b.Dom.getWindowScrollLeft=function(){var b=a.scrollX;return void 0==b&&(b=document.documentElement.scrollLeft),b},b.Dom.getScrollTop=function(c){return c===a?b.Dom.getWindowScrollTop(c):c.scrollTop},b.Dom.getScrollLeft=function(c){return c===a?b.Dom.getWindowScrollLeft(c):c.scrollLeft},b.Dom.getScrollableElement=function(b){for(var c,d,e,f=b.parentNode,g=["auto","scroll"];f&&f.style;){if(c=f.style.overflow,d=f.style.overflowX,e=f.style.overflowY,"scroll"==c||"scroll"==d||"scroll"==e)return f;if(f.clientHeight<f.scrollHeight&&(-1!==g.indexOf(e)||-1!==g.indexOf(c)))return f;if(f.clientWidth<f.scrollWidth&&(-1!==g.indexOf(d)||-1!==g.indexOf(c)))return f;f=f.parentNode}return a},b.Dom.getComputedStyle=function(a){return a.currentStyle||document.defaultView.getComputedStyle(a)},b.Dom.outerWidth=function(a){return a.offsetWidth},b.Dom.outerHeight=function(a){return this.hasCaptionProblem()&&a.firstChild&&"CAPTION"===a.firstChild.nodeName?a.offsetHeight+a.firstChild.offsetHeight:a.offsetHeight},b.Dom.innerHeight=function(a){return a.clientHeight||a.innerHeight},b.Dom.innerWidth=function(a){return a.clientWidth||a.innerWidth},b.Dom.addEvent=function(b,c,d){a.addEventListener?b.addEventListener(c,d,!1):b.attachEvent("on"+c,d)},b.Dom.removeEvent=function(b,c,d){a.removeEventListener?b.removeEventListener(c,d,!1):b.detachEvent("on"+c,d)},function(){function a(){var a=document.createElement("TABLE");a.style.borderSpacing=0,a.style.borderWidth=0,a.style.padding=0;var b=document.createElement("TBODY");a.appendChild(b),b.appendChild(document.createElement("TR")),b.firstChild.appendChild(document.createElement("TD")),b.firstChild.firstChild.innerHTML="<tr><td>t<br>t</td></tr>";var c=document.createElement("CAPTION");c.innerHTML="c<br>c<br>c<br>c",c.style.padding=0,c.style.margin=0,a.insertBefore(c,b),document.body.appendChild(a),d=a.offsetHeight<2*a.lastChild.offsetHeight,document.body.removeChild(a)}function c(){var a=document.createElement("p");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.visibility="hidden",b.style.width="200px",b.style.height="150px",b.style.overflow="hidden",b.appendChild(a),(document.body||document.documentElement).appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;return c==d&&(d=b.clientWidth),(document.body||document.documentElement).removeChild(b),c-d}var d;b.Dom.hasCaptionProblem=function(){return void 0===d&&a(),d},b.Dom.getCaretPosition=function(a){if(a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();if(null==b)return 0;var c=a.createTextRange(),d=c.duplicate();return c.moveToBookmark(b.getBookmark()),d.setEndPoint("EndToStart",c),d.text.length}return 0},b.Dom.getSelectionEndPosition=function(a){if(a.selectionEnd)return a.selectionEnd;if(document.selection){var b=document.selection.createRange();if(null==b)return 0;var c=a.createTextRange();return c.text.indexOf(b.text)+b.text.length}},b.Dom.setCaretPosition=function(a,b,c){if(void 0===c&&(c=b),a.setSelectionRange)a.focus(),a.setSelectionRange(b,c);else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select()}};var e;b.Dom.getScrollbarWidth=function(){return void 0===e&&(e=c()),e};var f=!document.createTextNode("test").textContent;b.Dom.isIE8=function(){return f};var g=!!document.documentMode;b.Dom.isIE9=function(){return g};var h=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);b.Dom.isSafari=function(){return h},b.Dom.setOverlayPosition=function(a,b,c){f||g?(a.style.top=c,a.style.left=b):h?a.style["-webkit-transform"]="translate3d("+b+","+c+",0)":a.style.transform="translate3d("+b+","+c+",0)"},b.Dom.getCssTransform=function(a){var b;return a.style.transform&&""!=(b=a.style.transform)?["transform",b]:a.style["-webkit-transform"]&&""!=(b=a.style["-webkit-transform"])?["-webkit-transform",b]:-1},b.Dom.resetCssTransform=function(a){a.transform&&""!=a.transform?a.transform="":a["-webkit-transform"]&&""!=a["-webkit-transform"]&&(a["-webkit-transform"]="")}}(),!a.Handsontable)var b={};b.countEventManagerListeners=0,b.eventManager=function(c){var d,e,f,g;if(!c)throw new Error("instance not defined");return c.eventListeners||(c.eventListeners=[]),d=function(d,f,g){var h;return h=function(a){var c,d,e=!1;if(void 0==a.target&&void 0!=a.srcElement&&(a.definePoperty?a.definePoperty("target",{value:a.srcElement}):a.target=a.srcElement),void 0==a.preventDefault&&(a.definePoperty?a.definePoperty("preventDefault",{value:function(){this.returnValue=!1}}):a.preventDefault=function(){this.returnValue=!1}),a.isTargetWebComponent=!1,b.eventManager.isHotTableEnv){for(a="undefined"==typeof wrap?a:wrap(a),d=a.path?a.path.length:0;d--;)"HOT-TABLE"===a.path[d].nodeName?e=!0:e&&a.path[d].shadowRoot&&(c=a.path[d]),0!==d||c||(c=a.path[d]);c||(c=a.target),a.isTargetWebComponent=!0,Object.defineProperty(a,"target",{get:function(){return"undefined"==typeof wrap?c:wrap(c)},enumerable:!0,configurable:!0})}g.call(this,a)},c.eventListeners.push({element:d,event:f,callback:g,callbackProxy:h}),a.addEventListener?d.addEventListener(f,h,!1):d.attachEvent("on"+f,h),b.countEventManagerListeners++,function(){e(d,f,g)}},e=function(a,d,e){for(var f,g=c.eventListeners.length;g--;)if(f=c.eventListeners[g],f.event==d&&f.element==a){if(e&&e!=f.callback)continue;c.eventListeners.splice(g,1),f.element.removeEventListener?f.element.removeEventListener(f.event,f.callbackProxy,!1):f.element.detachEvent("on"+f.event,f.callbackProxy),b.countEventManagerListeners--}},f=function(){for(var a,b=c.eventListeners.length;b--;)a=c.eventListeners[b],a&&e(a.element,a.event,a.callback)},g=function(b,c){var d,e;d={bubbles:!0,cancelable:"mousemove"!==c,view:a,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0},document.createEvent?(e=document.createEvent("MouseEvents"),e.initMouseEvent(c,d.bubbles,d.cancelable,d.view,d.detail,d.screenX,d.screenY,d.clientX,d.clientY,d.ctrlKey,d.altKey,d.shiftKey,d.metaKey,d.button,d.relatedTarget||document.body.parentNode)):e=document.createEventObject(),b.dispatchEvent?b.dispatchEvent(e):b.fireEvent("on"+c,e)},{addEventListener:d,removeEventListener:e,clear:f,fireEvent:g}},b.TableView=function(c){var d=this;this.eventManager=b.eventManager(c),this.instance=c,this.settings=c.getSettings();var e=c.rootElement.getAttribute("style");e&&c.rootElement.setAttribute("data-originalstyle",e),b.Dom.addClass(c.rootElement,"handsontable");var f=document.createElement("TABLE");f.className="htCore",this.THEAD=document.createElement("THEAD"),f.appendChild(this.THEAD),this.TBODY=document.createElement("TBODY"),f.appendChild(this.TBODY),c.table=f,c.container.insertBefore(f,c.container.firstChild),this.eventManager.addEventListener(c.rootElement,"mousedown",function(b){d.isTextSelectionAllowed(b.target)||(h(),b.preventDefault(),a.focus())}),this.eventManager.addEventListener(document.documentElement,"keyup",function(a){c.selection.isInProgress()&&!a.shiftKey&&c.selection.finish()});var g;this.isMouseDown=function(){return g},this.eventManager.addEventListener(document.documentElement,"mouseup",function(a){c.selection.isInProgress()&&1===a.which&&c.selection.finish(),g=!1,b.helper.isOutsideInput(document.activeElement)&&c.unlisten()}),this.eventManager.addEventListener(document.documentElement,"mousedown",function(a){var b=a.target;if(!g){if(b!==d.instance.container)for(;b!==document.documentElement;){if(null===b){if(a.isTargetWebComponent)break;return}if(b===c.rootElement)return;b=b.parentNode}d.settings.outsideClickDeselects?c.deselectCell():c.destroyEditor()}}),this.eventManager.addEventListener(f,"selectstart",function(a){d.settings.fragmentSelection||a.preventDefault()});var h=function(){a.getSelection?a.getSelection().empty?a.getSelection().empty():a.getSelection().removeAllRanges&&a.getSelection().removeAllRanges():document.selection&&document.selection.empty()},i=[new z({className:"current",border:{width:2,color:"#5292F7",cornerVisible:function(){return d.settings.fillHandle&&!d.isCellEdited()&&!c.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!d.isCellEdited()&&!c.selection.isMultiple()
}}}),new z({className:"area",border:{width:1,color:"#89AFF9",cornerVisible:function(){return d.settings.fillHandle&&!d.isCellEdited()&&c.selection.isMultiple()},multipleSelectionHandlesVisible:function(){return!d.isCellEdited()&&c.selection.isMultiple()}}}),new z({className:"highlight",highlightRowClassName:d.settings.currentRowClassName,highlightColumnClassName:d.settings.currentColClassName}),new z({className:"fill",border:{width:1,color:"red"}})];i.current=i[0],i.area=i[1],i.highlight=i[2],i.fill=i[3];var j={debug:function(){return d.settings.debug},table:f,stretchH:this.settings.stretchH,data:c.getDataAtCell,totalRows:c.countRows,totalColumns:c.countCols,fixedColumnsLeft:function(){return d.settings.fixedColumnsLeft},fixedRowsTop:function(){return d.settings.fixedRowsTop},renderAllRows:d.settings.renderAllRows,rowHeaders:function(){var a=[];return c.hasRowHeaders()&&a.push(function(a,b){d.appendRowHeader(a,b)}),b.hooks.run(c,"afterGetRowHeaderRenderers",a),a},columnHeaders:function(){var a=[];return c.hasColHeaders()&&a.push(function(a,b){d.appendColHeader(a,b)}),b.hooks.run(c,"afterGetColumnHeaderRenderers",a),a},columnWidth:c.getColWidth,rowHeight:c.getRowHeight,cellRenderer:function(a,c,e){var f=d.instance.colToProp(c),g=d.instance.getCellMeta(a,c),h=d.instance.getCellRenderer(g),i=d.instance.getDataAtRowProp(a,f);h(d.instance,e,a,c,f,i,g),b.hooks.run(d.instance,"afterRenderer",e,a,c,f,i,g)},selections:i,hideBorderOnMouseDownOver:function(){return d.settings.fragmentSelection},onCellMouseDown:function(a,e,f,h){c.listen(),d.activeWt=h,g=!0,b.Dom.enableImmediatePropagation(a),b.hooks.run(c,"beforeOnCellMouseDown",a,e,f),a.isImmediatePropagationStopped()||(2===a.button&&c.selection.inInSelection(e)||(a.shiftKey?e.row>=0&&e.col>=0&&c.selection.setRangeEnd(e):(e.row<0||e.col<0)&&(e.row>=0||e.col>=0)?(e.row<0&&(c.selectCell(0,e.col,c.countRows()-1,e.col),c.selection.setSelectedHeaders(!1,!0)),e.col<0&&(c.selectCell(e.row,0,e.row,c.countCols()-1),c.selection.setSelectedHeaders(!0,!1))):(e.row=e.row<0?0:e.row,e.col=e.col<0?0:e.col,c.selection.setRangeStart(e))),b.hooks.run(c,"afterOnCellMouseDown",a,e,f),d.activeWt=d.wt)},onCellMouseOver:function(a,e,f,h){d.activeWt=h,e.row>=0&&e.col>=0?g&&c.selection.setRangeEnd(e):g&&(e.row<0&&(c.selection.setRangeEnd(new l(c.countRows()-1,e.col)),c.selection.setSelectedHeaders(!1,!0)),e.col<0&&(c.selection.setRangeEnd(new l(e.row,c.countCols()-1)),c.selection.setSelectedHeaders(!0,!1))),b.hooks.run(c,"afterOnCellMouseOver",a,e,f),d.activeWt=d.wt},onCellCornerMouseDown:function(a){a.preventDefault(),b.hooks.run(c,"afterOnCellCornerMouseDown",a)},beforeDraw:function(a){d.beforeRender(a)},onDraw:function(a){d.onDraw(a)},onScrollVertically:function(){c.runHooks("afterScrollVertically")},onScrollHorizontally:function(){c.runHooks("afterScrollHorizontally")},onBeforeDrawBorders:function(a,b){c.runHooks("beforeDrawBorders",a,b)},onBeforeTouchScroll:function(){c.runHooks("beforeTouchScroll")},onAfterMomentumScroll:function(){c.runHooks("afterMomentumScroll")},viewportRowCalculatorOverride:function(a){d.settings.viewportRowRenderingOffset&&(a.startRow=Math.max(a.startRow-d.settings.viewportRowRenderingOffset,0),a.endRow=Math.min(a.endRow+d.settings.viewportRowRenderingOffset,c.countRows()-1)),c.runHooks("afterViewportRowCalculatorOverride",a)},viewportColumnCalculatorOverride:function(a){d.settings.viewportColumnRenderingOffset&&(a.startColumn=Math.max(a.startColumn-d.settings.viewportColumnRenderingOffset,0),a.endColumn=Math.min(a.endColumn+d.settings.viewportColumnRenderingOffset,c.countCols()-1)),c.runHooks("afterViewportColumnCalculatorOverride",a)}};b.hooks.run(c,"beforeInitWalkontable",j),this.wt=new p(j),this.activeWt=this.wt,this.eventManager.addEventListener(d.wt.wtTable.spreader,"mousedown",function(a){a.target===d.wt.wtTable.spreader&&3===a.which&&b.helper.stopPropagation(a)}),this.eventManager.addEventListener(d.wt.wtTable.spreader,"contextmenu",function(a){a.target===d.wt.wtTable.spreader&&3===a.which&&b.helper.stopPropagation(a)}),this.eventManager.addEventListener(document.documentElement,"click",function(){d.settings.observeDOMVisibility&&d.wt.drawInterrupted&&(d.instance.forceFullRender=!0,d.render())})},b.TableView.prototype.isTextSelectionAllowed=function(a){return b.helper.isInput(a)?!0:this.settings.fragmentSelection&&b.Dom.isChildOf(a,this.TBODY)?!0:!1},b.TableView.prototype.isCellEdited=function(){var a=this.instance.getActiveEditor();return a&&a.isOpened()},b.TableView.prototype.beforeRender=function(a){a&&b.hooks.run(this.instance,"beforeRender",this.instance.forceFullRender)},b.TableView.prototype.onDraw=function(a){a&&b.hooks.run(this.instance,"afterRender",this.instance.forceFullRender)},b.TableView.prototype.render=function(){this.wt.draw(!this.instance.forceFullRender),this.instance.forceFullRender=!1},b.TableView.prototype.getCellAtCoords=function(a,b){var c=this.wt.getCell(a,b);return 0>c?null:c},b.TableView.prototype.scrollViewport=function(a){this.wt.scrollViewport(a)},b.TableView.prototype.appendRowHeader=function(a,c){var d=document.createElement("DIV"),e=document.createElement("SPAN");d.className="relative",e.className="rowHeader",a>-1?b.Dom.fastInnerHTML(e,this.instance.getRowHeader(a)):b.Dom.fastInnerText(e,String.fromCharCode(160)),d.appendChild(e),b.Dom.empty(c),c.appendChild(d),b.hooks.run(this.instance,"afterGetRowHeader",a,c)},b.TableView.prototype.appendColHeader=function(a,c){var d=document.createElement("DIV"),e=document.createElement("SPAN");d.className="relative",e.className="colHeader",a>-1?b.Dom.fastInnerHTML(e,this.instance.getColHeader(a)):(b.Dom.fastInnerText(e,String.fromCharCode(160)),b.Dom.addClass(e,"cornerHeader")),d.appendChild(e),b.Dom.empty(c),c.appendChild(d),b.hooks.run(this.instance,"afterGetColHeader",a,c)},b.TableView.prototype.maximumVisibleElementWidth=function(a){var b=this.wt.wtViewport.getWorkspaceWidth(),c=b-a;return c>0?c:0},b.TableView.prototype.maximumVisibleElementHeight=function(a){var b=this.wt.wtViewport.getWorkspaceHeight(),c=b-a;return c>0?c:0},b.TableView.prototype.mainViewIsActive=function(){return this.wt===this.activeWt},b.TableView.prototype.destroy=function(){this.wt.destroy(),this.eventManager.clear()},function(a){function b(a){var b,c;c={},b=a,this.getInstance=function(a){return a.guid in c||(c[a.guid]=new b(a)),c[a.guid]}}var c={},d=new WeakMap;a.editors={registerEditor:function(a,e){var f=new b(e);"string"==typeof a&&(c[a]=f),d.set(e,f)},getEditor:function(a,b){var e;if("function"==typeof a)d.get(a)||this.registerEditor(null,a),e=d.get(a);else{if("string"!=typeof a)throw Error('Only strings and functions can be passed as "editor" parameter ');e=c[a]}if(!e)throw Error('No editor registered under name "'+a+'"');return e.getInstance(b)}}}(b),function(a){a.EditorManager=function(b,c,d){function e(a){var b="function"==typeof c.settings.enterMoves?c.settings.enterMoves(event):c.settings.enterMoves;a?d.transformStart(-b.row,-b.col):d.transformStart(b.row,b.col,!0)}function f(a){a?d.transformEnd(-1,0):d.transformStart(-1,0)}function g(a){a?d.transformEnd(1,0):d.transformStart(1,0)}function h(a){a?d.transformEnd(0,1):d.transformStart(0,1)}function i(a){a?d.transformEnd(0,-1):d.transformStart(0,-1)}function j(j){var k,m;if(b.isListening()&&(a.hooks.run(b,"beforeKeyDown",j),!q&&(a.Dom.enableImmediatePropagation(j),!j.isImmediatePropagationStopped()&&(c.lastKeyCode=j.keyCode,d.isSelected())))){if(k=(j.ctrlKey||j.metaKey)&&!j.altKey,n&&!n.isWaiting()&&!a.helper.isMetaKey(j.keyCode)&&!k&&!o.isEditorOpened())return void o.openEditor("",j);switch(m=j.shiftKey?d.setRangeEnd:d.setRangeStart,j.keyCode){case p.A:k&&(d.selectAll(),j.preventDefault(),a.helper.stopPropagation(j));break;case p.ARROW_UP:o.isEditorOpened()&&n&&!n.isWaiting()&&o.closeEditorAndSaveChanges(k),f(j.shiftKey),j.preventDefault(),a.helper.stopPropagation(j);break;case p.ARROW_DOWN:o.isEditorOpened()&&n&&!n.isWaiting()&&o.closeEditorAndSaveChanges(k),g(j.shiftKey),j.preventDefault(),a.helper.stopPropagation(j);break;case p.ARROW_RIGHT:o.isEditorOpened()&&n&&!n.isWaiting()&&o.closeEditorAndSaveChanges(k),h(j.shiftKey),j.preventDefault(),a.helper.stopPropagation(j);break;case p.ARROW_LEFT:o.isEditorOpened()&&n&&!n.isWaiting()&&o.closeEditorAndSaveChanges(k),i(j.shiftKey),j.preventDefault(),a.helper.stopPropagation(j);break;case p.TAB:var r="function"==typeof c.settings.tabMoves?c.settings.tabMoves(j):c.settings.tabMoves;j.shiftKey?d.transformStart(-r.row,-r.col):d.transformStart(r.row,r.col,!0),j.preventDefault(),a.helper.stopPropagation(j);break;case p.BACKSPACE:case p.DELETE:d.empty(j),o.prepareEditor(),j.preventDefault();break;case p.F2:o.openEditor(null,j),j.preventDefault();break;case p.ENTER:o.isEditorOpened()?(n&&n.state!==a.EditorState.WAITING&&o.closeEditorAndSaveChanges(k),e(j.shiftKey)):b.getSettings().enterBeginsEditing?o.openEditor(null,j):e(j.shiftKey),j.preventDefault(),j.stopImmediatePropagation();break;case p.ESCAPE:o.isEditorOpened()&&o.closeEditorAndRestoreOriginalValue(k),j.preventDefault();break;case p.HOME:m(j.ctrlKey||j.metaKey?new l(0,c.selRange.from.col):new l(c.selRange.from.row,0)),j.preventDefault(),a.helper.stopPropagation(j);break;case p.END:m(j.ctrlKey||j.metaKey?new l(b.countRows()-1,c.selRange.from.col):new l(c.selRange.from.row,b.countCols()-1)),j.preventDefault(),a.helper.stopPropagation(j);break;case p.PAGE_UP:d.transformStart(-b.countVisibleRows(),0),j.preventDefault(),a.helper.stopPropagation(j);break;case p.PAGE_DOWN:d.transformStart(b.countVisibleRows(),0),j.preventDefault(),a.helper.stopPropagation(j)}}}function k(){function a(a,b,c){"TD"==c.nodeName&&o.openEditor()}b.addHook("afterDocumentKeyDown",j),m.addEventListener(document.documentElement,"keydown",function(a){b.runHooks("afterDocumentKeyDown",a)}),b.view.wt.update("onCellDblClick",a),b.addHook("afterDestroy",function(){q=!0})}var m,n,o=this,p=a.helper.keyCode,q=!1;m=a.eventManager(b),this.destroyEditor=function(a){this.closeEditor(a)},this.getActiveEditor=function(){return n},this.prepareEditor=function(){var d,e,f,g,h,i,j;return n&&n.isWaiting()?void this.closeEditor(!1,!1,function(a){a&&o.prepareEditor()}):(d=c.selRange.highlight.row,e=c.selRange.highlight.col,f=b.colToProp(e),g=b.getCell(d,e),h=b.getDataAtCell(d,e),i=b.getCellMeta(d,e),j=b.getCellEditor(i),void(j?(n=a.editors.getEditor(j,b),n.prepare(d,e,f,g,h,i)):n=void 0))},this.isEditorOpened=function(){return n&&n.isOpened()},this.openEditor=function(a,b){n&&!n.cellProperties.readOnly&&n.beginEditing(a,b)},this.closeEditor=function(a,b,c){n?n.finishEditing(a,b,c):c&&c(!1)},this.closeEditorAndSaveChanges=function(a){return this.closeEditor(!1,a)},this.closeEditorAndRestoreOriginalValue=function(a){return this.closeEditor(!0,a)},k()}}(b),function(a){var b={};a.renderers={registerRenderer:function(a,c){b[a]=c},getRenderer:function(a){if("function"==typeof a)return a;if("string"!=typeof a)throw Error('Only strings and functions can be passed as "renderer" parameter ');if(!(a in b))throw Error('No editor registered under name "'+a+'"');return b[a]}}}(b),b.helper={},b.helper.isPrintableChar=function(a){return 32==a||a>=48&&57>=a||a>=96&&111>=a||a>=186&&192>=a||a>=219&&222>=a||a>=226||a>=65&&90>=a},b.helper.isMetaKey=function(a){var c=b.helper.keyCode,d=[c.ARROW_DOWN,c.ARROW_UP,c.ARROW_LEFT,c.ARROW_RIGHT,c.HOME,c.END,c.DELETE,c.BACKSPACE,c.F1,c.F2,c.F3,c.F4,c.F5,c.F6,c.F7,c.F8,c.F9,c.F10,c.F11,c.F12,c.TAB,c.PAGE_DOWN,c.PAGE_UP,c.ENTER,c.ESCAPE,c.SHIFT,c.CAPS_LOCK,c.ALT];return-1!=d.indexOf(a)},b.helper.isCtrlKey=function(a){var c=b.helper.keyCode;return-1!=[c.CONTROL_LEFT,224,c.COMMAND_LEFT,c.COMMAND_RIGHT].indexOf(a)},b.helper.stringify=function(a){switch(typeof a){case"string":case"number":return a+"";case"object":return null===a?"":a.toString();case"undefined":return"";default:return a.toString()}},b.helper.spreadsheetColumnLabel=function(a){for(var b,c=a+1,d="";c>0;)b=(c-1)%26,d=String.fromCharCode(65+b)+d,c=parseInt((c-b)/26,10);return d},b.helper.createSpreadsheetData=function(a,c){a="number"==typeof a?a:100,c="number"==typeof c?c:4;var d,e,f=[];for(d=0;a>d;d++){var g=[];for(e=0;c>e;e++)g.push(b.helper.spreadsheetColumnLabel(e)+(d+1));f.push(g)}return f},b.helper.createSpreadsheetObjectData=function(a,c){a="number"==typeof a?a:100,c="number"==typeof c?c:4;var d,e,f=[];for(d=0;a>d;d++){var g={};for(e=0;c>e;e++)g["prop"+e]=b.helper.spreadsheetColumnLabel(e)+(d+1);f.push(g)}return f},b.helper.isNumeric=function(a){var b=typeof a;return"number"==b?!isNaN(a)&&isFinite(a):"string"==b?a.length?1==a.length?/\d/.test(a):/^\s*[+-]?\s*(?:(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?)|(?:0x[a-f\d]+))\s*$/i.test(a):!1:"object"==b?!(!a||"number"!=typeof a.valueOf()||a instanceof Date):!1},b.helper.randomString=function(){return s()},b.helper.inherit=function(a,b){return b.prototype.constructor=b,a.prototype=new b,a.prototype.constructor=a,a},b.helper.extend=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},b.helper.deepExtend=function(a,c){for(var d in c)c.hasOwnProperty(d)&&(c[d]&&"object"==typeof c[d]?(a[d]||(a[d]=Array.isArray(c[d])?[]:{}),b.helper.deepExtend(a[d],c[d])):a[d]=c[d])},b.helper.deepClone=function(a){return"object"==typeof a?JSON.parse(JSON.stringify(a)):a},b.helper.getPrototypeOf=function(a){var b;if("object"==typeof a.__proto__)b=a.__proto__;else{var c,d=a.constructor;"function"==typeof a.constructor&&(c=d,delete a.constructor&&(d=a.constructor,a.constructor=c)),b=d?d.prototype:null}return b},b.helper.columnFactory=function(a,c){function d(){}b.helper.inherit(d,a);for(var e=0,f=c.length;f>e;e++)d.prototype[c[e]]=void 0;return d},b.helper.translateRowsToColumns=function(a){var b,c,d,e,f=[],g=0;for(b=0,c=a.length;c>b;b++)for(d=0,e=a[b].length;e>d;d++)d==g&&(f.push([]),g++),f[d].push(a[b][d]);return f},b.helper.to2dArray=function(a){for(var b=0,c=a.length;c>b;)a[b]=[a[b]],b++},b.helper.extendArray=function(a,b){for(var c=0,d=b.length;d>c;)a.push(b[c]),c++},b.helper.isInput=function(a){var b=["INPUT","SELECT","TEXTAREA"];return b.indexOf(a.nodeName)>-1},b.helper.isOutsideInput=function(a){return b.helper.isInput(a)&&-1==a.className.indexOf("handsontableInput")},b.helper.keyCode={MOUSE_LEFT:1,MOUSE_RIGHT:3,MOUSE_MIDDLE:2,BACKSPACE:8,COMMA:188,INSERT:45,DELETE:46,END:35,ENTER:13,ESCAPE:27,CONTROL_LEFT:91,COMMAND_LEFT:17,COMMAND_RIGHT:93,ALT:18,HOME:36,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,SPACE:32,SHIFT:16,CAPS_LOCK:20,TAB:9,ARROW_RIGHT:39,ARROW_LEFT:37,ARROW_UP:38,ARROW_DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,A:65,X:88,C:67,V:86},b.helper.isObject=function(a){return"[object Object]"==Object.prototype.toString.call(a)},b.helper.pivot=function(a){var b=[];if(!a||0===a.length||!a[0]||0===a[0].length)return b;for(var c=a.length,d=a[0].length,e=0;c>e;e++)for(var f=0;d>f;f++)b[f]||(b[f]=[]),b[f][e]=a[e][f];return b},b.helper.proxy=function(a,b){return function(){return a.apply(b,arguments)}},b.helper.cellMethodLookupFactory=function(a,c){function d(a){var c=b.cellTypes[a];if("undefined"==typeof c)throw new Error('You declared cell type "'+a+'" as a string that is not mapped to a known object. Cell type must be an object or a string mapped to an object in Handsontable.cellTypes');return c}return c="undefined"==typeof c?!0:c,function(e,f){return function g(e){if(e){if(e.hasOwnProperty(a)&&void 0!==e[a])return e[a];if(e.hasOwnProperty("type")&&e.type){var f;if("string"!=typeof e.type)throw new Error("Cell type must be a string ");if(f=d(e.type),f.hasOwnProperty(a))return f[a];if(c)return}return g(b.helper.getPrototypeOf(e))}}("number"==typeof e?this.getCellMeta(e,f):e)}},b.helper.isMobileBrowser=function(a){return a||(a=navigator.userAgent),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)},b.helper.isTouchSupported=function(){return"ontouchstart"in a},b.helper.stopPropagation=function(a){"function"==typeof a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},b.helper.pageX=function(a){if(a.pageX)return a.pageX;var c=b.Dom.getWindowScrollLeft(),d=a.clientX+c;return d},b.helper.pageY=function(a){if(a.pageY)return a.pageY;var c=b.Dom.getWindowScrollTop(),d=a.clientY+c;return d},function(a){a.DataMap=function(a,b,c){this.instance=a,this.priv=b,this.GridSettings=c,this.dataSource=this.instance.getSettings().data,this.duckSchema=this.dataSource[0]?this.recursiveDuckSchema(this.dataSource[0]):{},this.createMap()},a.DataMap.prototype.DESTINATION_RENDERER=1,a.DataMap.prototype.DESTINATION_CLIPBOARD_GENERATOR=2,a.DataMap.prototype.recursiveDuckSchema=function(a){var b;if(Array.isArray(a))b=[];else{b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]="object"!=typeof a[c]||Array.isArray(a[c])?null:this.recursiveDuckSchema(a[c]))}return b},a.DataMap.prototype.recursiveDuckColumns=function(a,b,c){var d,e;if("undefined"==typeof b&&(b=0,c=""),"object"==typeof a&&!Array.isArray(a))for(e in a)a.hasOwnProperty(e)&&(null===a[e]?(d=c+e,this.colToPropCache.push(d),this.propToColCache.set(d,b),b++):b=this.recursiveDuckColumns(a[e],b,e+"."));return b},a.DataMap.prototype.createMap=function(){var a,b,c=this.getSchema();if("undefined"==typeof c)throw new Error("trying to create `columns` definition but you didnt' provide `schema` nor `data`");this.colToPropCache=[],this.propToColCache=new MultiMap;var d=this.instance.getSettings().columns;if(d)for(a=0,b=d.length;b>a;a++)"undefined"!=typeof d[a].data&&(this.colToPropCache[a]=d[a].data,this.propToColCache.set(d[a].data,a));else this.recursiveDuckColumns(c)},a.DataMap.prototype.colToProp=function(b){return b=a.hooks.run(this.instance,"modifyCol",b),this.colToPropCache&&"undefined"!=typeof this.colToPropCache[b]?this.colToPropCache[b]:b},a.DataMap.prototype.propToCol=function(b){var c;return c="undefined"!=typeof this.propToColCache.get(b)?this.propToColCache.get(b):b,c=a.hooks.run(this.instance,"modifyCol",c)},a.DataMap.prototype.getSchema=function(){var a=this.instance.getSettings().dataSchema;return a?"function"==typeof a?a():a:this.duckSchema},a.DataMap.prototype.createRow=function(b,c,d){var e,f,g=this.instance.countCols(),h=0;c||(c=1),("number"!=typeof b||b>=this.instance.countRows())&&(b=this.instance.countRows()),f=b;for(var i=this.instance.getSettings().maxRows;c>h&&this.instance.countRows()<i;){if("array"===this.instance.dataType){e=[];for(var j=0;g>j;j++)e.push(null)}else"function"===this.instance.dataType?e=this.instance.getSettings().dataSchema(b):(e={},a.helper.deepExtend(e,this.getSchema()));b===this.instance.countRows()?this.dataSource.push(e):this.dataSource.splice(b,0,e),h++,f++}return a.hooks.run(this.instance,"afterCreateRow",b,h,d),this.instance.forceFullRender=!0,h},a.DataMap.prototype.createCol=function(b,c,d){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("Cannot create new column. When data source in an object, you can only have as much columns as defined in first data row, data schema or in the 'columns' setting.If you want to be able to add new columns, you have to use array datasource.");var e,f,g=this.instance.countRows(),h=this.dataSource,i=0;c||(c=1),f=b;for(var j=this.instance.getSettings().maxCols;c>i&&this.instance.countCols()<j;){if(e=a.helper.columnFactory(this.GridSettings,this.priv.columnsSettingConflicts),"number"!=typeof b||b>=this.instance.countCols()){for(var k=0;g>k;k++)"undefined"==typeof h[k]&&(h[k]=[]),h[k].push(null);this.priv.columnSettings.push(e)}else{for(var k=0;g>k;k++)h[k].splice(f,0,null);this.priv.columnSettings.splice(f,0,e)}i++,f++}return a.hooks.run(this.instance,"afterCreateCol",b,i,d),this.instance.forceFullRender=!0,i},a.DataMap.prototype.removeRow=function(b,c){c||(c=1),"number"!=typeof b&&(b=-c),b=(this.instance.countRows()+b)%this.instance.countRows();var d=this.physicalRowsToLogical(b,c),e=a.hooks.run(this.instance,"beforeRemoveRow",b,c);if(e!==!1){var f=this.dataSource,g=f.filter(function(a,b){return-1==d.indexOf(b)});f.length=0,Array.prototype.push.apply(f,g),a.hooks.run(this.instance,"afterRemoveRow",b,c),this.instance.forceFullRender=!0}},a.DataMap.prototype.removeCol=function(b,c){if("object"===this.instance.dataType||this.instance.getSettings().columns)throw new Error("cannot remove column with object data source or columns option specified");c||(c=1),"number"!=typeof b&&(b=-c),b=(this.instance.countCols()+b)%this.instance.countCols();var d=a.hooks.run(this.instance,"beforeRemoveCol",b,c);if(d!==!1){for(var e=this.dataSource,f=0,g=this.instance.countRows();g>f;f++)e[f].splice(b,c);this.priv.columnSettings.splice(b,c),a.hooks.run(this.instance,"afterRemoveCol",b,c),this.instance.forceFullRender=!0}},a.DataMap.prototype.spliceCol=function(b,c,d){var e=4<=arguments.length?[].slice.call(arguments,3):[],f=this.instance.getDataAtCol(b),g=f.slice(c,c+d),h=f.slice(c+d);a.helper.extendArray(e,h);for(var i=0;d>i;)e.push(null),i++;return a.helper.to2dArray(e),this.instance.populateFromArray(c,b,e,null,null,"spliceCol"),g},a.DataMap.prototype.spliceRow=function(b,c,d){var e=4<=arguments.length?[].slice.call(arguments,3):[],f=this.instance.getSourceDataAtRow(b),g=f.slice(c,c+d),h=f.slice(c+d);a.helper.extendArray(e,h);for(var i=0;d>i;)e.push(null),i++;return this.instance.populateFromArray(b,c,[e],null,null,"spliceRow"),g},a.DataMap.prototype.get=function(b,c){if(b=a.hooks.run(this.instance,"modifyRow",b),"string"==typeof c&&c.indexOf(".")>-1){var d=c.split("."),e=this.dataSource[b];if(!e)return null;for(var f=0,g=d.length;g>f;f++)if(e=e[d[f]],"undefined"==typeof e)return null;return e}return"function"==typeof c?c(this.dataSource.slice(b,b+1)[0]):this.dataSource[b]?this.dataSource[b][c]:null};var b=a.helper.cellMethodLookupFactory("copyable",!1);a.DataMap.prototype.getCopyable=function(a,c){return b.call(this.instance,a,this.propToCol(c))?this.get(a,c):""},a.DataMap.prototype.set=function(b,c,d,e){if(b=a.hooks.run(this.instance,"modifyRow",b,e||"datamapGet"),"string"==typeof c&&c.indexOf(".")>-1){for(var f=c.split("."),g=this.dataSource[b],h=0,i=f.length-1;i>h;h++)"undefined"==typeof g[f[h]]&&(g[f[h]]={}),g=g[f[h]];g[f[h]]=d}else"function"==typeof c?c(this.dataSource.slice(b,b+1)[0],d):this.dataSource[b][c]=d},a.DataMap.prototype.physicalRowsToLogical=function(b,c){for(var d,e=this.instance.countRows(),f=(e+b)%e,g=[],h=c;e>f&&h;)d=a.hooks.run(this.instance,"modifyRow",f),g.push(d),h--,f++;return g},a.DataMap.prototype.clear=function(){for(var a=0;a<this.instance.countRows();a++)for(var b=0;b<this.instance.countCols();b++)this.set(a,this.colToProp(b),"")},a.DataMap.prototype.getAll=function(){return this.dataSource},a.DataMap.prototype.getRange=function(a,b,c){var d,e,f,g,h,i=[],j=c===this.DESTINATION_CLIPBOARD_GENERATOR?this.getCopyable:this.get;for(e=Math.max(a.row,b.row),g=Math.max(a.col,b.col),d=Math.min(a.row,b.row);e>=d;d++){for(h=[],f=Math.min(a.col,b.col);g>=f;f++)h.push(j.call(this,d,this.colToProp(f)));i.push(h)}return i},a.DataMap.prototype.getText=function(a,b){return SheetClip.stringify(this.getRange(a,b,this.DESTINATION_RENDERER))},a.DataMap.prototype.getCopyableText=function(a,b){return SheetClip.stringify(this.getRange(a,b,this.DESTINATION_CLIPBOARD_GENERATOR))}}(b),function(a){a.renderers.cellDecorator=function(b,c,d,e,f,g,h){h.className&&(c.className=c.className?c.className+" "+h.className:h.className),h.readOnly&&a.Dom.addClass(c,h.readOnlyCellClassName),h.valid===!1&&h.invalidCellClassName?a.Dom.addClass(c,h.invalidCellClassName):a.Dom.removeClass(c,h.invalidCellClassName),h.wordWrap===!1&&h.noWordWrapClassName&&a.Dom.addClass(c,h.noWordWrapClassName),!g&&h.placeholder&&a.Dom.addClass(c,h.placeholderCellClassName)}}(b),function(a){var b=function(b,c,d,e,f,g,h){a.renderers.cellDecorator.apply(this,arguments),!g&&h.placeholder&&(g=h.placeholder);var i=a.helper.stringify(g);if(b.getSettings().trimWhitespace||(i=i.replace(/ /g,String.fromCharCode(160))),h.rendererTemplate){a.Dom.empty(c);var j=document.createElement("TEMPLATE");j.setAttribute("bind","{{}}"),j.innerHTML=h.rendererTemplate,HTMLTemplateElement.decorate(j),j.model=b.getSourceDataAtRow(d),c.appendChild(j)}else a.Dom.fastInnerText(c,i)};a.renderers.TextRenderer=b,a.renderers.registerRenderer("text",b)}(b),function(a){var b=document.createElement("DIV");b.className="htAutocompleteWrapper";var c=document.createElement("DIV");c.className="htAutocompleteArrow",c.appendChild(document.createTextNode(String.fromCharCode(9660)));var d=function(d,e,f,g,h,i,j){var k=(b.cloneNode(!0),c.cloneNode(!0));if(a.renderers.TextRenderer(d,e,f,g,h,i,j),e.appendChild(k),a.Dom.addClass(e,"htAutocomplete"),e.firstChild||e.appendChild(document.createTextNode(String.fromCharCode(160))),!d.acArrowListener){var m=a.eventManager(d);d.acArrowListener=function(b){a.Dom.hasClass(b.target,"htAutocompleteArrow")&&d.view.wt.getSetting("onCellDblClick",null,new l(f,g),e)},m.addEventListener(d.rootElement,"mousedown",d.acArrowListener),d.addHookOnce("afterDestroy",function(){m.clear()})}};a.AutocompleteRenderer=d,a.renderers.AutocompleteRenderer=d,a.renderers.registerRenderer("autocomplete",d)}(b),function(a){var b=document.createElement("INPUT");b.className="htCheckboxRendererInput",b.type="checkbox",b.setAttribute("autocomplete","off");var c=function(c,d,e,f,g,h,i){var j=a.eventManager(c);"undefined"==typeof i.checkedTemplate&&(i.checkedTemplate=!0),"undefined"==typeof i.uncheckedTemplate&&(i.uncheckedTemplate=!1),a.Dom.empty(d);var k=b.cloneNode(!1);h===i.checkedTemplate||h===a.helper.stringify(i.checkedTemplate)?(k.checked=!0,d.appendChild(k)):h===i.uncheckedTemplate||h===a.helper.stringify(i.uncheckedTemplate)?d.appendChild(k):null===h?(k.className+=" noValue",d.appendChild(k)):a.Dom.fastInnerText(d,"#bad value#"),i.readOnly?j.addEventListener(k,"click",function(a){a.preventDefault()}):(j.addEventListener(k,"mousedown",function(b){a.helper.stopPropagation(b)}),j.addEventListener(k,"mouseup",function(b){a.helper.stopPropagation(b)}),j.addEventListener(k,"change",function(){this.checked?c.setDataAtRowProp(e,g,i.checkedTemplate):c.setDataAtRowProp(e,g,i.uncheckedTemplate)})),c.CheckboxRenderer&&c.CheckboxRenderer.beforeKeyDownHookBound||(c.CheckboxRenderer={beforeKeyDownHookBound:!0},c.addHook("beforeKeyDown",function(b){if(a.Dom.enableImmediatePropagation(b),b.keyCode==a.helper.keyCode.SPACE||b.keyCode==a.helper.keyCode.ENTER)for(var d,e,f,g=c.getSelectedRange(),h=g.getTopLeftCorner(),i=g.getBottomRightCorner(),k=h.row;k<=i.row;k++)for(var l=h.col;l<=i.col;l++)if(d=c.getCell(k,l),f=c.getCellMeta(k,l),e=d.querySelectorAll("input[type=checkbox]"),e.length>0&&!f.readOnly){b.isImmediatePropagationStopped()||(b.stopImmediatePropagation(),b.preventDefault());for(var m=0,n=e.length;n>m;m++)e[m].checked=!e[m].checked,j.fireEvent(e[m],"change")}}))};a.CheckboxRenderer=c,a.renderers.CheckboxRenderer=c,a.renderers.registerRenderer("checkbox",c)}(b),function(a){var b=function(b,c,d,e,f,g,h){a.helper.isNumeric(g)&&("undefined"!=typeof h.language&&numeral.language(h.language),g=numeral(g).format(h.format||"0"),a.Dom.addClass(c,"htNumeric")),a.renderers.TextRenderer(b,c,d,e,f,g,h)};a.NumericRenderer=b,a.renderers.NumericRenderer=b,a.renderers.registerRenderer("numeric",b)}(b),function(a){var b=function(b,c,d,e,f,g,h){a.renderers.TextRenderer.apply(this,arguments),g=c.innerHTML;var i,j=h.hashLength||g.length,k=h.hashSymbol||"*";for(i="";i.split(k).length-1<j;i+=k);a.Dom.fastInnerHTML(c,i)};a.PasswordRenderer=b,a.renderers.PasswordRenderer=b,a.renderers.registerRenderer("password",b)}(b),function(a){function b(b,c,d,e,f,g){a.renderers.cellDecorator.apply(this,arguments),a.Dom.fastInnerHTML(c,g)}a.renderers.registerRenderer("html",b),a.renderers.HtmlRenderer=b}(b),function(a){function b(b){this.instance=b,this.state=a.EditorState.VIRGIN,this._opened=!1,this._closeCallback=null,this.init()}a.EditorState={VIRGIN:"STATE_VIRGIN",EDITING:"STATE_EDITING",WAITING:"STATE_WAITING",FINISHED:"STATE_FINISHED"},b.prototype._fireCallbacks=function(a){this._closeCallback&&(this._closeCallback(a),this._closeCallback=null)},b.prototype.init=function(){},b.prototype.getValue=function(){throw Error("Editor getValue() method unimplemented")},b.prototype.setValue=function(){throw Error("Editor setValue() method unimplemented")},b.prototype.open=function(){throw Error("Editor open() method unimplemented")},b.prototype.close=function(){throw Error("Editor close() method unimplemented")},b.prototype.prepare=function(b,c,d,e,f,g){this.TD=e,this.row=b,this.col=c,this.prop=d,this.originalValue=f,this.cellProperties=g,this.state=a.EditorState.VIRGIN},b.prototype.extend=function(){function a(){c.apply(this,arguments)}function b(a,b){function c(){}return c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a}var c=this.constructor;return b(a,c)},b.prototype.saveValue=function(a,b){var c,d;b?(c=this.instance.getSelected(),c[0]>c[2]&&(d=c[0],c[0]=c[2],c[2]=d),c[1]>c[3]&&(d=c[1],c[1]=c[3],c[3]=d),this.instance.populateFromArray(c[0],c[1],a,c[2],c[3],"edit")):this.instance.populateFromArray(this.row,this.col,a,null,null,"edit")},b.prototype.beginEditing=function(b,c){this.state==a.EditorState.VIRGIN&&(this.instance.view.scrollViewport(new l(this.row,this.col)),this.instance.view.render(),this.state=a.EditorState.EDITING,b="string"==typeof b?b:this.originalValue,this.setValue(a.helper.stringify(b)),this.open(c),this._opened=!0,this.focus(),this.instance.view.render())},b.prototype.finishEditing=function(b,c,d){var e,f=this;if(d){var g=this._closeCallback;this._closeCallback=function(a){g&&g(a),d(a)}}if(!this.isWaiting()){if(this.state==a.EditorState.VIRGIN)return void this.instance._registerTimeout(setTimeout(function(){f._fireCallbacks(!0)},0));if(this.state==a.EditorState.EDITING){if(b)return this.cancelChanges(),void this.instance.view.render();e=this.instance.getSettings().trimWhitespace?[["string"==typeof this.getValue()?String.prototype.trim.call(this.getValue()||""):this.getValue()]]:[[this.getValue()]],this.state=a.EditorState.WAITING,this.saveValue(e,c),this.instance.getCellValidator(this.cellProperties)?this.instance.addHookOnce("postAfterValidate",function(b){f.state=a.EditorState.FINISHED,f.discardEditor(b)}):(this.state=a.EditorState.FINISHED,this.discardEditor(!0))}}},b.prototype.cancelChanges=function(){this.state=a.EditorState.FINISHED,this.discardEditor()},b.prototype.discardEditor=function(b){this.state===a.EditorState.FINISHED&&(b===!1&&this.cellProperties.allowInvalid!==!0?(this.instance.selectCell(this.row,this.col),this.focus(),this.state=a.EditorState.EDITING,this._fireCallbacks(!1)):(this.close(),this._opened=!1,this.state=a.EditorState.VIRGIN,this._fireCallbacks(!0)))},b.prototype.isOpened=function(){return this._opened},b.prototype.isWaiting=function(){return this.state===a.EditorState.WAITING},a.editors.BaseEditor=b}(b),function(a){var b=a.editors.BaseEditor.prototype.extend();b.prototype.init=function(){var b=this;this.createElements(),this.eventManager=new a.eventManager(this),this.bindEvents(),this.autoResize=J(),this.instance.addHook("afterDestroy",function(){b.destroy()})},b.prototype.getValue=function(){return this.TEXTAREA.value},b.prototype.setValue=function(a){this.TEXTAREA.value=a};var c=function(b){var c,d,e=this,f=e.getActiveEditor();if(c=a.helper.keyCode,d=(b.ctrlKey||b.metaKey)&&!b.altKey,a.Dom.enableImmediatePropagation(b),b.target===f.TEXTAREA&&!b.isImmediatePropagationStopped()){if(17===b.keyCode||224===b.keyCode||91===b.keyCode||93===b.keyCode)return void b.stopImmediatePropagation();switch(b.keyCode){case c.ARROW_RIGHT:a.Dom.getCaretPosition(f.TEXTAREA)!==f.TEXTAREA.value.length&&b.stopImmediatePropagation();break;case c.ARROW_LEFT:0!==a.Dom.getCaretPosition(f.TEXTAREA)&&b.stopImmediatePropagation();break;case c.ENTER:var g=f.instance.getSelected(),h=!(g[0]===g[2]&&g[1]===g[3]);if(d&&!h||b.altKey){if(f.isOpened()){var i=a.Dom.getCaretPosition(f.TEXTAREA),j=f.getValue(),k=j.slice(0,i)+"\n"+j.slice(i);f.setValue(k),a.Dom.setCaretPosition(f.TEXTAREA,i+1)}else f.beginEditing(f.originalValue+"\n");b.stopImmediatePropagation()}b.preventDefault();
break;case c.A:case c.X:case c.C:case c.V:d&&b.stopImmediatePropagation();break;case c.BACKSPACE:case c.DELETE:case c.HOME:case c.END:b.stopImmediatePropagation()}f.autoResize.resize(String.fromCharCode(b.keyCode))}};b.prototype.open=function(){this.refreshDimensions(),this.instance.addHook("beforeKeyDown",c)},b.prototype.close=function(){this.textareaParentStyle.display="none",this.autoResize.unObserve(),document.activeElement===this.TEXTAREA&&this.instance.listen(),this.instance.removeHook("beforeKeyDown",c)},b.prototype.focus=function(){this.TEXTAREA.focus(),a.Dom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},b.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA"),a.Dom.addClass(this.TEXTAREA,"handsontableInput"),this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,this.TEXTAREA_PARENT=document.createElement("DIV"),a.Dom.addClass(this.TEXTAREA_PARENT,"handsontableInputHolder"),this.textareaParentStyle=this.TEXTAREA_PARENT.style,this.textareaParentStyle.top=0,this.textareaParentStyle.left=0,this.textareaParentStyle.display="none",this.TEXTAREA_PARENT.appendChild(this.TEXTAREA),this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);var b=this;this.instance._registerTimeout(setTimeout(function(){b.refreshDimensions()},0))},b.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},b.prototype.getEditedCell=function(){var a,b=this.checkEditorSection();switch(b){case"top":a=this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=101;break;case"corner":a=this.instance.view.wt.wtScrollbars.corner.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=103;break;case"left":a=this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.getCell({row:this.row,col:this.col}),this.textareaParentStyle.zIndex=102;break;default:a=this.instance.getCell(this.row,this.col),this.textareaParentStyle.zIndex=""}return-1!=a&&-2!=a?a:void 0},b.prototype.refreshDimensions=function(){if(this.state===a.EditorState.EDITING&&(this.TD=this.getEditedCell(),this.TD)){var b,c=a.Dom.offset(this.TD),d=a.Dom.offset(this.instance.rootElement),e=c.top-d.top-1,f=c.left-d.left-1,g=this.instance.getSettings(),h=g.rowHeaders?1:0,i=g.colHeaders?1:0,j=this.checkEditorSection();switch(j){case"top":b=a.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.holder.parentNode);break;case"left":b=a.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.holder.parentNode);break;case"corner":b=a.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.corner.clone.wtTable.holder.parentNode)}0>e&&(e=0),0>f&&(f=0),i&&0===this.instance.getSelected()[0]&&(e+=1),b&&-1!=b?this.textareaParentStyle[b[0]]=b[1]:a.Dom.resetCssTransform(this.textareaParentStyle),this.textareaParentStyle.top=e+"px",this.textareaParentStyle.left=f+"px";var k=this.TD.offsetTop-this.instance.view.wt.wtScrollbars.vertical.getScrollPosition(),l=this.TD.offsetLeft-this.instance.view.wt.wtScrollbars.horizontal.getScrollPosition(),m=a.Dom.innerWidth(this.TD)-8,n=this.instance.view.maximumVisibleElementWidth(l)-8,o=this.TD.scrollHeight+1,p=this.instance.view.maximumVisibleElementHeight(k)-2;parseInt(this.TD.style.borderTopWidth,10)>0&&(o-=1),parseInt(this.TD.style.borderLeftWidth,10)>0&&h>0&&(m-=1),this.TEXTAREA.style.fontSize=a.Dom.getComputedStyle(this.TD).fontSize,this.TEXTAREA.style.fontFamily=a.Dom.getComputedStyle(this.TD).fontFamily,this.autoResize.init(this.TEXTAREA,{minHeight:Math.min(o,p),maxHeight:p,minWidth:Math.min(m,n),maxWidth:n},!0),this.textareaParentStyle.display="block"}},b.prototype.bindEvents=function(){var b=this;this.eventManager.addEventListener(this.TEXTAREA,"cut",function(b){a.helper.stopPropagation(b)}),this.eventManager.addEventListener(this.TEXTAREA,"paste",function(b){a.helper.stopPropagation(b)}),this.instance.addHook("afterScrollVertically",function(){b.refreshDimensions()}),this.instance.addHook("afterColumnResize",function(){b.refreshDimensions(),b.focus()}),this.instance.addHook("afterRowResize",function(){b.refreshDimensions(),b.focus()}),this.instance.addHook("afterDestroy",function(){b.eventManager.clear()})},b.prototype.destroy=function(){this.eventManager.clear()},a.editors.TextEditor=b,a.editors.registerEditor("text",a.editors.TextEditor)}(b),function(b){var c=b.editors.BaseEditor.prototype.extend(),d={},e=function(){this.controls={},this.controls.leftButton=document.createElement("DIV"),this.controls.leftButton.className="leftButton",this.controls.rightButton=document.createElement("DIV"),this.controls.rightButton.className="rightButton",this.controls.upButton=document.createElement("DIV"),this.controls.upButton.className="upButton",this.controls.downButton=document.createElement("DIV"),this.controls.downButton.className="downButton";for(var a in this.controls)this.controls.hasOwnProperty(a)&&this.positionControls.appendChild(this.controls[a])};c.prototype.valueChanged=function(){return this.initValue!=this.getValue()},c.prototype.init=function(){var a=this;this.eventManager=new b.eventManager(this.instance),this.createElements(),this.bindEvents(),this.instance.addHook("afterDestroy",function(){a.destroy()})},c.prototype.getValue=function(){return this.TEXTAREA.value},c.prototype.setValue=function(a){this.initValue=a,this.TEXTAREA.value=a},c.prototype.createElements=function(){this.editorContainer=document.createElement("DIV"),this.editorContainer.className="htMobileEditorContainer",this.cellPointer=document.createElement("DIV"),this.cellPointer.className="cellPointer",this.moveHandle=document.createElement("DIV"),this.moveHandle.className="moveHandle",this.inputPane=document.createElement("DIV"),this.inputPane.className="inputs",this.positionControls=document.createElement("DIV"),this.positionControls.className="positionControls",this.TEXTAREA=document.createElement("TEXTAREA"),b.Dom.addClass(this.TEXTAREA,"handsontableInput"),this.inputPane.appendChild(this.TEXTAREA),this.editorContainer.appendChild(this.cellPointer),this.editorContainer.appendChild(this.moveHandle),this.editorContainer.appendChild(this.inputPane),this.editorContainer.appendChild(this.positionControls),e.call(this),document.body.appendChild(this.editorContainer)},c.prototype.onBeforeKeyDown=function(a){var c=this,d=c.getActiveEditor();if(b.Dom.enableImmediatePropagation(a),a.target===d.TEXTAREA&&!a.isImmediatePropagationStopped()){var e=b.helper.keyCode;switch(a.keyCode){case e.ENTER:d.close(),a.preventDefault();break;case e.BACKSPACE:a.stopImmediatePropagation()}}},c.prototype.open=function(){this.instance.addHook("beforeKeyDown",this.onBeforeKeyDown),b.Dom.addClass(this.editorContainer,"active"),b.Dom.removeClass(this.cellPointer,"hidden"),this.updateEditorPosition()},c.prototype.focus=function(){this.TEXTAREA.focus(),b.Dom.setCaretPosition(this.TEXTAREA,this.TEXTAREA.value.length)},c.prototype.close=function(){this.TEXTAREA.blur(),this.instance.removeHook("beforeKeyDown",this.onBeforeKeyDown),b.Dom.removeClass(this.editorContainer,"active")},c.prototype.scrollToView=function(){var a=this.instance.getSelectedRange().highlight;this.instance.view.scrollViewport(a)},c.prototype.hideCellPointer=function(){b.Dom.hasClass(this.cellPointer,"hidden")||b.Dom.addClass(this.cellPointer,"hidden")},c.prototype.updateEditorPosition=function(c,e){if(c&&e)c=parseInt(c,10),e=parseInt(e,10),this.editorContainer.style.top=e+"px",this.editorContainer.style.left=c+"px";else{var f=this.instance.getSelected(),g=this.instance.getCell(f[0],f[1]);if(d.cellPointer||(d.cellPointer={height:b.Dom.outerHeight(this.cellPointer),width:b.Dom.outerWidth(this.cellPointer)}),d.editorContainer||(d.editorContainer={width:b.Dom.outerWidth(this.editorContainer)}),void 0!==g){var h=this.instance.view.wt.wtScrollbars.horizontal.scrollHandler==a?0:b.Dom.getScrollLeft(this.instance.view.wt.wtScrollbars.horizontal.scrollHandler),i=this.instance.view.wt.wtScrollbars.vertical.scrollHandler==a?0:b.Dom.getScrollTop(this.instance.view.wt.wtScrollbars.vertical.scrollHandler),j=b.Dom.offset(g),k=b.Dom.outerWidth(g),l={x:h,y:i};this.editorContainer.style.top=parseInt(j.top+b.Dom.outerHeight(g)-l.y+d.cellPointer.height,10)+"px",this.editorContainer.style.left=parseInt(a.innerWidth/2-d.editorContainer.width/2,10)+"px",j.left+k/2>parseInt(this.editorContainer.style.left,10)+d.editorContainer.width?this.editorContainer.style.left=a.innerWidth-d.editorContainer.width+"px":j.left+k/2<parseInt(this.editorContainer.style.left,10)+20&&(this.editorContainer.style.left="0px"),this.cellPointer.style.left=parseInt(j.left-d.cellPointer.width/2-b.Dom.offset(this.editorContainer).left+k/2-l.x,10)+"px"}}},c.prototype.updateEditorData=function(){var a=this.instance.getSelected(),b=this.instance.getDataAtCell(a[0],a[1]);this.row=a[0],this.col=a[1],this.setValue(b),this.updateEditorPosition()},c.prototype.prepareAndSave=function(){var a;return this.valueChanged()?(a=this.instance.getSettings().trimWhitespace?[[String.prototype.trim.call(this.getValue())]]:[[this.getValue()]],void this.saveValue(a)):!0},c.prototype.bindEvents=function(){var c=this;this.eventManager.addEventListener(this.controls.leftButton,"touchend",function(a){c.prepareAndSave(),c.instance.selection.transformStart(0,-1,null,!0),c.updateEditorData(),a.preventDefault()}),this.eventManager.addEventListener(this.controls.rightButton,"touchend",function(a){c.prepareAndSave(),c.instance.selection.transformStart(0,1,null,!0),c.updateEditorData(),a.preventDefault()}),this.eventManager.addEventListener(this.controls.upButton,"touchend",function(a){c.prepareAndSave(),c.instance.selection.transformStart(-1,0,null,!0),c.updateEditorData(),a.preventDefault()}),this.eventManager.addEventListener(this.controls.downButton,"touchend",function(a){c.prepareAndSave(),c.instance.selection.transformStart(1,0,null,!0),c.updateEditorData(),a.preventDefault()}),this.eventManager.addEventListener(this.moveHandle,"touchstart",function(a){if(1==a.touches.length){var b=a.touches[0],d={x:c.editorContainer.offsetLeft,y:c.editorContainer.offsetTop},e={x:b.pageX-d.x,y:b.pageY-d.y};c.eventManager.addEventListener(this,"touchmove",function(a){var b=a.touches[0];c.updateEditorPosition(b.pageX-e.x,b.pageY-e.y),c.hideCellPointer(),a.preventDefault()})}}),this.eventManager.addEventListener(document.body,"touchend",function(a){b.Dom.isChildOf(a.target,c.editorContainer)||b.Dom.isChildOf(a.target,c.instance.rootElement)||c.close()}),this.eventManager.addEventListener(this.instance.view.wt.wtScrollbars.horizontal.scrollHandler,"scroll",function(){c.instance.view.wt.wtScrollbars.horizontal.scrollHandler!=a&&c.hideCellPointer()}),this.eventManager.addEventListener(this.instance.view.wt.wtScrollbars.vertical.scrollHandler,"scroll",function(){c.instance.view.wt.wtScrollbars.vertical.scrollHandler!=a&&c.hideCellPointer()})},c.prototype.destroy=function(){this.eventManager.clear(),this.editorContainer.parentNode.removeChild(this.editorContainer)},b.editors.MobileTextEditor=c,b.editors.registerEditor("mobile",b.editors.MobileTextEditor)}(b),function(a){var b=a.editors.BaseEditor.prototype.extend();b.prototype.beginEditing=function(){var a=this.TD.querySelector('input[type="checkbox"]');a&&a.click()},b.prototype.finishEditing=function(){},b.prototype.init=function(){},b.prototype.open=function(){},b.prototype.close=function(){},b.prototype.getValue=function(){},b.prototype.setValue=function(){},b.prototype.focus=function(){},a.editors.CheckboxEditor=b,a.editors.registerEditor("checkbox",b)}(b),function(b){var c=b.editors.TextEditor.prototype.extend();c.prototype.init=function(){if("function"!=typeof moment)throw new Error("You need to include moment.js to your project.");if("function"!=typeof Pikaday)throw new Error("You need to include Pikaday to your project.");b.editors.TextEditor.prototype.init.apply(this,arguments),this.isCellEdited=!1;var a=this;this.instance.addHook("afterDestroy",function(){a.parentDestroyed=!0,a.destroyElements()})},c.prototype.createElements=function(){var a=this;b.editors.TextEditor.prototype.createElements.apply(this,arguments),this.defaultDateFormat="DD/MM/YYYY",this.datePicker=document.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,b.Dom.addClass(this.datePicker,"htDatepickerHolder"),document.body.appendChild(this.datePicker);var c=this.TEXTAREA,d={format:a.defaultDateFormat,field:c,trigger:c,container:a.datePicker,reposition:!1,bound:!1,onSelect:function(b){isNaN(b.getTime())||(b=moment(b).format(a.cellProperties.dateFormat||a.defaultDateFormat)),a.setValue(b),a.hideDatepicker()},onClose:function(){a.parentDestroyed||a.finishEditing(!1)}};this.$datePicker=new Pikaday(d);var e=b.eventManager(this);e.addEventListener(this.datePicker,"mousedown",function(a){b.helper.stopPropagation(a)}),this.hideDatepicker()},c.prototype.destroyElements=function(){this.$datePicker.destroy()},c.prototype.prepare=function(){this._opened=!1,b.editors.TextEditor.prototype.prepare.apply(this,arguments)},c.prototype.open=function(a){b.editors.TextEditor.prototype.open.call(this),this.showDatepicker(a)},c.prototype.close=function(){var a=this;this._opened=!1,this.instance._registerTimeout(setTimeout(function(){a.instance.selection.refreshBorders()},0)),b.editors.TextEditor.prototype.close.apply(this,arguments)},c.prototype.finishEditing=function(a){if(a){var c=this.originalValue;void 0!==c&&this.setValue(c)}this.hideDatepicker(),b.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},c.prototype.showDatepicker=function(c){var d,e=this.TD.getBoundingClientRect(),f=this.cellProperties.dateFormat||this.defaultDateFormat,g=this.$datePicker.config(),h=this.instance.view.isMouseDown(),i=c?b.helper.isMetaKey(c.keyCode):!1;this.datePickerStyle.top=a.pageYOffset+e.top+b.Dom.outerHeight(this.TD)+"px",this.datePickerStyle.left=a.pageXOffset+e.left+"px",this.$datePicker._onInputFocus=function(){},g.format=f,this.originalValue?(d=this.originalValue,moment(d,f,!0).isValid()&&this.$datePicker.setMoment(moment(d,f),!0),i||h||this.setValue("")):this.cellProperties.defaultDate&&(d=this.cellProperties.defaultDate,g.defaultDate=d,moment(d,f,!0).isValid()&&this.$datePicker.setMoment(moment(d,f),!0),i||h||this.setValue("")),this.datePickerStyle.display="block",this.$datePicker.show()},c.prototype.hideDatepicker=function(){this.datePickerStyle.display="none",this.$datePicker.hide()},b.editors.DateEditor=c,b.editors.registerEditor("date",c)}(b),function(a){var b=a.editors.TextEditor.prototype.extend();b.prototype.createElements=function(){a.editors.TextEditor.prototype.createElements.apply(this,arguments);var b=document.createElement("DIV");b.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(b),this.htContainer=b,this.htEditor=new a(b),this.assignHooks()},b.prototype.prepare=function(b,c,d,e,f,g){a.editors.TextEditor.prototype.prepare.apply(this,arguments);var h=this,i={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,cells:function(){return{readOnly:!0}},fillHandle:!1,afterOnCellMouseDown:function(){var a=this.getValue();void 0!==a&&h.setValue(a),h.instance.destroyEditor()}};this.cellProperties.handsontable&&a.helper.extend(i,g.handsontable),this.htEditor&&this.htEditor.destroy(),this.htEditor=new a(this.htContainer,i)};var c=function(b){if(null!=b&&null==b.isImmediatePropagationEnabled&&(b.stopImmediatePropagation=function(){this.isImmediatePropagationEnabled=!1,this.cancelBubble=!0},b.isImmediatePropagationEnabled=!0,b.isImmediatePropagationStopped=function(){return!this.isImmediatePropagationEnabled}),!b.isImmediatePropagationStopped()){var c,d=this.getActiveEditor(),e=d.htEditor.getInstance();if(b.keyCode==a.helper.keyCode.ARROW_DOWN)if(e.getSelected()){var f=e.getSelected()[0],g=e.countRows()-1;c=Math.min(g,f+1)}else c=0;else if(b.keyCode==a.helper.keyCode.ARROW_UP&&e.getSelected()){var f=e.getSelected()[0];c=f-1}void 0!==c&&(0>c?e.deselectCell():e.selectCell(c,0),b.preventDefault(),b.stopImmediatePropagation(),d.instance.listen(),d.TEXTAREA.focus())}};b.prototype.open=function(){this.instance.addHook("beforeKeyDown",c),a.editors.TextEditor.prototype.open.apply(this,arguments),this.htEditor.render(),this.cellProperties.strict?(this.htEditor.selectCell(0,0),this.TEXTAREA.style.visibility="hidden"):(this.htEditor.deselectCell(),this.TEXTAREA.style.visibility="visible"),a.Dom.setCaretPosition(this.TEXTAREA,0,this.TEXTAREA.value.length)},b.prototype.close=function(){this.instance.removeHook("beforeKeyDown",c),this.instance.listen(),a.editors.TextEditor.prototype.close.apply(this,arguments)},b.prototype.focus=function(){this.instance.listen(),a.editors.TextEditor.prototype.focus.apply(this,arguments)},b.prototype.beginEditing=function(){var b=this.instance.getSettings().onBeginEditing;b&&b()===!1||a.editors.TextEditor.prototype.beginEditing.apply(this,arguments)},b.prototype.finishEditing=function(){if(this.htEditor.isListening()&&this.instance.listen(),this.htEditor.getSelected()){var b=this.htEditor.getInstance().getValue();void 0!==b&&this.setValue(b)}return a.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},b.prototype.assignHooks=function(){var a=this;this.instance.addHook("afterDestroy",function(){a.htEditor&&a.htEditor.destroy()})},a.editors.HandsontableEditor=b,a.editors.registerEditor("handsontable",b)}(b),function(b){var c=b.editors.HandsontableEditor.prototype.extend();c.prototype.init=function(){b.editors.HandsontableEditor.prototype.init.apply(this,arguments);var a=this.htEditor.getInstance();a.updateSettings({height:1}),this.query=null,this.choices=[]},c.prototype.createElements=function(){b.editors.HandsontableEditor.prototype.createElements.apply(this,arguments);var c=function(){return-1!=a.navigator.platform.indexOf("Mac")?"htMacScroll":""};b.Dom.addClass(this.htContainer,"autocompleteEditor"),b.Dom.addClass(this.htContainer,c())};var d=!1,e=function(a){d=!1;var c=this.getActiveEditor(),e=b.helper.keyCode;if(b.helper.isPrintableChar(a.keyCode)||a.keyCode===e.BACKSPACE||a.keyCode===e.DELETE||a.keyCode===e.INSERT){var f=0;if(a.keyCode===e.C&&(a.ctrlKey||a.metaKey))return;c.isOpened()||(f+=10),c.instance._registerTimeout(setTimeout(function(){c.queryChoices(c.TEXTAREA.value),d=!0},f))}};c.prototype.prepare=function(){this.instance.addHook("beforeKeyDown",e),b.editors.HandsontableEditor.prototype.prepare.apply(this,arguments)},c.prototype.open=function(){b.editors.HandsontableEditor.prototype.open.apply(this,arguments),this.TEXTAREA.style.visibility="visible",this.focus(),this.htContainer.style.overflow="hidden";var a=this.htEditor.getInstance(),c=this;a.updateSettings({colWidths:[b.Dom.outerWidth(this.TEXTAREA)-2],afterRenderer:function(a,b,d,e,f){var g=this.getCellMeta(b,d).filteringCaseSensitive===!0;if(f){var h=g?f.indexOf(this.query):f.toLowerCase().indexOf(c.query.toLowerCase());if(-1!=h){var i=f.substr(h,c.query.length);a.innerHTML=f.replace(i,"<strong>"+i+"</strong>")}}}}),d&&(d=!1),c.instance._registerTimeout(setTimeout(function(){c.queryChoices(c.TEXTAREA.value),c.htContainer.style.overflow="auto"},0))},c.prototype.close=function(){b.editors.HandsontableEditor.prototype.close.apply(this,arguments)},c.prototype.queryChoices=function(a){if(this.query=a,"function"==typeof this.cellProperties.source){var b=this;this.cellProperties.source(a,function(a){b.updateChoicesList(a)})}else if(Array.isArray(this.cellProperties.source)){var c;if(a&&this.cellProperties.filter!==!1){var d=this.cellProperties.filteringCaseSensitive===!0,e=a.toLowerCase();c=this.cellProperties.source.filter(function(b){return d?-1!=b.indexOf(a):-1!=b.toLowerCase().indexOf(e)})}else c=this.cellProperties.source;this.updateChoicesList(c)}else this.updateChoicesList([])},c.prototype.updateChoicesList=function(a){var d,e=b.Dom.getCaretPosition(this.TEXTAREA),f=b.Dom.getSelectionEndPosition(this.TEXTAREA),g=c.sortByRelevance(this.getValue(),a,this.cellProperties.filteringCaseSensitive);if(0!=this.cellProperties.filter){for(var h=[],i=0,j=g.length;j>i;i++)h.push(a[g[i]]);d=0,a=h}else d=g[0];this.choices=a,this.htEditor.loadData(b.helper.pivot([a])),this.htEditor.updateSettings({height:this.getDropdownHeight()}),this.cellProperties.strict===!0&&this.highlightBestMatchingChoice(d),this.instance.listen(),this.TEXTAREA.focus(),b.Dom.setCaretPosition(this.TEXTAREA,e,e!=f?f:void 0)},c.prototype.finishEditing=function(a){a||this.instance.removeHook("beforeKeyDown",e),b.editors.HandsontableEditor.prototype.finishEditing.apply(this,arguments)},c.prototype.highlightBestMatchingChoice=function(a){"number"==typeof a?this.htEditor.selectCell(a,0):this.htEditor.deselectCell()},c.sortByRelevance=function(a,b,c){var d,e,f,g,h,i=[],j=a.length,k=[];if(0===j){for(g=0,h=b.length;h>g;g++)k.push(g);return k}for(g=0,h=b.length;h>g;g++)d=b[g],e=c?d.indexOf(a):d.toLowerCase().indexOf(a.toLowerCase()),-1!=e&&(f=d.length-e-j,i.push({baseIndex:g,index:e,charsLeft:f,value:d}));for(i.sort(function(a,b){return-1===b.index?-1:-1===a.index?1:a.index<b.index?-1:b.index<a.index?1:a.index===b.index?a.charsLeft<b.charsLeft?-1:a.charsLeft>b.charsLeft?1:0:void 0}),g=0,h=i.length;h>g;g++)k.push(i[g].baseIndex);return k},c.prototype.getDropdownHeight=function(){var a=this.htEditor.getInstance().getRowHeight(0)||23;return this.choices.length>=10?10*a:this.choices.length*a+8},b.editors.AutocompleteEditor=c,b.editors.registerEditor("autocomplete",c)}(b),function(a){var b=a.editors.TextEditor.prototype.extend();b.prototype.createElements=function(){a.editors.TextEditor.prototype.createElements.apply(this,arguments),this.TEXTAREA=document.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,a.Dom.empty(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)},a.editors.PasswordEditor=b,a.editors.registerEditor("password",b)}(b),function(a){var b=a.editors.BaseEditor.prototype.extend();b.prototype.init=function(){this.select=document.createElement("SELECT"),a.Dom.addClass(this.select,"htSelectEditor"),this.select.style.display="none",this.instance.rootElement.appendChild(this.select)},b.prototype.prepare=function(){a.editors.BaseEditor.prototype.prepare.apply(this,arguments);var b,c=this.cellProperties.selectOptions;b=this.prepareOptions("function"==typeof c?c(this.row,this.col,this.prop):c),a.Dom.empty(this.select);for(var d in b)if(b.hasOwnProperty(d)){var e=document.createElement("OPTION");e.value=d,a.Dom.fastInnerHTML(e,b[d]),this.select.appendChild(e)}},b.prototype.prepareOptions=function(a){var b={};if(Array.isArray(a))for(var c=0,d=a.length;d>c;c++)b[a[c]]=a[c];else"object"==typeof a&&(b=a);return b},b.prototype.getValue=function(){return this.select.value},b.prototype.setValue=function(a){this.select.value=a};var c=function(b){var c=this,d=c.getActiveEditor();switch(b.keyCode){case a.helper.keyCode.ARROW_UP:var e=d.select.find("option:selected").prev();1==e.length&&e.prop("selected",!0),b.stopImmediatePropagation(),b.preventDefault();break;case a.helper.keyCode.ARROW_DOWN:var f=d.select.find("option:selected").next();1==f.length&&f.prop("selected",!0),b.stopImmediatePropagation(),b.preventDefault()}};b.prototype.checkEditorSection=function(){return this.row<this.instance.getSettings().fixedRowsTop?this.col<this.instance.getSettings().fixedColumnsLeft?"corner":"top":this.col<this.instance.getSettings().fixedColumnsLeft?"left":void 0},b.prototype.open=function(){var b,d=a.Dom.outerWidth(this.TD),e=a.Dom.outerHeight(this.TD),f=a.Dom.offset(this.instance.rootElement),g=a.Dom.offset(this.TD),h=this.checkEditorSection();switch(h){case"top":b=a.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.holder.parentNode);break;case"left":b=a.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.holder.parentNode);break;case"corner":b=a.Dom.getCssTransform(this.instance.view.wt.wtScrollbars.corner.clone.wtTable.holder.parentNode)}var i=this.select.style;b&&-1!=b?i[b[0]]=b[1]:a.Dom.resetCssTransform(this.select),i.height=e+"px",i.minWidth=d+"px",i.top=g.top-f.top+"px",i.left=g.left-f.left+"px",i.margin="0px",i.display="",this.instance.addHook("beforeKeyDown",c)},b.prototype.close=function(){this.select.style.display="none",this.instance.removeHook("beforeKeyDown",c)},b.prototype.focus=function(){this.select.focus()},a.editors.SelectEditor=b,a.editors.registerEditor("select",b)}(b),function(a){var b=a.editors.AutocompleteEditor.prototype.extend();b.prototype.prepare=function(){a.editors.AutocompleteEditor.prototype.prepare.apply(this,arguments),this.cellProperties.filter=!1,this.cellProperties.strict=!0},a.editors.DropdownEditor=b,a.editors.registerEditor("dropdown",b)}(b),function(a){var b=a.editors.TextEditor.prototype.extend();b.prototype.beginEditing=function(b){var c=a.editors.TextEditor.prototype;if("undefined"==typeof b&&this.originalValue){var d=""+this.originalValue;"undefined"!=typeof this.cellProperties.language&&numeral.language(this.cellProperties.language);var e=numeral.languageData().delimiters.decimal;d=d.replace(".",e),c.beginEditing.apply(this,[d])}else c.beginEditing.apply(this,arguments)},a.editors.NumericEditor=b,a.editors.registerEditor("numeric",b)}(b),b.NumericValidator=function(a,b){null===a&&(a=""),b(/^-?\d*(\.|\,)?\d*$/.test(a))},b.DateValidator=function(a,c){var d=null,e=!0,f=b.editors.getEditor("date",this.instance);null===a&&(a="");var g=moment(new Date(a)).isValid(),h=moment(a,this.dateFormat||f.defaultDateFormat,!0).isValid();g||(e=!1),!g&&h&&(e=!0),g&&!h&&(this.correctFormat===!0?(d=H(a,this.dateFormat),this.instance.setDataAtCell(this.row,this.col,d,"dateValidator"),e=!0):e=!1),c(e)};var H=function(a,b){return a=moment(new Date(a)).format(b)},I=function(a,b){var c=a,d="string"==typeof c?c.toLowerCase():null;return function(a){for(var e=!1,f=0,g=a.length;g>f;f++){if(c===a[f]){e=!0;break}if(d===a[f].toLowerCase()){e=!0;break}}b(e)}};b.AutocompleteValidator=function(a,b){this.strict&&this.source?"function"==typeof this.source?this.source(a,I(a,b)):I(a,b)(this.source):b(!0)},b.mobileBrowser=b.helper.isMobileBrowser(),b.AutocompleteCell={editor:b.editors.AutocompleteEditor,renderer:b.renderers.AutocompleteRenderer,validator:b.AutocompleteValidator},b.CheckboxCell={editor:b.editors.CheckboxEditor,renderer:b.renderers.CheckboxRenderer},b.TextCell={editor:b.mobileBrowser?b.editors.MobileTextEditor:b.editors.TextEditor,renderer:b.renderers.TextRenderer},b.NumericCell={editor:b.editors.NumericEditor,renderer:b.renderers.NumericRenderer,validator:b.NumericValidator,dataType:"number"},b.DateCell={editor:b.editors.DateEditor,validator:b.DateValidator,renderer:b.renderers.AutocompleteRenderer},b.HandsontableCell={editor:b.editors.HandsontableEditor,renderer:b.renderers.AutocompleteRenderer},b.PasswordCell={editor:b.editors.PasswordEditor,renderer:b.renderers.PasswordRenderer,copyable:!1},b.DropdownCell={editor:b.editors.DropdownEditor,renderer:b.renderers.AutocompleteRenderer,validator:b.AutocompleteValidator},b.cellTypes={text:b.TextCell,date:b.DateCell,numeric:b.NumericCell,checkbox:b.CheckboxCell,autocomplete:b.AutocompleteCell,handsontable:b.HandsontableCell,password:b.PasswordCell,dropdown:b.DropdownCell},b.cellLookup={validator:{numeric:b.NumericValidator,autocomplete:b.AutocompleteValidator}};var J=function(){var c,d={minHeight:200,maxHeight:300,minWidth:100,maxWidth:300},e=document.body,f=document.createTextNode(""),g=document.createElement("SPAN"),h=function(b,c,d){a.attachEvent?b.attachEvent("on"+c,d):b.addEventListener(c,d,!1)},i=function(b,c,d){a.removeEventListener?b.removeEventListener(c,d,!1):b.detachEvent("on"+c,d)},j=function(a){var h,i;a?/^[a-zA-Z \.,\\\/\|0-9]$/.test(a)||(a="."):a="",void 0!==f.textContent?f.textContent=c.value+a:f.data=c.value+a,g.style.fontSize=b.Dom.getComputedStyle(c).fontSize,g.style.fontFamily=b.Dom.getComputedStyle(c).fontFamily,g.style.whiteSpace="pre",e.appendChild(g),h=g.clientWidth+2,e.removeChild(g),c.style.height=d.minHeight+"px",c.style.width=d.minWidth>h?d.minWidth+"px":h>d.maxWidth?d.maxWidth+"px":h+"px",i=c.scrollHeight?c.scrollHeight-1:0,d.minHeight>i?c.style.height=d.minHeight+"px":d.maxHeight<i?(c.style.height=d.maxHeight+"px",c.style.overflowY="visible"):c.style.height=i+"px"},k=function(){a.setTimeout(j,0)},l=function(a){if(a&&a.minHeight)if("inherit"==a.minHeight)d.minHeight=c.clientHeight;else{var b=parseInt(a.minHeight);isNaN(b)||(d.minHeight=b)}if(a&&a.maxHeight)if("inherit"==a.maxHeight)d.maxHeight=c.clientHeight;else{var e=parseInt(a.maxHeight);isNaN(e)||(d.maxHeight=e)}if(a&&a.minWidth)if("inherit"==a.minWidth)d.minWidth=c.clientWidth;else{var h=parseInt(a.minWidth);isNaN(h)||(d.minWidth=h)}if(a&&a.maxWidth)if("inherit"==a.maxWidth)d.maxWidth=c.clientWidth;else{var i=parseInt(a.maxWidth);isNaN(i)||(d.maxWidth=i)}g.firstChild||(g.className="autoResize",g.style.display="inline-block",g.appendChild(f))},m=function(a,b,e){c=a,l(b),"TEXTAREA"==c.nodeName&&(c.style.resize="none",c.style.overflowY="",c.style.height=d.minHeight+"px",c.style.minWidth=d.minWidth+"px",c.style.maxWidth=d.maxWidth+"px",c.style.overflowY="hidden"),e&&(h(c,"change",j),h(c,"cut",k),h(c,"paste",k),h(c,"drop",k),h(c,"keydown",k)),j()};return{init:function(a,b,c){m(a,b,c)},unObserve:function(){i(c,"change",j),i(c,"cut",k),i(c,"paste",k),i(c,"drop",k),i(c,"keydown",k)},resize:j}};!function(a){function b(a){return a.split('"').length-1}a.SheetClip={parse:function(a){var c,d,e,f,g,h,i,j=[],k=0;for(e=a.split("\n"),e.length>1&&""===e[e.length-1]&&e.pop(),c=0,d=e.length;d>c;c+=1){for(e[c]=e[c].split("	"),f=0,g=e[c].length;g>f;f+=1)j[k]||(j[k]=[]),h&&0===f?(i=j[k].length-1,j[k][i]=j[k][i]+"\n"+e[c][0],h&&1&b(e[c][0])&&(h=!1,j[k][i]=j[k][i].substring(0,j[k][i].length-1).replace(/""/g,'"'))):f===g-1&&0===e[c][f].indexOf('"')?(j[k].push(e[c][f].substring(1).replace(/""/g,'"')),h=!0):(j[k].push(e[c][f].replace(/""/g,'"')),h=!1);h||(k+=1)}return j},stringify:function(a){var b,c,d,e,f,g="";for(b=0,c=a.length;c>b;b+=1){for(e=a[b].length,d=0;e>d;d+=1)d>0&&(g+="	"),f=a[b][d],g+="string"==typeof f?f.indexOf("\n")>-1?'"'+f.replace(/"/g,'""')+'"':f:null===f||void 0===f?"":f;g+="\n"}return g}}}(a);var K=function(){var a;return{getInstance:function(){return a?a.hasBeenDestroyed()&&a.init():a=new c,a.refCounter++,a}}}();c.prototype.init=function(){var a,c;this.copyCallbacks=[],this.cutCallbacks=[],this.pasteCallbacks=[],this._eventManager=b.eventManager(this),c=document.body,document.getElementById("CopyPasteDiv")?(this.elDiv=document.getElementById("CopyPasteDiv"),this.elTextarea=this.elDiv.firstChild):(this.elDiv=document.createElement("DIV"),this.elDiv.id="CopyPasteDiv",a=this.elDiv.style,a.position="fixed",a.top="-10000px",a.left="-10000px",c.appendChild(this.elDiv),this.elTextarea=document.createElement("TEXTAREA"),this.elTextarea.className="copyPaste",this.elTextarea.onpaste=function(a){return"WebkitAppearance"in document.documentElement.style?(this.value=a.clipboardData.getData("Text"),!1):void 0},a=this.elTextarea.style,a.width="10000px",a.height="10000px",a.overflow="hidden",this.elDiv.appendChild(this.elTextarea),"undefined"!=typeof a.opacity&&(a.opacity=0)),this.keyDownRemoveEvent=this._eventManager.addEventListener(document.documentElement,"keydown",this.onKeyDown.bind(this),!1)},c.prototype.onKeyDown=function(a){var b=this,c=!1;if(a.metaKey?c=!0:a.ctrlKey&&-1===navigator.userAgent.indexOf("Mac")&&(c=!0),c){if(document.activeElement!==this.elTextarea&&(""!==this.getSelectionText()||-1!==["INPUT","SELECT","TEXTAREA"].indexOf(document.activeElement.nodeName)))return;
this.selectNodeText(this.elTextarea),setTimeout(function(){b.selectNodeText(b.elTextarea)},0)}!c||67!==a.keyCode&&86!==a.keyCode&&88!==a.keyCode||(88===a.keyCode?setTimeout(function(){b.triggerCut(a)},0):86===a.keyCode&&setTimeout(function(){b.triggerPaste(a)},0))},c.prototype.selectNodeText=function(a){a&&a.select()},c.prototype.getSelectionText=function(){var b="";return a.getSelection?b=a.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(b=document.selection.createRange().text),b},c.prototype.copyable=function(a){if("string"!=typeof a&&void 0===a.toString)throw new Error("copyable requires string parameter");this.elTextarea.value=a},c.prototype.onCut=function(a){this.cutCallbacks.push(a)},c.prototype.onPaste=function(a){this.pasteCallbacks.push(a)},c.prototype.removeCallback=function(a){var b,c;for(b=0,c=this.copyCallbacks.length;c>b;b++)if(this.copyCallbacks[b]===a)return this.copyCallbacks.splice(b,1),!0;for(b=0,c=this.cutCallbacks.length;c>b;b++)if(this.cutCallbacks[b]===a)return this.cutCallbacks.splice(b,1),!0;for(b=0,c=this.pasteCallbacks.length;c>b;b++)if(this.pasteCallbacks[b]===a)return this.pasteCallbacks.splice(b,1),!0;return!1},c.prototype.triggerCut=function(a){var b=this;b.cutCallbacks&&setTimeout(function(){for(var c=0,d=b.cutCallbacks.length;d>c;c++)b.cutCallbacks[c](a)},50)},c.prototype.triggerPaste=function(a,b){var c=this;c.pasteCallbacks&&setTimeout(function(){for(var d=b||c.elTextarea.value,e=0,f=c.pasteCallbacks.length;f>e;e++)c.pasteCallbacks[e](d,a)},50)},c.prototype.destroy=function(){this.hasBeenDestroyed()||0!==--this.refCounter||(this.elDiv&&this.elDiv.parentNode&&(this.elDiv.parentNode.removeChild(this.elDiv),this.elDiv=null,this.elTextarea=null),this.keyDownRemoveEvent())},c.prototype.hasBeenDestroyed=function(){return!this.refCounter};var L;!function(b){function c(a){return-1===a.indexOf("/")&&-1===a.indexOf("~")?a:a.replace(/~/g,"~0").replace(/\//g,"~1")}function d(a,b){var e;for(var f in a)if(a.hasOwnProperty(f)){if(a[f]===b)return c(f)+"/";if("object"==typeof a[f]&&(e=d(a[f],b),""!=e))return c(f)+"/"+e}return""}function e(a,b){if(a===b)return"/";var c=d(a,b);if(""===c)throw new Error("Object not found in root");return"/"+c}function f(a){for(var b=0,c=s.length;c>b;b++)if(s[b].obj===a)return s[b]}function g(a,b){for(var c=0,d=a.observers.length;d>c;c++)if(a.observers[c].callback===b)return a.observers[c].observer}function h(a,b){for(var c=0,d=a.observers.length;d>c;c++)if(a.observers[c].observer===b)return void a.observers.splice(c,1)}function i(a,b){m(b),Object.observe?l(b,a):clearTimeout(b.next);var c=f(a);h(c,b)}function j(b,c){var d,h=[],i=b,j=f(b);if(j?d=g(j,c):(j=new t(b),s.push(j)),d)return d;if(Object.observe)d=function(a){l(d,b),k(d,b);for(var f=0,g=a.length;g>f;){if(("length"!==a[f].name||!w(a[f].object))&&"__Jasmine_been_here_before__"!==a[f].name){var j=a[f].type;switch(j){case"new":j="add";break;case"deleted":j="delete";break;case"updated":j="update"}r[j].call(a[f],h,e(i,a[f].object))}f++}h&&c&&c(h),d.patches=h,h=[]};else if(d={},j.value=JSON.parse(JSON.stringify(b)),c){d.callback=c,d.next=null;var n=this.intervals||[100,1e3,1e4,6e4],o=0,p=function(){m(d)},q=function(){clearTimeout(d.next),d.next=setTimeout(function(){p(),o=0,d.next=setTimeout(v,n[o++])},0)},v=function(){p(),o==n.length&&(o=n.length-1),d.next=setTimeout(v,n[o++])};"undefined"!=typeof a&&(a.addEventListener?(a.addEventListener("mousedown",q),a.addEventListener("mouseup",q),a.addEventListener("keydown",q)):(a.attachEvent("onmousedown",q),a.attachEvent("onmouseup",q),a.attachEvent("onkeydown",q))),d.next=setTimeout(v,n[o++])}return d.patches=h,d.object=b,j.observers.push(new u(c,d)),k(d,b)}function k(a,b){if(Object.observe){Object.observe(b,a);for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];d&&"object"==typeof d&&k(a,d)}}return a}function l(a,b){if(Object.observe){Object.unobserve(b,a);for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];d&&"object"==typeof d&&l(a,d)}}return a}function m(a){if(Object.observe)Object.deliverChangeRecords(a);else{for(var b,c=0,d=s.length;d>c;c++)if(s[c].obj===a.object){b=s[c];break}n(b.value,a.object,a.patches,"")}var e=a.patches;return e.length>0&&(a.patches=[],a.callback&&a.callback(e)),e}function n(a,b,d,e){for(var f=v(b),g=v(a),h=!1,i=!1,j=g.length-1;j>=0;j--){var k=g[j],l=a[k];if(b.hasOwnProperty(k)){var m=b[k];l instanceof Object?n(l,m,d,e+"/"+c(k)):l!=m&&(h=!0,d.push({op:"replace",path:e+"/"+c(k),value:m}),a[k]=m)}else d.push({op:"remove",path:e+"/"+c(k)}),delete a[k],i=!0}if(i||f.length!=g.length)for(var j=0;j<f.length;j++){var k=f[j];a.hasOwnProperty(k)||(d.push({op:"add",path:e+"/"+c(k),value:b[k]}),a[k]=JSON.parse(JSON.stringify(b[k])))}}function o(a,b){for(var c,d=!1,e=0,f=b.length;f>e;){c=b[e];for(var g=c.path.split("/"),h=a,i=1,j=g.length;;)if(w(h)){var k=parseInt(g[i],10);if(i++,i>=j){d=q[c.op].call(c,h,k,a);break}h=h[k]}else{var l=g[i];if(-1!=l.indexOf("~")&&(l=l.replace(/~1/g,"/").replace(/~0/g,"~")),i++,i>=j){d=p[c.op].call(c,h,l,a);break}h=h[l]}e++}return d}var p={add:function(a,b){return a[b]=this.value,!0},remove:function(a,b){return delete a[b],!0},replace:function(a,b){return a[b]=this.value,!0},move:function(a,b,c){var d={op:"_get",path:this.from};return o(c,[d]),o(c,[{op:"remove",path:this.from}]),o(c,[{op:"add",path:this.path,value:d.value}]),!0},copy:function(a,b,c){var d={op:"_get",path:this.from};return o(c,[d]),o(c,[{op:"add",path:this.path,value:d.value}]),!0},test:function(a,b){return JSON.stringify(a[b])===JSON.stringify(this.value)},_get:function(a,b){this.value=a[b]}},q={add:function(a,b){return a.splice(b,0,this.value),!0},remove:function(a,b){return a.splice(b,1),!0},replace:function(a,b){return a[b]=this.value,!0},move:p.move,copy:p.copy,test:p.test,_get:p._get},r={add:function(a,b){var d={op:"add",path:b+c(this.name),value:this.object[this.name]};a.push(d)},"delete":function(a,b){var d={op:"remove",path:b+c(this.name)};a.push(d)},update:function(a,b){var d={op:"replace",path:b+c(this.name),value:this.object[this.name]};a.push(d)}},s=[];b.intervals;var t=function(){function a(a){this.observers=[],this.obj=a}return a}(),u=function(){function a(a,b){this.callback=a,this.observer=b}return a}();b.unobserve=i,b.observe=j,b.generate=m;var v;v=Object.keys?Object.keys:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};var w;w=Array.isArray?Array.isArray:function(a){return a.push&&"number"==typeof a.length},b.apply=o}(L||(L={})),"undefined"!=typeof exports&&(exports.apply=L.apply,exports.observe=L.observe,exports.unobserve=L.unobserve,exports.generate=L.generate),b.PluginHookClass=function(){function a(){this.hooks=b(),this.globalBucket={},this.legacy=c}var b=function(){return{beforeInitWalkontable:[],beforeInit:[],beforeRender:[],beforeSetRangeEnd:[],beforeDrawBorders:[],beforeChange:[],beforeChangeRender:[],beforeRemoveCol:[],beforeRemoveRow:[],beforeValidate:[],beforeGetCellMeta:[],beforeAutofill:[],beforeKeyDown:[],beforeOnCellMouseDown:[],beforeTouchScroll:[],afterInit:[],afterLoadData:[],afterUpdateSettings:[],afterRender:[],afterRenderer:[],afterChange:[],afterValidate:[],afterGetCellMeta:[],afterSetCellMeta:[],afterGetColHeader:[],afterGetRowHeader:[],afterDestroy:[],afterRemoveRow:[],afterCreateRow:[],afterRemoveCol:[],afterCreateCol:[],afterDeselect:[],afterSelection:[],afterSelectionByProp:[],afterSelectionEnd:[],afterSelectionEndByProp:[],afterOnCellMouseDown:[],afterOnCellMouseOver:[],afterOnCellCornerMouseDown:[],afterScrollVertically:[],afterScrollHorizontally:[],afterCellMetaReset:[],afterIsMultipleSelectionCheck:[],afterDocumentKeyDown:[],afterMomentumScroll:[],beforeCellAlignment:[],modifyColWidth:[],modifyRowHeight:[],modifyRow:[],modifyCol:[]}},c={onBeforeChange:"beforeChange",onChange:"afterChange",onCreateRow:"afterCreateRow",onCreateCol:"afterCreateCol",onSelection:"afterSelection",onCopyLimit:"afterCopyLimit",onSelectionEnd:"afterSelectionEnd",onSelectionByProp:"afterSelectionByProp",onSelectionEndByProp:"afterSelectionEndByProp"};return a.prototype.getBucket=function(a){return a?(a.pluginHookBucket||(a.pluginHookBucket={}),a.pluginHookBucket):this.globalBucket},a.prototype.add=function(a,b,d){if(Array.isArray(b))for(var e=0,f=b.length;f>e;e++)this.add(a,b[e]);else{a in c&&(a=c[a]);var g=this.getBucket(d);"undefined"==typeof g[a]&&(g[a]=[]),b.skip=!1,-1==g[a].indexOf(b)&&g[a].push(b)}return this},a.prototype.once=function(a,b,c){if(Array.isArray(b))for(var d=0,e=b.length;e>d;d++)b[d].runOnce=!0,this.add(a,b[d],c);else b.runOnce=!0,this.add(a,b,c)},a.prototype.remove=function(a,b,d){var e=!1;a in c&&(a=c[a]);var f=this.getBucket(d);if("undefined"!=typeof f[a])for(var g=0,h=f[a].length;h>g;g++)if(f[a][g]==b){f[a][g].skip=!0,e=!0;break}return e},a.prototype.run=function(a,b,d,e,f,g,h,i){return b in c&&(b=c[b]),d=this._runBucket(this.globalBucket,a,b,d,e,f,g,h,i),d=this._runBucket(this.getBucket(a),a,b,d,e,f,g,h,i)},a.prototype._runBucket=function(a,b,c,d,e,f,g,h,i){var j,k,l,m=a[c];if(m)for(k=0,l=m.length;l>k;k++)m[k].skip||(j=m[k].call(b,d,e,f,g,h,i),void 0!==j&&(d=j),m[k].runOnce&&this.remove(c,m[k],a===this.globalBucket?null:b));return d},a.prototype.destroy=function(a){var b=this.getBucket(a);for(var c in b)if(b.hasOwnProperty(c))for(var d=0,e=b[c].length;e>d;d++)this.remove(c,b[c],a)},a.prototype.register=function(a){this.isRegistered(a)||(this.hooks[a]=[])},a.prototype.deregister=function(a){delete this.hooks[a]},a.prototype.isRegistered=function(a){return"undefined"!=typeof this.hooks[a]},a.prototype.getRegistered=function(){return Object.keys(this.hooks)},a}(),b.hooks=new b.PluginHookClass,b.PluginHooks=b.hooks,function(a){function b(){function b(a){var b=document,c=this;c.table=b.createElement("table"),c.theadTh=b.createElement("th"),c.table.appendChild(b.createElement("thead")).appendChild(b.createElement("tr")).appendChild(c.theadTh),c.tableStyle=c.table.style,c.tableStyle.tableLayout="auto",c.tableStyle.width="auto",c.tbody=b.createElement("tbody"),c.table.appendChild(c.tbody),c.container=b.createElement("div"),c.container.className=a.rootElement.className+" hidden",c.containerStyle=c.container.style,c.container.appendChild(c.table)}var d=this,e=5;this.beforeInit=function(){var a=this;a.autoColumnWidths=[],a.getSettings().autoColumnSize!==!1?a.autoColumnSizeTmp||(a.autoColumnSizeTmp={table:null,tableStyle:null,theadTh:null,tbody:null,container:null,containerStyle:null,determineBeforeNextRender:!0},a.addHook("beforeRender",c.determineIfChanged),a.addHook("modifyColWidth",c.modifyColWidth),a.addHook("afterDestroy",c.afterDestroy),a.determineColumnWidth=d.determineColumnWidth):a.autoColumnSizeTmp&&(a.removeHook("beforeRender",c.determineIfChanged),a.removeHook("modifyColWidth",c.modifyColWidth),a.removeHook("afterDestroy",c.afterDestroy),delete a.determineColumnWidth,d.afterDestroy.call(a))},this.determineIfChanged=function(a){a&&c.determineColumnsWidth.apply(this,arguments)},this.determineColumnWidth=function(c){var d=this,f=d.autoColumnSizeTmp;f.container||b.call(f,d),f.container.className=d.rootElement.className+" htAutoColumnSize",f.table.className=d.table.className;for(var g=d.countRows(),h={},i=0,j=0;g>j;j++){var k=a.helper.stringify(d.getDataAtCell(j,c)),l=k.length;l>i&&(i=l),h[l]||(h[l]={needed:e,strings:[]}),h[l].needed&&(h[l].strings.push({value:k,row:j}),h[l].needed--)}var m=d.getSettings();m.colHeaders&&d.view.appendColHeader(c,f.theadTh),a.Dom.empty(f.tbody);for(var n in h)if(h.hasOwnProperty(n))for(var o=0,p=h[n].strings.length;p>o;o++){var q=h[n].strings[o].row,r=d.getCellMeta(q,c);r.col=c,r.row=q;var s=d.getCellRenderer(r),t=document.createElement("tr"),u=document.createElement("td");s(d,u,q,c,d.colToProp(c),h[n].strings[o].value,r),j++,t.appendChild(u),f.tbody.appendChild(t)}var v=d.rootElement.parentNode;v.appendChild(f.container);var w=a.Dom.outerWidth(f.table);return v.removeChild(f.container),w},this.determineColumnsWidth=function(){var a=this,b=this.getSettings();if(b.autoColumnSize||!b.colWidths)for(var c=this.countCols(),e=0;c>e;e++)a._getColWidthFromSettings(e)||(this.autoColumnWidths[e]=d.determineColumnWidth.call(a,e))},this.modifyColWidth=function(a,b){return this.autoColumnWidths[b]&&this.autoColumnWidths[b]>a?this.autoColumnWidths[b]:a},this.afterDestroy=function(){var a=this;a.autoColumnSizeTmp&&a.autoColumnSizeTmp.container&&a.autoColumnSizeTmp.container.parentNode&&a.autoColumnSizeTmp.container.parentNode.removeChild(a.autoColumnSizeTmp.container),a.autoColumnSizeTmp=null}}var c=new b;a.hooks.add("beforeInit",c.beforeInit),a.hooks.add("afterUpdateSettings",c.beforeInit)}(b);var M=new d;b.hooks.add("afterInit",function(){M.init.call(this,"afterInit")}),b.hooks.add("afterUpdateSettings",function(){M.init.call(this,"afterUpdateSettings")}),b.hooks.add("modifyRow",M.translateRow),b.hooks.add("afterGetColHeader",M.getColHeader),b.hooks.register("beforeColumnSort"),b.hooks.register("afterColumnSort"),function(a){function b(a,b){return-1!=a.indexOf(b)?a:(a=a.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ",""),a+=" "+b)}function c(a,b){return-1!=a.indexOf(b)?a:(a=a.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ",""),a+=" "+b)}function d(a){for(var b={},c=a.from.row;c<=a.to.row;c++)for(var d=a.from.col;d<=a.to.col;d++)b[c]||(b[c]=[]),b[c][d]=this.getCellMeta(c,d).className;return b}function e(a,d,e,f){var g=this.getCellMeta(a,d),h=f;g.className&&(h="vertical"===e?b(g.className,f):c(g.className,f)),this.setCellMeta(a,d,"className",h)}function f(a,b,c){var f=d.call(this,a);if(this.runHooks("beforeCellAlignment",f,a,b,c),a.from.row==a.to.row&&a.from.col==a.to.col)e.call(this,a.from.row,a.from.col,b,c);else for(var g=a.from.row;g<=a.to.row;g++)for(var h=a.from.col;h<=a.to.col;h++)e.call(this,g,h,b,c);this.render()}function g(b){this.instance=b;var c=this;if(c.menus=[],c.htMenus={},c.triggerRows=[],c.eventManager=a.eventManager(c),this.enabled=!0,this.instance.addHook("afterDestroy",function(){c.destroy()}),this.defaultOptions={items:[{key:"row_above",name:"Insert row above",callback:function(a,b){this.alter("insert_row",b.start.row)},disabled:function(){var a=this.getSelected(),b=[0,a[1],this.countRows()-1,a[1]],c=b.join(",")==a.join(",");return a[0]<0||this.countRows()>=this.getSettings().maxRows||c}},{key:"row_below",name:"Insert row below",callback:function(a,b){this.alter("insert_row",b.end.row+1)},disabled:function(){var a=this.getSelected(),b=[0,a[1],this.countRows()-1,a[1]],c=b.join(",")==a.join(",");return this.getSelected()[0]<0||this.countRows()>=this.getSettings().maxRows||c}},g.SEPARATOR,{key:"col_left",name:"Insert column on the left",callback:function(a,b){this.alter("insert_col",b.start.col)},disabled:function(){var a=this.getSelected(),b=[a[0],0,a[0],this.countCols()-1],c=b.join(",")==a.join(",");return this.getSelected()[1]<0||this.countCols()>=this.getSettings().maxCols||c}},{key:"col_right",name:"Insert column on the right",callback:function(a,b){this.alter("insert_col",b.end.col+1)},disabled:function(){var a=this.getSelected(),b=[a[0],0,a[0],this.countCols()-1],c=b.join(",")==a.join(",");return a[1]<0||this.countCols()>=this.getSettings().maxCols||c}},g.SEPARATOR,{key:"remove_row",name:"Remove row",callback:function(a,b){var c=b.end.row-b.start.row+1;this.alter("remove_row",b.start.row,c)},disabled:function(){var a=this.getSelected(),b=[0,a[1],this.countRows()-1,a[1]],c=b.join(",")==a.join(",");return a[0]<0||c}},{key:"remove_col",name:"Remove column",callback:function(a,b){var c=b.end.col-b.start.col+1;this.alter("remove_col",b.start.col,c)},disabled:function(){var a=this.getSelected(),b=[a[0],0,a[0],this.countCols()-1],c=b.join(",")==a.join(",");return a[1]<0||c}},g.SEPARATOR,{key:"undo",name:"Undo",callback:function(){this.undo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isUndoAvailable()}},{key:"redo",name:"Redo",callback:function(){this.redo()},disabled:function(){return this.undoRedo&&!this.undoRedo.isRedoAvailable()}},g.SEPARATOR,{key:"make_read_only",name:function(){var a="Read only",b=c.checkSelectionReadOnlyConsistency(this);return b&&(a=c.markSelected(a)),a},callback:function(){var a=c.checkSelectionReadOnlyConsistency(this),b=this;this.getSelectedRange().forAll(function(c,d){b.getCellMeta(c,d).readOnly=a?!1:!0}),this.render()}},g.SEPARATOR,{key:"alignment",name:"Alignment",submenu:{items:[{name:function(){var a="Left",b=c.checkSelectionAlignment(this,"htLeft");return b&&(a=c.markSelected(a)),a},callback:function(){f.call(this,this.getSelectedRange(),"horizontal","htLeft")},disabled:!1},{name:function(){var a="Center",b=c.checkSelectionAlignment(this,"htCenter");return b&&(a=c.markSelected(a)),a},callback:function(){f.call(this,this.getSelectedRange(),"horizontal","htCenter")},disabled:!1},{name:function(){var a="Right",b=c.checkSelectionAlignment(this,"htRight");return b&&(a=c.markSelected(a)),a},callback:function(){f.call(this,this.getSelectedRange(),"horizontal","htRight")},disabled:!1},{name:function(){var a="Justify",b=c.checkSelectionAlignment(this,"htJustify");return b&&(a=c.markSelected(a)),a},callback:function(){f.call(this,this.getSelectedRange(),"horizontal","htJustify")},disabled:!1},g.SEPARATOR,{name:function(){var a="Top",b=c.checkSelectionAlignment(this,"htTop");return b&&(a=c.markSelected(a)),a},callback:function(){f.call(this,this.getSelectedRange(),"vertical","htTop")},disabled:!1},{name:function(){var a="Middle",b=c.checkSelectionAlignment(this,"htMiddle");return b&&(a=c.markSelected(a)),a},callback:function(){f.call(this,this.getSelectedRange(),"vertical","htMiddle")},disabled:!1},{name:function(){var a="Bottom",b=c.checkSelectionAlignment(this,"htBottom");return b&&(a=c.markSelected(a)),a},callback:function(){f.call(this,this.getSelectedRange(),"vertical","htBottom")},disabled:!1}]}}]},c.options={},a.helper.extend(c.options,this.options),this.bindMouseEvents(),this.markSelected=function(a){return"<span class='selected'>"+String.fromCharCode(10003)+"</span>"+a},this.checkSelectionAlignment=function(a,b){var c=!1;return a.getSelectedRange().forAll(function(d,e){var f=a.getCellMeta(d,e).className;return f&&-1!=f.indexOf(b)?(c=!0,!1):void 0}),c},!this.instance.getSettings().allowInsertRow){var d=i(this.defaultOptions.items,"row_above");this.defaultOptions.items.splice(d,1);var e=i(this.defaultOptions.items,"row_above");this.defaultOptions.items.splice(e,1),this.defaultOptions.items.splice(e,1)}if(!this.instance.getSettings().allowInsertColumn){var h=i(this.defaultOptions.items,"col_left");this.defaultOptions.items.splice(h,1);var j=i(this.defaultOptions.items,"col_right");this.defaultOptions.items.splice(j,1),this.defaultOptions.items.splice(j,1)}var k,l,m=!1,n=!1;this.instance.getSettings().allowRemoveRow||(k=i(this.defaultOptions.items,"remove_row"),this.defaultOptions.items.splice(k,1),m=!0),this.instance.getSettings().allowRemoveColumn||(l=i(this.defaultOptions.items,"remove_col"),this.defaultOptions.items.splice(l,1),n=!0),m&&n&&this.defaultOptions.items.splice(l,1),this.checkSelectionReadOnlyConsistency=function(a){var b=!1;return a.getSelectedRange().forAll(function(c,d){return a.getCellMeta(c,d).readOnly?(b=!0,!1):void 0}),b},a.hooks.run(b,"afterContextMenuDefaultOptions",this.defaultOptions)}function h(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].key===b)return a[c]}function i(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c].key===b)return c}function j(){if(!this.rootElement.className.indexOf("htContextMenu")){for(var a=0,b=0,c=this.getSettings().data.length,d=0;c>d;d++)this.getSettings().data[d].name==g.SEPARATOR.name?a+=2:b+=26;this.view.wt.wtScrollbars.vertical.fixedContainer.style.height=b+a+"px"}}function k(){var b=this,c=b.getSettings().contextMenu,d=a.helper.isObject(c)?c:{};c?(b.contextMenu||(b.contextMenu=new g(b,d)),b.contextMenu.enable()):b.contextMenu&&(b.contextMenu.destroy(),delete b.contextMenu)}g.prototype.createMenu=function(b,c){b&&(b=b.replace(/ /g,"_"),b="htContextSubMenu_"+b);var d;return d=document.querySelector(b?".htContextMenu."+b:".htContextMenu"),d||(d=document.createElement("DIV"),a.Dom.addClass(d,"htContextMenu"),b&&a.Dom.addClass(d,b),document.getElementsByTagName("body")[0].appendChild(d)),this.menus.indexOf(d)<0&&(this.menus.push(d),c=c||0,this.triggerRows.push(c)),d},g.prototype.bindMouseEvents=function(){function b(b){var c=this.instance.getSettings();this.closeAll(),b.preventDefault(),a.helper.stopPropagation(b);var d=this.instance.getSettings().rowHeaders,e=this.instance.getSettings().colHeaders;if(d||e){if(d&&e){var f=b.target.parentNode.querySelectorAll(".cornerHeader").length>0;if(f)return}}else if(!("TD"==b.target.nodeName||a.Dom.hasClass(b.target,"current")&&a.Dom.hasClass(b.target,"wtBorder")))return;var h=this.createMenu(),i=this.getItems(c.contextMenu);this.show(h,i),this.setMenuPosition(b,h),this.eventManager.addEventListener(document.documentElement,"mousedown",a.helper.proxy(g.prototype.closeAll,this))}var c=a.eventManager(this.instance);c.addEventListener(this.instance.rootElement,"contextmenu",a.helper.proxy(b,this))},g.prototype.bindTableEvents=function(){this._afterScrollCallback=function(){},this.instance.addHook("afterScrollVertically",this._afterScrollCallback),this.instance.addHook("afterScrollHorizontally",this._afterScrollCallback)},g.prototype.unbindTableEvents=function(){this._afterScrollCallback&&(this.instance.removeHook("afterScrollVertically",this._afterScrollCallback),this.instance.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)},g.prototype.performAction=function(a,b){var c=this,d=b.getSelected()[0],e=b.getData()[d];if(e.disabled!==!0&&("function"!=typeof e.disabled||e.disabled.call(this.instance)!==!0)&&!e.hasOwnProperty("submenu")){if("function"!=typeof e.callback)return;var f=this.instance.getSelectedRange(),h=g.utils.normalizeSelection(f);e.callback.call(this.instance,e.key,h,a),c.closeAll()}},g.prototype.unbindMouseEvents=function(){this.eventManager.clear();var b=a.eventManager(this.instance);b.removeEventListener(this.instance.rootElement,"contextmenu")},g.prototype.show=function(b,c){var d=this;b.removeAttribute("style"),b.style.display="block";var e={data:c,colHeaders:!1,colWidths:[200],readOnly:!0,copyPaste:!1,columns:[{data:"name",renderer:a.helper.proxy(this.renderer,this)}],renderAllRows:!0,beforeKeyDown:function(a){d.onBeforeKeyDown(a,f)},afterOnCellMouseOver:function(a,b,c){d.onCellMouseOver(a,b,c,f)}},f=new a(b,e);this.eventManager.removeEventListener(b,"mousedown"),this.eventManager.addEventListener(b,"mousedown",function(a){d.performAction(a,f)}),this.bindTableEvents(),f.listen(),this.htMenus[f.guid]=f},g.prototype.close=function(a){this.hide(a),this.eventManager.clear(),this.unbindTableEvents(),this.instance.listen()},g.prototype.closeAll=function(){for(;this.menus.length>0;){var a=this.menus.pop();a&&this.close(a)}this.triggerRows=[]},g.prototype.closeLastOpenedSubMenu=function(){var a=this.menus.pop();a&&this.hide(a)},g.prototype.hide=function(a){a.style.display="none";var b=this.htMenus[a.id];b.destroy(),delete this.htMenus[a.id]},g.prototype.renderer=function(b,c,d,e,f,h){function i(a){return a.hasOwnProperty("submenu")}function j(a){return new RegExp(g.SEPARATOR.name,"i").test(a.name)}function k(a){return a.disabled===!0||"function"==typeof a.disabled&&a.disabled.call(l.instance)===!0}var l=this,m=b.getData()[d],n=document.createElement("DIV");"function"==typeof h&&(h=h.call(this.instance)),a.Dom.empty(c),c.appendChild(n),j(m)?a.Dom.addClass(c,"htSeparator"):a.Dom.fastInnerHTML(n,h),k(m)?(a.Dom.addClass(c,"htDisabled"),this.eventManager.addEventListener(n,"mouseenter",function(){b.deselectCell()})):i(m)?(a.Dom.addClass(c,"htSubmenu"),this.eventManager.addEventListener(n,"mouseenter",function(){b.selectCell(d,e)})):(a.Dom.removeClass(c,"htSubmenu"),a.Dom.removeClass(c,"htDisabled"),this.eventManager.addEventListener(n,"mouseenter",function(){b.selectCell(d,e)}))},g.prototype.onCellMouseOver=function(a,b,c,d){var e=this.menus.length;if(e>0){var f=this.menus[e-1];f.id!=d.guid&&this.closeLastOpenedSubMenu()}else this.closeLastOpenedSubMenu();if(-1!=c.className.indexOf("htSubmenu")){var g=d.getData()[b.row],h=this.getItems(g.submenu),i=this.createMenu(g.name,b.row),j=c.getBoundingClientRect();this.show(i,h),this.setSubMenuPosition(j,i)}},g.prototype.onBeforeKeyDown=function(b,c){function d(a){var b=a.getCell(0,0);g.utils.isSeparator(b)||g.utils.isDisabled(b)?f(0,0,a):a.selectCell(0,0)}function e(a){var b=a.countRows()-1,c=a.getCell(b,0);g.utils.isSeparator(c)||g.utils.isDisabled(c)?h(b,0,a):a.selectCell(b,0)}function f(a,b,c){var d=a+1,e=d<c.countRows()?c.getCell(d,b):null;e&&(g.utils.isSeparator(e)||g.utils.isDisabled(e)?f(d,b,c):c.selectCell(d,b))}function h(a,b,c){var d=a-1,e=d>=0?c.getCell(d,b):null;e&&(g.utils.isSeparator(e)||g.utils.isDisabled(e)?h(d,b,c):c.selectCell(d,b))}function i(a,b,c,d){var e=a.getData()[d],f=b.getItems(e.submenu),g=b.createMenu(e.name,d),h=c.getBoundingClientRect(),i=b.show(g,f);b.setSubMenuPosition(h,g),i.selectCell(0,0)}a.Dom.enableImmediatePropagation(b);var j=this,k=c.getSelected();switch(b.keyCode){case a.helper.keyCode.ESCAPE:j.closeAll(),b.preventDefault(),b.stopImmediatePropagation();break;case a.helper.keyCode.ENTER:k&&j.performAction(b,c);break;case a.helper.keyCode.ARROW_DOWN:k?f(k[0],k[1],c,j):d(c,j),b.preventDefault(),b.stopImmediatePropagation();break;case a.helper.keyCode.ARROW_UP:k?h(k[0],k[1],c,j):e(c,j),b.preventDefault(),b.stopImmediatePropagation();break;case a.helper.keyCode.ARROW_RIGHT:if(k){var l=k[0],m=c.getCell(k[0],0);g.utils.hasSubMenu(m)&&i(c,j,m,l)}b.preventDefault(),b.stopImmediatePropagation();break;case a.helper.keyCode.ARROW_LEFT:if(k){if(-1!=c.rootElement.className.indexOf("htContextSubMenu_")){j.closeLastOpenedSubMenu();var n=j.menus.length;if(n>0){var o=j.menus[n-1],p=j.triggerRows.pop();c=this.htMenus[o.id],c.selectCell(p,0)}}b.preventDefault(),b.stopImmediatePropagation()}}},g.prototype.getItems=function(b){function c(b){"string"==typeof b?this.name=b:a.helper.extend(this,b)}var d,e;c.prototype=b,b&&b.items&&(b=b.items),b===!0&&(b=this.defaultOptions.items),d=[];for(var f in b)b.hasOwnProperty(f)&&(e="string"==typeof b[f]?h(this.defaultOptions.items,b[f]):h(this.defaultOptions.items,f),e||(e=b[f]),e=new c(e),"object"==typeof b[f]&&a.helper.extend(e,b[f]),e.key||(e.key=f),d.push(e));return d},g.prototype.setSubMenuPosition=function(b,c){var d=a.Dom.getWindowScrollTop(),e=a.Dom.getWindowScrollLeft(),f={top:d+b.top,topRelative:b.top,left:b.left,leftRelative:b.left-e,scrollTop:d,scrollLeft:e,cellHeight:b.height,cellWidth:b.width};this.menuFitsBelowCursor(f,c,document.body.clientWidth)?this.positionMenuBelowCursor(f,c,!0):this.menuFitsAboveCursor(f,c)?this.positionMenuAboveCursor(f,c,!0):this.positionMenuBelowCursor(f,c,!0),this.menuFitsOnRightOfCursor(f,c,document.body.clientWidth)?this.positionMenuOnRightOfCursor(f,c,!0):this.positionMenuOnLeftOfCursor(f,c,!0)},g.prototype.setMenuPosition=function(b,c){var d=a.Dom.getWindowScrollTop(),e=a.Dom.getWindowScrollLeft(),f=b.pageY||b.clientY+d,g=b.pageX||b.clientX+e,h={top:f,topRelative:f-d,left:g,leftRelative:g-e,scrollTop:d,scrollLeft:e,cellHeight:b.target.clientHeight,cellWidth:b.target.clientWidth};this.menuFitsBelowCursor(h,c,document.body.clientHeight)?this.positionMenuBelowCursor(h,c):this.menuFitsAboveCursor(h,c)?this.positionMenuAboveCursor(h,c):this.positionMenuBelowCursor(h,c),this.menuFitsOnRightOfCursor(h,c,document.body.clientWidth)?this.positionMenuOnRightOfCursor(h,c):this.positionMenuOnLeftOfCursor(h,c)},g.prototype.menuFitsAboveCursor=function(a,b){return a.topRelative>=b.offsetHeight},g.prototype.menuFitsBelowCursor=function(a,b,c){return a.topRelative+b.offsetHeight<=c},g.prototype.menuFitsOnRightOfCursor=function(a,b,c){return a.leftRelative+b.offsetWidth<=c},g.prototype.positionMenuBelowCursor=function(a,b){b.style.top=a.top+"px"},g.prototype.positionMenuAboveCursor=function(a,b,c){b.style.top=c?a.top+a.cellHeight-b.offsetHeight+"px":a.top-b.offsetHeight+"px"},g.prototype.positionMenuOnRightOfCursor=function(a,b,c){b.style.left=c?1+a.left+a.cellWidth+"px":1+a.left+"px"},g.prototype.positionMenuOnLeftOfCursor=function(a,b,c){b.style.left=c?a.left-b.offsetWidth+"px":a.left-b.offsetWidth+"px"},g.utils={},g.utils.normalizeSelection=function(a){return{start:a.getTopLeftCorner(),end:a.getBottomRightCorner()}},g.utils.isSeparator=function(b){return a.Dom.hasClass(b,"htSeparator")},g.utils.hasSubMenu=function(b){return a.Dom.hasClass(b,"htSubmenu")},g.utils.isDisabled=function(b){return a.Dom.hasClass(b,"htDisabled")},g.prototype.enable=function(){this.enabled||(this.enabled=!0,this.bindMouseEvents())},g.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.closeAll(),this.unbindMouseEvents(),this.unbindTableEvents())},g.prototype.destroy=function(){for(this.closeAll();this.menus.length>0;){var a=this.menus.pop();this.triggerRows.pop(),a&&(this.close(a),this.isMenuEnabledByOtherHotInstance()||this.removeMenu(a))}this.unbindMouseEvents(),this.unbindTableEvents()},g.prototype.isMenuEnabledByOtherHotInstance=function(){for(var a=document.querySelectorAll(".handsontable"),b=!1,c=0,d=a.length;d>c;c++){var e=this.htMenus[a[c].id];if(e&&e.getSettings().contextMenu){b=!0;break}}return b},g.prototype.removeMenu=function(a){a.parentNode&&this.menu.parentNode.removeChild(a)},g.prototype.align=function(a,b,c){f.call(this,a,b,c)},g.SEPARATOR={name:"---------"},a.hooks.add("afterInit",k),a.hooks.add("afterUpdateSettings",k),a.hooks.add("afterInit",j),a.PluginHooks.register("afterContextMenuDefaultOptions"),a.ContextMenu=g}(b);var N=function(){var a=this,c=a.getSettings().comments;c&&(b.Comments=new e(a),b.Comments.init())},O=function(a,c,d,e,f,g){g.comment&&b.Dom.addClass(a,g.commentedCellClassName)},P=function(a){var c=this;c.getSettings().comments&&(a.items.push(b.ContextMenu.SEPARATOR),a.items.push({key:"commentsAddEdit",name:function(){var a=b.Comments.checkSelectionCommentsConsistency();return a?"Edit Comment":"Add Comment"},callback:function(){b.Comments.showComment(this.getSelectedRange())},disabled:function(){return!1}}),a.items.push({key:"commentsRemove",name:function(){return"Delete Comment"},callback:function(a,c){b.Comments.removeComment(c.start.row,c.start.col)},disabled:function(){var a=b.Comments.checkSelectionCommentsConsistency();return!a}}))};b.hooks.add("beforeInit",N),b.hooks.add("afterContextMenuDefaultOptions",P),b.hooks.add("afterRenderer",O),function(b){function c(){function c(a){m=this,n=a;var b=this.view.wt.wtTable.getCoords(a).col;if(b>=0){l=b;var c=n.getBoundingClientRect();k=c.left,o.style.top=c.top+"px",o.style.left=k+"px",m.rootElement.appendChild(o)}}function d(a,b){var c=a.getBoundingClientRect(),d=6;o.style.left=b>0?c.left+c.width-d+"px":c.left+"px"}function e(){var a=this;b.Dom.addClass(o,"active"),b.Dom.addClass(p,"active");var c=n.getBoundingClientRect();p.style.width=c.width+"px",p.style.height=a.view.maximumVisibleElementHeight(0)+"px",p.style.top=o.style.top,p.style.left=k+"px",a.rootElement.appendChild(p)}function f(a){p.style.left=k+a+"px"}function g(){b.Dom.removeClass(o,"active"),b.Dom.removeClass(p,"active")}var h,i,j,k,l,m,n,o=document.createElement("DIV"),p=document.createElement("DIV"),q=b.eventManager(this);o.className="manualColumnMover",p.className="manualColumnMoverGuide";var r=function(){var a=this;b.hooks.run(a,"persistentStateSave","manualColumnPositions",a.manualColumnPositions)},s=function(){var a=this,c={};return b.hooks.run(a,"persistentStateLoad","manualColumnPositions",c),c.value},t=function(a){return"BODY"!=a.tagName?"THEAD"==a.parentNode.tagName?!0:(a=a.parentNode,t(a)):!1},u=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:u(a.parentNode):null},v=function(){var k,m=this;q.addEventListener(m.rootElement,"mouseover",function(a){if(t(a.target)){var b=u(a.target);if(b)if(k){var e=m.view.wt.wtTable.getCoords(b).col;e>=0&&(i=e,d(a.target,i-h))
}else c.call(m,b)}}),q.addEventListener(m.rootElement,"mousedown",function(a){b.Dom.hasClass(a.target,"manualColumnMover")&&(j=b.helper.pageX(a),e.call(m),k=m,h=l,i=l)}),q.addEventListener(a,"mousemove",function(a){k&&f(b.helper.pageX(a)-j)}),q.addEventListener(a,"mouseup",function(){k&&(g(),k=!1,x(m.manualColumnPositions,m.countCols()),m.manualColumnPositions.splice(i,0,m.manualColumnPositions.splice(h,1)[0]),m.forceFullRender=!0,m.view.render(),r.call(m),b.hooks.run(m,"afterColumnMove",h,i),c.call(m,n))}),m.addHook("afterDestroy",w)},w=function(){q.clear()},x=function(a,b){if(a.length<b)for(var c=a.length;b>c;c++)a[c]=c};this.beforeInit=function(){this.manualColumnPositions=[]},this.init=function(a){var b=this,c=!!this.getSettings().manualColumnMove;if(c){var d=this.getSettings().manualColumnMove,e=s.call(b);this.manualColumnPositions="undefined"!=typeof e?e:Array.isArray(d)?d:[],"afterInit"==a&&("undefined"!=typeof b.manualColumnPositionsPluginUsages?b.manualColumnPositionsPluginUsages.push("manualColumnMove"):b.manualColumnPositionsPluginUsages=["manualColumnMove"],v.call(this),this.manualColumnPositions.length>0&&(this.forceFullRender=!0,this.render()))}else{var f=b.manualColumnPositionsPluginUsages?b.manualColumnPositionsPluginUsages.indexOf("manualColumnMove"):-1;f>-1&&(w.call(this),this.manualColumnPositions=[],b.manualColumnPositionsPluginUsages[f]=void 0)}},this.modifyCol=function(a){return this.getSettings().manualColumnMove?("undefined"==typeof this.manualColumnPositions[a]&&x(this.manualColumnPositions,a+1),this.manualColumnPositions[a]):a},this.afterRemoveCol=function(a,b){if(this.getSettings().manualColumnMove){var c,d=this.manualColumnPositions;c=d.splice(a,b),d=d.map(function(a){var b,d=a;for(b=0;b<c.length;b++)a>c[b]&&d--;return d}),this.manualColumnPositions=d}},this.afterCreateCol=function(a,b){if(this.getSettings().manualColumnMove){var c=this.manualColumnPositions;if(c.length){for(var d=[],e=0;b>e;e++)d.push(a+e);a>=c.length?c.concat(d):(c=c.map(function(c){return c>=a?c+b:c}),c.splice.apply(c,[a,0].concat(d))),this.manualColumnPositions=c}}}}var d=new c;b.hooks.add("beforeInit",d.beforeInit),b.hooks.add("afterInit",function(){d.init.call(this,"afterInit")}),b.hooks.add("afterUpdateSettings",function(){d.init.call(this,"afterUpdateSettings")}),b.hooks.add("modifyCol",d.modifyCol),b.hooks.add("afterRemoveCol",d.afterRemoveCol),b.hooks.add("afterCreateCol",d.afterCreateCol),b.hooks.register("afterColumnMove")}(b),function(b){function c(){function c(a){k=this,h=a;var b=this.view.wt.wtTable.getCoords(a).col;if(b>=0){i=b;var c=h.getBoundingClientRect();o=c.left-6,n=parseInt(c.width,10),p.style.top=c.top+"px",p.style.left=o+n+"px",k.rootElement.appendChild(p)}}function d(){p.style.left=o+j+"px"}function e(){var a=this;b.Dom.addClass(p,"active"),b.Dom.addClass(q,"active"),q.style.top=p.style.top,q.style.left=p.style.left,q.style.height=a.view.maximumVisibleElementHeight(0)+"px",a.rootElement.appendChild(q)}function f(){q.style.left=p.style.left}function g(){b.Dom.removeClass(p,"active"),b.Dom.removeClass(q,"active")}var h,i,j,k,l,m,n,o,p=document.createElement("DIV"),q=document.createElement("DIV"),r=b.eventManager(this);p.className="manualColumnResizer",q.className="manualColumnResizerGuide";var s=function(){var a=this;b.hooks.run(a,"persistentStateSave","manualColumnWidths",a.manualColumnWidths)},t=function(){var a=this,c={};return b.hooks.run(a,"persistentStateLoad","manualColumnWidths",c),c.value},u=function(a){return"BODY"!=a.tagName?"THEAD"==a.parentNode.tagName?!0:(a=a.parentNode,u(a)):!1},v=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:v(a.parentNode):null},w=function(){var k,o=this,p=0,q=null;r.addEventListener(o.rootElement,"mouseover",function(a){if(u(a.target)){var b=v(a.target);b&&(k||c.call(o,b))}}),r.addEventListener(o.rootElement,"mousedown",function(a){b.Dom.hasClass(a.target,"manualColumnResizer")&&(e.call(o),k=o,null==q&&(q=setTimeout(function(){p>=2&&(l=o.determineColumnWidth.call(o,i),y(i,l),o.forceFullRender=!0,o.view.render(),b.hooks.run(o,"afterColumnResize",i,l)),p=0,q=null},500),o._registerTimeout(q)),p++,m=b.helper.pageX(a),l=n)}),r.addEventListener(a,"mousemove",function(a){k&&(j=n+(b.helper.pageX(a)-m),l=y(i,j),d(),f())}),r.addEventListener(a,"mouseup",function(){k&&(g(),k=!1,l!=n&&(o.forceFullRender=!0,o.view.render(),s.call(o),b.hooks.run(o,"afterColumnResize",i,l)),c.call(o,h))}),o.addHook("afterDestroy",x)},x=function(){r.clear()};this.beforeInit=function(){this.manualColumnWidths=[]},this.init=function(a){var b=this,c=!!this.getSettings().manualColumnResize;if(c){var d=this.getSettings().manualColumnResize,e=t.call(b);"undefined"!=typeof b.manualColumnWidthsPluginUsages?b.manualColumnWidthsPluginUsages.push("manualColumnResize"):b.manualColumnWidthsPluginUsages=["manualColumnResize"],this.manualColumnWidths="undefined"!=typeof e?e:Array.isArray(d)?d:[],"afterInit"==a&&(w.call(this),this.manualColumnWidths.length>0&&(this.forceFullRender=!0,this.render()))}else{var f=b.manualColumnWidthsPluginUsages?b.manualColumnWidthsPluginUsages.indexOf("manualColumnResize"):-1;f>-1&&(x.call(this),this.manualColumnWidths=[])}};var y=function(a,c){return c=Math.max(c,20),a=b.hooks.run(k,"modifyCol",a),k.manualColumnWidths[a]=c,c};this.modifyColWidth=function(a,b){return b=this.runHooks("modifyCol",b),this.getSettings().manualColumnResize&&this.manualColumnWidths[b]?this.manualColumnWidths[b]:a}}var d=new c;b.hooks.add("beforeInit",d.beforeInit),b.hooks.add("afterInit",function(){d.init.call(this,"afterInit")}),b.hooks.add("afterUpdateSettings",function(){d.init.call(this,"afterUpdateSettings")}),b.hooks.add("modifyColWidth",d.modifyColWidth),b.hooks.register("afterColumnResize")}(b),function(b){function c(){function c(a){k=this,h=a;var b=this.view.wt.wtTable.getCoords(a).row;if(b>=0){i=b;var c=h.getBoundingClientRect();o=c.top-6,n=parseInt(c.height,10),p.style.left=c.left+"px",p.style.top=o+n+"px",k.rootElement.appendChild(p)}}function d(){p.style.top=o+j+"px"}function e(){var a=this;b.Dom.addClass(p,"active"),b.Dom.addClass(q,"active"),q.style.top=p.style.top,q.style.left=p.style.left,q.style.width=a.view.maximumVisibleElementWidth(0)+"px",a.rootElement.appendChild(q)}function f(){q.style.top=p.style.top}function g(){b.Dom.removeClass(p,"active"),b.Dom.removeClass(q,"active")}var h,i,j,k,l,m,n,o,p=document.createElement("DIV"),q=document.createElement("DIV"),r=b.eventManager(this);p.className="manualRowResizer",q.className="manualRowResizerGuide";var s=function(){var a=this;b.hooks.run(a,"persistentStateSave","manualRowHeights",a.manualRowHeights)},t=function(){var a=this,c={};return b.hooks.run(a,"persistentStateLoad","manualRowHeights",c),c.value},u=function(a){return"BODY"!=a.tagName?"TBODY"==a.parentNode.tagName?!0:(a=a.parentNode,u(a)):!1},v=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:v(a.parentNode):null},w=function(){var k,o=this,p=0,q=null;r.addEventListener(o.rootElement,"mouseover",function(a){if(u(a.target)){var b=v(a.target);b&&(k||c.call(o,b))}}),r.addEventListener(o.rootElement,"mousedown",function(a){b.Dom.hasClass(a.target,"manualRowResizer")&&(e.call(o),k=o,null==q&&(q=setTimeout(function(){p>=2&&(y(i,null),o.forceFullRender=!0,o.view.render(),b.hooks.run(o,"afterRowResize",i,l)),p=0,q=null},500),o._registerTimeout(q)),p++,m=b.helper.pageY(a),l=n)}),r.addEventListener(a,"mousemove",function(a){k&&(j=n+(b.helper.pageY(a)-m),l=y(i,j),d(),f())}),r.addEventListener(a,"mouseup",function(){k&&(g(),k=!1,l!=n&&(o.forceFullRender=!0,o.view.render(),s.call(o),b.hooks.run(o,"afterRowResize",i,l)),c.call(o,h))}),o.addHook("afterDestroy",x)},x=function(){r.clear()};this.beforeInit=function(){this.manualRowHeights=[]},this.init=function(a){var b=this,c=!!this.getSettings().manualRowResize;if(c){var d=this.getSettings().manualRowResize,e=t.call(b);"undefined"!=typeof b.manualRowHeightsPluginUsages?b.manualRowHeightsPluginUsages.push("manualRowResize"):b.manualRowHeightsPluginUsages=["manualRowResize"],this.manualRowHeights="undefined"!=typeof e?e:Array.isArray(d)?d:[],"afterInit"===a?(w.call(this),this.manualRowHeights.length>0&&(this.forceFullRender=!0,this.render())):(this.forceFullRender=!0,this.render())}else{var f=b.manualRowHeightsPluginUsages?b.manualRowHeightsPluginUsages.indexOf("manualRowResize"):-1;f>-1&&(x.call(this),this.manualRowHeights=[],b.manualRowHeightsPluginUsages[f]=void 0)}};var y=function(a,c){return a=b.hooks.run(k,"modifyRow",a),k.manualRowHeights[a]=c,c};this.modifyRowHeight=function(a,b){return this.getSettings().manualRowResize&&(b=this.runHooks("modifyRow",b),void 0!==this.manualRowHeights[b])?this.manualRowHeights[b]:a}}var d=new c;b.hooks.add("beforeInit",d.beforeInit),b.hooks.add("afterInit",function(){d.init.call(this,"afterInit")}),b.hooks.add("afterUpdateSettings",function(){d.init.call(this,"afterUpdateSettings")}),b.hooks.add("modifyRowHeight",d.modifyRowHeight),b.hooks.register("afterRowResize")}(b),function(){function a(){var a=this,b=a.getSettings().observeChanges;b?(a.observer&&e.call(a),c.call(a),g.call(a)):b||e.call(a)}function c(){var a=this;a.observeChangesActive=!0,a.pauseObservingChanges=function(){a.observeChangesActive=!1},a.resumeObservingChanges=function(){a.observeChangesActive=!0},a.observedData=a.getData(),a.observer=L.observe(a.observedData,function(b){a.observeChangesActive&&(d.call(a,b),a.render()),a.runHooks("afterChangesObserved")})}function d(a){function b(a){var b;return b=d(a),b=c(b)}function c(a){var b=[];return a.filter(function(a){var c=e(a.path);if(-1!=["add","remove"].indexOf(a.op)&&!isNaN(c.col)){if(-1!=b.indexOf(c.col))return!1;b.push(c.col)}return!0})}function d(a){return a.filter(function(a){return!/[/]length/gi.test(a.path)})}function e(a){var b=a.match(/^\/(\d+)\/?(.*)?$/);return{row:parseInt(b[1],10),col:/^\d*$/.test(b[2])?parseInt(b[2],10):b[2]}}for(var f=this,g=b(a),h=0,i=g.length;i>h;h++){var j=g[h],k=e(j.path);switch(j.op){case"add":isNaN(k.col)?f.runHooks("afterCreateRow",k.row):f.runHooks("afterCreateCol",k.col);break;case"remove":isNaN(k.col)?f.runHooks("afterRemoveRow",k.row,1):f.runHooks("afterRemoveCol",k.col,1);break;case"replace":f.runHooks("afterChange",[k.row,k.col,null,j.value],"external")}}}function e(){var a=this;a.observer&&(f.call(a),h.call(a))}function f(){var a=this;L.unobserve(a.observedData,a.observer),delete a.observeChangesActive,delete a.pauseObservingChanges,delete a.resumeObservingChanges}function g(){var a=this;a.addHook("afterDestroy",e),a.addHook("afterCreateRow",i),a.addHook("afterRemoveRow",i),a.addHook("afterCreateCol",i),a.addHook("afterRemoveCol",i),a.addHook("afterChange",function(a,b){"loadData"!=b&&i.call(this)})}function h(){var a=this;a.removeHook("afterDestroy",e),a.removeHook("afterCreateRow",i),a.removeHook("afterRemoveRow",i),a.removeHook("afterCreateCol",i),a.removeHook("afterRemoveCol",i),a.removeHook("afterChange",i)}function i(){var a=this;a.pauseObservingChanges(),a.addHookOnce("afterChangesObserved",function(){a.resumeObservingChanges()})}b.hooks.add("afterLoadData",a),b.hooks.add("afterUpdateSettings",a),b.hooks.register("afterChangesObserved")}(),function(a){function c(){function c(){var a=this;for(var b in f)f.hasOwnProperty(b)&&a.addHook(b,f[b])}function d(){var a=this;for(var b in f)f.hasOwnProperty(b)&&a.removeHook(b,f[b])}var e=this;this.init=function(){var b=this,f=b.getSettings().persistentState;return e.enabled=!!f,e.enabled?(b.storage||(b.storage=new a(b.rootElement.id)),b.resetState=e.resetValue,void c.call(b)):void d.call(b)},this.saveValue=function(a,b){var c=this;c.storage.saveValue(a,b)},this.loadValue=function(a,b){var c=this;b.value=c.storage.loadValue(a)},this.resetValue=function(a){var b=this;"undefined"!=typeof a?b.storage.reset(a):b.storage.resetAll()};var f={persistentStateSave:e.saveValue,persistentStateLoad:e.loadValue,persistentStateReset:e.resetValue};for(var g in f)f.hasOwnProperty(g)&&b.hooks.register(g)}var d=new c;b.hooks.add("beforeInit",d.init),b.hooks.add("afterUpdateSettings",d.init)}(f),function(a){a.UndoRedo=function(b){var c=this;this.instance=b,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,b.addHook("afterChange",function(b){if(b){var d=new a.UndoRedo.ChangeAction(b);c.done(d)}}),b.addHook("afterCreateRow",function(b,d,e){if(!e){var f=new a.UndoRedo.CreateRowAction(b,d);c.done(f)}}),b.addHook("beforeRemoveRow",function(b,d){var e=c.instance.getData();b=(e.length+b)%e.length;var f=e.slice(b,b+d),g=new a.UndoRedo.RemoveRowAction(b,f);c.done(g)}),b.addHook("afterCreateCol",function(b,d,e){if(!e){var f=new a.UndoRedo.CreateColumnAction(b,d);c.done(f)}}),b.addHook("beforeRemoveCol",function(d,e){var f=c.instance.getData();d=(c.instance.countCols()+d)%c.instance.countCols();for(var g=[],h=0,i=f.length;i>h;h++)g[h]=f[h].slice(d,d+e);var j;Array.isArray(b.getSettings().colHeaders)&&(j=b.getSettings().colHeaders.slice(d,d+g.length));var k=new a.UndoRedo.RemoveColumnAction(d,g,j);c.done(k)}),b.addHook("beforeCellAlignment",function(b,d,e,f){var g=new a.UndoRedo.CellAlignmentAction(b,d,e,f);c.done(g)})},a.UndoRedo.prototype.done=function(a){this.ignoreNewActions||(this.doneActions.push(a),this.undoneActions.length=0)},a.UndoRedo.prototype.undo=function(){if(this.isUndoAvailable()){var a=this.doneActions.pop();this.ignoreNewActions=!0;var b=this;a.undo(this.instance,function(){b.ignoreNewActions=!1,b.undoneActions.push(a)})}},a.UndoRedo.prototype.redo=function(){if(this.isRedoAvailable()){var a=this.undoneActions.pop();this.ignoreNewActions=!0;var b=this;a.redo(this.instance,function(){b.ignoreNewActions=!1,b.doneActions.push(a)})}},a.UndoRedo.prototype.isUndoAvailable=function(){return this.doneActions.length>0},a.UndoRedo.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},a.UndoRedo.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},a.UndoRedo.Action=function(){},a.UndoRedo.Action.prototype.undo=function(){},a.UndoRedo.Action.prototype.redo=function(){},a.UndoRedo.ChangeAction=function(a){this.changes=a},a.helper.inherit(a.UndoRedo.ChangeAction,a.UndoRedo.Action),a.UndoRedo.ChangeAction.prototype.undo=function(b,c){for(var d=a.helper.deepClone(this.changes),e=b.countEmptyRows(!0),f=b.countEmptyCols(!0),g=0,h=d.length;h>g;g++)d[g].splice(3,1);b.addHookOnce("afterChange",c),b.setDataAtRowProp(d,null,null,"undo");for(var g=0,h=d.length;h>g;g++)b.getSettings().minSpareRows&&d[g][0]+1+b.getSettings().minSpareRows===b.countRows()&&e==b.getSettings().minSpareRows&&(b.alter("remove_row",parseInt(d[g][0]+1,10),b.getSettings().minSpareRows),b.undoRedo.doneActions.pop()),b.getSettings().minSpareCols&&d[g][1]+1+b.getSettings().minSpareCols===b.countCols()&&f==b.getSettings().minSpareCols&&(b.alter("remove_col",parseInt(d[g][1]+1,10),b.getSettings().minSpareCols),b.undoRedo.doneActions.pop())},a.UndoRedo.ChangeAction.prototype.redo=function(b,c){for(var d=a.helper.deepClone(this.changes),e=0,f=d.length;f>e;e++)d[e].splice(2,1);b.addHookOnce("afterChange",c),b.setDataAtRowProp(d,null,null,"redo")},a.UndoRedo.CreateRowAction=function(a,b){this.index=a,this.amount=b},a.helper.inherit(a.UndoRedo.CreateRowAction,a.UndoRedo.Action),a.UndoRedo.CreateRowAction.prototype.undo=function(a,b){var c=a.countRows(),d=a.getSettings().minSpareRows;this.index>=c&&this.index-d<c&&(this.index-=d),a.addHookOnce("afterRemoveRow",b),a.alter("remove_row",this.index,this.amount)},a.UndoRedo.CreateRowAction.prototype.redo=function(a,b){a.addHookOnce("afterCreateRow",b),a.alter("insert_row",this.index+1,this.amount)},a.UndoRedo.RemoveRowAction=function(a,b){this.index=a,this.data=b},a.helper.inherit(a.UndoRedo.RemoveRowAction,a.UndoRedo.Action),a.UndoRedo.RemoveRowAction.prototype.undo=function(a,b){var c=[this.index,0];Array.prototype.push.apply(c,this.data),Array.prototype.splice.apply(a.getData(),c),a.addHookOnce("afterRender",b),a.render()},a.UndoRedo.RemoveRowAction.prototype.redo=function(a,b){a.addHookOnce("afterRemoveRow",b),a.alter("remove_row",this.index,this.data.length)},a.UndoRedo.CreateColumnAction=function(a,b){this.index=a,this.amount=b},a.helper.inherit(a.UndoRedo.CreateColumnAction,a.UndoRedo.Action),a.UndoRedo.CreateColumnAction.prototype.undo=function(a,b){a.addHookOnce("afterRemoveCol",b),a.alter("remove_col",this.index,this.amount)},a.UndoRedo.CreateColumnAction.prototype.redo=function(a,b){a.addHookOnce("afterCreateCol",b),a.alter("insert_col",this.index+1,this.amount)},a.UndoRedo.CellAlignmentAction=function(a,b,c,d){this.stateBefore=a,this.range=b,this.type=c,this.alignment=d},a.UndoRedo.CellAlignmentAction.prototype.undo=function(a,b){if(a.contextMenu){for(var c=this.range.from.row;c<=this.range.to.row;c++)for(var d=this.range.from.col;d<=this.range.to.col;d++)a.setCellMeta(c,d,"className",this.stateBefore[c][d]||" htLeft");a.addHookOnce("afterRender",b),a.render()}},a.UndoRedo.CellAlignmentAction.prototype.redo=function(a,b){if(a.contextMenu){for(var c=this.range.from.row;c<=this.range.to.row;c++)for(var d=this.range.from.col;d<=this.range.to.col;d++)a.contextMenu.align.call(a,this.range,this.type,this.alignment);a.addHookOnce("afterRender",b),a.render()}},a.UndoRedo.RemoveColumnAction=function(a,b,c){this.index=a,this.data=b,this.amount=this.data[0].length,this.headers=c},a.helper.inherit(a.UndoRedo.RemoveColumnAction,a.UndoRedo.Action),a.UndoRedo.RemoveColumnAction.prototype.undo=function(a,b){for(var c,d,e=0,f=a.getData().length;f>e;e++)c=a.getSourceDataAtRow(e),d=[this.index,0],Array.prototype.push.apply(d,this.data[e]),Array.prototype.splice.apply(c,d);"undefined"!=typeof this.headers&&(d=[this.index,0],Array.prototype.push.apply(d,this.headers),Array.prototype.splice.apply(a.getSettings().colHeaders,d)),a.addHookOnce("afterRender",b),a.render()},a.UndoRedo.RemoveColumnAction.prototype.redo=function(a,b){a.addHookOnce("afterRemoveCol",b),a.alter("remove_col",this.index,this.amount)}}(b),function(a){function b(){var b=this,g="undefined"==typeof b.getSettings().undo||b.getSettings().undo;g?b.undoRedo||(b.undoRedo=new a.UndoRedo(b),e(b),b.addHook("beforeKeyDown",c),b.addHook("afterChange",d)):b.undoRedo&&(delete b.undoRedo,f(b),b.removeHook("beforeKeyDown",c),b.removeHook("afterChange",d))}function c(a){var b=this,c=(a.ctrlKey||a.metaKey)&&!a.altKey;c&&(89===a.keyCode||a.shiftKey&&90===a.keyCode?(b.undoRedo.redo(),a.stopImmediatePropagation()):90===a.keyCode&&(b.undoRedo.undo(),a.stopImmediatePropagation()))}function d(a,b){var c=this;return"loadData"==b?c.undoRedo.clear():void 0}function e(a){a.undo=function(){return a.undoRedo.undo()},a.redo=function(){return a.undoRedo.redo()},a.isUndoAvailable=function(){return a.undoRedo.isUndoAvailable()},a.isRedoAvailable=function(){return a.undoRedo.isRedoAvailable()},a.clearUndo=function(){return a.undoRedo.clear()}}function f(a){delete a.undo,delete a.redo,delete a.isUndoAvailable,delete a.isRedoAvailable,delete a.clearUndo}a.hooks.add("afterInit",b),a.hooks.add("afterUpdateSettings",b)}(b),g.prototype.setBoundaries=function(a){this.boundaries=a},g.prototype.setCallback=function(a){this.callback=a},g.prototype.check=function(a,b){var c=0,d=0;b<this.boundaries.top?d=b-this.boundaries.top:b>this.boundaries.bottom&&(d=b-this.boundaries.bottom),a<this.boundaries.left?c=a-this.boundaries.left:a>this.boundaries.right&&(c=a-this.boundaries.right),this.callback(c,d)};var Q,R;if("undefined"!=typeof b){var S=function(b){b.dragToScrollListening=!1;var c=b.view.wt.wtScrollbars.vertical.scrollHandler;Q=new g,c!==a&&(Q.setBoundaries(c.getBoundingClientRect()),Q.setCallback(function(a,b){0>a?c.scrollLeft-=50:a>0&&(c.scrollLeft+=50),0>b?c.scrollTop-=20:b>0&&(c.scrollTop+=20)}),b.dragToScrollListening=!0)};b.hooks.add("afterInit",function(){var a=this,c=b.eventManager(this);c.addEventListener(document,"mouseup",function(){a.dragToScrollListening=!1}),c.addEventListener(document,"mousemove",function(b){a.dragToScrollListening&&Q.check(b.clientX,b.clientY)})}),b.hooks.add("afterDestroy",function(){var a=b.eventManager(this);a.clear()}),b.hooks.add("afterOnCellMouseDown",function(){S(this)}),b.hooks.add("afterOnCellCornerMouseDown",function(){S(this)}),b.plugins.DragToScroll=g}if(function(a,b,c){function d(d){function e(){d.isListening()&&d.selection.empty()}function f(a){var b,e,f,g,h,i,j,k,n,o;d.isListening()&&d.selection.isSelected()&&(b=a,e=c.parse(b),f=d.getSelected(),g=new l(f[0],f[1]),h=new l(f[2],f[3]),i=new m(g,g,h),j=i.getTopLeftCorner(),k=i.getBottomRightCorner(),n=j,o=new l(Math.max(k.row,e.length-1+j.row),Math.max(k.col,e[0].length-1+j.col)),d.addHookOnce("afterChange",function(a){a&&a.length&&this.selectCell(n.row,n.col,o.row,o.col)}),d.populateFromArray(n.row,n.col,e,o.row,o.col,"paste",d.getSettings().pasteMode))}function g(b){var c;if(d.getSelected()){if(a.helper.isCtrlKey(b.keyCode))return h.setCopyableText(),void b.stopImmediatePropagation();c=(b.ctrlKey||b.metaKey)&&!b.altKey,b.keyCode==a.helper.keyCode.A&&c&&d._registerTimeout(setTimeout(a.helper.proxy(h.setCopyableText,h),0))}}var h=this;this.copyPasteInstance=b.getInstance(),this.copyPasteInstance.onCut(e),this.copyPasteInstance.onPaste(f),d.addHook("beforeKeyDown",g),this.destroy=function(){this.copyPasteInstance.removeCallback(e),this.copyPasteInstance.removeCallback(f),this.copyPasteInstance.destroy(),d.removeHook("beforeKeyDown",g)},d.addHook("afterDestroy",a.helper.proxy(this.destroy,this)),this.triggerPaste=a.helper.proxy(this.copyPasteInstance.triggerPaste,this.copyPasteInstance),this.triggerCut=a.helper.proxy(this.copyPasteInstance.triggerCut,this.copyPasteInstance),this.setCopyableText=function(){var b=d.getSettings(),c=b.copyRowsLimit,e=b.copyColsLimit,f=d.getSelectedRange(),g=f.getTopLeftCorner(),h=f.getBottomRightCorner(),i=g.row,j=g.col,k=h.row,l=h.col,m=Math.min(k,i+c-1),n=Math.min(l,j+e-1);d.copyPaste.copyPasteInstance.copyable(d.getCopyableData(i,j,m,n)),(k!==m||l!==n)&&a.hooks.run(d,"afterCopyLimit",k-i+1,l-j+1,c,e)}}function e(){var a=this,b=a.getSettings().copyPaste!==!1;b&&!a.copyPaste?a.copyPaste=new d(a):!b&&a.copyPaste&&(a.copyPaste.destroy(),delete a.copyPaste)}a.hooks.add("afterInit",e),a.hooks.add("afterUpdateSettings",e),a.hooks.register("afterCopyLimit")}(b,K,SheetClip),function(a){function b(){var b=this,c=!!b.getSettings().search;c?b.search=new a.Search(b):delete b.search}a.Search=function(b){this.query=function(c,d,e){var f=b.countRows(),g=b.countCols(),h=[];d||(d=a.Search.global.getDefaultCallback()),e||(e=a.Search.global.getDefaultQueryMethod());for(var i=0;f>i;i++)for(var j=0;g>j;j++){var k=b.getDataAtCell(i,j),l=b.getCellMeta(i,j),m=l.search.callback||d,n=l.search.queryMethod||e,o=n(c,k);if(o){var p={row:i,col:j,data:k};h.push(p)}m&&m(b,i,j,k,o)}return h}},a.Search.DEFAULT_CALLBACK=function(a,b,c,d,e){a.getCellMeta(b,c).isSearchResult=e},a.Search.DEFAULT_QUERY_METHOD=function(a,b){return"undefined"!=typeof a&&null!=a&&a.toLowerCase&&0!==a.length?"undefined"==typeof b||null==b?!1:-1!=b.toString().toLowerCase().indexOf(a.toLowerCase()):!1},a.Search.DEFAULT_SEARCH_RESULT_CLASS="htSearchResult",a.Search.global=function(){var b=a.Search.DEFAULT_CALLBACK,c=a.Search.DEFAULT_QUERY_METHOD,d=a.Search.DEFAULT_SEARCH_RESULT_CLASS;return{getDefaultCallback:function(){return b},setDefaultCallback:function(a){b=a},getDefaultQueryMethod:function(){return c},setDefaultQueryMethod:function(a){c=a},getDefaultSearchResultClass:function(){return d},setDefaultSearchResultClass:function(a){d=a}}}(),a.SearchCellDecorator=function(b,c,d,e,f,g,h){var i="object"==typeof h.search&&h.search.searchResultClass||a.Search.global.getDefaultSearchResultClass();h.isSearchResult?a.Dom.addClass(c,i):a.Dom.removeClass(c,i)};var c=a.renderers.cellDecorator;a.renderers.cellDecorator=function(){c.apply(this,arguments),a.SearchCellDecorator.apply(this,arguments)},a.hooks.add("afterInit",b),a.hooks.add("afterUpdateSettings",b)}(b),i.prototype.canMergeRange=function(a){return!a.isSingle()},i.prototype.mergeRange=function(a){if(this.canMergeRange(a)){var b=a.getTopLeftCorner(),c=a.getBottomRightCorner(),d={};d.row=b.row,d.col=b.col,d.rowspan=c.row-b.row+1,d.colspan=c.col-b.col+1,this.mergedCellInfoCollection.setInfo(d)}},i.prototype.mergeOrUnmergeSelection=function(a){var b=this.mergedCellInfoCollection.getInfo(a.from.row,a.from.col);b?this.unmergeSelection(a.from):this.mergeSelection(a)},i.prototype.mergeSelection=function(a){this.mergeRange(a)},i.prototype.unmergeSelection=function(a){var b=this.mergedCellInfoCollection.getInfo(a.row,a.col);this.mergedCellInfoCollection.removeInfo(b.row,b.col)},i.prototype.applySpanProperties=function(a,b,c){var d=this.mergedCellInfoCollection.getInfo(b,c);d?d.row===b&&d.col===c?(a.setAttribute("rowspan",d.rowspan),a.setAttribute("colspan",d.colspan)):(a.removeAttribute("rowspan"),a.removeAttribute("colspan"),a.style.display="none"):(a.removeAttribute("rowspan"),a.removeAttribute("colspan"))},i.prototype.modifyTransform=function(a,b,c){var d=function(a,b){return b.row>=a.row&&b.row<=a.row+a.rowspan-1?!0:!1},e=function(a,b){return b.col>=a.col&&b.col<=a.col+a.colspan-1?!0:!1},f=function(a){return new l(b.to.row+a.row,b.to.col+a.col)},g={row:c.row,col:c.col};if("modifyTransformStart"==a){this.lastDesiredCoords||(this.lastDesiredCoords=new l(null,null));for(var h,i=new l(b.highlight.row,b.highlight.col),j=this.mergedCellInfoCollection.getInfo(i.row,i.col),k=0,n=this.mergedCellInfoCollection.length;n>k;k++){var o=this.mergedCellInfoCollection[k];if(o=new l(o.row+o.rowspan-1,o.col+o.colspan-1),b.includes(o)){h=!0;break}}if(j){var p=new l(j.row,j.col),q=new l(j.row+j.rowspan-1,j.col+j.colspan-1),r=new m(p,p,q);r.includes(this.lastDesiredCoords)||(this.lastDesiredCoords=new l(null,null)),g.row=this.lastDesiredCoords.row?this.lastDesiredCoords.row-i.row:g.row,g.col=this.lastDesiredCoords.col?this.lastDesiredCoords.col-i.col:g.col,c.row>0?g.row=j.row+j.rowspan-1-i.row+c.row:c.row<0&&(g.row=i.row-j.row+c.row),c.col>0?g.col=j.col+j.colspan-1-i.col+c.col:c.col<0&&(g.col=i.col-j.col+c.col)}var s=new l(b.highlight.row+g.row,b.highlight.col+g.col),t=this.mergedCellInfoCollection.getInfo(s.row,s.col);t&&(this.lastDesiredCoords=s,g={row:t.row-i.row,col:t.col-i.col})}else if("modifyTransformEnd"==a)for(var k=0,n=this.mergedCellInfoCollection.length;n>k;k++){var u=this.mergedCellInfoCollection[k],p=new l(u.row,u.col),q=new l(u.row+u.rowspan-1,u.col+u.colspan-1),v=new m(p,p,q),w=b.getBordersSharedWith(v);if(v.isEqual(b))b.setDirection("NW-SE");else if(w.length>0){var x=b.highlight.isEqual(v.from);w.indexOf("top")>-1?b.to.isSouthEastOf(v.from)&&x?b.setDirection("NW-SE"):b.to.isSouthWestOf(v.from)&&x&&b.setDirection("NE-SW"):w.indexOf("bottom")>-1&&(b.to.isNorthEastOf(v.from)&&x?b.setDirection("SW-NE"):b.to.isNorthWestOf(v.from)&&x&&b.setDirection("SE-NW"))}var s=f(g),y=d(u,s),z=e(u,s);b.includesRange(v)&&(v.includes(s)||y||z)&&(y&&(g.row<0?g.row-=u.rowspan-1:g.row>0&&(g.row+=u.rowspan-1)),z&&(g.col<0?g.col-=u.colspan-1:g.col>0&&(g.col+=u.colspan-1)))}0!==g.row&&(c.row=g.row),0!==g.col&&(c.col=g.col)},"undefined"==typeof b)throw new Error("Handsontable is not defined");var T=function(){var a=this,b=a.getSettings().mergeCells;b&&(a.mergeCells||(a.mergeCells=new i(b)))},U=function(){var a=this;a.mergeCells&&(a.view.wt.wtTable.getCell=function(b){if(a.getSettings().mergeCells){var c=a.mergeCells.mergedCellInfoCollection.getInfo(b.row,b.col);c&&(b=c)}return B.prototype.getCell.call(this,b)})},V=function(a){if(this.mergeCells){var b=(a.ctrlKey||a.metaKey)&&!a.altKey;b&&77===a.keyCode&&(this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render(),a.stopImmediatePropagation())}},W=function(a){this.getSettings().mergeCells&&(a.items.push(b.ContextMenu.SEPARATOR),a.items.push({key:"mergeCells",name:function(){var a=this.getSelected(),b=this.mergeCells.mergedCellInfoCollection.getInfo(a[0],a[1]);return b?"Unmerge cells":"Merge cells"},callback:function(){this.mergeCells.mergeOrUnmergeSelection(this.getSelectedRange()),this.render()},disabled:function(){return!1}}))},O=function(a,b,c){this.mergeCells&&this.mergeCells.applySpanProperties(a,b,c)},X=function(a){return function(b){var c=this.getSettings().mergeCells;if(c){var d=this.getSelectedRange();if(this.mergeCells.modifyTransform(a,d,b),"modifyTransformEnd"===a){var e=this.countRows(),f=this.countCols();d.from.row<0?d.from.row=0:d.from.row>0&&d.from.row>=e&&(d.from.row=d.from-1),d.from.col<0?d.from.col=0:d.from.col>0&&d.from.col>=f&&(d.from.col=f-1)}}}},Y=function(a){this.lastDesiredCoords=null;var b=this.getSettings().mergeCells;if(b){var c=this.getSelectedRange();c.highlight=new l(c.highlight.row,c.highlight.col),c.to=a;var d=!1;do{d=!1;for(var e=0,f=this.mergeCells.mergedCellInfoCollection.length;f>e;e++){var g=this.mergeCells.mergedCellInfoCollection[e],h=new l(g.row,g.col),i=new l(g.row+g.rowspan-1,g.col+g.colspan-1),j=new m(h,h,i);c.expandByRange(j)&&(a.row=c.to.row,a.col=c.to.col,d=!0)}}while(d)}},Z=function(a,b){if(b&&"area"==b){var c=this.getSettings().mergeCells;if(c)for(var d=this.getSelectedRange(),e=new m(d.from,d.from,d.from),f=new m(d.to,d.to,d.to),g=0,h=this.mergeCells.mergedCellInfoCollection.length;h>g;g++){var i=this.mergeCells.mergedCellInfoCollection[g],j=new l(i.row,i.col),k=new l(i.row+i.rowspan-1,i.col+i.colspan-1),n=new m(j,j,k);e.expandByRange(n)&&(a[0]=e.from.row,a[1]=e.from.col),f.expandByRange(n)&&(a[2]=f.from.row,a[3]=f.from.col)}}},$=function(a,b,c){var d=this.getSettings().mergeCells;if(d){var e=this.mergeCells.mergedCellInfoCollection.getInfo(a,b);!e||e.row==a&&e.col==b||(c.copyable=!1)}},_=function(a){var b=this.getSettings().mergeCells;if(b)for(var c,d=this.countCols(),e=0;d>e;e++){if(c=this.mergeCells.mergedCellInfoCollection.getInfo(a.startRow,e),c&&c.row<a.startRow)return a.startRow=c.row,_.call(this,a);if(c=this.mergeCells.mergedCellInfoCollection.getInfo(a.endRow,e)){var f=c.row+c.rowspan-1;if(f>a.endRow)return a.endRow=f,_.call(this,a)}}},ab=function(a){var b=this.getSettings().mergeCells;if(b)for(var c,d=this.countRows(),e=0;d>e;e++){if(c=this.mergeCells.mergedCellInfoCollection.getInfo(e,a.startColumn),c&&c.col<a.startColumn)return a.startColumn=c.col,ab.call(this,a);if(c=this.mergeCells.mergedCellInfoCollection.getInfo(e,a.endColumn)){var f=c.col+c.colspan-1;if(f>a.endColumn)return a.endColumn=f,ab.call(this,a)}}},bb=function(a){if(a&&this.mergeCells){var b=this.mergeCells.mergedCellInfoCollection,c=this.getSelectedRange();for(var d in b)if(c.highlight.row==b[d].row&&c.highlight.col==b[d].col&&c.to.row==b[d].row+b[d].rowspan-1&&c.to.col==b[d].col+b[d].colspan-1)return!1}return a};b.hooks.add("beforeInit",T),b.hooks.add("afterInit",U),b.hooks.add("beforeKeyDown",V),b.hooks.add("modifyTransformStart",X("modifyTransformStart")),b.hooks.add("modifyTransformEnd",X("modifyTransformEnd")),b.hooks.add("beforeSetRangeEnd",Y),b.hooks.add("beforeDrawBorders",Z),b.hooks.add("afterIsMultipleSelection",bb),b.hooks.add("afterRenderer",O),b.hooks.add("afterContextMenuDefaultOptions",W),b.hooks.add("afterGetCellMeta",$),b.hooks.add("afterViewportRowCalculatorOverride",_),b.hooks.add("afterViewportColumnCalculatorOverride",ab),b.MergeCells=i,function(){function a(){}var c,d=function(a){return"boolean"==typeof a&&a===!0?!0:"object"==typeof a&&a.length>0?!0:!1},e=function(){d(this.getSettings().customBorders)&&(this.customBorders||(c=this,this.customBorders=new a))},f=function(a){for(var b=0;b<c.view.wt.selections.length;b++)if(c.view.wt.selections[b].settings.className==a)return b;return-1},g=function(a){var b={row:a.row,col:a.col},d=new z(a,new m(b,b,b)),e=f(a.className);e>=0?c.view.wt.selections[e]=d:c.view.wt.selections.push(d)},h=function(a,b,c){var d=o(a,b);d=p(d,c),this.setCellMeta(a,b,"borders",d),g(d)},i=function(a){for(var b=a.range,c=b.from.row;c<=b.to.row;c++)for(var d=b.from.col;d<=b.to.col;d++){var e=o(c,d),f=0;c==b.from.row&&(f++,a.hasOwnProperty("top")&&(e.top=a.top)),c==b.to.row&&(f++,a.hasOwnProperty("bottom")&&(e.bottom=a.bottom)),d==b.from.col&&(f++,a.hasOwnProperty("left")&&(e.left=a.left)),d==b.to.col&&(f++,a.hasOwnProperty("right")&&(e.right=a.right)),f>0&&(this.setCellMeta(c,d,"borders",e),g(e))
}},j=function(a,b){return"border_row"+a+"col"+b},k=function(){return{width:1,color:"#000"}},l=function(){return{hide:!0}},n=function(){return{width:1,color:"#000",cornerVisible:!1}},o=function(a,b){return{className:j(a,b),border:n(),row:a,col:b,top:l(),right:l(),bottom:l(),left:l()}},p=function(a,b){return b.hasOwnProperty("border")&&(a.border=b.border),b.hasOwnProperty("top")&&(a.top=b.top),b.hasOwnProperty("right")&&(a.right=b.right),b.hasOwnProperty("bottom")&&(a.bottom=b.bottom),b.hasOwnProperty("left")&&(a.left=b.left),a},q=function(a){for(var b=document.querySelectorAll("."+a),c=0;c<b.length;c++)if(b[c]&&"TD"!=b[c].nodeName){var d=b[c].parentNode;d.parentNode&&d.parentNode.removeChild(d)}},r=function(a,b){var c=j(a,b);q(c),this.removeCellMeta(a,b,"borders")},s=function(a,b,c,d){var e=this.getCellMeta(a,b).borders;e&&void 0!=e.border||(e=o(a,b)),e[c]=d?l():k(),this.setCellMeta(a,b,"borders",e);var f=j(a,b);q(f),g(e),this.render()},t=function(a,b,c){if(a.from.row==a.to.row&&a.from.col==a.to.col)"noBorders"==b?r.call(this,a.from.row,a.from.col):s.call(this,a.from.row,a.from.col,b,c);else switch(b){case"noBorders":for(var d=a.from.col;d<=a.to.col;d++)for(var e=a.from.row;e<=a.to.row;e++)r.call(this,e,d);break;case"top":for(var f=a.from.col;f<=a.to.col;f++)s.call(this,a.from.row,f,b,c);break;case"right":for(var g=a.from.row;g<=a.to.row;g++)s.call(this,g,a.to.col,b);break;case"bottom":for(var h=a.from.col;h<=a.to.col;h++)s.call(this,a.to.row,h,b);break;case"left":for(var i=a.from.row;i<=a.to.row;i++)s.call(this,i,a.from.col,b)}},u=function(a,b){var c=!1;return a.getSelectedRange().forAll(function(d,e){var f=a.getCellMeta(d,e).borders;if(f){if(!b)return c=!0,!1;if(!f[b].hasOwnProperty("hide"))return c=!0,!1}}),c},v=function(a){return"<span class='selected'>"+String.fromCharCode(10003)+"</span>"+a},w=function(a){this.getSettings().customBorders&&(a.items.push(b.ContextMenu.SEPARATOR),a.items.push({key:"borders",name:"Borders",submenu:{items:{top:{name:function(){var a="Top",b=u(this,"top");return b&&(a=v(a)),a},callback:function(){var a=u(this,"top");t.call(this,this.getSelectedRange(),"top",a)},disabled:!1},right:{name:function(){var a="Right",b=u(this,"right");return b&&(a=v(a)),a},callback:function(){var a=u(this,"right");t.call(this,this.getSelectedRange(),"right",a)},disabled:!1},bottom:{name:function(){var a="Bottom",b=u(this,"bottom");return b&&(a=v(a)),a},callback:function(){var a=u(this,"bottom");t.call(this,this.getSelectedRange(),"bottom",a)},disabled:!1},left:{name:function(){var a="Left",b=u(this,"left");return b&&(a=v(a)),a},callback:function(){var a=u(this,"left");t.call(this,this.getSelectedRange(),"left",a)},disabled:!1},remove:{name:"Remove border(s)",callback:function(){t.call(this,this.getSelectedRange(),"noBorders")},disabled:function(){return!u(this)}}}}}))};b.hooks.add("beforeInit",e),b.hooks.add("afterContextMenuDefaultOptions",w),b.hooks.add("afterInit",function(){var a=this.getSettings().customBorders;if(a){for(var b=0;b<a.length;b++)a[b].range?i.call(this,a[b]):h.call(this,a[b].row,a[b].col,a[b]);this.render(),this.view.wt.draw(!0)}}),b.CustomBorders=a}(),function(b){function c(){function c(a){R=this,m=a;var b=this.view.wt.wtTable.getCoords(a).row;if(b>=0){l=b;var c=m.getBoundingClientRect();k=c.top,n.style.top=k+"px",n.style.left=c.left+"px",R.rootElement.appendChild(n)}}function d(a,b){var c=a.getBoundingClientRect(),d=6;n.style.top=b>0?c.top+c.height-d+"px":c.top+"px"}function e(){var a=this;b.Dom.addClass(n,"active"),b.Dom.addClass(o,"active");var c=m.getBoundingClientRect();o.style.width=a.view.maximumVisibleElementWidth(0)+"px",o.style.height=c.height+"px",o.style.top=k+"px",o.style.left=n.style.left,a.rootElement.appendChild(o)}function f(a){o.style.top=k+a+"px"}function g(){b.Dom.removeClass(n,"active"),b.Dom.removeClass(o,"active")}var h,i,j,k,l,m,n=document.createElement("DIV"),o=document.createElement("DIV"),p=b.eventManager(this);n.className="manualRowMover",o.className="manualRowMoverGuide";var q=function(){var a=this;b.hooks.run(a,"persistentStateSave","manualRowPositions",a.manualRowPositions)},r=function(){var a=this,c={};return b.hooks.run(a,"persistentStateLoad","manualRowPositions",c),c.value},s=function(a){return"BODY"!=a.tagName?"TBODY"==a.parentNode.tagName?!0:(a=a.parentNode,s(a)):!1},t=function(a){return"TABLE"!=a.tagName?"TH"==a.tagName?a:t(a.parentNode):null},u=function(){var k,n=this;p.addEventListener(n.rootElement,"mouseover",function(a){if(s(a.target)){var b=t(a.target);b&&(k?(i=n.view.wt.wtTable.getCoords(b).row,d(b,i-h)):c.call(n,b))}}),p.addEventListener(n.rootElement,"mousedown",function(a){b.Dom.hasClass(a.target,"manualRowMover")&&(j=b.helper.pageY(a),e.call(n),k=n,h=l,i=l)}),p.addEventListener(a,"mousemove",function(a){k&&f(b.helper.pageY(a)-j)}),p.addEventListener(a,"mouseup",function(){k&&(g(),k=!1,w(n.manualRowPositions,n.countRows()),n.manualRowPositions.splice(i,0,n.manualRowPositions.splice(h,1)[0]),n.forceFullRender=!0,n.view.render(),q.call(n),b.hooks.run(n,"afterRowMove",h,i),c.call(n,m))}),n.addHook("afterDestroy",v)},v=function(){p.clear()},w=function(a,b){if(a.length<b)for(var c=a.length;b>c;c++)a[c]=c};this.beforeInit=function(){this.manualRowPositions=[]},this.init=function(a){var b=this,c=!!b.getSettings().manualRowMove;if(c){var d=b.getSettings().manualRowMove,e=r.call(b);"undefined"!=typeof b.manualRowPositionsPluginUsages?b.manualRowPositionsPluginUsages.push("manualColumnMove"):b.manualRowPositionsPluginUsages=["manualColumnMove"],this.manualRowPositions="undefined"!=typeof e?e:Array.isArray(d)?d:[],"afterInit"===a&&(u.call(this),this.manualRowPositions.length>0&&(b.forceFullRender=!0,b.render()))}else{var f=b.manualRowPositionsPluginUsages?b.manualRowPositionsPluginUsages.indexOf("manualColumnMove"):-1;f>-1&&(v.call(this),b.manualRowPositions=[],b.manualRowPositionsPluginUsages[f]=void 0)}},this.modifyRow=function(a){var b=this;return b.getSettings().manualRowMove?("undefined"==typeof b.manualRowPositions[a]&&w(this.manualRowPositions,a+1),b.manualRowPositions[a]):a}}var d=new c;b.hooks.add("beforeInit",d.beforeInit),b.hooks.add("afterInit",function(){d.init.call(this,"afterInit")}),b.hooks.add("afterUpdateSettings",function(){d.init.call(this,"afterUpdateSettings")}),b.hooks.add("modifyRow",d.modifyRow),b.hooks.register("afterRowMove")}(b),function(b){function c(c){this.instance=c,this.addingStarted=!1;var d,e,f=!1,g=this,h=b.eventManager(c),i=function(){return c.autofill?void(c.autofill.handle&&c.autofill.handle.isDragged&&(c.autofill.handle.isDragged>1&&c.autofill.apply(),c.autofill.handle.isDragged=0,f=!1)):!0};h.addEventListener(document,"mouseup",function(a){i(a)}),h.addEventListener(document,"mousemove",function(c){if(!g.instance.autofill)return 0;var d=b.Dom.offset(g.instance.table).top-(a.pageYOffset||document.documentElement.scrollTop)+b.Dom.outerHeight(g.instance.table),e=b.Dom.offset(g.instance.table).left-(a.pageXOffset||document.documentElement.scrollLeft)+b.Dom.outerWidth(g.instance.table);g.addingStarted===!1&&g.instance.autofill.handle.isDragged>0&&c.clientY>d&&c.clientX<=e?(this.mouseDragOutside=!0,g.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&setTimeout(function(){g.addingStarted=!1,g.instance.alter("insert_row")},200)}),d=this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown,this.instance.view.wt.wtSettings.settings.onCellCornerMouseDown=function(a){c.autofill.handle.isDragged=1,f=!0,d(a)},e=this.instance.view.wt.wtSettings.settings.onCellMouseOver,this.instance.view.wt.wtSettings.settings.onCellMouseOver=function(a,b,d,g){c.autofill&&f&&!c.view.isMouseDown()&&c.autofill.handle&&c.autofill.handle.isDragged&&(c.autofill.handle.isDragged++,c.autofill.showBorder(b),c.autofill.checkIfNewRowNeeded()),e(a,b,d,g)},this.instance.view.wt.wtSettings.settings.onCellCornerDblClick=function(){c.autofill.selectAdjacent()}}c.prototype.init=function(){this.handle={}},c.prototype.disable=function(){this.handle.disabled=!0},c.prototype.selectAdjacent=function(){var a,b,c,d,e;a=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners(),b=this.instance.getData();a:for(c=a[2]+1;c<this.instance.countRows();c++){for(e=a[1];e<=a[3];e++)if(b[c][e])break a;(b[c][a[1]-1]||b[c][a[3]+1])&&(d=c)}d&&(this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(new l(a[0],a[1])),this.instance.view.wt.selections.fill.add(new l(d,a[3])),this.apply())},c.prototype.apply=function(){var a,c,d,e,f;if(this.handle.isDragged=0,a=this.instance.view.wt.selections.fill.getCorners()){var g=function(a,b,c,d){var e,f,g,h=c.length,i=c?c[0].length:0,j=[],k=b.row-a.row,l=b.col-a.col,m=[];if(-1!==["down","up"].indexOf(d)){for(var n=0;l>=n;n++)e=parseInt(c[0][n],10),f=parseInt(c[h-1][n],10),g=("down"===d?f-e:e-f)/(h-1)||0,m.push(g);j.push(m)}if(-1!==["right","left"].indexOf(d))for(var o=0;k>=o;o++)e=parseInt(c[o][0],10),f=parseInt(c[o][i-1],10),g=("right"===d?f-e:e-f)/(i-1)||0,m=[],m.push(g),j.push(m);return j};this.instance.view.wt.selections.fill.clear(),c=this.instance.selection.isMultiple()?this.instance.view.wt.selections.area.getCorners():this.instance.view.wt.selections.current.getCorners();var h;if(a[0]===c[0]&&a[1]<c[1]?(h="left",d=new l(a[0],a[1]),e=new l(a[2],c[1]-1)):a[0]===c[0]&&a[3]>c[3]?(h="right",d=new l(a[0],c[3]+1),e=new l(a[2],a[3])):a[0]<c[0]&&a[1]===c[1]?(h="up",d=new l(a[0],a[1]),e=new l(c[0]-1,a[3])):a[2]>c[2]&&a[1]===c[1]&&(h="down",d=new l(c[2]+1,a[1]),e=new l(a[2],a[3])),d&&d.row>-1&&d.col>-1){var i={from:this.instance.getSelectedRange().from,to:this.instance.getSelectedRange().to};f=this.instance.getData(i.from.row,i.from.col,i.to.row,i.to.col);var j=g(d,e,f,h);b.hooks.run(this.instance,"beforeAutofill",d,e,f),this.instance.populateFromArray(d.row,d.col,f,e.row,e.col,"autofill",null,h,j),this.instance.selection.setRangeStart(new l(a[0],a[1])),this.instance.selection.setRangeEnd(new l(a[2],a[3]))}else this.instance.selection.refreshBorders()}},c.prototype.showBorder=function(a){var b=this.instance.getSelectedRange().getTopLeftCorner(),c=this.instance.getSelectedRange().getBottomRightCorner();if("horizontal"!==this.instance.getSettings().fillHandle&&(c.row<a.row||b.row>a.row))a=new l(a.row,c.col);else{if("vertical"===this.instance.getSettings().fillHandle)return;a=new l(c.row,a.col)}this.instance.view.wt.selections.fill.clear(),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().from),this.instance.view.wt.selections.fill.add(this.instance.getSelectedRange().to),this.instance.view.wt.selections.fill.add(a),this.instance.view.render()},c.prototype.checkIfNewRowNeeded=function(){var a,b,c=this.instance.countRows(),d=this;this.instance.view.wt.selections.fill.cellRange&&this.addingStarted===!1&&(b=this.instance.getSelected(),a=this.instance.view.wt.selections.fill.getCorners(),b[2]<c-1&&a[2]===c-1&&(this.addingStarted=!0,this.instance._registerTimeout(setTimeout(function(){d.instance.alter("insert_row"),d.addingStarted=!1},200))))},b.hooks.add("afterInit",function(){var a=new c(this);"undefined"!=typeof this.getSettings().fillHandle&&(a.handle&&this.getSettings().fillHandle===!1?a.disable():a.handle||this.getSettings().fillHandle===!1||(this.autofill=a,this.autofill.init()))}),b.Autofill=c}(b);var cb=function(a){var c=[],d={rows:0,cols:0},e={rows:0,cols:0},f=[],g=[],h={groupIndicatorContainer:"htGroupIndicatorContainer",groupIndicator:function(a){return"ht"+a+"Group"},groupStart:"htGroupStart",collapseButton:"htCollapseButton",expandButton:"htExpandButton",collapseGroupId:function(a){return"htCollapse-"+a},collapseFromLevel:function(a,b){return"htCollapse"+a+"FromLevel-"+b},clickable:"clickable",levelTrigger:"htGroupLevelTrigger"},i=function(a,b){return function(c,d){return"undefined"==typeof b||"asc"===b?c[a]-d[a]:d[a]-c[a]}},j=function(a,b){for(var c=[];b>=a;)c.push(a++);return c},k=function(a,b,c){var d=[],e={row:null,col:null};if("cols"==a)for(;c>=b;)e={row:-1,col:b++},d.push(e);else for(;c>=b;)e={row:b++,col:-1},d.push(e);for(var f=m(d),g=0,h=0,i=0;i<f.length;i++)g+=f[i].filter(function(a){return a.rows}).length,h+=f[i].filter(function(a){return a.cols}).length;return{total:{rows:g,cols:h},groups:f}},m=function(a){for(var b=[],c=0;c<a.length;c++)b.push(n(a[c]));return b},n=function(a,b,d){for(var e=a.row,f=a.col,g=-1===e?0:e,h=-1===f?0:f,i=[],j=0;j<c.length;j++){var k=c[j],l=k.id,m=(k.level,k.rows||[]),n=k.cols||[];-1===i.indexOf(l)&&(-1!==m.indexOf(g)||-1!==n.indexOf(h))&&i.push(k)}-1===f?i=i.concat(r()):-1===e&&(i=i.concat(t())),b&&(i=i.filter(function(a){return a.level===b})),d&&("cols"===d?i=i.filter(function(a){return a.cols}):"rows"===d&&(i=i.filter(function(a){return a.rows})));var o=[];return i.filter(function(a){return-1===o.indexOf(a.id)?(o.push(a.id),a):void 0})},o=function(a){for(var b=0,d=c.length;d>b;b++)if(c[b].id==a)return c[b];return!1},p=function(a,b){for(var d=0,e=c.length;e>d;d++)if(c[d].level==b&&c[d].rows&&c[d].rows.indexOf(a)>-1)return c[d];return!1},q=function(a,b){for(var d=0,e=c.length;e>d;d++)if(c[d].level==b&&c[d].cols&&c[d].cols.indexOf(a)>-1)return c[d];return!1},r=function(){for(var a=[],b=0,d=c.length;d>b;b++)Array.isArray(c[b].cols)&&a.push(c[b]);return a},s=function(a){for(var b=[],d=0,e=c.length;e>d;d++)c[d].cols&&c[d].level===a&&b.push(c[d]);return b},t=function(){for(var a=[],b=0,d=c.length;d>b;b++)Array.isArray(c[b].rows)&&a.push(c[b]);return a},u=function(a){for(var b=[],d=0,e=c.length;e>d;d++)c[d].rows&&c[d].level===a&&b.push(c[d]);return b},v=function(a){var b=0;return a.length&&a.forEach(function(a){if(a=a.filter(function(a){return a.cols}),a.length){var c=a.sort(i("level","desc")),d=c[0].level;d>b&&(b=d)}}),b},w=function(a){var b=0;return a.length&&a.forEach(function(a){if(a=a.filter(function(a){return a.rows}),a.length){var c=a.sort(i("level","desc")),d=c[0].level;d>b&&(b=d)}}),b},x=function(a,b){var f=k("cols",a,b),g=v(f.groups);g===e.cols?e.cols++:g>e.cols&&(e.cols=g+1),d.cols||(d.cols=r().length),d.cols++,c.push({id:"c"+d.cols,level:g+1,cols:j(a,b),hidden:0})},y=function(a,b){var f=k("rows",a,b),g=w(f.groups);e.rows=Math.max(e.rows,g+1),d.rows||(d.rows=t().length),d.rows++,c.push({id:"r"+d.rows,level:g+1,rows:j(a,b),hidden:0})},z=function(a,b){for(var c,d=0,e=b.length;e>d;d++)if(b[d].hidden=a,c=b[d].level,f[c]||(f[c]=[]),g[c]||(g[c]=[]),b[d].rows)for(var h=0,i=b[d].rows.length;i>h;h++)f[c][b[d].rows[h]]=a>0?!0:void 0;else if(b[d].cols)for(var h=0,j=b[d].cols.length;j>h;h++)g[c][b[d].cols[h]]=a>0?!0:void 0},A=function(a,c,d,e){var f,g;switch(a){case"rows":f=p(c+1,d).id,g=b.Grouping.getGroupLevelsByRows();break;case"cols":f=q(c+1,d).id,g=b.Grouping.getGroupLevelsByCols()}return!!(g[c+1]&&g[c+1].indexOf(d)>-1&&e==f)},B=function(a,c,d,e){var f,g;switch(a){case"rows":f=p(c-1,d).id,g=b.Grouping.getGroupLevelsByRows();break;case"cols":f=q(c-1,d).id,g=b.Grouping.getGroupLevelsByCols()}return!!(g[c-1]&&g[c-1].indexOf(d)>-1&&e==f)},C=function(c,d,h,i){if(0===d)return!1;var j,k,l=B(c,d,h,i),m=A(c,d,h,i),n=!1;switch(c){case"rows":j=b.Grouping.getGroupLevelsByRows(),k=a.countRows();for(var o=0;o<=e.rows;o++)if(f[o]&&f[o][d+1]){n=!0;break}break;case"cols":j=b.Grouping.getGroupLevelsByCols(),k=a.countCols();for(var o=0;o<=e.cols;o++)if(g[o]&&g[o][d+1]){n=!0;break}}if(l){if(d==k-1)return!0;if(!m||m&&n)return!0;if(!j[d+1])return!0}return!1},D=function(b){var c;switch(b){case"rows":c=e.rows;for(var d=0;c>=d;d++)if(f[d]&&f[d][a.countRows()-1])return!0;break;case"cols":c=e.cols;for(var d=0;c>=d;d++)if(g[d]&&g[d][a.countCols()-1])return!0}return!1},E=function(c,d,h,i){var j,k,l,m=o(i),n=!1,p=function(a){for(var b=!1,c="rows"==a?f:g,h=0;h<=e[a];h++){for(l=d;m[a].indexOf(l)>-1;)b=!(!c[h]||!c[h][l]),l--;if(b)break}return b},q=B(c,d,h,i),r=A(c,d,h,i);switch(c){case"rows":j=b.Grouping.getGroupLevelsByRows(),k=a.countRows(),n=p(c);break;case"cols":j=b.Grouping.getGroupLevelsByCols(),k=a.countCols(),n=p(c)}if(d==k-1)return!1;if(0===d){if(r)return!0}else if(!q||q&&n){if(r)return!0}else if(!j[d-1]&&r)return!0;return!1},F=function(a,c,d,e,f){var g;switch(a){case"rows":g=p(c-1,d).id;break;case"cols":g=q(c-1,d).id}if(!g)return null;if(c>0&&B(a,c-1,d,g)&&g!=e){var i=document.createElement("DIV");return b.Dom.addClass(i,h.expandButton),i.id="htExpand-"+g,i.appendChild(document.createTextNode("+")),i.setAttribute("data-level",d),i.setAttribute("data-type",a),i.setAttribute("data-hidden","1"),f.appendChild(i),i}return null},G=function(a){for(var b=t(),c=r(),d=0,e=b.length;e>d;d++)if(b[d].rows.indexOf(a.row)>-1&&b[d].hidden)return!0;if(null===a.col)return!1;for(var d=0,f=c.length;f>d;d++)if(c[d].cols.indexOf(a.col)>-1&&c[d].hidden)return!0;return!1};return{getGroups:function(){return c},getLevels:function(){return e},instance:a,baseSpareRows:a.getSettings().minSpareRows,baseSpareCols:a.getSettings().minSpareCols,getRowGroups:t,getColGroups:r,init:function(){var c=a.getSettings().groups;c&&Array.isArray(c)&&b.Grouping.initGroups(c)},initGroups:function(a){c=[],a.forEach(function(a){var b=[],c=!1,d=!1;Array.isArray(a.rows)?(b=a.rows,c=!0):Array.isArray(a.cols)&&(b=a.cols,d=!0);var e=b[0],f=b[b.length-1];c?y(e,f):d&&x(e,f)})},resetGroups:function(){c=[],d={rows:0,cols:0},e={rows:0,cols:0};var a;for(var f in h)if("function"!=typeof h[f]){a=document.querySelectorAll("."+h[f]);for(var g=0,i=a.length;i>g;g++)b.Dom.removeClass(a[g],h[f])}for(var j=["htGroupColClosest","htGroupCol"],f=0,k=j.length;k>f;f++){a=document.querySelectorAll("."+j[f]);for(var g=0,i=a.length;i>g;g++)b.Dom.removeClass(a[g],j[f])}},updateGroups:function(){var a=this.getSettings().groups;b.Grouping.resetGroups(),b.Grouping.initGroups(a)},afterGetRowHeader:function(a,c){for(var d=!1,e=0,g=f.length;g>e;e++)f[e]&&f[e][a]===!0&&(d=!0);d?b.Dom.addClass(c.parentNode,"hidden"):!d&&b.Dom.hasClass(c.parentNode,"hidden")&&b.Dom.removeClass(c.parentNode,"hidden")},afterGetColHeader:function(c){var d=this.view.wt.wtSettings.getSetting("rowHeaders").length,e=a.rootElement.querySelectorAll("colgroup col:nth-child("+parseInt(c+d+1,10)+")");if(0!==e.length){for(var f=!1,h=0,i=g.length;i>h;h++)g[h]&&g[h][c]===!0&&(f=!0);if(f)for(var h=0,j=e.length;j>h;h++)b.Dom.addClass(e[h],"hidden");else if(!f&&b.Dom.hasClass(e[0],"hidden"))for(var h=0,j=e.length;j>h;h++)b.Dom.removeClass(e[h],"hidden")}},groupIndicatorsFactory:function(a,c){var f,g,i,j,k,l,m,n;switch(c){case"horizontal":f=b.Grouping.getGroupLevelsByCols(),g=function(a){return Array.prototype.indexOf.call(a.parentNode.parentNode.childNodes,a.parentNode)+1},i=function(a,b){return q(a,b).id},j="cols",k=function(a,b){return q(a-1,b)},l="columnHeaders",m=function(a){if(1===a.length){var c=a[0];a[0]=function(a,d,e){-1>a?r()(a,d,e):(b.Dom.removeClass(d,h.groupIndicatorContainer),c(a,d,e))}}return function(){return a}},n=!0;break;case"vertical":f=b.Grouping.getGroupLevelsByRows(),g=function(a){return b.Dom.index(a)+1},i=function(a,b){return p(a,b).id},j="rows",k=function(a,b){return p(a-1,b)},l="rowHeaders",m=function(a){return a}}var o=function(a){var c=document.createElement("div");return a.appendChild(c),{button:c,addClass:function(a){b.Dom.addClass(c,a)}}},r=function(){var a=c.charAt(0).toUpperCase()+c.slice(1);return function(c,d,e){e++;for(var g,l;g=d.lastChild;)d.removeChild(g);b.Dom.addClass(d,h.groupIndicatorContainer);var m=i(c,e);if(c>-1&&f[c]&&f[c].indexOf(e)>-1&&(l=o(d),l.addClass(h.groupIndicator(a)),E(j,c,e,m)&&l.addClass(h.groupStart),C(j,c,e,m)&&(l.button.appendChild(document.createTextNode("-")),l.addClass(h.collapseButton),l.button.id=h.collapseGroupId(m),l.button.setAttribute("data-level",e),l.button.setAttribute("data-type",j))),n){var p=b.Dom.index(d.parentNode);if(-1===c||-1>c&&p===b.Grouping.getLevels().cols+1||0===p&&0===b.Grouping.getLevels().cols)if(l=o(d),l.addClass(h.levelTrigger),-1===c)l.button.id=h.collapseFromLevel("Cols",e),l.button.appendChild(document.createTextNode(e));else if(-1>c&&p===b.Grouping.getLevels().cols+1||0===p&&0===b.Grouping.getLevels().cols){var q=b.Dom.index(d)+1;l.button.id=h.collapseFromLevel("Rows",q),l.button.appendChild(document.createTextNode(q))}}var r=F(j,c,e,m,d);if(c>0){var s=k(c-1,e);r&&s.hidden&&b.Dom.addClass(r,h.clickable)}db()}};if(a=m(a),d[j]>0)for(var s=0;s<e[j]+1;s++)Array.isArray(a)||(a="function"==typeof a?a():new Array(a)),a.unshift(r())},getGroupLevelsByRows:function(){for(var a=t(),b=[],c=0,d=a.length;d>c;c++)if(a[c].rows)for(var e=0,f=a[c].rows.length;f>e;e++)b[a[c].rows[e]]||(b[a[c].rows[e]]=[]),b[a[c].rows[e]].push(a[c].level);return b},getGroupLevelsByCols:function(){for(var a=r(),b=[],c=0,d=a.length;d>c;c++)if(a[c].cols)for(var e=0,f=a[c].cols.length;f>e;e++)b[a[c].cols[e]]||(b[a[c].cols[e]]=[]),b[a[c].cols[e]].push(a[c].level);return b},toggleGroupVisibility:function(c){if(b.Dom.hasClass(c.target,h.expandButton)||b.Dom.hasClass(c.target,h.collapseButton)||b.Dom.hasClass(c.target,h.levelTrigger)){var d,f,g,i,j=c.target,k=j.id.split("-"),l=[],m=function(a){a&&(j=a),k=j.id.split("-"),d=k[1],f=parseInt(j.getAttribute("data-level"),10),g=j.getAttribute("data-type"),i=parseInt(j.getAttribute("data-hidden")),i=isNaN(i)?1:i?0:1,j.setAttribute("data-hidden",i.toString()),l.push(o(d))};if(j.className.indexOf(h.levelTrigger)>-1){for(var n,p=[],q=[],r=j.id.indexOf("Rows")>-1?"rows":"cols",t=1,v=e[r];v>=t;t++)if(n="rows"==r?u(t):s(t),t>=parseInt(k[1],10))for(var w=0,x=n.length;x>w;w++)q.push(n[w]);else for(var w=0,x=n.length;x>w;w++)p.push(n[w]);z(!0,q),z(!1,p)}else m(),z(i,l);g=g||r;var y=D(g),A=g.charAt(0).toUpperCase()+g.slice(1),B=b.Grouping["baseSpare"+A];y?0==B&&(a.alter("insert_"+g.slice(0,-1),a["count"+A]()),b.Grouping["dummy"+g.slice(0,-1)]=!0):0==B&&b.Grouping["dummy"+g.slice(0,-1)]&&(a.alter("remove_"+g.slice(0,-1),a["count"+A]()-1),b.Grouping["dummy"+g.slice(0,-1)]=!1),a.render(),c.stopImmediatePropagation()}},modifySelectionFactory:function(a){var b,c=this.instance,d=new l(0,0),e=function(a,b){var c=0;switch(a){case"down":for(;G(b);)c++,b.row+=1;break;case"up":for(;G(b);)c--,b.row-=1;break;case"right":for(;G(b);)c++,b.col+=1;break;case"left":for(;G(b);)c--,b.col-=1}return c},f=function(a,b){a.row>0?G(b)&&(a.row+=e("down",b)):a.row<0&&G(b)&&(a.row+=e("up",b)),a.col>0?G(b)&&(a.col+=e("right",b)):a.col<0&&G(b)&&(a.col+=e("left",b))};switch(a){case"start":return function(a){b=c.getSelected(),d.row=b[0]+a.row,d.col=b[1]+a.col,f(a,d)};case"end":return function(a){b=c.getSelected(),d.row=b[2]+a.row,d.col=b[3]+a.col,f(a,d)}}},modifyRowHeight:function(b,c){return a.view.wt.wtTable.rowFilter&&G({row:c,col:null})?0:void 0},validateGroups:function(){for(var b=function(a,b){return a[0]<b[0]&&a[1]<b[1]&&b[0]<=a[1]||a[0]>b[0]&&b[1]<a[1]&&a[0]<=b[1]?!0:void 0},c=a.getSettings().groups,d=[],e=[],f=0,g=c.length;g>f;f++)if(c[f].rows){if(1===c[f].rows.length)throw new Error("Grouping error:  Group {"+c[f].rows[0]+"} is invalid. Cannot define single-entry groups.");if(0===c[f].rows.length)throw new Error("Grouping error:  Cannot define empty groups.");e.push(c[f].rows);for(var h=0,i=e.length;i>h;h++)if(b(c[f].rows,e[h]))throw new Error("Grouping error:  ranges {"+c[f].rows[0]+", "+c[f].rows[1]+"} and {"+e[h][0]+", "+e[h][1]+"} are overlapping.")}else if(c[f].cols){if(1===c[f].cols.length)throw new Error("Grouping error:  Group {"+c[f].cols[0]+"} is invalid. Cannot define single-entry groups.");if(0===c[f].cols.length)throw new Error("Grouping error:  Cannot define empty groups.");d.push(c[f].cols);for(var h=0,j=d.length;j>h;h++)if(b(c[f].cols,d[h]))throw new Error("Grouping error:  ranges {"+c[f].cols[0]+", "+c[f].cols[1]+"} and {"+d[h][0]+", "+d[h][1]+"} are overlapping.")}return!0},afterGetRowHeaderRenderers:function(a){b.Grouping.groupIndicatorsFactory(a,"vertical")},afterGetColumnHeaderRenderers:function(a){b.Grouping.groupIndicatorsFactory(a,"horizontal")},hookProxy:function(c,d){return function(){return a.getSettings().groups?d?b.Grouping[c](d).apply(this,arguments):b.Grouping[c].apply(this,arguments):void 0}}}},N=function(){var a=this,c=!!a.getSettings().groups;if(c){var d={};b.Grouping=new cb(a),a.getSettings().rowHeaders||(d.rowHeaders=!0),a.getSettings().colHeaders||(d.colHeaders=!0),(d.colHeaders||d.rowHeaders)&&a.updateSettings(d);var e=b.Grouping.validateGroups();if(!e)return;a.addHook("beforeInit",b.Grouping.hookProxy("init")),a.addHook("afterUpdateSettings",b.Grouping.hookProxy("updateGroups")),a.addHook("afterGetColumnHeaderRenderers",b.Grouping.hookProxy("afterGetColumnHeaderRenderers")),a.addHook("afterGetRowHeaderRenderers",b.Grouping.hookProxy("afterGetRowHeaderRenderers")),a.addHook("afterGetRowHeader",b.Grouping.hookProxy("afterGetRowHeader")),a.addHook("afterGetColHeader",b.Grouping.hookProxy("afterGetColHeader")),a.addHook("beforeOnCellMouseDown",b.Grouping.hookProxy("toggleGroupVisibility")),a.addHook("modifyTransformStart",b.Grouping.hookProxy("modifySelectionFactory","start")),a.addHook("modifyTransformEnd",b.Grouping.hookProxy("modifySelectionFactory","end")),a.addHook("modifyRowHeight",b.Grouping.hookProxy("modifyRowHeight"))}},db=function(){for(var a=document.querySelectorAll("colgroup"),c=0,d=a.length;d>c;c++){var e=a[c].querySelectorAll("col.rowHeader");if(0===e.length)return;for(var f=0,g=e.length+1;g>f;f++){if(2==g)return;f<b.Grouping.getLevels().rows+1&&(f==b.Grouping.getLevels().rows?b.Dom.addClass(e[f],"htGroupColClosest"):b.Dom.addClass(e[f],"htGroupCol"))}}};b.hooks.add("beforeInit",N),b.hooks.add("afterUpdateSettings",function(){this.getSettings().groups&&!b.Grouping?N.call(this,arguments):!this.getSettings().groups&&b.Grouping&&(b.Grouping.resetGroups(),b.Grouping=void 0)}),b.plugins.Grouping=cb,function(a){function b(){this.zeroClipboardInstance=null,this.instance=null}b.prototype.prepareZeroClipboard=function(){this.swfPath&&ZeroClipboard.config({swfPath:this.swfPath})},b.prototype.copy=function(){return this.instance.copyPaste.setCopyableText(),this.instance.copyPaste.copyPasteInstance.elTextarea.value},b.prototype.addToContextMenu=function(b){this.getSettings().contextMenuCopyPaste&&b.items.unshift({key:"copy",name:"Copy"},{key:"paste",name:"Paste",callback:function(){this.copyPaste.triggerPaste()}},a.ContextMenu.SEPARATOR)},b.prototype.setupZeroClipboard=function(b){var d=this;if(this.cmInstance=b,a.Dom.hasClass(this.cmInstance.rootElement,"htContextMenu"))for(var e=b.getData(),f=0,g=e.length;g>f;f++)if("copy"===e[f].key){this.zeroClipboardInstance=new ZeroClipboard(b.getCell(f,0)),this.zeroClipboardInstance.off(),this.zeroClipboardInstance.on("copy",function(a){var b=a.clipboardData;b.setData("text/plain",d.copy()),d.instance.getSettings().outsideClickDeselects=d.outsideClickDeselectsCache}),c.bindEvents();break}},b.prototype.bindEvents=function(){var b=this;if(b.cmInstance){var c=new a.eventManager(this.instance),d=function(){var c=b.cmInstance.rootElement.querySelector("td.current");c&&a.Dom.removeClass(c,"current"),b.outsideClickDeselectsCache=b.instance.getSettings().outsideClickDeselects,b.instance.getSettings().outsideClickDeselects=!1},e=function(){var c=b.cmInstance.rootElement.querySelector("td.zeroclipboard-is-hover");c&&a.Dom.removeClass(c,"zeroclipboard-is-hover"),b.instance.getSettings().outsideClickDeselects=b.outsideClickDeselectsCache};c.removeEventListener(document,"mouseenter",function(){d()}),c.addEventListener(document,"mouseenter",function(){d()}),c.removeEventListener(document,"mouseleave",function(){e()}),c.addEventListener(document,"mouseleave",function(){e()})}},b.prototype.init=function(){if(this.getSettings().contextMenuCopyPaste){if("object"==typeof this.getSettings().contextMenuCopyPaste&&(c.swfPath=this.getSettings().contextMenuCopyPaste.swfPath),"undefined"==typeof ZeroClipboard)throw new Error("To be able to use the Copy/Paste feature from the context menu, you need to manualy include ZeroClipboard.js file to your website.");try{{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}}catch(a){if("undefined"==typeof navigator.mimeTypes["application/x-shockwave-flash"])throw new Error("To be able to use the Copy/Paste feature from the context menu, your browser needs to have Flash Plugin installed.")}c.instance=this,c.prepareZeroClipboard()}};var c=new b;a.hooks.add("afterRender",function(){c.setupZeroClipboard(this)}),a.hooks.add("afterInit",c.init),a.hooks.add("afterContextMenuDefaultOptions",c.addToContextMenu),a.ContextMenuCopyPaste=b}(b),function(a){function b(b){this.instance=b,this.dragged=[],this.eventManager=a.eventManager(b),this.bindTouchEvents()}b.prototype.getCurrentRangeCoords=function(a,b,c,d,e){var f=a.getTopLeftCorner(),g=a.getBottomRightCorner(),h=a.getBottomLeftCorner(),i=a.getTopRightCorner(),j={start:null,end:null};switch(c){case"NE-SW":switch(d){case"NE-SW":case"NW-SE":j="topLeft"==e?{start:new l(b.row,a.highlight.col),end:new l(h.row,b.col)}:{start:new l(a.highlight.row,b.col),end:new l(b.row,f.col)};break;case"SE-NW":"bottomRight"==e&&(j={start:new l(g.row,b.col),end:new l(b.row,f.col)})}break;case"NW-SE":switch(d){case"NE-SW":"topLeft"==e?j={start:b,end:h}:j.end=b;break;case"NW-SE":"topLeft"==e?j={start:b,end:g}:j.end=b;break;case"SE-NW":"topLeft"==e?j={start:b,end:f}:j.end=b;break;case"SW-NE":"topLeft"==e?j={start:b,end:i}:j.end=b}break;case"SW-NE":switch(d){case"NW-SE":j="bottomRight"==e?{start:new l(b.row,f.col),end:new l(h.row,b.col)}:{start:new l(f.row,b.col),end:new l(b.row,g.col)};break;case"SW-NE":j="topLeft"==e?{start:new l(a.highlight.row,b.col),end:new l(b.row,g.col)}:{start:new l(b.row,f.col),end:new l(f.row,b.col)};break;case"SE-NW":"bottomRight"==e?j={start:new l(b.row,i.col),end:new l(f.row,b.col)}:"topLeft"==e&&(j={start:h,end:b})}break;case"SE-NW":switch(d){case"NW-SE":case"NE-SW":case"SW-NE":"topLeft"==e&&(j.end=b);break;case"SE-NW":"topLeft"==e?j.end=b:j={start:b,end:f}}}return j},b.prototype.bindTouchEvents=function(){var b=this,c=function(a){if(1==this.dragged.length)return this.dragged=[],!0;var b=this.dragged.indexOf(a);return-1==b?!1:void(0===b?this.dragged=this.dragged.slice(0,1):1==b&&(this.dragged=this.dragged.slice(-1)))};this.eventManager.addEventListener(this.instance.rootElement,"touchstart",function(c){if(a.Dom.hasClass(c.target,"topLeftSelectionHandle-HitArea")){b.dragged.push("topLeft");var d=b.instance.getSelectedRange();return b.touchStartRange={width:d.getWidth(),height:d.getHeight(),direction:d.getDirection()},c.preventDefault(),!1}if(a.Dom.hasClass(c.target,"bottomRightSelectionHandle-HitArea")){b.dragged.push("bottomRight");var d=b.instance.getSelectedRange();return b.touchStartRange={width:d.getWidth(),height:d.getHeight(),direction:d.getDirection()},c.preventDefault(),!1}}),this.eventManager.addEventListener(this.instance.rootElement,"touchend",function(d){return a.Dom.hasClass(d.target,"topLeftSelectionHandle-HitArea")?(c.call(b,"topLeft"),b.touchStartRange=void 0,d.preventDefault(),!1):a.Dom.hasClass(d.target,"bottomRightSelectionHandle-HitArea")?(c.call(b,"bottomRight"),b.touchStartRange=void 0,d.preventDefault(),!1):void 0}),this.eventManager.addEventListener(this.instance.rootElement,"touchmove",function(c){var d=a.Dom.getWindowScrollTop(),e=a.Dom.getWindowScrollLeft();if(b.dragged.length>0){var f=document.elementFromPoint(c.touches[0].screenX-e,c.touches[0].screenY-d);if(!f)return;if("TD"==f.nodeName||"TH"==f.nodeName){var g=b.instance.getCoords(f);-1==g.col&&(g.col=0);var h=b.instance.getSelectedRange(),i=h.getWidth(),j=h.getHeight(),k=h.getDirection();1==i&&1==j&&b.instance.selection.setRangeEnd(g);var l=b.getCurrentRangeCoords(h,g,b.touchStartRange.direction,k,b.dragged[0]);null!=l.start&&b.instance.selection.setRangeStart(l.start),b.instance.selection.setRangeEnd(l.end)}c.preventDefault()}})},b.prototype.isDragged=function(){return 0===this.dragged.length?!1:!0};var c=function(){var c=this;a.plugins.multipleSelectionHandles=new b(c)};a.hooks.add("afterInit",c)}(b);var eb=function(){function a(){}return a.prototype.init=function(a){this.instance=a,this.bindEvents(),this.scrollbars=[this.instance.view.wt.wtScrollbars.vertical,this.instance.view.wt.wtScrollbars.horizontal,this.instance.view.wt.wtScrollbars.corner],this.clones=[this.instance.view.wt.wtScrollbars.vertical.clone.wtTable.holder.parentNode,this.instance.view.wt.wtScrollbars.horizontal.clone.wtTable.holder.parentNode,this.instance.view.wt.wtScrollbars.corner.clone.wtTable.holder.parentNode]
},a.prototype.bindEvents=function(){var a=this;this.instance.addHook("beforeTouchScroll",function(){b.freezeOverlays=!0;for(var c=0,d=a.clones.length;d>c;c++)b.Dom.addClass(a.clones[c],"hide-tween")}),this.instance.addHook("afterMomentumScroll",function(){b.freezeOverlays=!1;for(var c=0,d=a.clones.length;d>c;c++)b.Dom.removeClass(a.clones[c],"hide-tween");for(var c=0,d=a.clones.length;d>c;c++)b.Dom.addClass(a.clones[c],"show-tween");setTimeout(function(){for(var c=0,d=a.clones.length;d>c;c++)b.Dom.removeClass(a.clones[c],"show-tween")},400);for(var c=0,d=a.scrollbars.length;d>c;c++)a.scrollbars[c].refresh(),a.scrollbars[c].resetFixedPosition()})},a}(),fb=new eb;if(b.hooks.add("afterInit",function(){fb.init.call(fb,this)}),function(a){function b(b){function c(c){c.items.push(a.ContextMenu.SEPARATOR,{key:"freeze_column",name:function(){var a=b.getSelected()[1];return a>o-1?"Freeze this column":"Unfreeze this column"},disabled:function(){var a=b.getSelected();return a[1]!==a[3]},callback:function(){var a=b.getSelected()[1];a>o-1?j(a):k(a)}})}function d(){b.updateSettings({fixedColumnsLeft:o+1}),o++}function e(){b.updateSettings({fixedColumnsLeft:o-1}),o--}function f(a){b.manualColumnPositions&&0!==b.manualColumnPositions.length||b.manualColumnPositions||(b.manualColumnPositions=[]),a?b.manualColumnPositions[a]||g(a+1):g(b.countCols())}function g(a){if(b.manualColumnPositions.length<a)for(var c=b.manualColumnPositions.length;a>c;c++)b.manualColumnPositions[c]=c}function h(a,c,d,e){null==d&&(d=a),"freeze"===e?b.manualColumnPositions.splice(o,0,b.manualColumnPositions.splice(c,1)[0]):"unfreeze"===e&&b.manualColumnPositions.splice(d,0,b.manualColumnPositions.splice(c,1)[0])}function i(a){for(var b=o,c=l(b),d=l(a);d>c;)b++,c=l(b);return b-1}function j(a){if(!(o-1>=a)){var b=l(a)||a;f(b),h(b,a,null,"freeze"),d()}}function k(a){if(!(a>o-1)){var b=i(a),c=l(a)||a;f(c),h(c,a,b,"unfreeze"),e()}}function l(a){return b.manualColumnPositions[a]}function m(a){return this.manualColumnPositionsPluginUsages.length>1?a:l(a)}function n(){b.addHook("modifyCol",m),b.addHook("afterContextMenuDefaultOptions",c)}var o=b.getSettings().fixedColumnsLeft,p=function(){"undefined"!=typeof b.manualColumnPositionsPluginUsages?b.manualColumnPositionsPluginUsages.push("manualColumnFreeze"):b.manualColumnPositionsPluginUsages=["manualColumnFreeze"],n()};return{init:p,freezeColumn:j,unfreezeColumn:k,helpers:{addFixedColumn:d,removeFixedColumn:e,checkPositionData:f,modifyColumnOrder:h,getBestColumnReturnPosition:i}}}var c=function(){if(this.getSettings().manualColumnFreeze){var c;a.plugins.manualColumnFreeze=b,this.manualColumnFreeze=new b(this),c=this.manualColumnFreeze,c.init.call(this)}};a.hooks.add("beforeInit",c)}(b),j.prototype.init=function(){this.TABLE=this.instance.wtTable.TABLE,this.fixed=this.instance.wtTable.hider,this.fixedContainer=this.instance.wtTable.holder,this.scrollHandler=this.getScrollableElement(this.TABLE)},j.prototype.makeClone=function(a){var b=document.createElement("DIV");b.className="ht_clone_"+a+" handsontable",b.style.position="absolute",b.style.top=0,b.style.left=0,b.style.overflow="hidden";var c=document.createElement("TABLE");return c.className=this.instance.wtTable.TABLE.className,b.appendChild(c),this.instance.wtTable.holder.parentNode.appendChild(b),new p({cloneSource:this.instance,cloneOverlay:this,table:c})},j.prototype.getScrollableElement=function(b){for(var c=b.parentNode;c&&c.style&&document.body!==c;){if("visible"!==c.style.overflow&&""!==c.style.overflow)return c;if(a.getComputedStyle){var d=a.getComputedStyle(c);if("visible"!==d.getPropertyValue("overflow")&&""!==d.getPropertyValue("overflow"))return c}if(this instanceof w&&"visible"!==c.style.overflowX&&""!==c.style.overflowX)return c;c=c.parentNode}return a},j.prototype.refresh=function(a){this.clone&&this.clone.draw(a)},j.prototype.destroy=function(){var a=b.eventManager(this.clone);a.clear()},k.prototype.appear=function(a){var c,d,e,f,g,h,i,j,k,m,n,o;if(!this.disabled){var p,q,r,s,t,u,w,y=this.instance,z=function(){return!this.instance.selections.area.cellRange||r==this.instance.selections.area.cellRange.to.row&&s==this.instance.selections.area.cellRange.to.col?!1:!0},A=function(a,b,c,d){var e=parseInt(this.selectionHandles.styles.topLeft.width,10),f=parseInt(this.selectionHandles.styles.topLeftHitArea.width,10);this.selectionHandles.styles.topLeft.top=parseInt(a-e,10)+"px",this.selectionHandles.styles.topLeft.left=parseInt(b-e,10)+"px",this.selectionHandles.styles.topLeftHitArea.top=parseInt(a-f/4*3,10)+"px",this.selectionHandles.styles.topLeftHitArea.left=parseInt(b-f/4*3,10)+"px",this.selectionHandles.styles.bottomRight.top=parseInt(a+d,10)+"px",this.selectionHandles.styles.bottomRight.left=parseInt(b+c,10)+"px",this.selectionHandles.styles.bottomRightHitArea.top=parseInt(a+d-f/4,10)+"px",this.selectionHandles.styles.bottomRightHitArea.left=parseInt(b+c-f/4,10)+"px",this.settings.border.multipleSelectionHandlesVisible&&this.settings.border.multipleSelectionHandlesVisible()?(this.selectionHandles.styles.topLeft.display="block",this.selectionHandles.styles.topLeftHitArea.display="block",z.call(this)?(this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"):(this.selectionHandles.styles.bottomRight.display="block",this.selectionHandles.styles.bottomRightHitArea.display="block")):(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none",this.selectionHandles.styles.topLeftHitArea.display="none",this.selectionHandles.styles.bottomRightHitArea.display="none"),p==this.instance.wtSettings.getSetting("fixedRowsTop")||q==this.instance.wtSettings.getSetting("fixedColumnsLeft")?(this.selectionHandles.styles.topLeft.zIndex="9999",this.selectionHandles.styles.topLeftHitArea.zIndex="9999"):(this.selectionHandles.styles.topLeft.zIndex="",this.selectionHandles.styles.topLeftHitArea.zIndex="")};for(u=y.cloneOverlay instanceof x||y.cloneOverlay instanceof v?y.getSetting("fixedRowsTop"):y.wtTable.getRenderedRowsCount(),t=0;u>t;t++)if(w=y.wtTable.rowFilter.renderedToSource(t),w>=a[0]&&w<=a[2]){p=w;break}for(t=u-1;t>=0;t--)if(w=y.wtTable.rowFilter.renderedToSource(t),w>=a[0]&&w<=a[2]){r=w;break}for(u=y.wtTable.getRenderedColumnsCount(),t=0;u>t;t++)if(w=y.wtTable.columnFilter.renderedToSource(t),w>=a[1]&&w<=a[3]){q=w;break}for(t=u-1;t>=0;t--)if(w=y.wtTable.columnFilter.renderedToSource(t),w>=a[1]&&w<=a[3]){s=w;break}if(void 0===p||void 0===q)return void this.disappear();c=p!==r||q!==s,d=y.wtTable.getCell(new l(p,q)),e=c?y.wtTable.getCell(new l(r,s)):d,f=b.Dom.offset(d),g=c?b.Dom.offset(e):f,h=b.Dom.offset(y.wtTable.TABLE),j=f.top,n=g.top+b.Dom.outerHeight(e)-j,m=f.left,o=g.left+b.Dom.outerWidth(e)-m,i=j-h.top-1,k=m-h.left-1;var B=b.Dom.getComputedStyle(d);parseInt(B.borderTopWidth,10)>0&&(i+=1,n=n>0?n-1:0),parseInt(B.borderLeftWidth,10)>0&&(k+=1,o=o>0?o-1:0),this.topStyle.top=i+"px",this.topStyle.left=k+"px",this.topStyle.width=o+"px",this.topStyle.display="block",this.leftStyle.top=i+"px",this.leftStyle.left=k+"px",this.leftStyle.height=n+"px",this.leftStyle.display="block";var C=Math.floor(this.settings.border.width/2);if(this.bottomStyle.top=i+n-C+"px",this.bottomStyle.left=k+"px",this.bottomStyle.width=o+"px",this.bottomStyle.display="block",this.rightStyle.top=i+"px",this.rightStyle.left=k+o-C+"px",this.rightStyle.height=n+1+"px",this.rightStyle.display="block",b.mobileBrowser||!this.hasSetting(this.settings.border.cornerVisible)||z.call(this))this.cornerStyle.display="none";else if(this.cornerStyle.top=i+n-4+"px",this.cornerStyle.left=k+o-4+"px",this.cornerStyle.borderRightWidth=this.cornerDefaultStyle.borderWidth,this.cornerStyle.width=this.cornerDefaultStyle.width,this.cornerStyle.display="block",s===this.instance.getSetting("totalColumns")-1){var D=b.Dom.getScrollableElement(y.wtTable.TABLE),E=e.offsetLeft+b.Dom.outerWidth(e)>=b.Dom.innerWidth(D);E&&(this.cornerStyle.left=Math.floor(k+o-3-parseInt(this.cornerDefaultStyle.width)/2)+"px",this.cornerStyle.borderRightWidth=0)}b.mobileBrowser&&A.call(this,i,k,o,n)}},k.prototype.disappear=function(){this.topStyle.display="none",this.leftStyle.display="none",this.bottomStyle.display="none",this.rightStyle.display="none",this.cornerStyle.display="none",b.mobileBrowser&&(this.selectionHandles.styles.topLeft.display="none",this.selectionHandles.styles.bottomRight.display="none")},k.prototype.hasSetting=function(a){return"function"==typeof a?a():!!a},l.prototype.isValid=function(a){return this.row<0||this.col<0?!1:this.row>=a.getSetting("totalRows")||this.col>=a.getSetting("totalColumns")?!1:!0},l.prototype.isEqual=function(a){return a===this?!0:this.row===a.row&&this.col===a.col},l.prototype.isSouthEastOf=function(a){return this.row>=a.row&&this.col>=a.col},l.prototype.isNorthWestOf=function(a){return this.row<=a.row&&this.col<=a.col},l.prototype.isSouthWestOf=function(a){return this.row>=a.row&&this.col<=a.col},l.prototype.isNorthEastOf=function(a){return this.row<=a.row&&this.col>=a.col},a.WalkontableCellCoords=l,m.prototype.isValid=function(a){return this.from.isValid(a)&&this.to.isValid(a)},m.prototype.isSingle=function(){return this.from.row===this.to.row&&this.from.col===this.to.col},m.prototype.getHeight=function(){return Math.max(this.from.row,this.to.row)-Math.min(this.from.row,this.to.row)+1},m.prototype.getWidth=function(){return Math.max(this.from.col,this.to.col)-Math.min(this.from.col,this.to.col)+1},m.prototype.includes=function(a){var b=this.getTopLeftCorner(),c=this.getBottomRightCorner();return a.row<0&&(a.row=0),a.col<0&&(a.col=0),b.row<=a.row&&c.row>=a.row&&b.col<=a.col&&c.col>=a.col},m.prototype.includesRange=function(a){return this.includes(a.getTopLeftCorner())&&this.includes(a.getBottomRightCorner())},m.prototype.isEqual=function(a){return Math.min(this.from.row,this.to.row)==Math.min(a.from.row,a.to.row)&&Math.max(this.from.row,this.to.row)==Math.max(a.from.row,a.to.row)&&Math.min(this.from.col,this.to.col)==Math.min(a.from.col,a.to.col)&&Math.max(this.from.col,this.to.col)==Math.max(a.from.col,a.to.col)},m.prototype.overlaps=function(a){return a.isSouthEastOf(this.getTopLeftCorner())&&a.isNorthWestOf(this.getBottomRightCorner())},m.prototype.isSouthEastOf=function(a){return this.getTopLeftCorner().isSouthEastOf(a)||this.getBottomRightCorner().isSouthEastOf(a)},m.prototype.isNorthWestOf=function(a){return this.getTopLeftCorner().isNorthWestOf(a)||this.getBottomRightCorner().isNorthWestOf(a)},m.prototype.expand=function(a){var b=this.getTopLeftCorner(),c=this.getBottomRightCorner();return a.row<b.row||a.col<b.col||a.row>c.row||a.col>c.col?(this.from=new l(Math.min(b.row,a.row),Math.min(b.col,a.col)),this.to=new l(Math.max(c.row,a.row),Math.max(c.col,a.col)),!0):!1},m.prototype.expandByRange=function(a){if(this.includesRange(a)||!this.overlaps(a))return!1;var b=this.getTopLeftCorner(),c=this.getBottomRightCorner(),d=(this.getTopRightCorner(),this.getBottomLeftCorner(),a.getTopLeftCorner()),e=a.getBottomRightCorner(),f=Math.min(b.row,d.row),g=Math.min(b.col,d.col),h=Math.max(c.row,e.row),i=Math.max(c.col,e.col),j=new l(f,g),k=new l(h,i),n=new m(j,j,k).isCorner(this.from,a),o=a.isEqual(new m(j,j,k));return n&&!o&&(this.from.col>j.col&&(j.col=i,k.col=g),this.from.row>j.row&&(j.row=h,k.row=f)),this.from=j,this.to=k,!0},m.prototype.getDirection=function(){return this.from.isNorthWestOf(this.to)?"NW-SE":this.from.isNorthEastOf(this.to)?"NE-SW":this.from.isSouthEastOf(this.to)?"SE-NW":this.from.isSouthWestOf(this.to)?"SW-NE":void 0},m.prototype.setDirection=function(a){switch(a){case"NW-SE":this.from=this.getTopLeftCorner(),this.to=this.getBottomRightCorner();break;case"NE-SW":this.from=this.getTopRightCorner(),this.to=this.getBottomLeftCorner();break;case"SE-NW":this.from=this.getBottomRightCorner(),this.to=this.getTopLeftCorner();break;case"SW-NE":this.from=this.getBottomLeftCorner(),this.to=this.getTopRightCorner()}},m.prototype.getTopLeftCorner=function(){return new l(Math.min(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},m.prototype.getBottomRightCorner=function(){return new l(Math.max(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},m.prototype.getTopRightCorner=function(){return new l(Math.min(this.from.row,this.to.row),Math.max(this.from.col,this.to.col))},m.prototype.getBottomLeftCorner=function(){return new l(Math.max(this.from.row,this.to.row),Math.min(this.from.col,this.to.col))},m.prototype.isCorner=function(a,b){return b&&b.includes(a)&&(this.getTopLeftCorner().isEqual(new l(b.from.row,b.from.col))||this.getTopRightCorner().isEqual(new l(b.from.row,b.to.col))||this.getBottomLeftCorner().isEqual(new l(b.to.row,b.from.col))||this.getBottomRightCorner().isEqual(new l(b.to.row,b.to.col)))?!0:a.isEqual(this.getTopLeftCorner())||a.isEqual(this.getTopRightCorner())||a.isEqual(this.getBottomLeftCorner())||a.isEqual(this.getBottomRightCorner())},m.prototype.getOppositeCorner=function(a,b){if(!(a instanceof l))return!1;if(b&&b.includes(a)){if(this.getTopLeftCorner().isEqual(new l(b.from.row,b.from.col)))return this.getBottomRightCorner();if(this.getTopRightCorner().isEqual(new l(b.from.row,b.to.col)))return this.getBottomLeftCorner();if(this.getBottomLeftCorner().isEqual(new l(b.to.row,b.from.col)))return this.getTopRightCorner();if(this.getBottomRightCorner().isEqual(new l(b.to.row,b.to.col)))return this.getTopLeftCorner()}return a.isEqual(this.getBottomRightCorner())?this.getTopLeftCorner():a.isEqual(this.getTopLeftCorner())?this.getBottomRightCorner():a.isEqual(this.getTopRightCorner())?this.getBottomLeftCorner():a.isEqual(this.getBottomLeftCorner())?this.getTopRightCorner():void 0},m.prototype.getBordersSharedWith=function(a){if(!this.includesRange(a))return[];var b={top:Math.min(this.from.row,this.to.row),bottom:Math.max(this.from.row,this.to.row),left:Math.min(this.from.col,this.to.col),right:Math.max(this.from.col,this.to.col)},c={top:Math.min(a.from.row,a.to.row),bottom:Math.max(a.from.row,a.to.row),left:Math.min(a.from.col,a.to.col),right:Math.max(a.from.col,a.to.col)},d=[];return b.top==c.top&&d.push("top"),b.right==c.right&&d.push("right"),b.bottom==c.bottom&&d.push("bottom"),b.left==c.left&&d.push("left"),d},m.prototype.getInner=function(){for(var a=this.getTopLeftCorner(),b=this.getBottomRightCorner(),c=[],d=a.row;d<=b.row;d++)for(var e=a.col;e<=b.col;e++)this.from.row===d&&this.from.col===e||this.to.row===d&&this.to.col===e||c.push(new l(d,e));return c},m.prototype.getAll=function(){for(var a=this.getTopLeftCorner(),b=this.getBottomRightCorner(),c=[],d=a.row;d<=b.row;d++)for(var e=a.col;e<=b.col;e++)c.push(a.row===d&&a.col===e?a:b.row===d&&b.col===e?b:new l(d,e));return c},m.prototype.forAll=function(a){for(var b=this.getTopLeftCorner(),c=this.getBottomRightCorner(),d=b.row;d<=c.row;d++)for(var e=b.col;e<=c.col;e++){var f=a(d,e);if(f===!1)return}},a.WalkontableCellRange=m,n.prototype.offsetted=function(a){return a+this.offset},n.prototype.unOffsetted=function(a){return a-this.offset},n.prototype.renderedToSource=function(a){return this.offsetted(a)},n.prototype.sourceToRendered=function(a){return this.unOffsetted(a)},n.prototype.offsettedTH=function(a){return a-this.countTH},n.prototype.unOffsettedTH=function(a){return a+this.countTH},n.prototype.visibleRowHeadedColumnToSourceColumn=function(a){return this.renderedToSource(this.offsettedTH(a))},n.prototype.sourceColumnToVisibleRowHeadedColumn=function(a){return this.unOffsettedTH(this.sourceToRendered(a))},o.prototype.getContainerSize=function(){return"function"==typeof this.containerSizeFn?this.containerSizeFn():this.containerSizeFn},o.prototype.getSize=function(a){return this.cellSizes[a]+(this.cellStretch[a]||0)},o.prototype.stretch=function(){var a=this.getContainerSize(),b=0;if(this.remainingSize=this.cellSizesSum-a,this.cellStretch.length=0,"all"===this.strategy){if(this.remainingSize<0){for(var c,d=a/this.cellSizesSum;b<this.cellCount-1;)c=Math.floor(d*this.cellSizes[b]),this.remainingSize+=c-this.cellSizes[b],this.cellStretch[b]=c-this.cellSizes[b],b++;this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0}}else"last"===this.strategy&&this.remainingSize<0&&1/0!==a&&(this.cellStretch[this.cellCount-1]=-this.remainingSize,this.remainingSize=0)},o.prototype.countVisible=function(){return this.visibleCellCount},o.prototype.isLastIncomplete=function(){var a=this.instance.wtTable.getFirstVisibleRow(),c=this.instance.wtTable.getLastVisibleColumn(),d=this.instance.wtTable.getCell(new l(a,c)),e=b.Dom.offset(d),f=b.Dom.outerWidth(d),g=e.left+f,h=this.instance.wtScrollbars.vertical.getScrollPosition(),i=this.instance.wtViewport.getViewportWidth(),j=h+i;return j>=g},p.prototype.draw=function(a){return this.drawInterrupted=!1,a||b.Dom.isVisible(this.wtTable.TABLE)?(this.wtTable.draw(a),this):void(this.drawInterrupted=!0)},p.prototype.getCell=function(a,b){if(b){var c=this.wtSettings.getSetting("fixedRowsTop"),d=this.wtSettings.getSetting("fixedColumnsLeft");return a.row<c&&a.col<d?this.wtScrollbars.corner.clone.wtTable.getCell(a):a.row<c?this.wtScrollbars.vertical.clone.wtTable.getCell(a):a.col<d?this.wtScrollbars.horizontal.clone.wtTable.getCell(a):this.wtTable.getCell(a)}return this.wtTable.getCell(a)},p.prototype.update=function(a,b){return this.wtSettings.update(a,b)},p.prototype.scrollVertical=function(a){return this.wtScrollbars.vertical.scrollTo(a),this.getSetting("onScrollVertically"),this},p.prototype.scrollHorizontal=function(a){return this.wtScrollbars.horizontal.scrollTo(a),this.getSetting("onScrollHorizontally"),this},p.prototype.scrollViewport=function(a){return this.wtScroll.scrollViewport(a),this},p.prototype.getViewport=function(){return[this.wtTable.getFirstVisibleRow(),this.wtTable.getFirstVisibleColumn(),this.wtTable.getLastVisibleRow(),this.wtTable.getLastVisibleColumn()]},p.prototype.getSetting=function(a,b,c,d,e){return this.wtSettings.getSetting(a,b,c,d,e)},p.prototype.hasSetting=function(a){return this.wtSettings.has(a)},p.prototype.destroy=function(){this.wtScrollbars.destroy(),this.wtEvent&&this.wtEvent.destroy()},q.prototype=new j,q.prototype.destroy=function(){j.prototype.destroy.call(this),clearTimeout(this.lastTimeout)},r.prototype.parentCell=function(a){var c={},d=this.instance.wtTable.TABLE,e=b.Dom.closest(a,["TD","TH"],d);return e&&b.Dom.isChildOf(e,d)?(c.coords=this.instance.wtTable.getCoords(e),c.TD=e):b.Dom.hasClass(a,"wtBorder")&&b.Dom.hasClass(a,"current")?(c.coords=this.instance.selections.current.cellRange.highlight,c.TD=this.instance.wtTable.getCell(c.coords)):b.Dom.hasClass(a,"wtBorder")&&b.Dom.hasClass(a,"area")&&this.instance.selections.area.cellRange&&(c.coords=this.instance.selections.area.cellRange.to,c.TD=this.instance.wtTable.getCell(c.coords)),c},a.requestAnimFrame=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){return a.setTimeout(b,1e3/60)}}(),a.cancelRequestAnimFrame=function(){return a.cancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),a.getComputedStyle||!function(){var b,c={getPropertyValue:function(a){return"float"==a&&(a="styleFloat"),b.currentStyle[a.toUpperCase()]||null}};a.getComputedStyle=function(a){return b=a,c}}(),!String.prototype.trim){var gb=/^\s+|\s+$/g;String.prototype.trim=function(){return this.replace(gb,"")}}t.prototype.offsetted=function(a){return a+this.offset},t.prototype.unOffsetted=function(a){return a-this.offset},t.prototype.renderedToSource=function(a){return this.offsetted(a)},t.prototype.sourceToRendered=function(a){return this.unOffsetted(a)},t.prototype.offsettedTH=function(a){return a-this.countTH},t.prototype.visibleColHeadedRowToSourceRow=function(a){return this.renderedToSource(this.offsettedTH(a))},t.prototype.sourceRowToVisibleColHeadedRow=function(a){return this.unOffsettedTH(this.sourceToRendered(a))},u.prototype.scrollViewport=function(a){if(this.instance.drawn){var b=this.instance.getSetting("totalRows"),c=this.instance.getSetting("totalColumns");if(a.row<0||a.row>b-1)throw new Error("row "+a.row+" does not exist");if(a.col<0||a.col>c-1)throw new Error("column "+a.col+" does not exist");a.row>this.instance.wtTable.getLastVisibleRow()?this.instance.wtScrollbars.vertical.scrollTo(a.row,!0):a.row>=this.instance.getSetting("fixedRowsTop")&&a.row<this.instance.wtTable.getFirstVisibleRow()&&this.instance.wtScrollbars.vertical.scrollTo(a.row),a.col>this.instance.wtTable.getLastVisibleColumn()?this.instance.wtScrollbars.horizontal.scrollTo(a.col,!0):a.col>=this.instance.getSetting("fixedColumnsLeft")&&a.col<this.instance.wtTable.getFirstVisibleColumn()&&this.instance.wtScrollbars.horizontal.scrollTo(a.col)}},v.prototype=new j,v.prototype.resetFixedPosition=function(){if(this.instance.wtTable.holder.parentNode){var c,d,e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===a){var f=this.instance.wtTable.holder.getBoundingClientRect(),g=Math.ceil(f.top),h=Math.ceil(f.left),i=Math.ceil(f.bottom),j=Math.ceil(f.right);c=0>h&&j-e.offsetWidth>0?-h+"px":"0",d=0>g&&i-e.offsetHeight>0?-g+"px":"0"}else b.freezeOverlays||(c=this.instance.wtScrollbars.horizontal.getScrollPosition()+"px",d=this.instance.wtScrollbars.vertical.getScrollPosition()+"px");b.Dom.setOverlayPosition(e,c,d),e.style.width=b.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px",e.style.height=b.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},w.prototype=new j,w.prototype.resetFixedPosition=function(){var c,d;if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===a){var f=this.instance.wtTable.holder.getBoundingClientRect(),g=Math.ceil(f.left),h=Math.ceil(f.right);c=0>g&&h-e.offsetWidth>0?-g+"px":"0",d=this.instance.wtTable.hider.style.top}else b.freezeOverlays||(c=this.getScrollPosition()+"px",d=this.instance.wtTable.hider.style.top);b.Dom.setOverlayPosition(e,c,d),e.style.height=b.Dom.outerHeight(this.clone.wtTable.TABLE)+"px",e.style.width=b.Dom.outerWidth(this.clone.wtTable.TABLE)+4+"px"}},w.prototype.refresh=function(a){this.applyToDOM(),j.prototype.refresh.call(this,a)},w.prototype.getScrollPosition=function(){return b.Dom.getScrollLeft(this.scrollHandler)},w.prototype.setScrollPosition=function(c){this.scrollHandler===a?a.scrollTo(c,b.Dom.getWindowScrollTop()):this.scrollHandler.scrollLeft=c},w.prototype.onScroll=function(){this.instance.getSetting("onScrollHorizontally")},w.prototype.sumCellSizes=function(a,b){for(var c=0;b>a;)c+=this.instance.wtTable.getStretchedColumnWidth(a)||this.instance.wtSettings.defaultColumnWidth,a++;return c},w.prototype.applyToDOM=function(){var a=this.instance.getSetting("totalColumns"),b=this.instance.wtViewport.getRowHeaderWidth();if(this.fixedContainer.style.width=b+this.sumCellSizes(0,a)+"px","number"==typeof this.instance.wtViewport.columnsRenderCalculator.startPosition)this.fixed.style.left=this.instance.wtViewport.columnsRenderCalculator.startPosition+"px";else{if(0!==a)throw new Error("Incorrect value of the columnsRenderCalculator");this.fixed.style.left="0"}this.fixed.style.right=""},w.prototype.scrollTo=function(a,b){var c=this.getTableParentOffset();if(b)c+=this.sumCellSizes(0,a+1),c-=this.instance.wtViewport.getViewportWidth();else{var d=this.instance.getSetting("fixedColumnsLeft");c+=this.sumCellSizes(d,a)}this.setScrollPosition(c)},w.prototype.getTableParentOffset=function(){return this.scrollHandler===a?this.instance.wtTable.holderOffset.left:0},x.prototype=new j,x.prototype.resetFixedPosition=function(){var c,d;if(this.instance.wtTable.holder.parentNode){var e=this.clone.wtTable.holder.parentNode;if(this.scrollHandler===a){var f=this.instance.wtTable.holder.getBoundingClientRect(),g=Math.ceil(f.top),h=Math.ceil(f.bottom);c=this.instance.wtTable.hider.style.left,d=0>g&&h-e.offsetHeight>0?-g+"px":"0"}else b.freezeOverlays||(d=this.getScrollPosition()+"px",c=this.instance.wtTable.hider.style.left);b.Dom.setOverlayPosition(e,c,d),e.style.width=this.instance.wtScrollbars.horizontal.scrollHandler===a?this.instance.wtViewport.getWorkspaceActualWidth()+"px":b.Dom.outerWidth(this.clone.wtTable.TABLE)+"px",e.style.height=b.Dom.outerHeight(this.clone.wtTable.TABLE)+4+"px"}},x.prototype.getScrollPosition=function(){return b.Dom.getScrollTop(this.scrollHandler)},x.prototype.setScrollPosition=function(c){this.scrollHandler===a?a.scrollTo(b.Dom.getWindowScrollLeft(),c):this.scrollHandler.scrollTop=c},x.prototype.onScroll=function(){this.instance.getSetting("onScrollVertically")},x.prototype.sumCellSizes=function(a,b){for(var c=0;b>a;)c+=this.instance.wtTable.getRowHeight(a)||this.instance.wtSettings.settings.defaultRowHeight,a++;return c},x.prototype.refresh=function(a){this.applyToDOM(),j.prototype.refresh.call(this,a)},x.prototype.applyToDOM=function(){var a=this.instance.getSetting("totalRows"),b=this.instance.wtViewport.getColumnHeaderHeight();if(this.fixedContainer.style.height=b+this.sumCellSizes(0,a)+"px","number"==typeof this.instance.wtViewport.rowsRenderCalculator.startPosition)this.fixed.style.top=this.instance.wtViewport.rowsRenderCalculator.startPosition+"px";else{if(0!==a)throw new Error("Incorrect value of the rowsRenderCalculator");this.fixed.style.top="0"}this.fixed.style.bottom=""},x.prototype.scrollTo=function(a,b){var c=this.getTableParentOffset();if(b)c+=this.sumCellSizes(0,a+1),c-=this.instance.wtViewport.getViewportHeight(),c+=1;else{var d=this.instance.getSetting("fixedRowsTop");c+=this.sumCellSizes(d,a)}this.setScrollPosition(c)},x.prototype.getTableParentOffset=function(){return this.scrollHandler===a?this.instance.wtTable.holderOffset.top:0},y.prototype.registerListeners=function(){var c=this;this.refreshAll=function(){if(c.instance.drawn){if(!c.instance.wtTable.holder.parentNode)return void c.destroy();c.instance.draw(!0),c.vertical.onScroll(),c.horizontal.onScroll()}};var d=b.eventManager(c.instance);d.addEventListener(this.vertical.scrollHandler,"scroll",this.refreshAll),this.vertical.scrollHandler!==this.horizontal.scrollHandler&&d.addEventListener(this.horizontal.scrollHandler,"scroll",this.refreshAll),this.vertical.scrollHandler!==a&&this.horizontal.scrollHandler!==a&&d.addEventListener(a,"scroll",this.refreshAll)},y.prototype.destroy=function(){var c=b.eventManager(this.instance);this.vertical&&(this.vertical.destroy(),c.removeEventListener(this.vertical.scrollHandler,"scroll",this.refreshAll)),this.horizontal&&(this.horizontal.destroy(),c.removeEventListener(this.horizontal.scrollHandler,"scroll",this.refreshAll)),c.removeEventListener(a,"scroll",this.refreshAll),this.corner&&this.corner.destroy(),this.debug&&this.debug.destroy()},y.prototype.refresh=function(a){this.horizontal&&this.horizontal.refresh(a),this.vertical&&this.vertical.refresh(a),this.corner&&this.corner.refresh(a),this.debug&&this.debug.refresh(a)},y.prototype.applyToDOM=function(){this.horizontal&&this.horizontal.applyToDOM(),this.vertical&&this.vertical.applyToDOM()},z.prototype.getBorder=function(a){return this.instanceBorders[a.guid]?this.instanceBorders[a.guid]:void(this.instanceBorders[a.guid]=new k(a,this.settings))},z.prototype.isEmpty=function(){return null===this.cellRange},z.prototype.add=function(a){this.isEmpty()?this.cellRange=new m(a,a,a):this.cellRange.expand(a)},z.prototype.replace=function(a,b){if(!this.isEmpty()){if(this.cellRange.from.isEqual(a))return this.cellRange.from=b,!0;if(this.cellRange.to.isEqual(a))return this.cellRange.to=b,!0}return!1},z.prototype.clear=function(){this.cellRange=null},z.prototype.getCorners=function(){var a=this.cellRange.getTopLeftCorner(),b=this.cellRange.getBottomRightCorner();return[a.row,a.col,b.row,b.col]},z.prototype.addClassAtCoords=function(a,c,d,e){var f=a.wtTable.getCell(new l(c,d));"object"==typeof f&&b.Dom.addClass(f,e)},z.prototype.draw=function(a){var c,d,e,f,g,h=this,i=a.wtTable.getRenderedRowsCount(),j=a.wtTable.getRenderedColumnsCount();if(this.isEmpty())return void(this.settings.border&&(f=this.getBorder(a),f&&f.disappear()));c=this.getCorners();for(var k=0;j>k;k++)e=a.wtTable.columnFilter.renderedToSource(k),e>=c[1]&&e<=c[3]&&(g=a.wtTable.getColumnHeader(e),g&&h.settings.highlightColumnClassName&&b.Dom.addClass(g,h.settings.highlightColumnClassName));for(var l=0;i>l;l++){d=a.wtTable.rowFilter.renderedToSource(l),d>=c[0]&&d<=c[2]&&(g=a.wtTable.getRowHeader(d),g&&h.settings.highlightRowClassName&&b.Dom.addClass(g,h.settings.highlightRowClassName));for(var k=0;j>k;k++)e=a.wtTable.columnFilter.renderedToSource(k),d>=c[0]&&d<=c[2]&&e>=c[1]&&e<=c[3]?h.settings.className&&h.addClassAtCoords(a,d,e,h.settings.className):d>=c[0]&&d<=c[2]?h.settings.highlightRowClassName&&h.addClassAtCoords(a,d,e,h.settings.highlightRowClassName):e>=c[1]&&e<=c[3]&&h.settings.highlightColumnClassName&&h.addClassAtCoords(a,d,e,h.settings.highlightColumnClassName)}a.getSetting("onBeforeDrawBorders",c,this.settings.className),this.settings.border&&(f=this.getBorder(a),f&&f.appear(c))},A.prototype.update=function(a,b){if(void 0===b)for(var c in a)a.hasOwnProperty(c)&&(this.settings[c]=a[c]);else this.settings[a]=b;return this.instance},A.prototype.getSetting=function(a,b,c,d,e){return"function"==typeof this.settings[a]?this.settings[a](b,c,d,e):void 0!==b&&Array.isArray(this.settings[a])?this.settings[a][b]:this.settings[a]},A.prototype.has=function(a){return!!this.settings[a]},B.prototype.isWorkingOnClone=function(){return!!this.instance.cloneSource},B.prototype.draw=function(a){if(this.isWorkingOnClone()||(this.holderOffset=b.Dom.offset(this.holder),a=this.instance.wtViewport.createRenderCalculators(a)),a)this.isWorkingOnClone()||this.instance.wtViewport.createVisibleCalculators(),this.instance.wtScrollbars&&this.instance.wtScrollbars.refresh(!0);else{this.tableOffset=this.isWorkingOnClone()?this.instance.cloneSource.wtTable.tableOffset:b.Dom.offset(this.TABLE);var c;c=this.instance.cloneOverlay instanceof q||this.instance.cloneOverlay instanceof x||this.instance.cloneOverlay instanceof v?0:this.instance.wtViewport.rowsRenderCalculator.startRow;var d;d=this.instance.cloneOverlay instanceof q||this.instance.cloneOverlay instanceof w||this.instance.cloneOverlay instanceof v?0:this.instance.wtViewport.columnsRenderCalculator.startColumn,this.rowFilter=new t(c,this.instance.getSetting("totalRows"),this.instance.getSetting("columnHeaders").length),this.columnFilter=new n(d,this.instance.getSetting("totalColumns"),this.instance.getSetting("rowHeaders").length),this._doDraw()}return this.refreshSelections(a),this.isWorkingOnClone()||(this.instance.wtScrollbars.vertical.resetFixedPosition(),this.instance.wtScrollbars.horizontal.resetFixedPosition(),this.instance.wtScrollbars.corner.resetFixedPosition()),this.instance.drawn=!0,this},B.prototype._doDraw=function(){var a=new C(this);a.render()},B.prototype.removeClassFromCells=function(a){for(var c=this.TABLE.querySelectorAll("."+a),d=0,e=c.length;e>d;d++)b.Dom.removeClass(c[d],a)},B.prototype.refreshSelections=function(a){var b,c;if(this.instance.selections){if(c=this.instance.selections.length,a)for(b=0;c>b;b++)this.instance.selections[b].settings.className&&this.removeClassFromCells(this.instance.selections[b].settings.className),this.instance.selections[b].settings.highlightRowClassName&&this.removeClassFromCells(this.instance.selections[b].settings.highlightRowClassName),this.instance.selections[b].settings.highlightColumnClassName&&this.removeClassFromCells(this.instance.selections[b].settings.highlightColumnClassName);for(b=0;c>b;b++)this.instance.selections[b].draw(this.instance,a)}},B.prototype.getCell=function(a){if(this.isRowBeforeRenderedRows(a.row))return-1;if(this.isRowAfterRenderedRows(a.row))return-2;var b=this.TBODY.childNodes[this.rowFilter.sourceToRendered(a.row)];return b?b.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(a.col)]:void 0},B.prototype.getColumnHeader=function(a,b){b||(b=0);
var c=this.THEAD.childNodes[b];return c?c.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(a)]:void 0},B.prototype.getRowHeader=function(a){if(0===this.columnFilter.sourceColumnToVisibleRowHeadedColumn(0))return null;var b=this.TBODY.childNodes[this.rowFilter.sourceToRendered(a)];return b?b.childNodes[0]:void 0},B.prototype.getCoords=function(a){var c=a.parentNode,d=b.Dom.index(c);return d=c.parentNode===this.THEAD?this.rowFilter.visibleColHeadedRowToSourceRow(d):this.rowFilter.renderedToSource(d),new l(d,this.columnFilter.visibleRowHeadedColumnToSourceColumn(a.cellIndex))},B.prototype.getTrForRow=function(a){return this.TBODY.childNodes[this.rowFilter.sourceToRendered(a)]},B.prototype.getFirstRenderedRow=function(){return this.instance.wtViewport.rowsRenderCalculator.startRow},B.prototype.getFirstVisibleRow=function(){return this.instance.wtViewport.rowsVisibleCalculator.startRow},B.prototype.getFirstRenderedColumn=function(){return this.instance.wtViewport.columnsRenderCalculator.startColumn},B.prototype.getFirstVisibleColumn=function(){return this.instance.wtViewport.columnsVisibleCalculator.startColumn},B.prototype.getLastRenderedRow=function(){return this.instance.wtViewport.rowsRenderCalculator.endRow},B.prototype.getLastVisibleRow=function(){return this.instance.wtViewport.rowsVisibleCalculator.endRow},B.prototype.getLastRenderedColumn=function(){return this.instance.wtViewport.columnsRenderCalculator.endColumn},B.prototype.getLastVisibleColumn=function(){return this.instance.wtViewport.columnsVisibleCalculator.endColumn},B.prototype.isRowBeforeRenderedRows=function(a){return this.rowFilter.sourceToRendered(a)<0&&a>=0},B.prototype.isRowAfterViewport=function(a){return a>this.getLastVisibleRow()},B.prototype.isRowAfterRenderedRows=function(a){return a>this.getLastRenderedRow()},B.prototype.isColumnBeforeViewport=function(a){return this.columnFilter.sourceToRendered(a)<0&&a>=0},B.prototype.isColumnAfterViewport=function(a){return a>this.getLastVisibleColumn()},B.prototype.isLastRowFullyVisible=function(){return this.getLastVisibleRow()===this.getLastRenderedRow()},B.prototype.isLastColumnFullyVisible=function(){return this.getLastVisibleColumn()===this.getLastRenderedColumn},B.prototype.getRenderedColumnsCount=function(){return this.instance.cloneOverlay instanceof q?this.instance.getSetting("totalColumns"):this.instance.cloneOverlay instanceof w||this.instance.cloneOverlay instanceof v?this.instance.getSetting("fixedColumnsLeft"):this.instance.wtViewport.columnsRenderCalculator.count},B.prototype.getRenderedRowsCount=function(){return this.instance.cloneOverlay instanceof q?this.instance.getSetting("totalRows"):this.instance.cloneOverlay instanceof x||this.instance.cloneOverlay instanceof v?this.instance.getSetting("fixedRowsTop"):this.instance.wtViewport.rowsRenderCalculator.count},B.prototype.getVisibleRowsCount=function(){return this.instance.wtViewport.rowsVisibleCalculator.count},B.prototype.allRowsInViewport=function(){return this.instance.getSetting("totalRows")==this.getVisibleRowsCount()},B.prototype.getRowHeight=function(a){var b=this.instance.wtSettings.settings.rowHeight(a),c=this.instance.wtViewport.oversizedRows[a];return void 0!==c&&(b=b?Math.max(b,c):c),b},B.prototype.getColumnHeaderHeight=function(a){var b=this.instance.wtSettings.settings.defaultRowHeight,c=this.instance.wtViewport.oversizedColumnHeaders[a];return void 0!==c&&(b=b?Math.max(b,c):c),b},B.prototype.getVisibleColumnsCount=function(){return this.instance.wtViewport.columnsVisibleCalculator.count},B.prototype.allColumnsInViewport=function(){return this.instance.getSetting("totalColumns")==this.getVisibleColumnsCount()},B.prototype.getColumnWidth=function(a){var b=this.instance.wtSettings.settings.columnWidth;"function"==typeof b?b=b(a):"object"==typeof b&&(b=b[a]);var c=this.instance.wtViewport.oversizedCols[a];return void 0!==c&&(b=b?Math.max(b,c):c),b},B.prototype.getStretchedColumnWidth=function(a){var b,c=this.getColumnWidth(a)||this.instance.wtSettings.settings.defaultColumnWidth,d=this.instance.wtViewport.columnsRenderCalculator;return d&&(b=d.getStretchedColumnWidth(a,c),b&&(c=b)),c},C.prototype.render=function(){this.wtTable.isWorkingOnClone()||this.instance.getSetting("beforeDraw",!0),this.rowHeaders=this.instance.getSetting("rowHeaders"),this.rowHeaderCount=this.rowHeaders.length,this.fixedRowsTop=this.instance.getSetting("fixedRowsTop"),this.columnHeaders=this.instance.getSetting("columnHeaders"),this.columnHeaderCount=this.columnHeaders.length;var a,b,c=this.instance.getSetting("totalRows"),d=this.instance.getSetting("totalColumns"),e=!1,f=this.wtTable.getRenderedRowsCount();if(d>0&&(this.adjustAvailableNodes(),e=!0,this.renderColGroups(),this.renderColumnHeaders(),a=this.wtTable.getRenderedColumnsCount(),this.renderRows(c,f,a),this.wtTable.isWorkingOnClone()?this.adjustColumnHeaderHeights():(b=this.instance.wtViewport.getWorkspaceWidth(),this.instance.wtViewport.containerWidth=null),this.adjustColumnWidths(a)),e||this.adjustAvailableNodes(),this.removeRedundantRows(f),!this.wtTable.isWorkingOnClone()){if(this.markOversizedRows(),this.instance.wtViewport.createVisibleCalculators(),this.instance.wtScrollbars.applyToDOM(),b!==this.instance.wtViewport.getWorkspaceWidth()){this.instance.wtViewport.containerWidth=null;for(var g=this.wtTable.getFirstRenderedColumn(),h=this.wtTable.getLastRenderedColumn(),i=g;h>i;i++){var j=this.wtTable.getStretchedColumnWidth(i),k=this.columnFilter.sourceToRendered(i);this.COLGROUP.childNodes[k+this.rowHeaderCount].style.width=j+"px"}}this.instance.wtScrollbars.refresh(!1),this.instance.getSetting("onDraw",!0)}},C.prototype.removeRedundantRows=function(a){for(;this.wtTable.tbodyChildrenLength>a;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},C.prototype.renderRows=function(a,b,c){for(var d,e,f=0,g=this.rowFilter.renderedToSource(f),h=this.wtTable.isWorkingOnClone();a>g&&g>=0;){if(f>1e3)throw new Error("Security brake: Too much TRs. Please define height for your table, which will enforce scrollbars.");if(void 0!==b&&f===b)break;if(e=this.getOrCreateTrForRow(f,e),this.renderRowHeaders(g,e),this.adjustColumns(e,c+this.rowHeaderCount),d=this.renderCells(g,e,c),h||this.resetOversizedRow(g),e.firstChild){var i=this.instance.wtTable.getRowHeight(g);e.firstChild.style.height=i?i+"px":""}f++,g=this.rowFilter.renderedToSource(f)}},C.prototype.resetOversizedRow=function(a){this.instance.wtViewport.oversizedRows&&this.instance.wtViewport.oversizedRows[a]&&(this.instance.wtViewport.oversizedRows[a]=void 0)},C.prototype.markOversizedRows=function(){for(var a,c,d,e,f=this.instance.wtTable.TBODY.childNodes.length;f;)f--,d=this.instance.wtTable.rowFilter.renderedToSource(f),a=this.instance.wtTable.getRowHeight(d),e=this.instance.wtTable.getTrForRow(d),c=b.Dom.innerHeight(e)-1,(!a&&this.instance.wtSettings.settings.defaultRowHeight<c||c>a)&&(this.instance.wtViewport.oversizedRows[d]=c)},C.prototype.adjustColumnHeaderHeights=function(){for(var a=this.instance.getSetting("columnHeaders"),b=0,c=a.length;c>b;b++)if(this.instance.wtViewport.oversizedColumnHeaders[b]){if(0===this.instance.wtTable.THEAD.childNodes[b].childNodes.length)return;this.instance.wtTable.THEAD.childNodes[b].childNodes[0].style.height=this.instance.wtViewport.oversizedColumnHeaders[b]+"px"}},C.prototype.markIfOversizedColumnHeader=function(a){var c,d,e,f,g=(0!==this.instance.wtTable.THEAD.childNodes.length?this.instance.wtTable.THEAD.childNodes[0].childNodes.length:0,this.instance.getSetting("columnHeaders")),h=g.length,i=h;for(c=this.instance.wtTable.columnFilter.renderedToSource(a);i;)i--,d=this.instance.wtTable.getColumnHeaderHeight(i),e=this.instance.wtTable.getColumnHeader(c,i),e&&(f=b.Dom.innerHeight(e)-1,(!d&&this.instance.wtSettings.settings.defaultRowHeight<f||f>d)&&(this.instance.wtViewport.oversizedColumnHeaders[i]=f))},C.prototype.renderCells=function(a,c,d){for(var e,f,g=0;d>g;g++)f=this.columnFilter.renderedToSource(g),e=0===g?c.childNodes[this.columnFilter.sourceColumnToVisibleRowHeadedColumn(f)]:e.nextSibling,"TH"==e.nodeName&&(e=this.utils.replaceThWithTd(e,c)),b.Dom.hasClass(e,"hide")||(e.className=""),e.removeAttribute("style"),this.instance.wtSettings.settings.cellRenderer(a,f,e);return e},C.prototype.adjustColumnWidths=function(a){var b;this.instance.wtViewport.columnsRenderCalculator.refreshStretching(this.instance.wtViewport.getViewportWidth());for(var c=0;a>c;c++)b=this.wtTable.getStretchedColumnWidth(this.columnFilter.renderedToSource(c)),this.COLGROUP.childNodes[c+this.rowHeaderCount].style.width=b+"px"},C.prototype.appendToTbody=function(a){this.TBODY.appendChild(a),this.wtTable.tbodyChildrenLength++},C.prototype.getOrCreateTrForRow=function(a,b){var c;return a>=this.wtTable.tbodyChildrenLength?(c=this.createRow(),this.appendToTbody(c)):c=0===a?this.TBODY.firstChild:b.nextSibling,c},C.prototype.createRow=function(){for(var a=document.createElement("TR"),b=0;b<this.rowHeaderCount;b++)a.appendChild(document.createElement("TH"));return a},C.prototype.renderRowHeader=function(a,b,c){c.className="",c.removeAttribute("style"),this.rowHeaders[b](a,c,b)},C.prototype.renderRowHeaders=function(a,b){for(var c=b.firstChild,d=0;d<this.rowHeaderCount;d++)c?"TD"==c.nodeName&&(c=this.utils.replaceTdWithTh(c,b)):(c=document.createElement("TH"),b.appendChild(c)),this.renderRowHeader(a,d,c),c=c.nextSibling},C.prototype.adjustAvailableNodes=function(){this.adjustColGroups(),this.adjustThead()},C.prototype.renderColumnHeaders=function(){if(this.columnHeaderCount)for(var a,b,c=this.wtTable.getRenderedColumnsCount(),d=0;d<this.columnHeaderCount;d++)for(a=this.getTrForColumnHeaders(d),b=-1*this.rowHeaderCount;c>b;b++){var e=this.columnFilter.renderedToSource(b);this.renderColumnHeader(d,e,a.childNodes[b+this.rowHeaderCount]),this.wtTable.isWorkingOnClone()||this.markIfOversizedColumnHeader(b)}},C.prototype.adjustColGroups=function(){for(var a=this.wtTable.getRenderedColumnsCount();this.wtTable.colgroupChildrenLength<a+this.rowHeaderCount;)this.COLGROUP.appendChild(document.createElement("COL")),this.wtTable.colgroupChildrenLength++;for(;this.wtTable.colgroupChildrenLength>a+this.rowHeaderCount;)this.COLGROUP.removeChild(this.COLGROUP.lastChild),this.wtTable.colgroupChildrenLength--},C.prototype.adjustThead=function(){var a=this.wtTable.getRenderedColumnsCount(),c=this.THEAD.firstChild;if(this.columnHeaders.length){for(var d=0,e=this.columnHeaders.length;e>d;d++){for(c=this.THEAD.childNodes[d],c||(c=document.createElement("TR"),this.THEAD.appendChild(c)),this.theadChildrenLength=c.childNodes.length;this.theadChildrenLength<a+this.rowHeaderCount;)c.appendChild(document.createElement("TH")),this.theadChildrenLength++;for(;this.theadChildrenLength>a+this.rowHeaderCount;)c.removeChild(c.lastChild),this.theadChildrenLength--}var f=this.THEAD.childNodes.length;if(f>this.columnHeaders.length)for(var d=this.columnHeaders.length;f>d;d++)this.THEAD.removeChild(this.THEAD.lastChild)}else c&&b.Dom.empty(c)},C.prototype.getTrForColumnHeaders=function(a){var b=this.THEAD.childNodes[a];return b},C.prototype.renderColumnHeader=function(a,b,c){return c.className="",c.removeAttribute("style"),this.columnHeaders[a](b,c,a)},C.prototype.renderColGroups=function(){for(var a=0;a<this.wtTable.colgroupChildrenLength;a++)a<this.rowHeaderCount?b.Dom.addClass(this.COLGROUP.childNodes[a],"rowHeader"):b.Dom.removeClass(this.COLGROUP.childNodes[a],"rowHeader")},C.prototype.adjustColumns=function(a,b){for(var c=a.childNodes.length;b>c;){var d=document.createElement("TD");a.appendChild(d),c++}for(;c>b;)a.removeChild(a.lastChild),c--},C.prototype.removeRedundantColumns=function(a){for(;this.wtTable.tbodyChildrenLength>a;)this.TBODY.removeChild(this.TBODY.lastChild),this.wtTable.tbodyChildrenLength--},C.utils={},C.utils.replaceTdWithTh=function(a,b){var c;return c=document.createElement("TH"),b.insertBefore(c,a),b.removeChild(a),c},C.utils.replaceThWithTd=function(a,b){var c=document.createElement("TD");return b.insertBefore(c,a),b.removeChild(a),c},D.prototype.getWorkspaceHeight=function(){var c=this.instance.wtScrollbars.vertical.scrollHandler;if(c===a)return document.documentElement.clientHeight;var d=b.Dom.outerHeight(c),e=d>0&&c.clientHeight>0?c.clientHeight:1/0;return e},D.prototype.getWorkspaceWidth=function(){var c,d,e=this.instance.getSetting("totalColumns"),f=this.instance.wtScrollbars.horizontal.scrollHandler,g=this.instance.getSetting("stretchH");return c=b.freezeOverlays?Math.min(document.documentElement.offsetWidth-this.getWorkspaceOffset().left,document.documentElement.offsetWidth):Math.min(this.getContainerFillWidth(),document.documentElement.offsetWidth-this.getWorkspaceOffset().left,document.documentElement.offsetWidth),f===a&&e>0&&this.sumColumnWidths(0,e-1)>c?document.documentElement.clientWidth:f!==a&&(d=this.instance.wtScrollbars.horizontal.scrollHandler.style.overflow,"scroll"==d||"hidden"==d||"auto"==d)?Math.max(c,f.clientWidth):"none"!==g&&g?c:Math.max(c,b.Dom.outerWidth(this.instance.wtTable.TABLE))},D.prototype.sumColumnWidths=function(a,b){for(var c=0;b>a;)c+=this.instance.wtTable.getColumnWidth(a)||this.instance.wtSettings.defaultColumnWidth,a++;return c},D.prototype.getContainerFillWidth=function(){if(this.containerWidth)return this.containerWidth;for(var a,b,c=this.instance.wtTable.holder;c.parentNode!=document.body&&null!=c.parentNode&&-1===c.className.indexOf("handsontable");)c=c.parentNode;return b=document.createElement("DIV"),b.style.width="100%",b.style.height="1px",c.appendChild(b),a=b.offsetWidth,this.containerWidth=a,c.removeChild(b),a},D.prototype.getWorkspaceOffset=function(){return b.Dom.offset(this.instance.wtTable.TABLE)},D.prototype.getWorkspaceActualHeight=function(){return b.Dom.outerHeight(this.instance.wtTable.TABLE)},D.prototype.getWorkspaceActualWidth=function(){return b.Dom.outerWidth(this.instance.wtTable.TABLE)||b.Dom.outerWidth(this.instance.wtTable.TBODY)||b.Dom.outerWidth(this.instance.wtTable.THEAD)},D.prototype.getColumnHeaderHeight=function(){return isNaN(this.columnHeaderHeight)&&(this.columnHeaderHeight=b.Dom.outerHeight(this.instance.wtTable.THEAD)),this.columnHeaderHeight},D.prototype.getViewportHeight=function(){var a=this.getWorkspaceHeight();if(1/0===a)return a;var b=this.getColumnHeaderHeight();return b>0&&(a-=b),a},D.prototype.getRowHeaderWidth=function(){if(this.instance.cloneSource)return this.instance.cloneSource.wtViewport.getRowHeaderWidth();if(isNaN(this.rowHeaderWidth)){var a=this.instance.getSetting("rowHeaders");if(a.length){var c=this.instance.wtTable.TABLE.querySelector("TH");this.rowHeaderWidth=0;for(var d=0,e=a.length;e>d;d++)c?(this.rowHeaderWidth+=b.Dom.outerWidth(c),c=c.nextSibling):this.rowHeaderWidth+=50}else this.rowHeaderWidth=0}return this.rowHeaderWidth},D.prototype.getViewportWidth=function(){var a,b=this.getWorkspaceWidth();return 1/0===b?b:(a=this.getRowHeaderWidth(),a>0?b-a:b)},D.prototype.createRowsCalculator=function(a){this.rowHeaderWidth=0/0;var b;b=this.instance.wtSettings.settings.renderAllRows?1/0:this.getViewportHeight();var c=this.instance.wtScrollbars.vertical.getScrollPosition()-this.instance.wtScrollbars.vertical.getTableParentOffset();0>c&&(c=0);var d=this.instance.getSetting("fixedRowsTop");if(d){var e=this.instance.wtScrollbars.vertical.sumCellSizes(0,d);c+=e,b-=e}var f=this;return new F(b,c,this.instance.getSetting("totalRows"),function(a){return f.instance.wtTable.getRowHeight(a)},a?null:this.instance.wtSettings.settings.viewportRowCalculatorOverride,a?!0:!1)},D.prototype.createColumnsCalculator=function(a){this.columnHeaderHeight=0/0;var b=this.getViewportWidth(),c=this.instance.wtScrollbars.horizontal.getScrollPosition()-this.instance.wtScrollbars.vertical.getTableParentOffset();0>c&&(c=0);var d=this.instance.getSetting("fixedColumnsLeft");if(d){var e=this.instance.wtScrollbars.horizontal.sumCellSizes(0,d);c+=e,b-=e}var f=this;return new E(b,c,this.instance.getSetting("totalColumns"),function(a){return f.instance.wtTable.getColumnWidth(a)},a?null:this.instance.wtSettings.settings.viewportColumnCalculatorOverride,a?!0:!1,this.instance.getSetting("stretchH"))},D.prototype.createRenderCalculators=function(a){if(a){var b=this.createRowsCalculator(!0),c=this.createColumnsCalculator(!0);this.areAllProposedVisibleRowsAlreadyRendered(b)&&this.areAllProposedVisibleColumnsAlreadyRendered(c)||(a=!1)}return a||(this.rowsRenderCalculator=this.createRowsCalculator(),this.columnsRenderCalculator=this.createColumnsCalculator()),this.rowsVisibleCalculator=null,this.columnsVisibleCalculator=null,a},D.prototype.createVisibleCalculators=function(){this.rowsVisibleCalculator=this.createRowsCalculator(!0),this.columnsVisibleCalculator=this.createColumnsCalculator(!0)},D.prototype.areAllProposedVisibleRowsAlreadyRendered=function(a){return this.rowsVisibleCalculator?a.startRow<this.rowsRenderCalculator.startRow||a.startRow===this.rowsRenderCalculator.startRow&&a.startRow>0?!1:a.endRow>this.rowsRenderCalculator.endRow||a.endRow===this.rowsRenderCalculator.endRow&&a.endRow<this.instance.getSetting("totalRows")-1?!1:!0:!1},D.prototype.areAllProposedVisibleColumnsAlreadyRendered=function(a){return this.columnsVisibleCalculator?a.startColumn<this.columnsRenderCalculator.startColumn||a.startColumn===this.columnsRenderCalculator.startColumn&&a.startColumn>0?!1:a.endColumn>this.columnsRenderCalculator.endColumn||a.endColumn===this.columnsRenderCalculator.endColumn&&a.endColumn<this.instance.getSetting("totalColumns")-1?!1:!0:!1},a.jQuery&&!function(a,b,c){b.fn.handsontable=function(a){var b,d,e,f,g,h=this.first(),i=h.data("handsontable");if("string"!=typeof a)return g=a||{},i?i.updateSettings(g):(i=new c.Core(h[0],g),h.data("handsontable",i),i.init()),h;if(e=[],arguments.length>1)for(b=1,d=arguments.length;d>b;b++)e.push(arguments[b]);if(i){if("undefined"==typeof i[a])throw new Error("Handsontable do not provide action: "+a);f=i[a].apply(i,e),"destroy"===a&&h.removeData()}return f}}(a,jQuery,b)}(window,Handsontable),/*!
 * numeral.js
 * version : 1.5.3
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
function(){function a(a){this._value=a}function b(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function c(a,b,c){var d;return d=b.indexOf("$")>-1?e(a,b,c):b.indexOf("%")>-1?f(a,b,c):b.indexOf(":")>-1?g(a,b):i(a._value,b,c)}function d(a,b){var c,d,e,f,g,i=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=h(b);else if(b===q)a._value=0;else{for("."!==o[p].delimiters.decimal&&(b=b.replace(/\./g,"").replace(o[p].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+o[p].abbreviations.thousand+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+o[p].abbreviations.million+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+o[p].abbreviations.billion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+o[p].abbreviations.trillion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(i.match(c)?Math.pow(10,3):1)*(i.match(d)?Math.pow(10,6):1)*(i.match(e)?Math.pow(10,9):1)*(i.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function e(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),j="";return b.indexOf(" $")>-1?(j=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(j=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=i(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,o[p].currency.symbol+j),e=e.join("")):e=o[p].currency.symbol+j+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,j+o[p].currency.symbol),e=e.join("")):e=e+j+o[p].currency.symbol,e}function f(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=i(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function g(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function h(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function i(a,c,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",r=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==q)return q;if(c.indexOf("(")>-1?(k=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(l=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1&&(r=c.indexOf("aK")>=0,s=c.indexOf("aM")>=0,t=c.indexOf("aB")>=0,u=c.indexOf("aT")>=0,v=r||s||t||u,c.indexOf(" a")>-1?(n=" ",c=c.replace(" a","")):c=c.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=o[p].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=o[p].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(n+=o[p].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||r)&&(n+=o[p].abbreviations.thousand,a/=Math.pow(10,3))),c.indexOf("b")>-1)for(c.indexOf(" b")>-1?(w=" ",c=c.replace(" b","")):c=c.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return c.indexOf("o")>-1&&(c.indexOf(" o")>-1?(x=" ",c=c.replace(" o","")):c=c.replace("o",""),x+=o[p].ordinal(a)),c.indexOf("[.]")>-1&&(m=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],j=c.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=b(a,i[0].length+i[1].length,d,i[1].length)):A=b(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?o[p].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=b(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o[p].delimiters.thousands)),0===c.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function j(a,b){o[a]=b}function k(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function l(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=k(a),d=k(b);return c>d?c:d},-1/0)}var m,n="1.5.3",o={},p="en",q=null,r="0,0",s="undefined"!=typeof module&&module.exports;m=function(b){return m.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=m.fn.unformat(b)),new a(Number(b))},m.version=n,m.isNumeral=function(b){return b instanceof a},m.language=function(a,b){if(!a)return p;if(a=a.toLowerCase(),a&&!b){if(!o[a])throw new Error("Unknown language : "+a);p=a}return(b||!o[a])&&j(a,b),m},m.languageData=function(a){if(!a)return o[p];if(!o[a])throw new Error("Unknown language : "+a);return o[a]},m.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),m.zeroFormat=function(a){q="string"==typeof a?a:null},m.defaultFormat=function(a){r="string"==typeof a?a:"0.0"},m.validate=function(a,b){var c,d,e,f,g,h,i,j;if("string"!=typeof a&&(a+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),""===a)return!1;a=a.replace(/^[+-]?/,"");try{i=m.languageData(b)}catch(k){i=m.languageData(m.language())}return e=i.currency.symbol,g=i.abbreviations,c=i.delimiters.decimal,d="."===i.delimiters.thousands?"\\.":i.delimiters.thousands,j=a.match(/^[^\d]+/),null!==j&&(a=a.substr(1),j[0]!==e)?!1:(j=a.match(/[^\d]+$/),null!==j&&(a=a.slice(0,-1),j[0]!==g.thousand&&j[0]!==g.million&&j[0]!==g.billion&&j[0]!==g.trillion)?!1:a.match(/^\d+$/)?!0:(h=new RegExp(d+"{2}"),a.match(/[^\d.,]/g)?!1:(f=a.split(c),f.length>2?!1:f.length<2?!!f[0].match(/^\d+.*\d$/)&&!f[0].match(h):1===f[0].length?!!f[0].match(/^\d+$/)&&!f[0].match(h)&&!!f[1].match(/^\d+$/):!!f[0].match(/^\d+.*\d$/)&&!f[0].match(h)&&!!f[1].match(/^\d+$/))))},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),m.fn=a.prototype={clone:function(){return m(this)},format:function(a,b){return c(this,a?a:r,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:d(this,a?a:r)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=l.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=l.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=l(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=l(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(m(this._value).subtract(a).value())}},s&&(module.exports=m),"undefined"==typeof ender&&(this.numeral=m),"function"==typeof define&&define.amd&&define([],function(){return m})}.call(this);
/***************************************************************
*  Copyright notice
*
*  (c) 2015 PF bioinformatique de Toulouse
*  All rights reserved
* 
*  It is distributed under the terms of the GNU General Public 
*  License as published by the Free Software Foundation; either 
*  version 2 of the License, or (at your option) any later version.
*
*  The GNU General Public License can be found at
*  http://www.gnu.org/copyleft/gpl.html.
*
*  This script is distributed in the hope that it will be useful,
*  but WITHOUT ANY WARRANTY; without even the implied warranty of
*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*  GNU General Public License for more details.
*
*  This copyright notice MUST APPEAR in all copies of the script!
***************************************************************/
//activewf
!function(t){"use strict";var e=function(e,a){this.$element=t(e),this.options=t.extend({},t.fn.activewf.defaults,a),""==this.options.serverURL&&(this.options.serverURL=t.fn.activewf.defaults.serverURL),this.reload()};e.prototype.reload=function(){var e=this,a=['<div class="container-fluid"><div class="row"><div class="col-md-1 col-md-offset-2"><div class="inline floatingBarsG">','<div class="blockG" id="rotateG_01"></div>','<div class="blockG" id="rotateG_02"></div>','<div class="blockG" id="rotateG_03"></div>','<div class="blockG" id="rotateG_04"></div>','<div class="blockG" id="rotateG_05"></div>','<div class="blockG" id="rotateG_06"></div>','<div class="blockG" id="rotateG_07"></div>','<div class="blockG" id="rotateG_08"></div>','</div></div> <div class="col-md-8">Please wait until module is being loaded!</div></div></div>'].join("\n"),s=this.options.serverURL+"/get_workflows_status?";this.options.metadataFilter.length>0&&(s+="metadata_filter="+this.options.metadataFilter.join(",")+"&"),s+="callback=?",e.$element.html(a),t.ajax({url:s,dataType:"json",timeout:2e4,error:function(t,a,s){var l=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+e.options.serverURL+"</strong>","</div>"].join("\n");e.$element.html(l)},success:function(a){var s={},l=new Array,i=new Array;for(var o in a)s[a[o].id]=a[o],l.push(a[o].id);l.sort(function(t,e){return e-t});for(var o in l)i.push(s[l[o]]);e.$element.html(""),t.tmpl(e.options.template,{workflows:i}).appendTo(e.$element),t("[id^=activewf_btn_]").click(function(){var a=t(this).attr("id").split("activewf_btn_")[1];e.$element.trigger("select.activewf",s[a])}),t("[id^=activewf_refresh_]").click(function(){e.reload()}),t("[id^=activewf_delete_]").click(function(){var a=t(this).attr("id").split("activewf_delete_")[1];t.ajax({url:e.options.serverURL+"/delete_workflow?workflow_id="+a+"&callback=?",dataType:"json",timeout:2e4,error:function(t,a,s){var l=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+e.options.serverURL+"</strong>","</div>"].join("\n");e.$element.html(l)},success:function(t){e.reload()}})})}})};t.fn.activewf;t.fn.activewf=function(a){return this.each(function(){var s=t(this),l=s.data("activewf"),i=t.extend({},t.fn.activewf.defaults,"object"==typeof a&&a),o="string"==typeof a?a:null;l||s.data("activewf",l=new e(this,i)),o&&l[o]()})},t.fn.activewf.defaults={serverURL:"http://localhost:8080",template:['<table class="table table-striped table-striped">',"<thead>","<tr>","<th>ID<th>","<th>Name</th>","<th>Status</th>","<th>Start time</th>","<th>End time</th>","<th>Actions</th>","</tr>","</thead>","{{each(index, workflow) workflows}}","<tr>",'<td><a id="activewf_btn_${workflow.id}" href="#">${workflow.id}</a><td>',"<td>${workflow.name}</td>",'{{if workflow.status == "completed"}}','<td> <span class="label label-success">${workflow.status}</span></td>','{{else workflow.status == "failed"}}','<td> <span class="label label-danger">${workflow.status}</span></td>','{{else workflow.status == "aborted"}}','<td> <span class="label label-danger">${workflow.status}</span></td>','{{else workflow.status == "started"}}','<td> <span class="label label-info">${workflow.status}</span></td>','{{else workflow.status == "reseted"}}','<td> <span class="label label-default">${workflow.status}</span></td>',"{{else}}","<td>${workflow.status}</td>","{{/if}}","<td>${workflow.start_time}</td>","<td>${workflow.end_time}</td>","<td>",'  <div class="btn-group">','    {{if workflow.status == "started"}}','      <button type="button" id="activewf_refresh_${workflow.id}" class="btn btn-default btn-xs" aria-label="Left Align">',"    {{else}}",'      <button type="button" id="activewf_refresh_${workflow.id}" disabled class="btn btn-default btn-xs" aria-label="Left Align">',"    {{/if}}",'      <span class="glyphicon glyphicon-refresh"></span>',"    </button>",'    {{if workflow.status == "started"}}','      <button type="button" id="activewf_delete_${workflow.id}" disabled class="btn btn-default btn-xs" aria-label="Left Align">',"    {{else}}",'      <button type="button" id="activewf_delete_${workflow.id}" class="btn btn-default btn-xs" aria-label="Left Align">',"    {{/if}}",'      <span class="glyphicon glyphicon-remove"></span>',"    </button>","  </div>","</td>","</tr>","{{/each}}","</table>"].join("\n"),metadataFilter:[]},t.fn.activewf.Constructor=e}(window.jQuery);
//availablewf
!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.availablewf.defaults,i),""==this.options.serverURL&&(this.options.serverURL=t.fn.availablewf.defaults.serverURL),this.reload()};e.prototype.reload=function(){var e=this,i=['<div class="container-fluid"><div class="row"><div class="col-md-1 col-md-offset-2"><div class="inline floatingBarsG">','<div class="blockG" id="rotateG_01"></div>','<div class="blockG" id="rotateG_02"></div>','<div class="blockG" id="rotateG_03"></div>','<div class="blockG" id="rotateG_04"></div>','<div class="blockG" id="rotateG_05"></div>','<div class="blockG" id="rotateG_06"></div>','<div class="blockG" id="rotateG_07"></div>','<div class="blockG" id="rotateG_08"></div>','</div></div> <div class="col-md-8">Please wait until module is being loaded!</div></div></div>'].join("\n");e.$element.html(i),t.ajax({url:this.options.serverURL+"/get_available_workflows?filter_groups="+this.options.filter_groups.join(",")+"&select="+this.options.select+"&callback=?",dataType:"json",timeout:2e4,error:function(t,i,l){var a=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+e.options.serverURL+"</strong>","</div>"].join("\n");e.$element.html(a)},success:function(i){var l={};for(var a in i)l[i[a]["class"]]=i[a];e.$element.html(""),t.tmpl(e.options.template,{workflows:i,filters:e.options.filters}).appendTo(e.$element),t("[id^=availablewf_btn_]").click(function(){var i=t(this).attr("id").split("availablewf_btn_")[1];e.$element.trigger("select.availablewf",l[i])})}})};t.fn.availablewf;t.fn.availablewf=function(i){return this.each(function(){var l=t(this),a=l.data("availablewf"),s=t.extend({},t.fn.availablewf.defaults,"object"==typeof i&&i),o="string"==typeof i?i:null;a||l.data("availablewf",a=new e(this,s)),o&&a[o]()})},t.fn.availablewf.defaults={serverURL:"http://localhost:8080",template:['<table class="table table-striped table-striped">',"<thead>","<tr>","<th>Name</th>","<th>Description</th>","</tr>","</thead>","{{each(index, workflow) workflows}}","  {{if filters.indexOf(workflow.class) == -1 }}","  <tr>",'    <td><a id="availablewf_btn_${workflow.class}" href="#">${workflow.name}</a></td>',"    <td>${workflow.help}</td>","  </tr>","  {{/if}}","{{/each}}","</dl>"].join("\n"),filters:[],filter_groups:[],select:!1},t.fn.availablewf.Constructor=e}(window.jQuery);
//wfoutputs
!function(t){"use strict";var o=function(o,e){this.$element=t(o),this.options=t.extend({},t.fn.wfoutputs.defaults,e),""==this.options.serverURL&&(this.options.serverURL=t.fn.wfoutputs.defaults.serverURL)};o.prototype.reload=function(){var o=this,e="",l=['<div class="container-fluid"><div class="row"><div class="col-md-1 col-md-offset-2"><div class="inline floatingBarsG">','<div class="blockG" id="rotateG_01"></div>','<div class="blockG" id="rotateG_02"></div>','<div class="blockG" id="rotateG_03"></div>','<div class="blockG" id="rotateG_04"></div>','<div class="blockG" id="rotateG_05"></div>','<div class="blockG" id="rotateG_06"></div>','<div class="blockG" id="rotateG_07"></div>','<div class="blockG" id="rotateG_08"></div>','</div></div> <div class="col-md-8">Please wait until module is being loaded!</div></div></div>'].join("\n");o.$element.html(l),this.options.workflowID&&(e="workflow_id="+this.options.workflowID+"&"),t.ajax({url:this.options.serverURL+"/get_workflow_outputs?"+e+"callback=?",dataType:"json",timeout:2e4,error:function(){var t=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+o.options.serverURL+"</strong>","</div>"].join("\n");o.$element.html(t)},success:function(e){o.$element.html(""),t.tmpl(o.options.template,{data:e}).appendTo(o.$element);var l=new Array;t.each(e,function(e,s){t.each(s,function(e,s){-1==t.inArray(s.extension,l)&&-1==t.inArray(s.extension,o.options.logFile)&&l.push(s.extension)})}),t.each(l,function(o,e){t("#jflow_file_type").append(t("<option>",{text:e}))}),t(".output-file").each(function(){var e=t(this).find("A").text().substr(t(this).find("A").text().lastIndexOf("."));-1==t.inArray(e,o.options.logFile)?t(this).addClass("output"):(t(this).addClass("log"),t(this).hide())}),t("#jflow_log_on").click(function(){t(".log").each(function(){t(this).fadeIn(500)}),t("#jflow_log_on").hide(),t("#jflow_log_off").show()}),t("#jflow_log_off").click(function(){t(".log").each(function(){t(this).fadeOut(500)}),t("#jflow_log_off").hide(),t("#jflow_log_on").show()}),t("#jflow_file_type").on("change",function(){var o=t("#jflow_file_type option:selected").val(),e=new RegExp(o);t(".output").each(function(){"all"==o?t(this).fadeIn(500):e.test(t(this).text())?t(this).fadeIn(500):t(this).fadeOut(500)})})}})};t.fn.wfoutputs;t.fn.wfoutputs=function(e){return this.each(function(){var l=t(this),s=l.data("wfoutputs"),i=t.extend({},t.fn.wfoutputs.defaults,"object"==typeof e&&e),n="string"==typeof e?e:null;s?i.workflowID&&(s.options.workflowID=i.workflowID):l.data("wfoutputs",s=new o(this,i)),n?s[n]():s.reload()})},t.fn.wfoutputs.defaults={serverURL:"http://localhost:8080",template:['<div style="float:right;margin-bottom:14px">','  <button id="jflow_log_on"  class="btn btn-default btn-xs" type="button"><span class="glyphicon glyphicon-eye-open"></span> View log files</button>','  <button id="jflow_log_off" style="display:none" class="btn btn-default btn-xs" type="button"><span class="glyphicon glyphicon-eye-close"></span> Mask log files</button>','  <span class="btn-xs">- View:</span>','  <select id="jflow_file_type" class="btn  btn-default btn-xs" style="width:auto">',"   view: <option>all</option>",'  </select><span class="btn-xs"> files.</span>',"</div>",'<div style="clear:both;">','  <dl "style=margin-bottom:15px">',"  {{each(component_name, files) data}}",'    <div style="clear:both"></div>','    <dt style="margin-top:15px;background-color: #eee">','      <span class="glyphicon glyphicon-play" style="color:white;left:-3px"></span>',"      ${component_name}","    </dt>","    {{each(file_name, href) files}}",'      <dd class="output-file" style="float:left;margin-left:20px;width:265px;overflow:hidden;white-space: nowrap;text-overflow:ellipsis;">','        <span class="glyphicon glyphicon-file"></span>','        <a href="${href.url}" download>${file_name}</a>','        <span style="color:grey">| ${href.size}</span>',"      </dd>","    {{/each}}","  {{/each}}</dl>","</div>"].join("\n"),logFile:[".stderr",".stdout",".log"],workflowID:null},t.fn.wfoutputs.Constructor=o}(window.jQuery);
//wfform
var get_parent_with_class=function(e,a){return null==e.parent()||e.parent().is("html")?null:e.parent().hasClass(a)?e.parent():get_parent_with_class(e.parent(),a)},getDate=function(e,a){var t=e.split("/"),r=new Date;return"dd/mm/yyyy"==a?(r.setDate(t[0]),r.setYear(t[2])):"dd/mm/yy"==a?(r.setDate(t[0]),r.setYear(t[2])):"yyyy/mm/dd"==a?(r.setDate(t[2]),r.setYear(t[0])):"yy/mm/dd"==a&&(r.setDate(t[2]),r.setYear(t[0])),r.setMonth(t[1]),r},rc4_encrypt=function(e){var a=function(e,a){for(var t,r=[],n=0,o="",i=0;256>i;i++)r[i]=i;for(i=0;256>i;i++)n=(n+r[i]+a.charCodeAt(i%a.length))%256,t=r[i],r[i]=r[n],r[n]=t;i=0,n=0;for(var s=0;s<e.length;s++)i=(i+1)%256,n=(n+r[i])%256,t=r[i],r[i]=r[n],r[n]=t,o+=String.fromCharCode(e.charCodeAt(s)^r[(r[i]+r[n])%256]);return o},t=function(e,a){for(var t="",r=e;r>0;--r)t+=a[Math.round(Math.random()*(a.length-1))];return t},r=t(16,"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"),n="anything";return encodeURIComponent(r+a(e,n+r)).replace(/\(/g,"%28").replace(/\)/g,"%29")},_isSet=function(e){var a=!1;return e.is(":input")?e.is(":checkbox")?e.is(":checked")&&(a=!0):a=""!=e.val():e.has("[id^=handsontable_]")?e.find("[id^=handsontable_]").each(function(){for(var e=$(this).handsontable("getData"),t=0;t<e.length;t++)for(var r in e[t])null!=e[t][r]&&""!=e[t][r]&&(a=!0)}):e.find(":input").each(function(){$(this).is(":button")||_isSet($(this))&&(a=!0)}),a};$.validator.setDefaults({highlight:function(e,a,t){var r;r="radio"===e.type?this.findByName(e.name):$(e);var n=get_parent_with_class(r,"param-field");null!=n&&(n.removeClass(t).addClass(a),buttons=n.find(".btn").addClass("btn-danger"))},unhighlight:function(e,a,t){var r;r="radio"===e.type?this.findByName(e.name):$(e);var n=get_parent_with_class(r,"param-field");null!=n&&(n.removeClass(a).addClass(t),buttons=n.find(".btn").removeClass("btn-danger"))},errorPlacement:function(e,a){e.addClass("help-block"),a.parent("div.input-group").parent("div.input-group").parent("div.input-group").length>0?e.insertAfter(a.parent("div.input-group").parent("div.input-group").parent("div.input-group")):a.parent("div.input-group").parent("div.input-group").length>0?e.insertAfter(a.parent("div.input-group").parent("div.input-group")):a.parent("div.input-group").length>0?e.insertAfter(a.parent("div.input-group")):e.insertAfter(a)},errorElement:"span",errorClass:"has-error"}),jQuery.validator.addMethod("maxfilesize",function(e,a,t){if(0!=t[0]){if(1==$(a).data("data2upload").files.length)return this.optional(a)||$(a).data("data2upload").files[0].size<t[0];var r=!0;for(var n in $(a).data("data2upload").files)if($(a).data("data2upload").files[n].size>=t[0]){r=!1;break}return this.optional(a)||r}return!0},jQuery.validator.format("Selected file(s) exceeds size limits: {1}")),jQuery.validator.addMethod("multinumber",function(e,a,t){var r=e.split(/\n/),n=!0;for(var o in r)valid=this.optional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(r[o]),valid||(n=!1);return n},jQuery.validator.format("Please enter only one valid number per line.")),jQuery.validator.addMethod("jfdate",function(e,a,t){var r=getDate(e,t);return this.optional(a)||!/Invalid|NaN/.test(r.toString())},jQuery.validator.format("Please enter a valid date.")),jQuery.validator.addMethod("multidate",function(e,a,t){var r=e.split(","),n=!0;for(var o in r)cdate=getDate(r[o],t),valid=this.optional(a)||!/Invalid|NaN/.test(cdate.toString()),valid||(n=!1);return n},jQuery.validator.format("Please enter only valid dates, splited by a coma.")),jQuery.validator.addMethod("mparam",function(e,a,t){return!0}),function(e){var a,t=e.editors.TextEditor.prototype.extend();t.prototype.init=function(){if("undefined"==typeof jQuery)throw new Error("You need to include jQuery to your project in order to use the jQuery UI Datepicker.");a=jQuery,e.editors.TextEditor.prototype.init.apply(this,arguments),this.isCellEdited=!1;var t=this;this.instance.addHook("afterDestroy",function(){t.destroyElements()})},t.prototype.createElements=function(){e.editors.TextEditor.prototype.createElements.apply(this,arguments),this.datePicker=document.createElement("DIV"),e.Dom.addClass(this.datePicker,"datepicker"),e.Dom.addClass(this.datePicker,"datepicker-dropdown"),e.Dom.addClass(this.datePicker,"dropdown-menu"),e.Dom.addClass(this.datePicker,"datepicker-orient-left"),e.Dom.addClass(this.datePicker,"datepicker-orient-top"),document.body.appendChild(this.datePicker),this.$datePicker=a(this.datePicker),this.$datePicker.css("position","absolute"),this.$datePicker.css("top",0),this.$datePicker.css("left",0),this.$datePicker.css("zIndex",1060);var t=this,r=t.instance.getSettings(),n=t.instance.getSelected()[1];this.$datePicker.datepicker({format:r.columns[n].dateFormat}).on("changeDate",function(e){t.setValue(e.format()),t.finishEditing(!1)});var o=e.eventManager(this);o.addEventListener(this.datePicker,"mousedown",function(a){e.helper.stopPropagation(a)}),this.hideDatepicker()},t.prototype.destroyElements=function(){this.$datePicker.datepicker("remove"),this.$datePicker.remove()},t.prototype.open=function(){e.editors.TextEditor.prototype.open.call(this),this.showDatepicker()},t.prototype.finishEditing=function(a,t){this.hideDatepicker(),e.editors.TextEditor.prototype.finishEditing.apply(this,arguments)},t.prototype.showDatepicker=function(){var a=this.TD.getBoundingClientRect();this.originalValue&&this.$datePicker.datepicker("update",this.originalValue),this.$datePicker.css("top",window.pageYOffset+a.top+e.Dom.outerHeight(this.TD)),this.$datePicker.css("left",window.pageXOffset+a.left),this.$datePicker.show()},t.prototype.hideDatepicker=function(){var e=this,a=e.instance.getSettings(),t=e.col;void 0!=t&&""==e.getValue()&&e.setValue(a.columns[t].defaultValue),this.$datePicker.hide()},e.editors.BootstrapDateEditor=t,e.editors.registerEditor("bootdate",t)}(Handsontable),Handsontable.BootstrapDateCell={editor:Handsontable.editors.BootstrapDateEditor,renderer:Handsontable.renderers.AutocompleteRenderer},Handsontable.cellTypes.bootdate=Handsontable.BootstrapDateCell,!function(e){"use strict";var a,t,r="__sl",n=function(a,t){this.$element=e(a),this.options=e.extend({},e.fn.wfform.defaults,t),this.uploadfiles={},this.nbfileuploaded=0,this.handsontable_errors={},""==this.options.serverURL&&(this.options.serverURL=e.fn.wfform.defaults.serverURL)};n.prototype.reset=function(){for(var a in this.workflow.parameters)this.workflow.parameters[a]["default"]?e("#"+this.workflow.parameters[a].name).val(this.workflow.parameters[a]["default"]):e("#"+this.workflow.parameters[a].name).val("")};var o=function(t,r){var n=!0,o=new Array;e(".fileupload").each(function(){var a=e(this).fileupload("progress").loaded,t=e(this).fileupload("progress").total,r=e(this).attr("id").split("_"),i=r.slice(1,r.length).join("_");a!=t&&(n=!1),0!=t&&o.push({param:i.split("_").join(" "),param_id:i,loaded:a,total:t})}),n&&!r&&(clearInterval(a),t.$element.trigger("uploaded.wfform")),r&&(e("#workflow_form").hide(),e("#progress").html(""),e.tmpl(t.options.progressTemplate,{upload_file_status:o}).appendTo(e("#progress")))},i=function(e,a){a==e.nbfileuploaded&&(clearInterval(t),e.$element.trigger("uploaded.wfform"))},s=function(r){if(e("#workflow_form").valid()){var n=!1;if(e("[id^=handsontable_]").each(function(){e(this).is(":visible")&&e(this).find("td.htInvalid").length>0&&(n=!0)}),!n){e(":checkbox").each(function(){e(this).prop("checked")&&e(this).val(!0)});var s="",l={};e("[id^=urlfile_btn_]").each(function(){var a=e(this).attr("id").split("_"),t=a.slice(2,a.lenght).join("_");if(e("#"+t).hasClass("to-readonly")&&e("#"+t).val())if(e("#"+t).hasClass("list")){for(var n=e("#"+t).val().split(/\n/),o="",i=0;i<n.length;i++)o+=r.uploadfiles[t]+"/"+n[i],o.replace(/C:\\fakepath\\/i,"").replace(/C:\\fake_path\\/i,""),o+="::-::";o=o.substring(0,o.length-5),e("#"+t).val(o),e("#"+t).removeClass("list")}else e("#"+t).val(r.uploadfiles[t]+"/"+e("#"+t).val()),e("#"+t).val(e("#"+t).val().replace(/C:\\fakepath\\/i,"").replace(/C:\\fake_path\\/i,""))}),e.each(e("#workflow_form").serializeArray(),function(a,t){(e("#"+t.name).is(":visible")||!e("#content_"+t.name).hasClass("hidden-exclude"))&&(""!=t.value&&"password"==e("#"+t.name).attr("type")&&(t.value=rc4_encrypt(t.value)),l.hasOwnProperty(t.name)?l[t.name].push(t.value):""!=t.value&&(e("#"+t.name).hasClass("list")?l[t.name]=e("#"+t.name).val().split(/\n/):l[t.name]=new Array(t.value)))}),e("[id^=handsontable_]").each(function(){if(e(this).is(":visible"))for(var a=e(this).handsontable("getData"),t=0;t<a.length;t++)for(var r in a[t])null!=a[t][r]&&""!==a[t][r]&&(l[r+"___"+t]=new Array,l[r+"___"+t].push(a[t][r]))});for(var p in l){for(var d="",u=0;u<l[p].length;u++)r.options.parameters.hasOwnProperty(p)?null!=r.options.parameters[p]&&(d+=encodeURI(l[p][u]+"::-::")):d+=encodeURI(l[p][u]+"::-::");d&&(s+=p+"="+d,s=s.substring(0,s.length-5)+"&")}e("#workflow_form :checkbox").each(function(){e(this).is(":visible")&&0==e(this).parents("[id^=handsontable_]").length&&(e(this).prop("checked")||(s+=e(this).attr("name")+"=false&"))}),r.$element.on("uploaded.wfform",function(){r.$element.off("uploaded"),e.ajax({url:r.options.serverURL+"/run_workflow?"+s+"callback=?",dataType:"json",success:function(e){if(0==e.status)r.$element.trigger("run.wfform",e.content);else{var a=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+r.options.serverURL+"</strong>","</div>"].join("\n");r.$element.html(a)}}})}),r.$element.trigger("uploading.wfform");var c=0;if(e(".fileupload").each(function(){var a=e(this).attr("id").split("_"),t=a.slice(1,a.length).join("_");e("#"+t).data("data2upload")&&(e("#"+t).data("data2upload").submit(),c+=1)}),c>0)if(r.options.forceIframeTransport)o(r,!0),a=setInterval(function(){o(r,!1)},r.options.timer);else{var m=new Array;e(".fileupload").each(function(){var a=e(this).attr("id").split("_"),t=a.slice(1,a.length).join("_");m.push({param:t.split("_").join(" "),param_id:t,loaded:0,total:100})}),e("#workflow_form").hide(),e("#progress").html(""),e.tmpl(r.options.progressTemplate,{upload_file_status:m}).appendTo(e("#progress")),t=setInterval(function(){i(r,c)},r.options.timer)}else r.$element.trigger("uploaded.wfform")}}},l=function(a){var t=e.Deferred();return e("#"+a).handsontable("validateCells",function(){t.resolve()}),t.promise()};n.prototype.run=function(){var a=this;if(0==e("[id^=handsontable_]").length)s(a);else{var t=new Array;e("[id^=handsontable_]").each(function(){var a=e(this).attr("id");t.push(l(a))}),e.when.apply(e,t).done(function(){e("[id^=handsontable_]").each(function(){e(this).handsontable("render")}),s(a)})}},n.prototype.render=function(){e(document).off("focusin.bs.modal"),e("[id^=handsontable_]").each(function(){e(this).handsontable("render")})},n.prototype.load=function(){var a=this,t=['<div class="container-fluid"><div class="row"><div class="col-md-1 col-md-offset-2"><div class="inline floatingBarsG">','<div class="blockG" id="rotateG_01"></div>','<div class="blockG" id="rotateG_02"></div>','<div class="blockG" id="rotateG_03"></div>','<div class="blockG" id="rotateG_04"></div>','<div class="blockG" id="rotateG_05"></div>','<div class="blockG" id="rotateG_06"></div>','<div class="blockG" id="rotateG_07"></div>','<div class="blockG" id="rotateG_08"></div>','</div></div> <div class="col-md-8">Please wait until module is being loaded!</div></div></div>'].join("\n");a.$element.html(t),e.ajax({url:this.options.serverURL+"/get_available_workflows?callback=?",dataType:"json",timeout:2e4,error:function(e,t,r){var n=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+a.options.serverURL+"</strong>","</div>"].join("\n");a.$element.html(n)},success:function(t){var n={};for(var o in t)if(t[o]["class"]==a.options.workflowClass){a.workflow=t[o];break}a.$element.trigger("loaded.wfform",a.workflow),a.$element.html(""),e.tmpl(p,{workflow:a.workflow,display_run_button:a.options.displayRunButton,display_reset_button:a.options.displayResetButton,parameters:a.options.parameters,getParameterDisplay:a._getParameterDisplay,getTplName:a._getTplName,templates:{parameterTemplate:a.options.parameterTemplate,dateTemplate:a.options.dateTemplate,choiceTemplate:a.options.choiceTemplate,inputfileTemplate:a.options.inputfileTemplate,browsefileTemplate:a.options.browsefileTemplate,regexpfilesTemplate:a.options.regexpfilesTemplate,booleanTemplate:a.options.booleanTemplate,passwordTemplate:a.options.passwordTemplate,textTemplate:a.options.textTemplate}}).appendTo(a.$element),e("a[class^=inputfile_]").click(function(){e("#"+e(this).attr("class")).html(e(this).html());var t=e(this).attr("class").split("_"),n=t.slice(1,t.lenght).join("_"),o=e("#"+n).rules().mparam.type.split(r)[1];if(e("#"+n).val(""),e("#"+n).rules("remove","remote maxfilesize"),"local file"==e(this).html())e("#urlfile_btn_"+n).show(),e("#"+n).on("focusin",function(a){e(this).prop("readonly",!0)}),e("#"+n).on("focusout",function(a){e(this).prop("readonly",!1)}),e("#"+n).addClass("to-readonly"),"0"!=o&&e("#"+n).rules("add",{maxfilesize:[a.getNbOctet(o),o]});else{e("#urlfile_btn_"+n).hide(),e("#"+n).on("focusin",function(a){e(this).prop("readonly",!1)}),e("#"+n).on("focusout",function(a){e(this).prop("readonly",!1)}),e("#"+n).removeClass("to-readonly"),e("#"+n).data("data2upload")&&e("#"+n).removeData("data2upload");var i=null;i="url"==e(this).html()?"urlfile":"server regexp"==e(this).html()?"regexpfiles":"append"==e("#"+n).rules().mparam.action?"inputfiles":"inputfile",e("#"+n).rules("add",{remote:{url:a.options.serverURL+"/validate_field?callback=?",type:"post",data:{type:i+r+o,action:e("#"+n).rules().mparam.action}}})}}),e("[id^=urlfile_btn_]").click(function(){var a=e(this).attr("id").split("_"),t=a.slice(2,a.lenght).join("_");e("#browse_"+t).click()}),e(".fileupload").each(function(){var t=e(this).attr("id").split("_"),r=t.slice(1,t.length).join("_");e(this);a.uploadfiles[r]=+new Date+"_"+Math.floor(1e4*Math.random()+1),e(this).fileupload({url:a.options.serverURL+"/upload",formData:{uniq_directory:a.uploadfiles[r]},forceIframeTransport:a.options.forceIframeTransport,add:function(a,t){if(t.files=t.originalFiles,1==t.files.length)e("#"+r).val(t.files[0].name);else{var n="";for(var o in t.files)n+=t.files[o].name+"\n";e("#"+r).val(n.substring(0,n.length-1))}e("#"+r).data("data2upload",t),e("#"+r).focusout()},progressall:function(t,n){var o=parseInt(n.loaded/n.total*100,10);e("#"+r+"_pbar").css("width",o+"%"),100==o&&(a.nbfileuploaded+=1)}})}),e(".date").datepicker().on("changeDate",function(a){e(this).hasClass("list")||e(".date").datepicker("hide");var t=e(this).attr("id").split("date_")[1];e("#"+t).focusout()});var i=new Array,s={},l={};for(var o in a.workflow.parameters)-1!=a.workflow.parameters[o].group.indexOf("exclude-")&&a.workflow.parameters[o].required&&-1==i.indexOf(a.workflow.parameters[o].group)&&i.push(a.workflow.parameters[o].group),s[a.workflow.parameters[o].name]=a.workflow.parameters[o],l.hasOwnProperty(a.workflow.parameters[o].group)||(l[a.workflow.parameters[o].group]=new Array),l[a.workflow.parameters[o].group].push(a.workflow.parameters[o].name);for(var o in a.workflow.parameters)if("MultipleParameters"==a.workflow.parameters[o].type)for(var d in a.workflow.parameters[o].sub_parameters)n[a.workflow.parameters[o].sub_parameters[d].name]=a._getParameterRule(a.workflow.parameters[o].sub_parameters[d],a.options.serverURL,i);else n[a.workflow.parameters[o].name]=a._getParameterRule(a.workflow.parameters[o],a.options.serverURL,i);e("#workflow_form").validate({rules:n}),e(".to-readonly").on("focusin",function(a){e(this).prop("readonly",!0)}),e(".to-readonly").on("focusout",function(a){e(this).prop("readonly",!1)}),e("[id^=prev_btn_]").click(function(){var a=e(this).attr("id").split("prev_btn_")[1],t=e("."+a+":visible"),r=t.attr("id").split("content_")[1],n=l[a].indexOf(r),o=null;t.addClass("hidden hidden-exclude"),o=0==n?l[a].length-1:n-1,e("#content_"+l[a][o]).removeClass("hidden hidden-exclude"),e("#label_"+a).html(s[l[a][o]].display_name),e("#"+l[a][o]).focusout()}),e("[id^=next_btn_]").click(function(){var a=e(this).attr("id").split("next_btn_")[1],t=e("."+a+":visible"),r=t.attr("id").split("content_")[1],n=l[a].indexOf(r),o=null;t.addClass("hidden hidden-exclude"),o=n==l[a].length-1?0:n+1,e("#content_"+l[a][o]).removeClass("hidden hidden-exclude"),e("#label_"+a).html(s[l[a][o]].display_name),e("#"+l[a][o]).focusout()}),e("[id^=handsontable_]").each(function(){function t(e,a){if(a<e.countRows()-1)for(var t=e.getData()[a],r=0,n=t.length;n>r;r++)if(null!==t[r])return!1;return!0}var r=e(this).attr("id").split("handsontable_"),n=r.slice(1,r.length),o={},i=new Array,l=new Array,p=new Array,d={},u={},c={},m={};m[n]=s[n].help;for(var f in s[n].sub_parameters)o[s[n].sub_parameters[f].name]=null,p.push(s[n].sub_parameters[f]["default"]),i.push(s[n].sub_parameters[f].display_name),m[s[n].sub_parameters[f].name]=s[n].sub_parameters[f].help,"bool"==s[n].sub_parameters[f].type?l.push({data:s[n].sub_parameters[f].name,type:"checkbox"}):"date"==s[n].sub_parameters[f].type?l.push({data:s[n].sub_parameters[f].name,type:"bootdate",defaultValue:s[n].sub_parameters[f]["default"],dateFormat:s[n].sub_parameters[f].format,validator:function(e,a){var t=getDate(e,s[n].sub_parameters[f].format);a("[object Date]"===Object.prototype.toString.call(t)?isNaN(t.getTime())?!1:!0:!1)}}):null!=s[n].sub_parameters[f].choices?l.push({data:s[n].sub_parameters[f].name,editor:"select",selectOptions:s[n].sub_parameters[f].choices.map(String)}):(d[s[n].sub_parameters[f].name]=s[n].sub_parameters[f].type,u[s[n].sub_parameters[f].name]=s[n].sub_parameters[f].action,c[s[n].sub_parameters[f].name]=s[n].sub_parameters[f].required,l.push({data:s[n].sub_parameters[f].name,validator:function(t,r){var o=this;!c[o.prop]||null!=t&&""!=t.trim()?c[o.prop]||null!=t&&""!=t?"append"!=u[o.prop]&&t.split("\n").length>1?(e("#error_handsontable_"+n).show(),e("#error_handsontable_"+n).html("This field does not accept multiple values."),e("#error_handsontable_"+n).parent().addClass("has-error"),r(!1)):e.ajax({url:a.options.serverURL+"/validate_field?callback=?",dataType:"json",data:{type:d[o.prop],action:u[o.prop],value:t},success:function(a){1==a?(r(!0),0==e("#handsontable_"+n).find("td.htInvalid").length&&e("#error_handsontable_"+n).hide()):(e("#error_handsontable_"+n).show(),e("#error_handsontable_"+n).html(a),e("#error_handsontable_"+n).parent().addClass("has-error"),r(!1))}}):(r(!0),e("#error_handsontable_"+n).hide()):(e("#error_handsontable_"+n).show(),e("#error_handsontable_"+n).html("This field is required."),e("#error_handsontable_"+n).parent().addClass("has-error"),r(!1))}}));e("#help_handsontable_"+n).html(m[n]),e(this).handsontable({data:[],currentRowClassName:"currentRow",currentColClassName:"currentCol",autoWrapRow:!0,dataSchema:o,colHeaders:i,minSpareRows:1,contextMenuCopyPaste:!0,stretchH:"all",columns:l,contextMenu:["row_above","row_below","---------","remove_row","---------","undo","redo"],afterSelectionByProp:function(t){void 0==a.handsontable_errors[arguments[1]+"."+t]?e("#error_handsontable_"+n).hide():(e("#error_handsontable_"+n).show(),e("#error_handsontable_"+n).html(a.handsontable_errors[arguments[1]+"."+t]),e("#error_handsontable_"+n).parent().addClass("has-error")),e("#help_handsontable_"+n).html(m[arguments[1]])},afterDeselect:function(a){e("#help_handsontable_"+n).html(m[n]),e("#error_handsontable_"+n).hide()},afterValidate:function(t,r,n,o,i){if(t)try{delete a.handsontable_errors[o+"."+n]}catch(s){}else(1==this.countRows()||this.countRows()-1!=n)&&(a.handsontable_errors[o+"."+n]=e("#error_handsontable_"+o.split("___")[0]).html());var l=o.split("___")[0],p=!1;for(var d in a.handsontable_errors)0==d.indexOf(l)&&(p=!0);p||e("#error_handsontable_"+o.split("___")[0]).parent().removeClass("has-error")},afterRender:function(a){for(var t=0;t<this.countCols();t++)1!=this.countRows()&&e(this.getCell(this.countRows()-1,t)).removeClass("htInvalid")},cells:function(e,a,r){var n=this.renderer,o={renderer:function(e,a,r,o,i,s,d){if(null===s&&t(e,r)&&(s="checkbox"==l[o].type?p[o]&&0!=p[o].length?!0:!1:p[o],a.style.color="#999"),s&&s.constructor==Array&&(s=s.join("\n")),n)n(e,a,r,o,i,s,d);else{var u=arguments;u[5]=s,u[1]=a,Handsontable.renderers.TextRenderer.apply(this,u)}}};return o},beforeChange:function(e){var a,r,n,o=this,i=e.length,s=o.countCols(),l={},d={};for(a=0;i>a;a++)null===e[a][2]&&null!==e[a][3]&&t(o,e[a][0])&&(l[e[a][0]+"/"+e[a][1]]=!0,d[e[a][0]]=!0);for(var u in d)if(d.hasOwnProperty(u))for(r=0;s>r;r++)l[u+"/"+o.colToProp(r)]||(n=p[r],n&&n.constructor==Array&&(n=p[r].join("\n")),e.push([parseInt(u),o.colToProp(r),null,n]))}})}),a.options.displayRunButton&&e("#wfform_run_btn").click(function(){a.run()}),a.options.displayResetButton&&e("#wfform_reset_btn").click(function(){a.reset()})}})},n.prototype.getOctetStringRepresentation=function(e){var a=["bytes","Kb","Mb","Gb","Tb","Pb","Eb","Zb"],t=Math.ceil(e.toString().length/3-1),r=10*t,r=Math.pow(2,r),n=(e/r).toString(),o=n.split(".");return n=o[0]+"."+o[1].substring(0,2)+" "+a[t]},n.prototype.getNbOctet=function(e){var a=["bytes","Kb","Mb","Gb","Tb","Pb","Eb","Zb"],t=e.substring(e.length-2,e.length),r=10*parseInt(a.indexOf(t)),n=Math.pow(2,r),o=e.substring(0,e.length-2)*n;return o},n.prototype._getParameterRule=function(e,a,t){var n={};if(n.mparam=e,"int"==e.type&&"append"==e.action)n.multinumber=!0;else if("int"==e.type)n.number=!0;else if("date"==e.type&&"append"==e.action)n.multidate=e.format;else if("date"==e.type)n.jfdate=e.format;else if(0===e.type.indexOf("browsefile")){var o=e.type.split(r)[1];n.maxfilesize=[this.getNbOctet(o),o]}else"str"!=e.type&&"password"!=e.type&&(n.remote={url:a+"/validate_field?callback=?",type:"post",data:{type:e.type,action:e.action}});return-1!=t.indexOf(e.group)?n.required=!0:-1==e.group.indexOf("exclude-")&&(n.required=e.required),n},n.prototype._getTplName=function(e){return e.choices?"choiceTemplate":"date"==e.type?"dateTemplate":"bool"==e.type?"booleanTemplate":"password"==e.type?"passwordTemplate":0===e.type.indexOf("inputfile")?"inputfileTemplate":0===e.type.indexOf("browsefile")?"browsefileTemplate":0===e.type.indexOf("regexpfiles")?"regexpfilesTemplate":"textTemplate"},n.prototype._getParameterDisplay=function(a,t,r,n){return n=n||"",t=t||"textTemplate",e.tmpl(a[t],{param:r,check_title:n,templates:a,getParameterDisplay:this._getParameterDisplay}).html()};e.fn.wfform;e.fn.wfform=function(a){return this.each(function(){var t=e(this),r=t.data("wfform"),o=e.extend({},e.fn.wfform.defaults,"object"==typeof a&&a),i="string"==typeof a?a:null;r?r.options.workflowClass=o.workflowClass:t.data("wfform",r=new n(this,o)),i?r[i]():r.load()})};var p=['<form id="workflow_form" class="form-horizontal" role="form">',"    {{each(gindex, group) workflow.groups}}","    <fieldset>",'        {{if group != "default" && group.indexOf("exclude-") != 0 }}',"            <legend>${group}</legend>","        {{/if}}","        {{each(index, param) workflow.parameters_per_groups[group]}}","            {{if Object.keys(parameters).indexOf(param.name) == -1 }}",'            {{if (group.indexOf("exclude-") == 0 && index ==0) || group.indexOf("exclude-") != 0}}','            <div class="form-group param-field">','                <label id="label_${param.group}" class="col-sm-2 control-label" for="${param.name}">${param.display_name}</label>',"            {{/if}}",'                {{if group.indexOf("exclude-") == 0 }}','                <div id="content_${param.name}" class="col-sm-9 ${param.group}{{if index != 0}} hidden hidden-exclude{{/if}}">',"                {{else}}",'                <div class="col-sm-10">',"                {{/if}}",'                {{if param.type == "MultipleParameters"}}','                    <blockquote style="font-size:14px;">','                    {{if param.action == "MiltipleAppendAction"}}','                        <div id="handsontable_${param.name}" > </div>','                        <span id="error_handsontable_${param.name}" class="help-block" for="read_2"></span>','                        <span id="help_handsontable_${param.name}" class="help-block">${param.help}</span>',"                    {{else}}","                        {{each(spindex, sub_param) param.sub_parameters}}",'                           <div class="param-field">','                           {{if sub_param.type == "bool"}}',"                              {{html getParameterDisplay(templates, getTplName(sub_param), sub_param, sub_param.display_name)}}","                           {{else}}",'                              <div class="input-group">','                                  <span class="input-group-addon">${sub_param.display_name}</span>',"                                  {{html getParameterDisplay(templates, getTplName(sub_param), sub_param)}}","                              </div>","                           {{/if}}",'                              <span class="help-block">${sub_param.help}</span> <br />',"                           </div>","                        {{/each}}","                    {{/if}}","                    </blockquote>","                {{else}}","                    {{html getParameterDisplay(templates, getTplName(param), param)}}",'                    <span class="help-block">${param.help}</span>',"                {{/if}}","                </div>",'            {{if group.indexOf("exclude-") == 0 && index == workflow.parameters_per_groups[group].length-1 }}','                {{if group.indexOf("exclude-") == 0 }}','                <div class="col-sm-1" style="padding:0">','                  <div class="exclude-left">','    				 <span class="input-group-btn btn-group-xs">','      					<button id="prev_btn_${param.group}" class="btn btn-default" type="button"><span class="glyphicon glyphicon-chevron-left"></span>&nbsp;</button>',"    				 </span>","                  </div>",'                  <div class="exclude-right">','    				 <span class="input-group-btn btn-group-xs">','      					<button id="next_btn_${param.group}" class="btn btn-default" type="button"><span class="glyphicon glyphicon-chevron-right"></span>&nbsp;</button>',"    				 </span>","                  </div>","                </div>","                {{/if}}","            </div>",'            {{else group.indexOf("exclude-") != 0}}',"            </div>","            {{/if}}","            {{else}}",'              {{if param.action == "append"}}','                <input id="${param.name}" name="${param.name}" value="${parameters[param.name].join("::-::")}" type="hidden">',"              {{else}}",'                <input id="${param.name}" name="${param.name}" value="${parameters[param.name]}" type="hidden">',"              {{/if}}","            {{/if}}","        {{/each}}","    </fieldset>","    {{/each}}","    <fieldset>",'        <input name="workflow_class" value="${workflow.class}" type="hidden">',"        {{if display_reset_button || display_run_button}}",'            <div class="row"> <div class="col-md-3 col-md-offset-9">','                <div class="btn-group">',"                {{if display_reset_button}}",'                    <button id="wfform_reset_btn" type="button" class="btn btn-default"><span class="glyphicon glyphicon-refresh"></span> Reset</button>',"                {{/if}}","                {{if display_run_button}}",'                    <button id="wfform_run_btn" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-cog"></span> Run</button>',"                {{/if}}","                </div>","            </div>","        {{/if}}","    </fieldset>","</form>",'<form method="post" enctype="multipart/form-data" style="display:none;">',"  {{each(gindex, group) workflow.groups}}","    {{each(index, param) workflow.parameters_per_groups[group]}}",'		{{if param.type.indexOf("inputfile") === 0 || param.type.indexOf("browsefile") === 0}}','		  {{if param.action == "append"}}','			<input name="browse_${param.name}" id="browse_${param.name}" class="fileupload" multiple type="file">',"		  {{else}}",'			<input name="browse_${param.name}" id="browse_${param.name}" class="fileupload" type="file">',"		  {{/if}}",'       {{else param.type == "MultipleParameters"}}',"        {{each(spindex, sub_param) param.sub_parameters}}",'		   {{if sub_param.type.indexOf("inputfile") === 0 || sub_param.type.indexOf("browsefile") === 0}}','	     	  {{if param.action == "append"}}','			    <input name="browse_${sub_param.name}" id="browse_${sub_param.name}" multiple class="fileupload" type="file">',"		      {{else}}",'			    <input name="browse_${sub_param.name}" id="browse_${sub_param.name}" class="fileupload" type="file">',"		      {{/if}}","		   {{/if}}","        {{/each}}","		{{/if}}","    {{/each}}","  {{/each}}","</form>",'<div id="progress"></div>'].join("\n");e.fn.wfform.defaults={serverURL:"http://localhost:8080",dateTemplate:["<div>",'{{if param.action == "append"}}','  <div id="date_${param.name}" class="input-group date list" data-date="${param.default}" data-date-multidate-separator=", " data-date-multidate="true" data-date-format="${param.format}">',"{{else}}",'  <div id="date_${param.name}" class="input-group date" data-date="${param.default}" data-date-format="${param.format}">',"{{/if}}",'    <input id="${param.name}" name="${param.name}" class="form-control" type="text" value="${param.default}">','    <span class="input-group-btn">','      <button class="btn btn-default" type="button"><span class="glyphicon glyphicon-calendar"></span>&nbsp;</button>',"    </span>","  </div>","</div>"].join("\n"),choiceTemplate:["<div>",'{{if param.action == "append"}}','  <select id="${param.name}" multiple name="${param.name}" class="form-control list">',"{{else}}",'  <select id="${param.name}" name="${param.name}" class="form-control">',"{{/if}}","  {{each(j, choice) param.choices}}","    {{if choice == param.default}}","    <option selected>${choice}</option>","    {{else}}","    <option>${choice}</option>","    {{/if}}","  {{/each}}","  </select>","</div>"].join("\n"),inputfileTemplate:["<div>",'  <div class="input-group">','    <div class="input-group-btn">','      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">','        <span id="inputfile_${param.name}">server file</span>','        <span class="caret"></span>',"      </button>",'      <ul class="dropdown-menu" role="menu">','        <li><a class="inputfile_${param.name}" href="#">server file</a></li>','        {{if param.action == "append"}}','        <li><a class="inputfile_${param.name}" href="#">server regexp</a></li>',"        {{/if}}",'        <li><a class="inputfile_${param.name}" href="#">local file</a></li>','        <li><a class="inputfile_${param.name}" href="#">url</a></li>',"      </ul>","    </div>",'    {{if param.action == "append"}}','    <textarea id="${param.name}" style="resize:none" name="${param.name}" class="list form-control">${param.default.join("\n")}</textarea>',"    {{else}}",'    <input id="${param.name}" name="${param.name}" class="form-control" type="text" value="${param.default}">',"    {{/if}}",'    <span class="input-group-btn">','      <button id="urlfile_btn_${param.name}" style="display: none;" class="btn btn-default" type="button"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;</button>',"    </span>","  </div>","</div>"].join("\n"),browsefileTemplate:["<div>",'  <div class="input-group">','    {{if param.action == "append"}}','    <textarea id="${param.name}" style="resize:none" name="${param.name}" class="list form-control to-readonly">${param.default.join("\n")}</textarea>',"    {{else}}",'    <input id="${param.name}" name="${param.name}" class="form-control to-readonly" type="text" value="${param.default}">',"    {{/if}}",'    <span class="input-group-btn">','      <button id="urlfile_btn_${param.name}" class="btn btn-default" type="button"><span class="glyphicon glyphicon-folder-open"></span>&nbsp;</button>',"    </span>","  </div>","</div>"].join("\n"),
regexpfilesTemplate:["<div>",'  <textarea id="${param.name}" style="resize:none" name="${param.name}" class="list form-control">${param.default.join("\n")}</textarea>',"</div>"].join("\n"),booleanTemplate:["<div>","    {{if param.default == true}}",'      <input id="${param.name}" name="${param.name}" value="${param.default}" type="checkbox" checked> ${check_title}',"    {{else}}",'      <input id="${param.name}" name="${param.name}" value="${param.default}" type="checkbox"> ${check_title}',"    {{/if}}","</div>"].join("\n"),textTemplate:["<div>",'  {{if param.action == "append"}}','    <textarea id="${param.name}" style="resize:none" name="${param.name}" class="list form-control">${param.default.join("\n")}</textarea>',"  {{else}}",'    <input id="${param.name}" name="${param.name}" value="${param.default}" class="form-control" type="text">',"  {{/if}}","</div>"].join("\n"),passwordTemplate:["<div>",'    <input id="${param.name}" name="${param.name}" value="${param.default}" class="form-control" type="password">',"</div>"].join("\n"),progressTemplate:['<dl class="dl-horizontal">','<div class="container-fluid"><div class="row"><div class="col-md-1 col-md-offset-2"><div class="inline floatingBarsG">','<div class="blockG" id="rotateG_01"></div>','<div class="blockG" id="rotateG_02"></div>','<div class="blockG" id="rotateG_03"></div>','<div class="blockG" id="rotateG_04"></div>','<div class="blockG" id="rotateG_05"></div>','<div class="blockG" id="rotateG_06"></div>','<div class="blockG" id="rotateG_07"></div>','<div class="blockG" id="rotateG_08"></div>','</div></div> <div class="col-md-8">Please wait until all files have being loaded!</div></div>',"<br/>","{{each(index, file) upload_file_status}}","<dt>${file.param}</dt>","<dd>",'<div class="progress">','<div id="${file.param_id}_pbar" class="progress-bar progress-bar-success" role="progressbar" style="width: ${parseInt((file.loaded/file.total)*100)}%;"></div>',"</div>","</dd>","{{/each}}","</dl>"].join("\n"),workflowClass:null,displayRunButton:!0,displayResetButton:!0,workflow:null,parameters:{},timer:2e3,forceIframeTransport:!1},e.fn.wfform.Constructor=n}(window.jQuery);
//wfstatus
!function(e){"use strict";var o=function(o,t){this.$element=e(o),this.options=e.extend({},e.fn.wfstatus.defaults,t),this.cytoptions={},""==this.options.serverURL&&(this.options.serverURL=e.fn.activewf.defaults.serverURL)};o.prototype.reformatWorkflowJSON=function(e){var o={name:e.name,status:e.status,elapsed_time:e.elapsed_time,end_time:e.end_time,id:e.id,start_time:e.start_time,components:new Array};for(var t in e.components){var n=0,s=0,r=0,i=0;0!=parseInt(e.components[t].total)&&(n=parseInt(100*(parseInt(e.components[t].aborted)+parseInt(e.components[t].failed))/parseInt(e.components[t].total)),s=parseInt(100*parseInt(e.components[t].completed)/parseInt(e.components[t].total)),r=parseInt(100*parseInt(e.components[t].running)/parseInt(e.components[t].total)),i=parseInt(100*parseInt(e.components[t].waiting)/parseInt(e.components[t].total))),o.components.push({name:e.components[t].name,elapsed_time:e.components[t].elapsed_time,failed:n,running:r,completed:s,waiting:i})}return o},o.prototype._listview=function(){if(this.options.forceUsingWorkflow){var o=this.reformatWorkflowJSON(this.options.forceUsingWorkflow);this.$element.html(""),e.tmpl(this.options.headTemplate,{workflow:o,verbose:this.options.verbose}).appendTo(this.$element),e.tmpl(this.options.listTemplate,{workflow:o}).appendTo(this.$element),this.options.forceUsingWorkflow=null}else if(this.options.workflowID){var n=this,s="",r=['<div class="container-fluid"><div class="row"><div class="col-md-1 col-md-offset-2"><div class="inline floatingBarsG">','<div class="blockG" id="rotateG_01"></div>','<div class="blockG" id="rotateG_02"></div>','<div class="blockG" id="rotateG_03"></div>','<div class="blockG" id="rotateG_04"></div>','<div class="blockG" id="rotateG_05"></div>','<div class="blockG" id="rotateG_06"></div>','<div class="blockG" id="rotateG_07"></div>','<div class="blockG" id="rotateG_08"></div>','</div></div> <div class="col-md-8">Please wait until module is being loaded!</div></div></div>'].join("\n");n.$element.html(r),this.options.workflowID&&(s="workflow_id="+this.options.workflowID+"&"),s+="display="+this.options.display+"&",e.ajax({url:this.options.serverURL+"/get_workflow_status?"+s+"callback=?",dataType:"json",timeout:2e4,error:function(){var e=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+n.options.serverURL+"</strong>","</div>"].join("\n");n.$element.html(e)},success:function(o){var s=n.reformatWorkflowJSON(o);n.$element.html(""),e.tmpl(n.options.headTemplate,{workflow:s,verbose:n.options.verbose}).appendTo(n.$element),e.tmpl(n.options.listTemplate,{workflow:s}).appendTo(n.$element),n.$element.find("#wfstatus_error_panel").hide(),null!=o.errors&&(n.$element.find("#wfstatus_error_msg").html(o.errors.msg.join("<br/>")),n.$element.find("#wfstatus_error_location").text(o.errors.location),n.$element.find("#wfstatus_error_panel").show()),e("[id^=progress_component_]").hover(function(){var o=e(this).attr("id").split("progress_component_")[1],s=o.replace(".","\\.");e("#reset_component_"+s).children("div").css("left",e(this).width()-45),e("#info_component_"+s).children("div").css("left",e(this).width()-89),e("#reset_component_"+s).fadeIn(200),e("#info_component_"+s).fadeIn(200),e("#reset_component_"+s).bind("click",{component_name:o,element:n},t)},function(){var o=e(this).attr("id").split("progress_component_")[1].replace(".","\\.");e("#reset_component_"+o).fadeOut(200),e("#info_component_"+o).fadeOut(200),e("#reset_component_"+o).unbind("click",t)})}})}},o.prototype._createcytoscape=function(o,t,n){var s={style:cytoscape.stylesheet().selector('node[type = "component"]').css({width:"80px",height:"80px",content:"data(name)","pie-size":"100%","pie-1-background-color":"lightgrey","pie-1-background-size":"mapData(err, 0, 100, 0, 100)","pie-2-background-color":"#faa732","pie-2-background-size":"mapData(wai, 0, 100, 0, 100)","pie-3-background-color":"#0e90d2","pie-3-background-size":"mapData(run, 0, 100, 0, 100)","pie-4-background-color":"#dd514c","pie-4-background-size":"mapData(fai, 0, 100, 0, 100)","pie-5-background-color":"#7fe175","pie-5-background-size":"mapData(com, 0, 100, 0, 100)","background-color":"lightgrey","text-valign":"bottom",color:"black","font-family":'"Trebuchet MS",Verdana,"Lucida Grande", Tahoma, Helvetica, sans-serif',"border-width":"0","font-size":"10px"}).selector('node[type ^= "input"]').css({width:"62px",height:"62px",content:"data(name)","text-valign":"bottom",color:"black","font-family":'"Trebuchet MS",Verdana,"Lucida Grande", Tahoma, Helvetica, sans-serif',"font-size":"10px","border-width":"0"}).selector("edge").css({width:1,opacity:.5}),elements:{nodes:o,edges:t},layout:{name:"dagre",nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:"LR",minLen:function(){return 1},fit:!0,padding:30,animate:!1,animationDuration:500,boundingBox:void 0,ready:function(){},stop:function(){}},ready:function(){window.cy=this,cy.elements().unselectify(),cy.on("mouseover","node",function(e){var o=e.cyTarget;"component"==o._private.data.type?o.animate({css:{"background-opacity":"0.1"}},{duration:100}):o.animate({css:{"background-opacity":"0.7"}},{duration:100})}),cy.on("mouseout","node",function(e){var o=e.cyTarget;"button"==o._private.data.type?o.animate({css:{"background-opacity":"0.8"}},{duration:100}):o.animate({css:{"background-opacity":"1"}},{duration:100})}),cy.on("tap","node",function(e){var o=e.cyTarget;"reset"==o.id()?n.reset(o._private.data.cname):"info"==o.id()||"component"==o._private.data.type&&(cy.$("node[id = 'reset']").inside()?(cy.remove("node[type = 'button']"),cy.elements().unlock()):(cy.add({group:"nodes",data:{id:"reset",name:"",cname:o.id(),type:"button"},css:{width:"0px",height:"0px","background-color":"black","background-opacity":"0.8",content:"data(name)",shape:"roundrectangle"},position:{x:o.position().x+21,y:o.position().y-47}}).animate({css:{width:20,height:15}},{duration:150}),cy.$("node[type = 'button']").lock(),o.lock()))}),cy.on("tap",function(e){e.cyTarget===cy}),cy.boxSelectionEnabled(!1),cy.panzoom({})}};n.cytoptions=s,e("#cytoscape_panel").cytoscape(s)},o.prototype.render=function(){e(document).off("focusin.bs.modal"),e("#cytoscape_panel").cytoscape(this.cytoptions)},o.prototype._graphview=function(){var o=this,t="",n=['<div class="container-fluid"><div class="row"><div class="col-md-1 col-md-offset-2"><div class="inline floatingBarsG">','<div class="blockG" id="rotateG_01"></div>','<div class="blockG" id="rotateG_02"></div>','<div class="blockG" id="rotateG_03"></div>','<div class="blockG" id="rotateG_04"></div>','<div class="blockG" id="rotateG_05"></div>','<div class="blockG" id="rotateG_06"></div>','<div class="blockG" id="rotateG_07"></div>','<div class="blockG" id="rotateG_08"></div>','</div></div> <div class="col-md-8">Please wait until modul is being loaded!</div></div></div>'].join("\n");o.$element.html(n),this.options.workflowID&&(t="workflow_id="+this.options.workflowID+"&"),t+="display="+this.options.display+"&",e.ajax({url:this.options.serverURL+"/get_workflow_status?"+t+"callback=?",dataType:"json",timeout:2e4,error:function(){var e=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+o.options.serverURL+"</strong>","</div>"].join("\n");o.$element.html(e)},success:function(t){var n=o.reformatWorkflowJSON(t);o.$element.html(""),e.tmpl(o.options.headTemplate,{workflow:n,verbose:o.options.verbose}).appendTo(o.$element),e.tmpl(o.options.graphTemplate,{workflow:n}).appendTo(o.$element);var s={},r=new Array,i=new Array;for(var a in t.components){var d=0,l=n.components[a].waiting,c=n.components[a].running,p=n.components[a].failed,m=n.components[a].completed;l+c+p+m==0&&(d=100),s[t.components[a].name]={name:t.components[a].name,err:d,wai:l,run:c,fai:p,com:m}}for(var a in t.nodes)"inputfile"==t.nodes[a].type||"inputfiles"==t.nodes[a].type||"inputdirectory"==t.nodes[a].type?r.push({data:{id:t.nodes[a].name,name:t.nodes[a].display_name,type:t.nodes[a].type}}):"component"==t.nodes[a].type&&r.push({data:{id:t.nodes[a].name,name:t.nodes[a].display_name,type:t.nodes[a].type,err:s[t.nodes[a].name].err,wai:s[t.nodes[a].name].wai,run:s[t.nodes[a].name].run,fai:s[t.nodes[a].name].fai,com:s[t.nodes[a].name].com}});for(var a in t.edges)null!=t.edges[a][0]&&null!=t.edges[a][1]&&i.push({data:{source:t.edges[a][0],target:t.edges[a][1]}});o.$element.find("#wfstatus_error_panel").hide(),null!=t.errors&&(o.$element.find("#wfstatus_error_msg").html(t.errors.msg.join("<br/>")),o.$element.find("#wfstatus_error_location").text(t.errors.location),o.$element.find("#wfstatus_error_panel").show()),o._createcytoscape(r,i,o)}})},o.prototype.reload=function(){"list"==this.options.display?this._listview():"graph"==this.options.display&&this._graphview()},o.prototype.rerun=function(){var o=this;e.ajax({url:this.options.serverURL+"/rerun_workflow?workflow_id="+o.options.workflowID+"&callback=?",dataType:"json",timeout:2e4,error:function(){var e=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+o.options.serverURL+"</strong>","</div>"].join("\n");o.$element.html(e)},success:function(){o.reload()}})};var t=function(e){e.data.element.reset(e.data.component_name)};o.prototype.reset=function(o){var t=this,n="";this.options.workflowID&&(n="workflow_id="+this.options.workflowID+"&"),n+="component_name="+o+"&",e.ajax({url:this.options.serverURL+"/reset_workflow_component?"+n+"&callback=?",dataType:"json",timeout:2e4,error:function(){var e=['<div class="alert alert-danger" role="alert">',"<strong>Error!</strong>","Jflow failed to connect to the specified server <strong>"+t.options.serverURL+"</strong>","</div>"].join("\n");t.$element.html(e)},success:function(){t.reload()}})};e.fn.wfstatus;e.fn.wfstatus=function(t){return this.each(function(){var n=e(this),s=n.data("wfstatus"),r=e.extend({},e.fn.wfstatus.defaults,"object"==typeof t&&t),i="string"==typeof t?t:null;s?r.workflowID&&(s.options.workflowID=r.workflowID):n.data("wfstatus",s=new o(this,r)),r.forceUsingWorkflow&&(s.options.forceUsingWorkflow=r.forceUsingWorkflow),i?s[i]():s.reload()})},e.fn.wfstatus.defaults={serverURL:"http://localhost:8080",headTemplate:['<dl class="dl-horizontal">',"<dt>Start</dt>","<dd>${workflow.start_time}</dd>","<dt>End</dt>","<dd>${workflow.end_time}</dd>","<dt>Elapsed time</dt>","<dd>${workflow.elapsed_time}</dd>","</dl>",'<div id="wfstatus_error_panel" class="alert alert-danger" role="alert" style="display:none;">',"    <strong>Error!</strong>",'    <span id="wfstatus_error_msg"></span><br/>',"    {{if verbose}}","      <strong>Error location:</strong><br/>",'      <span id="wfstatus_error_location"></span>',"    {{/if}}","</div>"].join("\n"),listTemplate:['<dl class="dl-horizontal">',"{{each(index, component) workflow.components}}","<dt>${component.name}</dt>","<dd>",'<div id="progress_component_${component.name}" class="progress">','  <div class="progress-bar progress-bar-success" role="progressbar" style="width:${component.completed}%;"></div>','  <div class="progress-bar progress-bar-danger" role="progressbar" style="width:${component.failed}%;"></div>','  <div class="progress-bar progress-bar-info" role="progressbar" style="width:${component.running}%;"></div>','  <div class="progress-bar progress-bar-warning" role="progressbar" style="width:${component.waiting}%;"></div>','  <div id="reset_component_${component.name}" class="tooltip in" style="position:absolute;cursor:pointer;display:none;">','    <div class="tooltip-inner" style="position:absolute;top:-5px;height:29px;padding-top:4px;"><span style="font-size:20px;" class="glyphicon glyphicon-remove"></span></div>',"  </div>","</div>","</dd>","{{/each}}","</dl>"].join("\n"),graphTemplate:['<div id="cytoscape_panel" style="background-image:url(img/grid.png);',"background-color:#f9f9f9;margin-top:20px;border:1px solid lightgrey;border-radius:5px;",'width:870px;height:393px">',"</div>"].join("\n"),workflowID:null,forceUsingWorkflow:null,verbose:!1,display:"graph"},e.fn.wfstatus.Constructor=o}(window.jQuery);
/* =========================================================
 * bootstrap-datepicker.js
 * Repo: https://github.com/eternicode/bootstrap-datepicker/
 * Demo: http://eternicode.github.io/bootstrap-datepicker/
 * Docs: http://bootstrap-datepicker.readthedocs.org/
 * Forked from http://www.eyecon.ro/bootstrap-datepicker
 * =========================================================
 * Started by Stefan Petre; improvements by Andrew Rowls + contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(t,e){function i(){return new Date(Date.UTC.apply(Date,arguments))}function a(){var t=new Date;return i(t.getFullYear(),t.getMonth(),t.getDate())}function s(t){return function(){return this[t].apply(this,arguments)}}function n(e,i){function a(t,e){return e.toLowerCase()}var s,n=t(e).data(),r={},h=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var o in n)i.test(o)&&(s=o.replace(h,a),r[s]=n[o]);return r}function r(e){var i={};if(f[e]||(e=e.split("-")[0],f[e])){var a=f[e];return t.each(p,function(t,e){e in a&&(i[e]=a[e])}),i}}var h=t(window),o=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,a=this.length;a>i;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.splice(0)},copy:function(){var t=new o;return t.replace(this),t}};return function(){var i=[];return i.push.apply(i,arguments),t.extend(i,e),i}}(),d=function(e,i){this.dates=new o,this.viewDate=a(),this.focusDate=null,this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(g.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};d.prototype={constructor:d,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),a=i.language;switch(f[a]||(a=a.split("-")[0],f[a]||(a=u.language)),i.language=a,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.multidate!==!0&&(i.multidate=Number(i.multidate)||!1,i.multidate=i.multidate!==!1?Math.max(0,i.multidate):1),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var s=g.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate=i.startDate?i.startDate instanceof Date?this._local_to_utc(this._zero_time(i.startDate)):g.parseDate(i.startDate,s,i.language):-1/0),1/0!==i.endDate&&(i.endDate=i.endDate?i.endDate instanceof Date?this._local_to_utc(this._zero_time(i.endDate)):g.parseDate(i.endDate,s,i.language):1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)});var n=String(i.orientation).toLowerCase().split(/\s+/g),r=i.orientation.toLowerCase();if(n=t.grep(n,function(t){return/^auto|left|right|top|bottom$/.test(t)}),i.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===n.length)switch(n[0]){case"top":case"bottom":i.orientation.y=n[0];break;case"left":case"right":i.orientation.x=n[0]}else r=t.grep(n,function(t){return/^left|right$/.test(t)}),i.orientation.x=r[0]||"auto",r=t.grep(n,function(t){return/^top|bottom$/.test(t)}),i.orientation.y=r[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var i,a,s,n=0;n<t.length;n++)i=t[n][0],2===t[n].length?(a=e,s=t[n][1]):3===t[n].length&&(a=t[n][1],s=t[n][2]),i.on(s,a)},_unapplyEvents:function(t){for(var i,a,s,n=0;n<t.length;n++)i=t[n][0],2===t[n].length?(s=e,a=t[n][1]):3===t[n].length&&(s=t[n][1],a=t[n][2]),i.off(a,s)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var a=i||this.dates.get(-1),s=this._utc_to_local(a);this.element.trigger({type:e,date:s,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return g.formatDate(i,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(i){i===e&&(i=this.o.format);var a=this.o.language;return t.map(this.dates,function(t){return g.formatDate(t,i,a)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),i=this.picker.outerHeight(),a=10,s=h.width(),n=h.height(),r=h.scrollTop(),o=parseInt(this.element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"))+10,d=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),c=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),u=d.left,p=d.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(u-=e-c)):(this.picker.addClass("datepicker-orient-left"),d.left<0?u-=d.left-a:d.left+e>s&&(u=s-e-a));var f,g,v=this.o.orientation.y;"auto"===v&&(f=-r+d.top-i,g=r+n-(d.top+l+i),v=Math.max(f,g)===g?"top":"bottom"),this.picker.addClass("datepicker-orient-"+v),"top"===v?p+=l:p-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:p,left:u,zIndex:o})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),i=[],a=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),a=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=t.map(i,t.proxy(function(t){return g.parseDate(t,this.o.format,this.o.language)},this)),i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),a?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+f[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+f[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],a=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),n=new Date;return e.getUTCFullYear()<a||e.getUTCFullYear()===a&&e.getUTCMonth()<s?i.push("old"):(e.getUTCFullYear()>a||e.getUTCFullYear()===a&&e.getUTCMonth()>s)&&i.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===n.getFullYear()&&e.getUTCMonth()===n.getMonth()&&e.getUTCDate()===n.getDate()&&i.push("today"),-1!==this.dates.contains(e)&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var a,s=new Date(this.viewDate),n=s.getUTCFullYear(),r=s.getUTCMonth(),h=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,o=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,d=1/0!==this.o.endDate?this.o.endDate.getUTCFullYear():1/0,l=1/0!==this.o.endDate?this.o.endDate.getUTCMonth():1/0,c=f[this.o.language].today||f.en.today||"",u=f[this.o.language].clear||f.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(f[this.o.language].months[r]+" "+n),this.picker.find("tfoot th.today").text(c).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(u).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var p=i(n,r-1,28),v=g.getDaysInMonth(p.getUTCFullYear(),p.getUTCMonth());p.setUTCDate(v),p.setUTCDate(v-(p.getUTCDay()-this.o.weekStart+7)%7);var D=new Date(p);D.setUTCDate(D.getUTCDate()+42),D=D.valueOf();for(var m,y=[];p.valueOf()<D;){if(p.getUTCDay()===this.o.weekStart&&(y.push("<tr>"),this.o.calendarWeeks)){var w=new Date(+p+(this.o.weekStart-p.getUTCDay()-7)%7*864e5),k=new Date(Number(w)+(11-w.getUTCDay())%7*864e5),C=new Date(Number(C=i(k.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),_=(k-C)/864e5/7+1;y.push('<td class="cw">'+_+"</td>")}if(m=this.getClassNames(p),m.push("day"),this.o.beforeShowDay!==t.noop){var T=this.o.beforeShowDay(this._utc_to_local(p));T===e?T={}:"boolean"==typeof T?T={enabled:T}:"string"==typeof T&&(T={classes:T}),T.enabled===!1&&m.push("disabled"),T.classes&&(m=m.concat(T.classes.split(/\s+/))),T.tooltip&&(a=T.tooltip)}m=t.unique(m),y.push('<td class="'+m.join(" ")+'"'+(a?' title="'+a+'"':"")+">"+p.getUTCDate()+"</td>"),p.getUTCDay()===this.o.weekEnd&&y.push("</tr>"),p.setUTCDate(p.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(y.join(""));var b=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===n&&b.eq(e.getUTCMonth()).addClass("active")}),(h>n||n>d)&&b.addClass("disabled"),n===h&&b.slice(0,o).addClass("disabled"),n===d&&b.slice(l+1).addClass("disabled"),y="",n=10*parseInt(n/10,10);var U=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var M,x=t.map(this.dates,function(t){return t.getUTCFullYear()}),S=-1;11>S;S++)M=["year"],-1===S?M.push("old"):10===S&&M.push("new"),-1!==t.inArray(n,x)&&M.push("active"),(h>n||n>d)&&M.push("disabled"),y+='<span class="'+M.join(" ")+'">'+n+"</span>",n+=1;U.html(y)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-1/0&&e<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.o.endDate&&e>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(e){e.preventDefault();var a,s,n,r=t(e.target).closest("span, td, th");if(1===r.length)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=g.modes[this.viewMode].navStep*("prev"===r[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var o=new Date;o=i(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0),this.showMode(-2);var d="linked"===this.o.todayBtn?null:"view";this._setDate(o,d);break;case"clear":var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input")),l&&l.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(n=1,s=r.parent().find("span").index(r),a=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(i(a,s,n))):(n=1,s=0,a=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(a),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(i(a,s,n))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(n=parseInt(r.text(),10)||1,a=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),r.is(".old")?0===s?(s=11,a-=1):s-=1:r.is(".new")&&(11===s?(s=0,a+=1):s+=1),this._setDate(i(a,s,n)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t?-1!==e?this.dates.remove(e):this.dates.push(t):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,i){if(!t)return e;if(!i)return t;var a,s,n=new Date(t.valueOf()),r=n.getUTCDate(),h=n.getUTCMonth(),o=Math.abs(i);if(i=i>0?1:-1,1===o)s=-1===i?function(){return n.getUTCMonth()===h}:function(){return n.getUTCMonth()!==a},a=h+i,n.setUTCMonth(a),(0>a||a>11)&&(a=(a+12)%12);else{for(var d=0;o>d;d++)n=this.moveMonth(n,i);a=n.getUTCMonth(),n.setUTCDate(r),s=function(){return a!==n.getUTCMonth()}}for(;s();)n.setUTCDate(--r),n.setUTCMonth(a);return n},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27===t.keyCode&&this.show());var e,i,s,n=!1,r=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||a(),e),s=this.moveYear(r,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||a(),e),s=this.moveMonth(r,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||a()),i.setUTCDate(i.getUTCDate()+e),s=new Date(r),s.setUTCDate(r.getUTCDate()+e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.dates.get(-1)||a(),e),s=this.moveYear(r,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(i=this.moveMonth(this.dates.get(-1)||a(),e),s=this.moveMonth(r,e),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||a()),i.setUTCDate(i.getUTCDate()+7*e),s=new Date(r),s.setUTCDate(r.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(r),n=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(n){this._trigger(this.dates.length?"changeDate":"clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var l=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};l.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker"),a=i.getUTCDate(),s=t.inArray(e.target,this.inputs),n=this.inputs.length;if(-1!==s){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(a)}),a<this.dates[s])for(;s>=0&&a<this.dates[s];)this.pickers[s--].setUTCDate(a);else if(a>this.dates[s])for(;n>s&&a>this.dates[s];)this.pickers[s++].setUTCDate(a);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var c=t.fn.datepicker;t.fn.datepicker=function(i){var a=Array.apply(null,arguments);a.shift();var s;return this.each(function(){var h=t(this),o=h.data("datepicker"),c="object"==typeof i&&i;if(!o){var p=n(this,"date"),f=t.extend({},u,p,c),g=r(f.language),v=t.extend({},u,g,p,c);if(h.is(".input-daterange")||v.inputs){var D={inputs:v.inputs||h.find("input").toArray()};h.data("datepicker",o=new l(this,t.extend(v,D)))}else h.data("datepicker",o=new d(this,v))}return"string"==typeof i&&"function"==typeof o[i]&&(s=o[i].apply(o,a),s!==e)?!1:void 0}),s!==e?s:this};var u=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},p=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=d;var f=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,g.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(a,s,n){function r(){var t=this.slice(0,u[l].length),e=u[l].slice(0,t.length);return t===e}if(!a)return e;if(a instanceof Date)return a;"string"==typeof s&&(s=g.parseFormat(s));var h,o,l,c=/([\-+]\d+)([dmwy])/,u=a.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(a)){for(a=new Date,l=0;l<u.length;l++)switch(h=c.exec(u[l]),o=parseInt(h[1]),h[2]){case"d":a.setUTCDate(a.getUTCDate()+o);break;case"m":a=d.prototype.moveMonth.call(d.prototype,a,o);break;case"w":a.setUTCDate(a.getUTCDate()+7*o);break;case"y":a=d.prototype.moveYear.call(d.prototype,a,o)}return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),0,0,0)}u=a&&a.match(this.nonpunctuation)||[],a=new Date;var p,v,D={},m=["yyyy","yy","M","MM","m","mm","d","dd"],y={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};y.M=y.MM=y.mm=y.m,y.dd=y.d,a=i(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);var w=s.parts.slice();if(u.length!==w.length&&(w=t(w).filter(function(e,i){return-1!==t.inArray(i,m)}).toArray()),u.length===w.length){var k;for(l=0,k=w.length;k>l;l++){if(p=parseInt(u[l],10),h=w[l],isNaN(p))switch(h){case"MM":v=t(f[n].months).filter(r),p=t.inArray(v[0],f[n].months)+1;break;case"M":v=t(f[n].monthsShort).filter(r),p=t.inArray(v[0],f[n].monthsShort)+1}D[h]=p}var C,_;for(l=0;l<m.length;l++)_=m[l],_ in D&&!isNaN(D[_])&&(C=new Date(a),y[_](C,D[_]),isNaN(C)||(a=C))}return a},formatDate:function(e,i,a){if(!e)return"";"string"==typeof i&&(i=g.parseFormat(i));var s={d:e.getUTCDate(),D:f[a].daysShort[e.getUTCDay()],DD:f[a].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:f[a].monthsShort[e.getUTCMonth()],MM:f[a].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d,s.mm=(s.m<10?"0":"")+s.m,e=[];for(var n=t.extend([],i.separators),r=0,h=i.parts.length;h>=r;r++)n.length&&e.push(n.shift()),e.push(s[i.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=g,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=c,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),i.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery);
